performance.mark("js-parse-end:43175-43f44f871c221d2d.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["43175"],{67662(e,t,n){n.d(t,{A:()=>i});let i={diff:"Diff-module__diff__rx9XH",diffTargetable:"Diff-module__diffTargetable__pirZi",diffHeaderWrapper:"Diff-module__diffHeaderWrapper__UgUyv",diffAddFileThread:"Diff-module__diffAddFileThread__DCIBJ",diffFooter:"Diff-module__diffFooter__nVNpq"}},31284(e,t,n){n.d(t,{nB:()=>y,pO:()=>_});var i=n(74848),r=n(35148),a=n(58388),l=n(38621),o=n(59134),s=n(26108),d=n(10095),c=n(49305),u=n(34164),m=n(96540),f=n(80844);let h="CodeownersValidationBanner-module__Flash__TSfKS";var g=n(24043);let p=["CODEOWNERS","/CODEOWNERS"],b="ERROR",v="LOADING";function y({filePath:e,forceRender:t,full:n,refName:l,repo:o}){let[s,d]=(0,m.useState)([]),[c,u]=(0,m.useState)(v),h=(0,g.G7)("codeowners_validation_in_diff"),y=(0,m.useMemo)(()=>p.includes(e),[e]),x=t||h&&y,_=(0,m.useRef)(!1);return((0,m.useEffect)(()=>{!x||_.current||(async()=>{_.current=!0;try{var t,n,i;let s=await (t=o,n={name:l},i=e,(0,a.lS)((0,r.$RX)({owner:t.ownerLogin,repo:t.name,commitish:n.name,filePath:i}),{method:"GET"}));if(s.ok){let e=await s.json();d(e.map(L)),u("VALIDATED")}else u(b)}catch{u(b)}})()},[e,l,o,x]),x)?(0,i.jsx)(f.A,{value:s,children:(0,i.jsx)(C,{validationErrors:s,validationState:c,full:n})}):null}function C({full:e,validationErrors:t,validationState:n}){let[r,a]=(0,m.useState)(!1),u=(0,m.useRef)(null);return n===b?(0,i.jsx)(o.A,{variant:"warning",className:h,full:e,children:"Failed to validate this CODEOWNERS file"}):n===v?(0,i.jsx)(o.A,{variant:"default",className:h,full:e,children:"Validating CODEOWNERS rules..."}):0===t.length?(0,i.jsx)(o.A,{variant:"success",className:h,full:e,children:"This CODEOWNERS file is valid."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.A,{variant:"warning",className:"CodeownersValidationBanner-module__Flash_1__QF8oV",full:e,children:[(0,i.jsx)(d.A,{icon:l.BugIcon}),(0,i.jsxs)("div",{onClick:()=>a(!r),className:"CodeownersValidationBanner-module__Box__gN1J4",children:["This CODEOWNERS file contains errors",(0,i.jsx)(s.K,{"aria-label":"View CODEOWNERS errors",tooltipDirection:"s",ref:u,size:"small",icon:l.KebabHorizontalIcon,className:"CodeownersValidationBanner-module__IconButton__deECG"})]})]}),(0,i.jsxs)(c.A,{isOpen:r,onDismiss:()=>a(!1),returnFocusRef:u,className:"CodeownersValidationBanner-module__Dialog__t75ku",children:[(0,i.jsx)(c.A.Header,{children:"CODEOWNERS errors"}),(0,i.jsx)("div",{className:"CodeownersValidationBanner-module__Box_1__elFSw",children:t.map((e,t)=>(0,i.jsx)(x,{error:e},t))})]})]})}function x({error:e}){return(0,i.jsxs)("div",{className:"CodeownersValidationBanner-module__Box_2__Y4FaM",children:[`${e.kind} on line ${e.line}${e.suggestion?`: ${e.suggestion}`:""}`,(0,i.jsx)("pre",{className:(0,u.$)(h,"CodeownersValidationBanner-module__ErrorCodeBlock__E0i9w"),children:(0,i.jsxs)("code",{children:[e.linePrefix,(0,i.jsx)("b",{className:"CodeownersValidationBanner-module__Box_3__Xb9rR",children:e.lineError}),e.lineSuffix]})})]})}function L(e){var t,n,i;let r=e.source.trim(),a=e.column-1,l=(t=a,n=e.end_column,i=r,n||(i.substring(t).indexOf(" ")>0?i.indexOf(" ",t):i.length));if(a>30){let e=a-30;r="\u2026"+r.slice(e),a-=e-1,l-=e-1}return{...e,linePrefix:r.substring(0,a),lineError:r.substring(a,l),lineSuffix:r.substring(l)}}function _(){return(0,i.jsx)(d.A,{icon:l.DotFillIcon,"aria-label":"This line contains CODEOWNERS errors",className:"CodeownersValidationBanner-module__Octicon__Hyamu"})}y.displayName="CodeownersValidationBanner",C.displayName="CodeownersValidationBannerInner",x.displayName="CodeownersErrorDetails",_.displayName="CodeownersErrorLineIndicator"},80844(e,t,n){n.d(t,{A:()=>a,v:()=>l});var i=n(96540);let r=(0,i.createContext)([]);r.displayName="SplitCodeownersErrorsContext";let a=r;function l(){return(0,i.use)(r)}},64221(e,t,n){n.d(t,{YH:()=>C,Vv:()=>N,Gt:()=>y});var i=n(74848),r=n(16522),a=n(35592),l=n(29207),o=n(38621),s=n(26108),d=n(36007),c=n(39775),u=n(21373),m=n(34164),f=n(68173);let h="Annotation-module__inlineReviewThreadHeading__Ic9N2";var g=n(77768),p=n(96540),b=n(69991),v=n(70730);let y={[f.UZ.Failure]:(0,i.jsx)(o.StopIcon,{className:"fgColor-danger mr-2"}),[f.UZ.Warning]:(0,i.jsx)(o.AlertIcon,{className:"fgColor-attention mr-2"}),[f.UZ.Notice]:(0,i.jsx)(o.InfoIcon,{className:"fgColor-muted mr-2"})};function C(e){let t,n,f,h,p,b,v,y=(0,r.c)(31),{annotation:C,inSidePanel:x}=e,S=x?"h3":"h2",{isCollapsed:w,handleToggleCollapsed:D}=N(C),j=g.GF[C.annotationLevel];return y[0]!==j.borderColor?(t=(0,m.$)("p-1 bgColor-default",j.borderColor,"Annotation-module__annotation__SSvB_"),y[0]=j.borderColor,y[1]=t):t=y[1],y[2]!==D||y[3]!==x||y[4]!==w?(n=!x&&(0,i.jsx)(s.K,{"aria-label":w?"Expand annotation":"Collapse annotation",icon:w?o.ChevronRightIcon:o.ChevronDownIcon,size:"small",variant:"invisible",onClick:D}),y[2]=D,y[3]=x,y[4]=w,y[5]=n):n=y[5],y[6]!==C||y[7]!==x?(f=!x&&(0,i.jsx)(L,{annotation:C}),y[6]=C,y[7]=x,y[8]=f):f=y[8],y[9]!==C||y[10]!==x?(h=x&&(0,i.jsx)(_,{annotation:C}),y[9]=C,y[10]=x,y[11]=h):h=y[11],y[12]!==n||y[13]!==f||y[14]!==h?(p=(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[n,f,h]}),y[12]=n,y[13]=f,y[14]=h,y[15]=p):p=y[15],y[16]!==S||y[17]!==C.annotationLevel||y[18]!==C.appAvatarAltText||y[19]!==C.appAvatarUrl||y[20]!==C.checkRun||y[21]!==C.checkSuiteName||y[22]!==C.message||y[23]!==C.title||y[24]!==x||y[25]!==w?(b=(!w||x)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pr-ml-4 mt-2",children:C.title&&(0,i.jsx)(d.A,{weight:"semibold",size:"medium",className:g.GF[C.annotationLevel].primaryColorClass,children:C.title})}),(0,i.jsxs)(S,{className:"sr-only",children:[g.GF[C.annotationLevel].ariaLabel,": ",C.title]}),(0,i.jsx)("div",{className:"pr-mb-3 mt-1 pr-ml-4",children:C.message&&(0,i.jsx)(l.$6,{html:C.message,className:"Annotation-module__annotationMessage__lcAsr"})}),(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between pr-ml-4 pr-2 pb-2",children:[(0,i.jsxs)("div",{className:"Annotation-module__annotationSource__GJ9Jm",children:[(0,i.jsx)(a.r,{src:C.appAvatarUrl,alt:C.appAvatarAltText}),(0,i.jsxs)(c.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${C.checkSuiteName} / ${C.checkRun.name}`,children:[(0,i.jsx)(d.A,{weight:"semibold",size:"small",children:C.checkSuiteName})," ","/ ",(0,i.jsx)(d.A,{size:"small",children:C.checkRun.name})]})]}),C.checkRun.detailsUrl&&(0,i.jsx)(u.Q,{as:"a",href:C.checkRun.detailsUrl,size:"small",children:"View details"})]})]}),y[16]=S,y[17]=C.annotationLevel,y[18]=C.appAvatarAltText,y[19]=C.appAvatarUrl,y[20]=C.checkRun,y[21]=C.checkSuiteName,y[22]=C.message,y[23]=C.title,y[24]=x,y[25]=w,y[26]=b):b=y[26],y[27]!==t||y[28]!==p||y[29]!==b?(v=(0,i.jsxs)("div",{className:t,children:[p,b]}),y[27]=t,y[28]=p,y[29]=b,y[30]=v):v=y[30],v}function x(e){let t,n=(0,r.c)(2),{children:a}=e;return n[0]!==a?(t=(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:a}),n[0]=a,n[1]=t):t=n[1],t}function L(e){let t,n,a=(0,r.c)(6),{annotation:l}=e,o=y[l.annotationLevel],s=g.GF[l.annotationLevel];return a[0]!==l.endLine?(t=(0,i.jsxs)(x,{children:["R",l.endLine]}),a[0]=l.endLine,a[1]=t):t=a[1],a[2]!==o||a[3]!==s.ariaLabel||a[4]!==t?(n=(0,i.jsxs)("h2",{className:h,children:[o,s.ariaLabel," on line"," ",t]}),a[2]=o,a[3]=s.ariaLabel,a[4]=t,a[5]=n):n=a[5],n}function _(e){let t,n,a=(0,r.c)(3),{annotation:l}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.$)(h,"pr-ml-4","pt-1","pl-0"),a[0]=t):t=a[0];let o=g.GF[l.annotationLevel];return a[1]!==o.ariaLabel?(n=(0,i.jsx)("div",{className:t,children:(0,i.jsx)(x,{children:o.ariaLabel})}),a[1]=o.ariaLabel,a[2]=n):n=a[2],n}function S(e){return`AnnotationIsCollapsed_${e.path}_${e.endLine}_${e.annotationLevel}_${e.title}`}function N(e){let t,n,i,a,l,o=(0,r.c)(10);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.A)("localStorage"),o[0]=t):t=o[0];let s=t,[d,c]=(0,p.useState)(!1);o[1]!==e?(n=()=>{let t=localStorage.getItem(S(e));null!==t&&c(JSON.parse(t))},i=[e],o[1]=e,o[2]=n,o[3]=i):(n=o[2],i=o[3]),(0,p.useEffect)(n,i),o[4]!==e||o[5]!==d?(a=()=>{v.cg?.requestAnimationFrame(()=>{s.setItem(S(e),JSON.stringify(!d))}),c(w)},o[4]=e,o[5]=d,o[6]=a):a=o[6];let u=a;return o[7]!==u||o[8]!==d?(l={isCollapsed:d,handleToggleCollapsed:u},o[7]=u,o[8]=d,o[9]=l):l=o[9],l}function w(e){return!e}C.displayName="Annotation",x.displayName="Emphasis",L.displayName="AnnotationBanner",_.displayName="SidePanelAnnotationBanner"},77768(e,t,n){n.d(t,{Xh:()=>o,GF:()=>d,S:()=>s});var i=n(74848),r=n(16522),a=n(34164),l=n(68173);function o({annotationLevel:e,...t}){let{icon:n,...r}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:r,className:a}){return(0,i.jsx)("svg",{"aria-label":n,className:a,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...n,...r,...t})}function s(e){let t,n,l,s,d=(0,r.c)(8);return d[0]!==e?({className:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]),d[3]!==t?(l=(0,a.$)("AnnotationIcon-module__AnimatedAnnotationIcon__GP9yX",t),d[3]=t,d[4]=l):l=d[4],d[5]!==n||d[6]!==l?(s=(0,i.jsx)(o,{...n,className:l}),d[5]=n,d[6]=l,d[7]=s):s=d[7],s}o.displayName="AnnotationIcon",s.displayName="AnimatedAnnotationIcon";let d={[l.UZ.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[l.UZ.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[l.UZ.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}}},42839(e,t,n){n.d(t,{S:()=>o});var i=n(74848),r=n(16522),a=n(83145),l=n(6373);let o=e=>{let t,n,o,s,d,c,u,m,f=(0,r.c)(22);f[0]!==e?({ref:n,children:t,...o}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=o):(t=f[1],n=f[2],o=f[3]);let h=(0,l.Yp)(),{baseRepository:g}=(0,l.GK)(),p=(0,l.L3)();f[4]!==h.id?(s={id:h.id},f[4]=h.id,f[5]=s):s=f[5];let b=`${g.ownerLogin}/${g.name}`;f[6]!==g.id||f[7]!==b?(d={databaseId:g.id,nwo:b,slashCommandsEnabled:!1},f[6]=g.id,f[7]=b,f[8]=d):d=f[8],f[9]!==p.effectiveRange.baseOid||f[10]!==p.effectiveRange.headOid?(c={startCommitOid:p.effectiveRange.baseOid,endCommitOid:p.effectiveRange.headOid},f[9]=p.effectiveRange.baseOid,f[10]=p.effectiveRange.headOid,f[11]=c):c=f[11],f[12]!==h.number||f[13]!==s||f[14]!==d||f[15]!==c?(u={type:"pull_request",id:s,pullRequestNumber:h.number,repository:d,comparison:c},f[12]=h.number,f[13]=s,f[14]=d,f[15]=c,f[16]=u):u=f[16];let v=u;return f[17]!==t||f[18]!==n||f[19]!==o||f[20]!==v?(m=(0,i.jsx)(a.hF,{...o,ref:n,placeholder:"Leave a comment",actions:t,subject:v,showLabel:!1}),f[17]=t,f[18]=n,f[19]=o,f[20]=v,f[21]=m):m=f[21],m};o.displayName="ConversationCommentBox",o.displayName="ConversationCommentBox"},27310(e,t,n){n.d(t,{U:()=>el});var i=n(74848),r=n(16522),a=n(83145),l=n(88860),o=n(16688),s=n(27760),d=n(24824),c=n(24043),u=n(71313),m=n(58068),f=n(29207),h=n(70730),g=n(56144),p=n(38621),b=n(41431),v=n(83223),y=n(59134),C=n(44472),x=n(34164),L=n(96540),_=n(35148),S=n(94747),N=n(6373),w=n(79551),D=n(58388);async function j(e){let{duration:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,shouldHideComment:a,userLogin:l}=e,o=new FormData;o.append("duration",t),o.append("hide_comment",a.toString()),n&&o.append("hidden_reason",n),o.append("login",l),o.append("send_notification",r.toString()),await (0,D.DI)((0,_.ggd)({owner:i}),{method:"POST",body:o,redirect:"manual"})}var I=n(90321),k=n(41626),A=n(14303),E=n(24178);async function T(e){let{organizationLogin:t,userLogin:n}=e;await (0,I.q$)(`${(0,_.ggd)({owner:t})}/${(0,E.QU)(n)}`,{method:"DELETE",redirect:"manual"})}function R(e){if(e)return{...e,isHidden:!1,minimizedReason:null}}var O=n(34784),$=n(488),M=n(49941),F=n(99942),B=n(42839);let P="ReviewThreadComment-module__ReviewThreadWrapper__maToZ";var H=n(40961),K=n(28629),U=n(59080);function V(){h.cg?.location.reload()}var q=n(64855),z=n(41031),W=n(16135),G=n(4925),X=n(21373),J=n(46348);function Q(e){let t,n,a,l,o,s=(0,r.c)(32),{onOpenDialog:d,suggestedChange:c,canAddToBatch:u}=e,m=void 0===u||u,{sendAnalyticsEvent:f}=(0,W.s)(),h=(0,L.useRef)(null),g=c.commentDatabaseId||0;s[0]!==c.suggestionIndex||s[1]!==g?(t={commentDatabaseId:g,suggestionIndex:c.suggestionIndex},s[0]=c.suggestionIndex,s[1]=g,s[2]=t):t=s[2];let p=(0,N.Nk)(t),b=(0,N.RH)(),v=(0,q.u)("batch_suggested_changes"),{addSuggestionToBatch:y,removeSuggestionFromBatch:C}=(0,N.xJ)(),x=(0,N.WK)(),_=(0,N.Kp)(),S=(0,N.L3)();s[3]!==y||s[4]!==S||s[5]!==_||s[6]!==f||s[7]!==c.commentDatabaseId||s[8]!==c.lineRange||s[9]!==c.path||s[10]!==c.suggestionIndex||s[11]!==c.threadId||s[12]!==x?(n=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex,threadId:c.threadId,path:c.path,lineRange:c.lineRange};y(e),(0,J.CE)(_,S.fullDiff.headOid,[...x.activeBatch,e]),f("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},s[3]=y,s[4]=S,s[5]=_,s[6]=f,s[7]=c.commentDatabaseId,s[8]=c.lineRange,s[9]=c.path,s[10]=c.suggestionIndex,s[11]=c.threadId,s[12]=x,s[13]=n):n=s[13];let w=n;s[14]!==S||s[15]!==_||s[16]!==C||s[17]!==f||s[18]!==c.commentDatabaseId||s[19]!==c.suggestionIndex||s[20]!==x?(a=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};C(e),(0,J.CE)(_,S.fullDiff.headOid,x.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),f("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},s[14]=S,s[15]=_,s[16]=C,s[17]=f,s[18]=c.commentDatabaseId,s[19]=c.suggestionIndex,s[20]=x,s[21]=a):a=s[21];let D=a;s[22]!==d?(l=()=>{d(h)},s[22]=d,s[23]=l):l=s[23];let j=l;return s[24]!==v||s[25]!==m||s[26]!==w||s[27]!==j||s[28]!==D||s[29]!==p||s[30]!==b?(o=(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:v&&p?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(X.Q,{variant:"danger",onClick:D,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto flex-wrap-reverse",children:[!b&&(0,i.jsx)(X.Q,{variant:"default",onClick:j,ref:h,children:"Apply suggestion"}),v&&m&&(0,i.jsx)(X.Q,{variant:"primary",onClick:w,children:"Add suggestion to batch"})]})}),s[24]=v,s[25]=m,s[26]=w,s[27]=j,s[28]=D,s[29]=p,s[30]=b,s[31]=o):o=s[31],o}Q.displayName="ApplyOrAddToBatch";var Y=n(10143);function Z(e){let t,n,a=(0,r.c)(5),{reason:l,className:o}=e,s=void 0===o?"m-2":o;return a[0]!==l?(t=(0,i.jsx)("small",{className:"fgColor-muted",children:l}),a[0]=l,a[1]=t):t=a[1],a[2]!==s||a[3]!==t?(n=(0,i.jsx)("div",{className:s,children:t}),a[2]=s,a[3]=t,a[4]=n):n=a[4],n}function ee(e){let t,n,a,l,o,s,d,c,u,m,f,h,g,p,b,v,y=(0,r.c)(43),{suggestedChange:C}=e,{setIsDialogOpen:x}=(0,z.W)(),[_,w]=(0,L.useState)(!1),D=(0,L.useRef)(void 0),j=(0,q.u)("batch_suggested_changes"),A=(0,N.WK)();y[0]!==j||y[1]!==C.commentDatabaseId||y[2]!==C.suggestionIndex||y[3]!==A.activeBatch?(t=j&&void 0!==C.commentDatabaseId&&null!==C.commentDatabaseId&&A.activeBatch.some(e=>e.commentDatabaseId===C.commentDatabaseId&&e.suggestionIndex===C.suggestionIndex),y[0]=j,y[1]=C.commentDatabaseId,y[2]=C.suggestionIndex,y[3]=A.activeBatch,y[4]=t):t=y[4];let E=t;y[5]!==C.lineRange||y[6]!==C.path||y[7]!==C.threadId||y[8]!==A.activeBatch?(n=(0,K.EJ)({threadId:C.threadId,path:C.path,lineRange:C.lineRange},A.activeBatch),y[5]=C.lineRange,y[6]=C.path,y[7]=C.threadId,y[8]=A.activeBatch,y[9]=n):n=y[9];let{isValid:T,reason:R}=n;y[10]!==C?(a=[C],y[10]=C,y[11]=a):a=y[11];let O=a;y[12]!==O?(l=O.map(et),y[12]=O,y[13]=l):l=y[13];let $=l;y[14]!==x?(o=e=>{w(e),x?.(e)},y[14]=x,y[15]=o):o=y[15];let M=o;y[16]!==M?(s=()=>{if(M(!1),D.current){let e=D.current.current;setTimeout(()=>e?.focus())}},y[16]=M,y[17]=s):s=y[17];let F=s;y[18]!==M?(d=e=>{M(!0),D.current=e},y[18]=M,y[19]=d):d=y[19];let B=d,{mutate:P}=(p=(0,r.c)(2),b=(0,N.Kp)(),v=`${b}/page_data/${k.uT.submitSuggestedChanges}`,p[0]!==v?(g={mutationFn:async e=>{let{changes:t,currentOid:n,message:i}=e,r=await (0,I.q$)(v,{method:"POST",body:{changes:t,currentOid:n,message:i}}),a=await (0,I.hp)(r);return(0,I.R)(r,a),a},onSuccess:V},p[0]=v,p[1]=g):g=p[1],(0,S.n)(g)),{fullDiff:H}=(0,N.L3)(),{headOid:U}=H;y[20]!==O||y[21]!==F||y[22]!==U||y[23]!==P?(c=(e,t,n)=>{P({changes:O,message:e,currentOid:U},{onSuccess:()=>{F(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},y[20]=O,y[21]=F,y[22]=U,y[23]=P,y[24]=c):c=y[24];let W=c;return y[25]!==T||y[26]!==B||y[27]!==C?(u=(0,i.jsx)(Q,{suggestedChange:C,onOpenDialog:B,canAddToBatch:T}),y[25]=T,y[26]=B,y[27]=C,y[28]=u):u=y[28],y[29]!==E||y[30]!==T||y[31]!==R?(m=!E&&!T&&R&&(0,i.jsx)(Z,{reason:R,className:"m-0"}),y[29]=E,y[30]=T,y[31]=R,y[32]=m):m=y[32],y[33]!==$||y[34]!==O.length||y[35]!==F||y[36]!==W||y[37]!==_?(f=_&&(0,i.jsx)(Y.$,{authorLogins:$,batchSize:O.length,onClose:F,onCommit:W}),y[33]=$,y[34]=O.length,y[35]=F,y[36]=W,y[37]=_,y[38]=f):f=y[38],y[39]!==u||y[40]!==m||y[41]!==f?(h=(0,i.jsxs)("div",{className:"border-top p-2",children:[u,m,f]}),y[39]=u,y[40]=m,y[41]=f,y[42]=h):h=y[42],h}function et(e){return e.authorLogin}function en(e){let t,n,a=(0,r.c)(12),{applySuggestedChangesValidationData:l,comment:o,commentBodyRef:s,filePath:d,isOutdated:c,isThreadResolved:u,suggestedChangesConfig:m,databaseId:f,viewerCanApplySuggestion:h}=e,{state:g}=(0,N.Yp)(),p=(0,N.ww)(),b=function(e,t,n,i,a){let l,o,s=(0,r.c)(19),[d,c]=(0,L.useState)();s[0]!==a.lineRange||s[1]!==t.author?.login||s[2]!==t.databaseId||s[3]!==t.id||s[4]!==t.subjectType||s[5]!==e||s[6]!==n||s[7]!==i?(l=()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let l=0;l<r.length;l++){let o=r[l];if(!o)continue;let s=o.closest("div.js-suggested-changes-blob");if(!s||!a.lineRange)continue;let d=(0,U.y)(s);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:o,suggestion:d,lineRange:a.lineRange,threadId:i,suggestionIndex:l})}c(e)}},s[0]=a.lineRange,s[1]=t.author?.login,s[2]=t.databaseId,s[3]=t.id,s[4]=t.subjectType,s[5]=e,s[6]=n,s[7]=i,s[8]=l):l=s[8];let u=t.author?.login;return s[9]!==a.lineRange||s[10]!==t.bodyHTML||s[11]!==t.databaseId||s[12]!==t.id||s[13]!==t.subjectType||s[14]!==e||s[15]!==n||s[16]!==u||s[17]!==i?(o=[a.lineRange,u,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i],s[9]=a.lineRange,s[10]=t.bodyHTML,s[11]=t.databaseId,s[12]=t.id,s[13]=t.subjectType,s[14]=e,s[15]=n,s[16]=u,s[17]=i,s[18]=o):o=s[18],(0,L.useLayoutEffect)(l,o),d}(s,o,d,f,l);return a[0]!==l||a[1]!==o||a[2]!==p||a[3]!==c||a[4]!==u||a[5]!==g||a[6]!==b||a[7]!==m||a[8]!==h?(t=b?.length?b.map(e=>{let{isValid:t,reason:n}=(0,K.o_)({suggestedChange:e,hasCommitRange:p,isOutdated:c,isPending:"PENDING"===o.state.toUpperCase(),isResolved:u,pullRequestIsClosed:void 0===g||"CLOSED"===g||"MERGED"===g,pullRequestIsInMergeQueue:"QUEUED"===g,userCanApplySuggestion:!!h,applySuggestedChangesValidationData:l,suggestedChangesConfig:m});return!t&&n?(0,H.createPortal)((0,i.jsx)(Z,{reason:n}),e.ref):(0,H.createPortal)((0,i.jsx)(ee,{suggestedChange:e}),e.ref)}):null,a[0]=l,a[1]=o,a[2]=p,a[3]=c,a[4]=u,a[5]=g,a[6]=b,a[7]=m,a[8]=h,a[9]=t):t=a[9],a[10]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[10]=t,a[11]=n):n=a[11],n}Z.displayName="CodeSuggestionUnavailable",ee.displayName="CodeSuggestionActions",en.displayName="SuggestedChangeView";var ei=n(17989),er=n(70966),ea=n(64231);function el(e){let t,n,_,D,E,H,K,U,V,q,z,W,G,X,J,Q,Y,Z,ee,et,el,es,ed,ec,eu,em,ef,eh,eg,ep,eb,ev,ey,eC,ex,eL,e_,eS,eN,ew,eD,ej,eI,ek,eA,eE=(0,r.c)(181),{isAnchorable:eT,index:eR,isInlineComment:eO,isLastChild:e$,isOutdated:eM,isThreadResolved:eF,lineMarkersKey:eB,anchorPrefix:eP,comment:eH,disableDialogMode:eK,enableDialogMode:eU,filePath:eV,gridCellId:eq,hideActions:ez,isFirstComment:eW,isInDialogMode:eG,onDeleteLineComment:eX,onQuoteReply:eJ,threadCommentCount:eQ,threadId:eY,threadPositionNumber:eZ,suggestedChangesConfig:e0,applySuggestedChangesValidationData:e1,viewerData:e2,ghostUser:e3,originalDiffPathUri:e4,headingLevel:e6}=e,e5=void 0!==eT&&eT,e7=void 0===eR?0:eR,e8=void 0!==eW&&eW,e9=void 0===eJ?u.l:eJ,te=void 0===e3?s.t.ghostUser:e3,tt=void 0===e6?"h3":e6,{addToast:tn}=(0,g.Y6)(),[ti,tr]=(0,L.useState)(!1),[ta,tl]=(0,L.useState)(eH.isHidden),[to,ts]=(0,L.useState)(!1),[td,tc]=(0,L.useState)(eH.body),[tu,tm]=(0,L.useState)(!1),[tf,th]=(0,L.useState)(!1),[tg,tp]=(0,L.useState)(""),tb=(0,N.Kp)(),tv="FILE"===eH.subjectType;eE[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let{text:t}=e;t&&tc(t)},eE[0]=t):t=eE[0],eE[1]!==tb||eE[2]!==eH.id||eE[3]!==eV||eE[4]!==tv?(n={subjectId:tb,filePath:eV,fileLevelComment:tv,threadId:eH.id,handlePersistedCommentExists:t},eE[1]=tb,eE[2]=eH.id,eE[3]=eV,eE[4]=tv,eE[5]=n):n=eE[5];let{persistCommentToStorage:ty,removePersistedCommentFromStorage:tC}=(0,M.L4)(n),tx=(0,L.useRef)(null),tL=(0,L.useRef)(null),t_=(0,L.useRef)(null),[tS,tN]=(0,L.useState)("");eE[6]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{tx.current?.focus()},eE[6]=_):_=eE[6];let tw=_;eE[7]!==ti?(D=()=>{if(ti){let e=window.setTimeout(tw);return()=>{window.clearTimeout(e)}}},E=[ti],eE[7]=ti,eE[8]=D,eE[9]=E):(D=eE[8],E=eE[9]),(0,L.useEffect)(D,E),eE[10]!==eX?(H=()=>{ts(!1),th(!1),eX?.()},eE[10]=eX,eE[11]=H):H=eE[11],eE[12]!==eV||eE[13]!==eB||eE[14]!==H?(K={filePath:eV,lineMarkersKey:eB,onSuccess:H},eE[12]=eV,eE[13]=eB,eE[14]=H,eE[15]=K):K=eE[15];let{mutate:tD}=function(e){let t,n,i,a=(0,r.c)(15),{filePath:l,lineMarkersKey:o,onSuccess:s}=e,d=(0,N.Kp)(),{deleteThreadComment:c}=(0,N.an)(),{onCommentThreadDeleted:u}=(0,N.Ud)(),m=(0,N.SM)(),{removePendingComment:f}=(0,N._N)();return a[0]!==d||a[1]!==l||a[2]!==m||a[3]!==o?(t=async e=>{let{commentId:t,threadId:n}=e,i=m(Number(n),l,o)?.commentsData?.comments?.find(e=>e.id===t);if(!i)return;let r=`${d}/page_data/review_comments/${i.databaseId}`,a=await (0,I.q$)(`${r}`,{method:"DELETE"});if(204===a.status||200===a.status)return;let s=await (0,I.hp)(a);(0,I.R)(a,s)},a[0]=d,a[1]=l,a[2]=m,a[3]=o,a[4]=t):t=a[4],a[5]!==c||a[6]!==l||a[7]!==o||a[8]!==u||a[9]!==s||a[10]!==f?(n=(e,t)=>{let{commentId:n,threadId:i}=t,r=c(Number(i),n,l,o);f(Number(i)),"thread_deleted"===r&&("thread_deleted"===r&&u({path:l,threadID:i}),s?.())},a[5]=c,a[6]=l,a[7]=o,a[8]=u,a[9]=s,a[10]=f,a[11]=n):n=a[11],a[12]!==t||a[13]!==n?(i={mutationFn:t,onSuccess:n},a[12]=t,a[13]=n,a[14]=i):i=a[14],(0,S.n)(i)}(K);eE[16]!==eK?(U=async()=>{eK?.(),ts(!0)},eE[16]=eK,eE[17]=U):U=eE[17];let tj=U;eE[18]!==tn||eE[19]!==eH.id||eE[20]!==tD||eE[21]!==eU||eE[22]!==eV||eE[23]!==eq||eE[24]!==eY?(V=e=>{"confirm"===e?(th(!0),tD({commentId:eH.id,threadId:eY,filePath:eV},{onError:()=>{ts(!1),tn({type:"error",message:"Failed to delete comment"}),th(!1)}})):(eq&&eU?.(eq),ts(!1),th(!1))},eE[18]=tn,eE[19]=eH.id,eE[20]=tD,eE[21]=eU,eE[22]=eV,eE[23]=eq,eE[24]=eY,eE[25]=V):V=eE[25];let tI=V,{mutate:tk}=function(e,t){let n,i,a,l=(0,r.c)(9),o=(0,N.Kp)(),s=`${o}/page_data/${k.uT.hideComment}`,{updateThreadComment:d}=(0,N.an)();return l[0]!==s?(n=async e=>{let{commentDatabaseId:t,reason:n}=e,i=await (0,I.q$)(s,{method:"POST",body:{classifier:n,commentId:t}}),r=await (0,I.hp)(i);return(0,I.R)(i,r),r},l[0]=s,l[1]=n):n=l[1],l[2]!==e||l[3]!==t||l[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})},l[2]=e,l[3]=t,l[4]=d,l[5]=i):i=l[5],l[6]!==n||l[7]!==i?(a={mutationFn:n,onSuccess:i},l[6]=n,l[7]=i,l[8]=a):a=l[8],(0,S.n)(a)}(eV,eB);eE[26]!==eH.databaseId||eE[27]!==tk?(q=e=>{if(!eH.databaseId)throw Error("Comment not found");tk({commentDatabaseId:eH.databaseId,reason:e},{onError:()=>{tm(!1),tN("Failed to hide comment")},onSuccess:()=>tl(!0)})},eE[26]=eH.databaseId,eE[27]=tk,eE[28]=q):q=eE[28];let tA=q,{mutate:tE}=function(e,t){let n,i,a,l=(0,r.c)(9),o=(0,N.Kp)(),s=`${o}/page_data/${k.uT.unhideComment}`,{updateThreadComment:d}=(0,N.an)();return l[0]!==s?(n=async e=>{let{commentDatabaseId:t}=e,n=await (0,I.q$)(s,{method:"POST",body:{commentId:t}}),i=await (0,I.hp)(n);return(0,I.R)(n,i),i},l[0]=s,l[1]=n):n=l[1],l[2]!==e||l[3]!==t||l[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:R})},l[2]=e,l[3]=t,l[4]=d,l[5]=i):i=l[5],l[6]!==n||l[7]!==i?(a={mutationFn:n,onSuccess:i},l[6]=n,l[7]=i,l[8]=a):a=l[8],(0,S.n)(a)}(eV,eB);eE[29]!==eH.databaseId||eE[30]!==tE?(z=()=>{if(!eH.databaseId)throw Error("Comment not found");tE({commentDatabaseId:eH.databaseId},{onError:()=>{tm(!1),tN("Failed to unhide comment")},onSuccess:()=>tl(!1)})},eE[29]=eH.databaseId,eE[30]=tE,eE[31]=z):z=eE[31];let tT=z,{mutate:tR}=function(){let e,t=(0,r.c)(2),{updateThreads:n}=(0,N.an)();return t[0]!==n?(e={mutationFn:j,onSuccess:(e,t)=>{n((0,w.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=t.shouldHideComment||e.isHidden,e.minimizedReason=t.hiddenReason||null)}))}},t[0]=n,t[1]=e):e=t[1],(0,S.n)(e)}();eE[32]!==tR?(W=(e,t,n,i,r,a)=>tR({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,userLogin:a},{onError:()=>tN("Failed to block user"),onSuccess:()=>{t&&tl(!0)}}),eE[32]=tR,eE[33]=W):W=eE[33];let tO=W,{mutate:t$}=function(){let e,t=(0,r.c)(2),{updateThreads:n}=(0,N.an)();return t[0]!==n?(e={mutationFn:T,onSuccess:(e,t)=>{n((0,w.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}},t[0]=n,t[1]=e):e=t[1],(0,S.n)(e)}();eE[34]!==t$?(G=(e,t)=>t$({organizationLogin:e,userLogin:t},{onError:()=>tN("Failed to unblock user")}),eE[34]=t$,eE[35]=G):G=eE[35];let tM=G,{mutate:tF}=(0,A.u)(eV,eB);eE[36]!==tn||eE[37]!==eH.databaseId||eE[38]!==tF||eE[39]!==eY?(X=(e,t)=>{if(!eH.databaseId)throw Error("Comment not found");setTimeout(()=>t_.current?.focus(),0),tF({commentDatabaseId:eH.databaseId,threadId:eY,reaction:e,viewerHasReacted:t},{onError:()=>{tm(!1),tn({type:"error",message:"Failed to react to comment"})}})},eE[36]=tn,eE[37]=eH.databaseId,eE[38]=tF,eE[39]=eY,eE[40]=X):X=eE[40];let tB=X;eE[41]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{tr(!0)},eE[41]=J):J=eE[41];let tP=J;eE[42]!==eH.body||eE[43]!==tC?(Q=()=>{tr(!1),tC(),tc(eH.body)},eE[42]=eH.body,eE[43]=tC,eE[44]=Q):Q=eE[44];let tH=Q;eE[45]!==ty?(Y=e=>{ty({text:e}),tc(e),tp(void 0)},eE[45]=ty,eE[46]=Y):Y=eE[46];let tK=Y;eE[47]!==tC?(Z=()=>{tr(!1),tm(!1),tC()},eE[47]=tC,eE[48]=Z):Z=eE[48],eE[49]!==eV||eE[50]!==eB||eE[51]!==Z?(ee={filePath:eV,lineMarkersKey:eB,onSuccess:Z},eE[49]=eV,eE[50]=eB,eE[51]=Z,eE[52]=ee):ee=eE[52];let{mutate:tU}=function(e){let t,n,i,a=(0,r.c)(10),{filePath:l,lineMarkersKey:o,onSuccess:s}=e,d=(0,N.Kp)(),c=`${d}/page_data/${k.uT.updateReviewComment}`,{updateThreadComment:u}=(0,N.an)();return a[0]!==c?(t=async e=>{let{commentId:t,bodyVersion:n,body:i}=e,r=await (0,I.q$)(`${c}${n?`?body_version=${n}`:""}`,{method:"PUT",body:{body:i,commentId:t}}),a=await (0,I.hp)(r);return(0,I.R)(r,a),a},a[0]=c,a[1]=t):t=a[1],a[2]!==l||a[3]!==o||a[4]!==s||a[5]!==u?(n=e=>{u({threadID:e.threadId,filePath:l,lineMarkersKey:o,match:t=>t.databaseId===e.commentDatabaseId,transform:t=>{if(t)return{...t,body:e.body,bodyHTML:e.bodyHTML,bodyVersion:e.bodyVersion}}}),s?.()},a[2]=l,a[3]=o,a[4]=s,a[5]=u,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(i={mutationFn:t,onSuccess:n},a[7]=t,a[8]=n,a[9]=i):i=a[9],(0,S.n)(i)}(ee);eE[53]!==tn||eE[54]!==td||eE[55]!==eH.bodyVersion||eE[56]!==eH.databaseId||eE[57]!==e0?.sourceContentFromDiffLines||eE[58]!==tU?(et=()=>{tm(!0);let e=(0,F.u)(td,e0?.sourceContentFromDiffLines??"");if(!e.isValid){tp(e.errorMessage),tm(!1);return}tU({commentId:String(eH.databaseId),body:td,bodyVersion:eH.bodyVersion},{onError:()=>{tm(!1),tn({type:"error",message:"Failed to update comment"})}})},eE[53]=tn,eE[54]=td,eE[55]=eH.bodyVersion,eE[56]=eH.databaseId,eE[57]=e0?.sourceContentFromDiffLines,eE[58]=tU,eE[59]=et):et=eE[59],e0?.sourceContentFromDiffLines;let tV=et;eE[60]!==eH.databaseId?(el=eH.databaseId?.toString(),eE[60]=eH.databaseId,eE[61]=el):el=eE[61];let tq=el,tz=tq?`${void 0===eP?"r":eP}${tq}`:void 0;eE[62]!==tz?(es=tz&&h.fV?new URL(`${h.fV.pathname}#${tz}`,h.fV.origin).toString():"",eE[62]=tz,eE[63]=es):es=eE[63];let tW=es,tG=(0,L.useRef)(null);eE[64]!==tz||eE[65]!==tq||eE[66]!==e5?(ed={isAnchorable:e5,commentId:tq,commentAnchor:tz,containerRef:tG},eE[64]=tz,eE[65]=tq,eE[66]=e5,eE[67]=ed):ed=eE[67],(0,$.u)(ed);let tX=e7>0,tJ=e7>1,tQ=ti?"editing":ta?"hidden":"visible";eE[68]!==tt?(ec={as:tt},eE[68]=tt,eE[69]=ec):ec=eE[69];let tY=ec,tZ=eH.author?.avatarUrl??te.avatarUrl,t0=eH.reference.text??`#${eH.reference.number}`;eE[70]!==eH||eE[71]!==tW||eE[72]!==t0?(eu={...eH,url:tW,referenceText:t0},eE[70]=eH,eE[71]=tW,eE[72]=t0,eE[73]=eu):eu=eE[73];let t1=eH.author?.login??te.login,t2=eH.reference?.author?.login??"";eE[74]===Symbol.for("react.memo_cache_sentinel")?(em={},eE[74]=em):em=eE[74];let t3="copilot"===eH.reviewVariantType?"copilot-pull-request-reviewer":void 0,t4="copilot"===eH.reviewVariantType?l.S.Bot:void 0;eE[75]!==ez||eE[76]!==ta||eE[77]!==eM||eE[78]!==tX||eE[79]!==tO||eE[80]!==tj||eE[81]!==tA||eE[82]!==e9||eE[83]!==tM||eE[84]!==tT||eE[85]!==e4||eE[86]!==tY||eE[87]!==tZ||eE[88]!==eu||eE[89]!==t1||eE[90]!==t2||eE[91]!==t3||eE[92]!==t4?(ef={headingProps:tY,avatarUrl:tZ,comment:eu,commentRef:tG,deleteComment:tj,editComment:tP,editHistoryComponent:void 0,hideComment:tA,onBlock:tO,onUnblock:tM,onMinimize:tl,onSuccessfulBlock:eo,isMinimized:ta,commentAuthorLogin:t1,navigate:u.l,commentSubjectAuthorLogin:t2,commentSubjectType:"pull request",onReplySelect:e9,unhideComment:tT,hideActions:ez,isReply:tX,forceInlineAvatar:!0,containerStyle:em,originalDiffPathUri:e4,isOutdated:eM,commentAuthorSlug:t3,commentAuthorType:t4},eE[75]=ez,eE[76]=ta,eE[77]=eM,eE[78]=tX,eE[79]=tO,eE[80]=tj,eE[81]=tA,eE[82]=e9,eE[83]=tM,eE[84]=tT,eE[85]=e4,eE[86]=tY,eE[87]=tZ,eE[88]=eu,eE[89]=t1,eE[90]=t2,eE[91]=t3,eE[92]=t4,eE[93]=ef):ef=eE[93];let t6=ef;eE[94]!==e7||eE[95]!==tX||eE[96]!==eZ?(eh=()=>tX?void 0!==eZ?`Reply ${e7} to Comment ${eZ}`:`Reply ${e7}`:void 0!==eZ?`Comment ${eZ}`:"Comment",eE[94]=e7,eE[95]=tX,eE[96]=eZ,eE[97]=eh):eh=eE[97];let t5=eh;eE[98]!==eH.body||eE[99]!==ti||eE[100]!==e9?(eg=()=>{if(ti)return;let e=h.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;e9((0,ea.E)(tG?.current,t,eH.body))},eE[98]=eH.body,eE[99]=ti,eE[100]=e9,eE[101]=eg):eg=eE[101];let t7=eg;eE[102]===Symbol.for("react.memo_cache_sentinel")?(ep=(0,ei.E7)(),eE[102]=ep):ep=eE[102];let t8=ep;eE[103]!==t7?(eb={"pull-requests-diff-view:quote-reply":t7},eE[103]=t7,eE[104]=eb):eb=eE[104];let t9=e5?tz:void 0,ne=eO?eG?0:-1:0,nt=eH.id;eE[105]!==t5||eE[106]!==eG?(ev=eG?{role:"document","aria-roledescription":"comment","aria-label":t5()}:{},eE[105]=t5,eE[106]=eG,eE[107]=ev):ev=eE[107];let nn=e5&&"ReviewThreadComment-module__anchorable__kHiVn",ni="hidden"===tQ&&"pb-2",nr=tX&&"ReviewThreadComment-module__isReply__tjdPF";return eE[108]!==nn||eE[109]!==ni||eE[110]!==nr?(ey=(0,x.$)("ReviewThreadComment-module__ReviewThreadContainer__m2xlo",nn,ni,nr),eE[108]=nn,eE[109]=ni,eE[110]=nr,eE[111]=ey):ey=eE[111],eE[112]!==tJ||eE[113]!==tX?(eC=tJ&&(0,i.jsx)("div",{className:P,"data-is-reply":tX,children:(0,i.jsx)("div",{className:"ReviewThreadComment-module__ReviewThreadBox__sr89I"})}),eE[112]=tJ,eE[113]=tX,eE[114]=eC):eC=eE[114],eE[115]!==tb||eE[116]!==eH.reviewVariantType?(ex="code_scanning"===eH.reviewVariantType&&(0,c.G7)("code_scanning_dfa_degraded_experience_notice")&&(0,i.jsx)(b.l,{variant:"info",hideTitle:!0,title:"Code scanning notice",className:"mt-2 pr-mb-3",children:(0,i.jsxs)(b.l.Description,{children:[(0,i.jsx)(v.A,{inline:!0,href:tb,children:"View in Conversation tab"})," ","for the full code scanning experience."]})}),eE[115]=tb,eE[116]=eH.reviewVariantType,eE[117]=ex):ex=eE[117],eE[118]!==t6||eE[119]!==ez?(eL=ez?void 0:(0,i.jsx)(O.RelayEnvironmentProvider,{environment:t8,children:(0,i.jsx)(o.p,{...t6})}),eE[118]=t6,eE[119]=ez,eE[120]=eL):eL=eE[120],eE[121]!==eH.body||eE[122]!==t6||eE[123]!==eG||eE[124]!==eM||eE[125]!==eL||eE[126]!==eQ?(e_=(0,i.jsx)(l.v,{...t6,commentBody:eH.body,threadCommentCount:eQ,isInDialogMode:eG,actions:eL,isOutdated:eM}),eE[121]=eH.body,eE[122]=t6,eE[123]=eG,eE[124]=eM,eE[125]=eL,eE[126]=eQ,eE[127]=e_):e_=eE[127],eE[128]!==tJ||eE[129]!==ex||eE[130]!==e_?(eS=(0,i.jsxs)("div",{className:"ReviewThreadComment-module__ReviewThreadInnerContainer__ONuV_","data-is-nested-reply":tJ,children:[ex,e_]}),eE[128]=tJ,eE[129]=ex,eE[130]=e_,eE[131]=eS):eS=eE[131],eE[132]!==tS?(eN=tS&&(0,i.jsxs)(y.A,{variant:"danger",className:"pr-m-3",children:[(0,i.jsx)(p.StopIcon,{className:"mr-2"}),tS]}),eE[132]=tS,eE[133]=eN):eN=eE[133],eE[134]!==e$||eE[135]!==tX?(ew=tX&&(0,i.jsx)("div",{className:"ReviewThreadComment-module__ReplyWrapper__HaO4j","data-is-last-child":e$}),eE[134]=e$,eE[135]=tX,eE[136]=ew):ew=eE[136],eE[137]!==td||eE[138]!==tQ||eE[139]!==tg||eE[140]!==tX||eE[141]!==tu||eE[142]!==tH||eE[143]!==tK||eE[144]!==tV||eE[145]!==e0?(eD="editing"===tQ&&(0,i.jsx)("div",{className:(0,x.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",tX?"pl-0":"pl-2"),children:(0,i.jsxs)(B.S,{ref:tx,label:"Update comment",value:td,onChange:tK,onPrimaryAction:tV,suggestedChangesConfig:e0,markdownErrorMessage:tg,children:[(0,i.jsx)(a.xR,{variant:"default",onClick:tH,children:"Cancel"}),(0,i.jsx)(a.xR,{disabled:tu||!td.length,loading:tu,variant:"primary",onClick:tV,children:"Update"})]})}),eE[137]=td,eE[138]=tQ,eE[139]=tg,eE[140]=tX,eE[141]=tu,eE[142]=tH,eE[143]=tK,eE[144]=tV,eE[145]=e0,eE[146]=eD):eD=eE[146],eE[147]!==e1||eE[148]!==eH||eE[149]!==tQ||eE[150]!==to||eE[151]!==eV||eE[152]!==tI||eE[153]!==tf||eE[154]!==eM||eE[155]!==tX||eE[156]!==eF||eE[157]!==tB||eE[158]!==e0||eE[159]!==e2?.viewerCanApplySuggestion?(ej="visible"===tQ&&(0,i.jsxs)("div",{className:"ReviewThreadComment-module__BodyHTMLContainer__HYeiL","data-is-reply":tX,children:[eH.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.vb,{ref:tL,className:(0,x.$)("markdown-body","ReviewThreadComment-module__SafeHTMLBox__yw3LK","ReviewThreadComment-module__SafeHTMLBoxWrapped__mvCwc"),"comment-testid":`Comment body html for comment ${eH.id}`,html:eH.bodyHTML}),"copilot"===eH.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===eH.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(d.Z,{commentUrl:eH.url,commentId:eH.databaseId?.toString()??"",showNegativeFeedbackModal:!1})}),eH.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:t_,reactionGroups:eH.reactionGroups,onReact:tB,canReact:eH.viewerCanReact})})]}),e1&&(0,i.jsx)(en,{comment:eH,commentBodyRef:tL,filePath:eV,isOutdated:eM,isThreadResolved:eF,databaseId:eH.databaseId,suggestedChangesConfig:e0,applySuggestedChangesValidationData:e1,viewerCanApplySuggestion:e2?.viewerCanApplySuggestion})]}),to&&(0,i.jsx)(C.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:tf,onClose:tI,children:"Are you sure you want to delete this comment?"})]}),eE[147]=e1,eE[148]=eH,eE[149]=tQ,eE[150]=to,eE[151]=eV,eE[152]=tI,eE[153]=tf,eE[154]=eM,eE[155]=tX,eE[156]=eF,eE[157]=tB,eE[158]=e0,eE[159]=e2?.viewerCanApplySuggestion,eE[160]=ej):ej=eE[160],eE[161]!==tX||eE[162]!==ew||eE[163]!==eD||eE[164]!==ej?(eI=(0,i.jsxs)("div",{className:P,"data-is-reply":tX,children:[ew,eD,ej]}),eE[161]=tX,eE[162]=ew,eE[163]=eD,eE[164]=ej,eE[165]=eI):eI=eE[165],eE[166]!==eH.id||eE[167]!==e8||eE[168]!==t9||eE[169]!==ne||eE[170]!==ev||eE[171]!==ey||eE[172]!==eC||eE[173]!==eS||eE[174]!==eN||eE[175]!==eI||eE[176]!==eY?(ek=(0,i.jsxs)("div",{ref:tG,id:t9,tabIndex:ne,"data-first-thread-comment":e8,"data-marker-navigation-comment-thread-id":eY,"data-marker-navigation-comment-id":nt,...ev,className:ey,children:[eC,eS,eN,eI]}),eE[166]=eH.id,eE[167]=e8,eE[168]=t9,eE[169]=ne,eE[170]=ev,eE[171]=ey,eE[172]=eC,eE[173]=eS,eE[174]=eN,eE[175]=eI,eE[176]=eY,eE[177]=ek):ek=eE[177],eE[178]!==eb||eE[179]!==ek?(eA=(0,i.jsx)(er.tL,{commands:eb,children:ek}),eE[178]=eb,eE[179]=ek,eE[180]=eA):eA=eE[180],eA}function eo(){setTimeout(es,800)}function es(){return h.cg?.location.reload()}el.displayName="ReviewThreadComment"},41031(e,t,n){n.d(t,{W:()=>s,j:()=>o});var i=n(74848),r=n(16522),a=n(96540);let l=(0,a.createContext)({});function o(e){let t,n,o=(0,r.c)(5),{children:s}=e,[d,c]=(0,a.useState)(!1);o[0]!==d?(t={isDialogOpen:d,setIsDialogOpen:c},o[0]=d,o[1]=t):t=o[1];let u=t;return o[2]!==s||o[3]!==u?(n=(0,i.jsx)(l,{value:u,children:s}),o[2]=s,o[3]=u,o[4]=n):n=o[4],n}l.displayName="DialogStateContext",o.displayName="DialogStateProvider";let s=()=>(0,a.use)(l)},21999(e,t,n){n.d(t,{Yf:()=>w.Yf,oO:()=>rb,Ao:()=>rp});var i=n(74848),r=n(16522),a=n(67515),l=n(96540),o=n(84357),s=n(35592),d=n(38621),c=n(46249),u=n(26108),m=n(84471);function f(e,t="r"){(0,m.Zu)(`#${t}${e}`)}var h=n(99047),g=n(70730),p=n(70966),b=n(34164),v=n(49941),y=n(99942),C=n(42839),x=n(6373),L=n(71323),_=n(97283),S=n(87134),N=n(26151),w=n(9722);function D({selectedLineRange:e,leftLines:t,rightLines:n}){let i=!!n,{startOrientation:r,endOrientation:a}=e,l=c(r).findIndex(t=>(0,w.a2)(t,e.startLineNumber,e.startOrientation)),o=c(a).findIndex(t=>(0,w.a2)(t,e.endLineNumber,e.endOrientation)),s=l>=0&&o>=0;function d(e){if(!s||(0,w.Po)(e))return!1;let t=c((0,N.XU)(e.type)).indexOf(e);return t>=l&&t<=o}function c(e){var r;return i&&"left"!==("string"==typeof(r=e)?r:(0,N.XU)(r.type))?n:t}let u=c("left").filter(e=>d(e));return{selectedRightLines:c("right").filter(e=>d(e)),selectedLeftLines:u}}var j=n(92163),I=n(69991);let k=/^b:\d+-l:(?:\d+|null)-r:(?:\d+|null)$/;function A(e){return null!=e&&k.test(e)}function E({diffAnchor:e,diffLines:t,isSplitView:n,lineRange:i}){let r,a=new Set([]);if(0===t.length)return{selectedLineKeys:a};if(!i)return{selectedLineKeys:new Set([])};let{startLineNumber:l,startOrientation:o,endLineNumber:s,endOrientation:d}=i,c=t;if(n){let e=(0,w.Mk)(t);c=e.leftLines,r=e.rightLines}let u={diffAnchor:e,endLineNumber:s??l,endOrientation:d??o,startLineNumber:l,startOrientation:o},m=D({selectedLineRange:u,leftLines:c,rightLines:r});for(let e=0;e<m.selectedLeftLines.length;e++){let t=m.selectedLeftLines[e];t&&!(0,w.Po)(t)&&t.key&&a.add(t.key)}for(let e=0;e<m.selectedRightLines.length;e++){let t=m.selectedRightLines[e];t&&!(0,w.Po)(t)&&t.key&&a.add(t.key)}return{selectedLineKeys:a,startOrientation:o,selectedLineRange:u}}function T(e){let t;for(t of e);return t}function R(e){return e.values().next().value}let{getItem:O}=(0,I.D)("localStorage");var $=n(50314);let M=(0,l.createContext)(null);function F(e){let t=(0,l.use)(M);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,L.P)(t,e)}M.displayName="DiffStoreContext";let B=({children:e,...t})=>{let n=(0,l.useRef)(null),r=(0,l.useRef)(t.diffLines),a=(0,l.useRef)(t.isSplitView),o=(0,l.useRef)(t.hiddenFeatures);return n.current||(n.current=P({...t})),(0,l.useEffect)(()=>{n.current&&r.current.length!==t.diffLines.length&&(n.current.getState().diffLinesSliceUpdates.updateDiffLinesHash(t.diffLines),n.current.setState({storedCommentsMap:t.storedCommentsMap}),r.current=t.diffLines)},[t,t.diffLines]),(0,l.useEffect)(()=>{n.current&&a.current!==t.isSplitView&&(n.current.getState().diffLinesSliceUpdates.updateDiffView(t.isSplitView),a.current=t.isSplitView)},[t,t.isSplitView]),(0,l.useEffect)(()=>{n.current&&!function(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(o.current,t.hiddenFeatures)&&(n.current.setState({hiddenFeatures:t.hiddenFeatures}),o.current=t.hiddenFeatures)},[t,t.hiddenFeatures]),(0,i.jsx)(M,{value:n.current,children:e})};B.displayName="DiffStoreProvider";let P=e=>(0,_.y)()((0,S.lt)((...t)=>({...(e=>({dialogMode:{activeGridCellId:null},dialogModeActions:{enableDialogMode:t=>e(()=>({dialogMode:{activeGridCellId:t}}),void 0,"dialogMode#enabled"),disableDialogMode:()=>e(()=>({dialogMode:{activeGridCellId:null}}),void 0,"dialogMode#disabled")}}))(...t),...(({diffAnchor:e,path:t,diffLines:n,fileLineCount:i,isSplitView:r})=>(a,l)=>{let o=n.reduce((e,t)=>(t.key&&(e[t.key]=t),e),{}),{selectedLineKeys:s,selectedLineRange:d,startOrientation:c}=E({diffAnchor:e,diffLines:n,isSplitView:r,lineRange:function(e){let t=(0,j.EW)(g.fV.hash);if(!t||t[1]!==e)return;let n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0,r=t[4]?"L"===t[4]?"left":"right":void 0,a=t[5]?parseInt(t[5]):void 0;if(n&&i)return{diffAnchor:e,endOrientation:r??n,endLineNumber:a??i,startOrientation:n,startLineNumber:i}}(e)}),u=R(s),m=T(s),f=n.reduce((e,t)=>{let n=t.key;return n&&s.has(n)&&(e[n]={isSelected:!0,isFirstSelected:u===n,isLastSelected:m===n}),e},{}),h=null;if(u){let e=o[u];if(e&&e.key&&c){let t="left"===c?e.left:e.right;t&&(h={lineNumber:t,orientation:c,shouldStartConversation:!1,lineKey:e.key})}}return{diffLines:{diffAnchor:e,_diffLines:n,_diffLinesHash:o,selectedLinesInfo:f,fileLineCount:i,firstLineSelectionOnDrag:h,_firstSelectedLineInfo:h?{lineKey:h.lineKey,lineNumber:h.lineNumber,orientation:h.orientation}:null,allSelectedLinesAreRetargetable:()=>{let e=!1;for(let t of l().diffLines.selectedLineKeys){let n=l().diffLines._diffLinesHash[t];if(n&&!(0,w.xB)(n)){e=!0;break}}return!e},getDiffLinesInfo:()=>l().diffLines._diffLines,getSplitDiffLinesFromLineRange:e=>{let t=(0,w.Mk)(l().diffLines._diffLines);return D({selectedLineRange:e,leftLines:t.leftLines,rightLines:t.rightLines})},getSelectedDiffLines:()=>{let e=[];for(let t of l().diffLines.selectedLineKeys){let n=l().diffLines._diffLinesHash[t];n&&e.push(n)}return e},getfirstLineSelectionOnDrag:()=>l().diffLines.firstLineSelectionOnDrag,getIsDraggingFromAddCommentButton:()=>l().diffLines.isDraggingFromAddCommentButton,getSelectedLineRange:()=>l().diffLines.selectedLineRange,hasSelectedLines:()=>l().diffLines.selectedLineKeys.size>0,isDraggingFromAddCommentButton:!1,isSplitView:r,selectedLineKeys:s,selectedLineRange:d},diffLinesSliceUpdates:{updateDiffLinesHash:e=>{let t=e.reduce((e,t)=>(t.key&&(e[t.key]=t),e),{});a(n=>({diffLines:{...n.diffLines,_diffLines:e,_diffLinesHash:t}}),void 0,"updateDiffLines")},updateDiffView:e=>a(t=>({diffLines:{...t.diffLines,isSplitView:e}}),void 0,"update diff view settings")},diffLinesActions:{clearFirstLineSelectionOnDrag:()=>a(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null,isDraggingFromAddCommentButton:!1}}),void 0,"clearFirstLineSelectionOnDrag"),setIsDraggingFromAddCommentButton:e=>a(t=>({diffLines:{...t.diffLines,isDraggingFromAddCommentButton:e}}),void 0,`setIsDraggingFromAddCommentButton:${e}`),addLineToSelection:({lineKey:n,orientation:i},r)=>{let o;if(!n)return;let s=l().diffLines._diffLinesHash[n];if(!s)return;let d=l().diffLines.firstLineSelectionOnDrag,c=l().diffLines._firstSelectedLineInfo,u=l().diffLines.selectedLineRange;if(d&&n===d.lineKey||!u){let e="right"===i?s.right:s.left;if(!e)return;l().diffLinesActions.selectLine({lineKey:n,firstLineSelectionOnDrag:{lineNumber:e,orientation:i,lineKey:n,shouldStartConversation:!1}},r);return}if(!c)return;o=!function({current:e,currentOrientation:t,previous:n,previousOrientation:i}){return!!n&&("left"===i&&"left"===t&&!!e.left&&!!n.left&&n.left>e.left||"right"===i&&"right"===t&&!!e.right&&!!n.right&&n.right>e.right||"right"===i&&"left"===t&&!!e.right&&!!n.right&&n.right>e.right||"left"===i&&"right"===t&&!!e.left&&!!n.left&&n.left>e.left||!1)}({current:s,currentOrientation:i,previous:l().diffLines._diffLinesHash[c.lineKey],previousOrientation:c.orientation})?{...u,startLineNumber:c.lineNumber,startOrientation:c.orientation,endLineNumber:("left"===i?s?.left:s?.right)??-1,endOrientation:i}:{...u,startLineNumber:("left"===i?s?.left:s?.right)??-1,startOrientation:i,endLineNumber:c.lineNumber,endOrientation:c.orientation};let{selectedLineKeys:m,selectedLineRange:f}=E({diffAnchor:e,diffLines:l().diffLines._diffLines,isSplitView:l().diffLines.isSplitView,lineRange:o}),h=R(m),p=T(m),b=Array.from(m).reduce((e,t)=>(e[t]={isFirstSelected:t===h,isLastSelected:t===p,isSelected:!0},e),{});if(!f?.endLineNumber||!f?.startLineNumber)return;let v=new $.J(f,t);g.cg?.dispatchEvent(v),a(e=>({diffLines:{...e.diffLines,selectedLineKeys:m,selectedLinesInfo:b,selectedLineRange:f}}),void 0,"addLineToSelection"),r(f)},clearSelectedLines:()=>{a(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null,selectedLineKeys:new Set([]),selectedLinesInfo:{},selectedLineRange:void 0,_firstSelectedLineInfo:null}}),void 0,"clearSelectedLines")},selectLine:({lineKey:e,firstLineSelectionOnDrag:n},i)=>{if(!e)return;let r=l().diffLines._diffLinesHash[e];if(!r)return;let o={[e]:{isFirstSelected:!0,isLastSelected:!0,isSelected:!0}},s="left"===n.orientation?r.left:r.right;if(!s)return;let d={diffAnchor:l().diffLines.diffAnchor,endLineNumber:s,endOrientation:n.orientation,startLineNumber:s,startOrientation:n.orientation},c=new $.J(d,t);g.cg?.dispatchEvent(c),a(t=>({diffLines:{...t.diffLines,firstLineSelectionOnDrag:{...n,lineKey:e},selectedLineKeys:new Set([e]),selectedLinesInfo:o,selectedLineRange:d,_firstSelectedLineInfo:{lineKey:e,lineNumber:n.lineNumber,orientation:n.orientation}}}),void 0,"selectLine"),i(d)},selectMultipleLines:({startLineKey:n,endLineKey:i,startOrientation:r,endOrientation:o,firstLineSelectionOnDrag:s},d)=>{if(!n||!i||!s)return;let c=l().diffLines._diffLinesHash[n],u=l().diffLines._diffLinesHash[i];if(!c||!u||!c.left&&!c.right||!u.left&&!u.right)return;let m={diffAnchor:e,endLineNumber:("right"===o?u.right:u.left)??-1,endOrientation:o,startLineNumber:("right"===r?c.right:c.left)??-1,startOrientation:r},{selectedLineKeys:f,selectedLineRange:h}=E({diffAnchor:e,diffLines:l().diffLines._diffLines,isSplitView:l().diffLines.isSplitView,lineRange:m}),p=R(f),b=T(f),v=Array.from(f).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===b,isSelected:!0},e),{});if(!h?.endLineNumber||!h?.startLineNumber)return;let y=new $.J(h,t);g.cg?.dispatchEvent(y),a(e=>({diffLines:{...e.diffLines,selectedLinesInfo:v,selectedLineKeys:f,firstLineSelectionOnDrag:s,selectedLineRange:h,_firstSelectedLineInfo:{lineNumber:s.lineNumber,orientation:s.orientation,lineKey:s.lineKey}}}),void 0,"selectMultipleLines"),d(h)}}}})(e)(...t),...(({hiddenFeatures:e})=>()=>({hiddenFeatures:e}))(e)(...t),...(({addInjectedContextLines:e})=>()=>({injectedContextLinesActions:{addInjectedContextLines:e}}))(e)(...t),...(({startNewConversationForLineOrFileMap:e})=>(t,n)=>({startNewConversationForLineOrFileMap:e,getMoveNewCommentDataForLine:e=>n().startNewConversationForLineOrFileMap[e],addStartNewCommentOnLine:(t,n,i)=>{e[t]={diffLineKey:i,startNewComment:n}}}))(e)(...t),...(({newTreeEntry:e,oldTreeEntry:t})=>()=>({treeEntries:{newTreeEntry:e,oldTreeEntry:t}}))(e)(...t),...(({storedCommentsMap:e})=>(t,n)=>({storedCommentsMap:e,getStoredCommentDataForLine:e=>n().storedCommentsMap[e],updateStoredCommentOnLine:(e,i)=>{!i&&n().storedCommentsMap[e]?t(t=>({storedCommentsMap:{...t.storedCommentsMap,[e]:!1}}),void 0,"updateDiffLines"):i&&!n().storedCommentsMap[e]&&(n().storedCommentsMap[e]=!0)}}))(e)(...t),...(e=>({actionBarVisibility:{activeActionBarCellId:null,focusedActionBarCellId:null},showActionBar:t=>e(e=>({actionBarVisibility:{activeActionBarCellId:t,focusedActionBarCellId:e.actionBarVisibility.focusedActionBarCellId}}),void 0,`actionBarVisibility#show:${t}`),hideActionBar:t=>e(e=>e.actionBarVisibility.activeActionBarCellId===t?{actionBarVisibility:{activeActionBarCellId:null,focusedActionBarCellId:e.actionBarVisibility.focusedActionBarCellId}}:e,void 0,`actionBarVisibility#hide:${t}`),hideAllActionBars:()=>e(()=>({actionBarVisibility:{activeActionBarCellId:null,focusedActionBarCellId:null}}),void 0,"actionBarVisibility#hideAll"),setFocusedActionBar:t=>e(e=>({actionBarVisibility:{activeActionBarCellId:e.actionBarVisibility.activeActionBarCellId,focusedActionBarCellId:t}}),void 0,`actionBarVisibility#setFocused:${t}`),clearFocusedActionBar:()=>e(e=>({actionBarVisibility:{activeActionBarCellId:e.actionBarVisibility.activeActionBarCellId,focusedActionBarCellId:null}}),void 0,"actionBarVisibility#clearFocused")}))(...t)}),{name:`diff-store-${e.diffAnchor}`})),H=e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>!!e&&t.dialogMode.activeGridCellId===e,n[0]=e,n[1]=t):t=n[1],F(t)},K={isSelected:!1,isFirstSelected:!1,isLastSelected:!1},U=e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>e&&t.diffLines.selectedLinesInfo[e]||K,n[0]=e,n[1]=t):t=n[1],F(t)},V=e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>t.storedCommentsMap[e],n[0]=e,n[1]=t):t=n[1],F(t)},q=e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=t=>!!e&&(t.actionBarVisibility.focusedActionBarCellId===e||t.actionBarVisibility.activeActionBarCellId===e),n[0]=e,n[1]=t):t=n[1],F(t)};function z(e){return e.diffLines.getSplitDiffLinesFromLineRange}function W(e){return e.diffLines.getSelectedDiffLines}function G(e){return e.diffLines.getDiffLinesInfo}function X(e){return e.diffLines.getfirstLineSelectionOnDrag}function J(e){return e.diffLines.getSelectedLineRange}function Q(e){return e.diffLines.getIsDraggingFromAddCommentButton}function Y(e){return e.diffLines.hasSelectedLines}function Z(e){return e.hiddenFeatures}function ee(e){return e.dialogModeActions}function et(e){return e.diffLines.diffAnchor}function en(e){return e.diffLines.fileLineCount}function ei(e){return e.diffLinesActions}function er(e){return e.injectedContextLinesActions}function ea(e){return e.treeEntries}function el(e){return e.getMoveNewCommentDataForLine}function eo(e){return e.updateStoredCommentOnLine}function es(e){return e.diffLines.allSelectedLinesAreRetargetable}function ed(e){return e.hideActionBar}function ec(e){return e.showActionBar}function eu(e){return e.setFocusedActionBar}function em(e){return e.clearFocusedActionBar}var ef=n(20267);function eh({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:r}){if(i&&t){var a;(0,j.i8)({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:r}),(a={diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:r}).startLineNumber===a.endLineNumber&&a.startOrientation===a.endOrientation?(0,ef.i)(`${"left"===a.startOrientation?"L":"R"}${a.startLineNumber} selected.`):(0,ef.i)(`${"left"===a.startOrientation?"L":"R"}${a.startLineNumber} to ${"left"===a.endOrientation?"L":"R"}${a.endLineNumber} selected.`)}}var eg=n(59080),ep=n(19401);let eb="comment",ev="review";function ey(e){let t,n,a,o,s,d,c,u,m,f,L,_,S,N,D,j,I,k,A,E,T=(0,r.c)(89),{batchingEnabled:R,condensed:O,fileLevelComment:$,filePath:M,focusOnMount:B,isReplying:P,lineNumber:H,onAddComment:K,onCancelComment:U,onPersistedCommentExists:V,quotedText:q,side:z,startLineNumber:W,threadId:G,suggestedChangesConfig:X,commentLineChangeConfig:J}=e,Q=void 0===q?"":q,[Y,Z]=(0,l.useState)(Q),[ee,et]=(0,l.useState)(null),en=(0,l.useRef)(Q),[er,ea]=(0,l.useState)(),el=(0,l.useRef)(null),es=(0,l.useRef)(null),ed=(0,x.it)(),ec=F(eo),eu=(0,l.useRef)(void 0),{selectMultipleLines:em,clearSelectedLines:ef}=F(ei);T[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{(0,ep.k)(e??"",100),ea(e)},T[0]=t):t=T[0];let ey=t,eC=null!==ee,ex=(0,x.Kp)(),{persistCommentToStorage:eL,removePersistedCommentFromStorage:e_,persistCommentOnGivenLineToStorage:eS}=(0,v.L4)({diffSide:z,filePath:M,line:H,subjectId:ex,threadId:G,handlePersistedCommentExists:e=>{let{text:t,shouldFocus:n,startLine:i,startSide:r,startLineKey:a,endLineKey:l}=e;if(t){if(Z(t),n&&el.current&&(el.current.focus(),el.current.moveCursorToEnd(),eN({text:t,startLine:i,startSide:r,startLineKey:a,endLineKey:l}),i)){let e="LEFT"===z?"left":"right";em({endLineKey:l,endOrientation:e,startLineKey:a,startOrientation:e,firstLineSelectionOnDrag:{lineKey:a??"b:0-l:0-r:0",lineNumber:H??0,orientation:e,shouldStartConversation:!1}},eh)}V?.()}},fileLevelComment:!!$}),eN=eL;if(T[1]!==Q?(n=()=>{Q!==en.current&&(en.current=Q,Z(Q))},a=[Q],T[1]=Q,T[2]=n,T[3]=a):(n=T[2],a=T[3]),(0,l.useEffect)(n,a),T[4]!==ef||T[5]!==J||T[6]!==Y||T[7]!==M||T[8]!==H||T[9]!==U||T[10]!==eS||T[11]!==e_||T[12]!==em||T[13]!==z?(o=()=>{if(J){if(null!==(0,eg.T)(Y))return void J.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(J.closeLineMovingDialog(),eS({text:Y,givenLineDiffSide:J.diffSide,givenFilePath:M,givenLine:J.endLineNumber,shouldBeFileLevelComment:J.isFileLevelComment,startLine:J.startLineNumber,startLineKey:J.startDiffLineKey,endLineKey:J.endDiffLineKey}),e_(),H!==J.endLineNumber||J.isFileLevelComment)J.startConversationOnNewLine(),U?.(!1);else if(J.endDiffLineKey&&J.startDiffLineKey&&eu.current!==J){eu.current=J;let e="LEFT"===z?"left":"right";em({endLineKey:J.endDiffLineKey,endOrientation:e,startLineKey:J.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:J.startDiffLineKey??"b:0-l:0-r:0",lineNumber:H??0,orientation:e,shouldStartConversation:!1}},eh)}else J.startDiffLineKey||ef()}},s=[ef,J,Y,M,H,U,eS,e_,em,z],T[4]=ef,T[5]=J,T[6]=Y,T[7]=M,T[8]=H,T[9]=U,T[10]=eS,T[11]=e_,T[12]=em,T[13]=z,T[14]=o,T[15]=s):(o=T[14],s=T[15]),(0,l.useEffect)(o,s),T[16]!==B?(c=()=>{if(B){let e=setTimeout(()=>{if(g.XC&&g.cg){if(es.current){let e=es.current,t=e.getBoundingClientRect(),n=g.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(g.cg?.innerHeight||n))){let i=t.top,r=g.XC?.documentElement.getBoundingClientRect().top||0,a=.6666666666666666*e.clientHeight;g.cg?.scrollTo({top:i-r-.6666666666666666*n+a,behavior:"smooth"})}}el.current&&(el.current.focus(),el.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},d=[B],T[16]=B,T[17]=d,T[18]=c):(d=T[17],c=T[18]),(0,l.useEffect)(c,d),T[19]!==Y||T[20]!==P||T[21]!==eC||T[22]!==H||T[23]!==K||T[24]!==U||T[25]!==e_||T[26]!==z||T[27]!==X?.sourceContentFromDiffLines||T[28]!==ec){let e,t=e=>{let{submitBatch:t,action:n}=e,i="Failed to save comment";if(eC)return;if(!Y.trim())return void ey(`${i}: Body can't be blank`);et(n),ea(void 0),ey(void 0);let r=(0,y.u)(Y,X?.sourceContentFromDiffLines??"");if(!r.isValid){ey(r.errorMessage),ea(r.errorMessage),et(null);return}void 0===H||P||ec((0,w.oH)(H,z??"RIGHT"),!1),K?.({commentText:Y,onCompleted(){et(null),u()},onError(e){et(null),void 0===H||P||ec((0,w.oH)(H,z??"RIGHT"),!0),e.message&&(i=`${i}: ${e.message}`),ey(i)},submitBatch:t})};m=()=>{t({submitBatch:!1,action:ev})},f=()=>{t({submitBatch:!0,action:eb})},T[32]!==P||T[33]!==H||T[34]!==U||T[35]!==e_||T[36]!==z||T[37]!==ec?(e=()=>{void 0===H||P||ec((0,w.oH)(H,z??"RIGHT"),!1),e_(),Z(""),U?.()},T[32]=P,T[33]=H,T[34]=U,T[35]=e_,T[36]=z,T[37]=ec,T[38]=e):e=T[38],u=e,T[19]=Y,T[20]=P,T[21]=eC,T[22]=H,T[23]=K,T[24]=U,T[25]=e_,T[26]=z,T[27]=X?.sourceContentFromDiffLines,T[28]=ec,T[29]=u,T[30]=m,T[31]=f}else u=T[29],m=T[30],f=T[31];T[39]!==P||T[40]!==H||T[41]!==eN||T[42]!==z||T[43]!==W||T[44]!==ec?(L=e=>{ey(void 0),void 0===H||P||ec((0,w.oH)(H,z??"RIGHT"),e.trim().length>0),eN({text:e,startLine:W,startSide:W?z:void 0}),Z(e)},T[39]=P,T[40]=H,T[41]=eN,T[42]=z,T[43]=W,T[44]=ec,T[45]=L):L=T[45];let ew=L;T[46]!==f?(_={"pull-requests-conversations:submit-comment-and-review":f},T[46]=f,T[47]=_):_=T[47],T[48]!==u||T[49]!==Y?(S=e=>{"Escape"!==e.key||Y.trim()?e.stopPropagation():(e.preventDefault(),u())},T[48]=u,T[49]=Y,T[50]=S):S=T[50];let eD=R?m:f,ej=O||P?"AddCommentEditor-module__hideMarkdownFooter__XhAMG":"AddCommentEditor-module__showMarkdownFooter__YwCfZ",eI=P&&"AddCommentEditor-module__isReplying__jv7w0",ek=O&&"AddCommentEditor-module__condensed__LwVFY";return T[51]!==ej||T[52]!==eI||T[53]!==ek?(N=(0,b.$)("AddCommentEditor-module__ConversationCommentBox__qxXdE",ej,eI,ek),T[51]=ej,T[52]=eI,T[53]=ek,T[54]=N):N=T[54],T[55]!==u||T[56]!==U?(D=U&&(0,i.jsx)(h.x,{className:"py-1 px-2",variant:"default",onClick:u,children:"Cancel"}),T[55]=u,T[56]=U,T[57]=D):D=T[57],T[58]!==R||T[59]!==ed||T[60]!==f||T[61]!==P||T[62]!==ee?(j=!ed&&(0,i.jsx)(h.x,{className:"py-1 px-2",variant:R?"default":"primary",onClick:f,ref:es,loading:ee===eb,children:P?"Reply":"Comment"}),T[58]=R,T[59]=ed,T[60]=f,T[61]=P,T[62]=ee,T[63]=j):j=T[63],T[64]!==R||T[65]!==ed||T[66]!==m||T[67]!==ee?(I=R&&(0,i.jsx)(h.x,{className:"py-1 px-2",variant:"primary",onClick:m,loading:ee===ev,children:ed?"Add review comment":"Start a review"}),T[64]=R,T[65]=ed,T[66]=m,T[67]=ee,T[68]=I):I=T[68],T[69]!==Y||T[70]!==er||T[71]!==M||T[72]!==ew||T[73]!==eC||T[74]!==H||T[75]!==W||T[76]!==X||T[77]!==eD||T[78]!==N||T[79]!==D||T[80]!==j||T[81]!==I?(k=(0,i.jsxs)(C.S,{ref:el,label:"Add diff comment",value:Y,onChange:ew,onPrimaryAction:eD,suggestedChangesConfig:X,markdownErrorMessage:er,lineNumber:H,filePath:M,startLineNumber:W,disabled:eC,className:N,children:[D,j,I]}),T[69]=Y,T[70]=er,T[71]=M,T[72]=ew,T[73]=eC,T[74]=H,T[75]=W,T[76]=X,T[77]=eD,T[78]=N,T[79]=D,T[80]=j,T[81]=I,T[82]=k):k=T[82],T[83]!==S||T[84]!==k?(A=(0,i.jsx)("div",{className:"AddCommentEditor-module__AddCommentEditor__SOA0y",onKeyDown:S,children:k}),T[83]=S,T[84]=k,T[85]=A):A=T[85],T[86]!==_||T[87]!==A?(E=(0,i.jsx)(p.tL,{commands:_,children:A}),T[86]=_,T[87]=A,T[88]=E):E=T[88],E}ey.displayName="AddCommentEditor";var eC=n(21373),ex=n(39081),eL=n(15837),e_=n(7624),eS=n(45438),eN=n(38750),ew=n(67323),eD=n(18990);function ej(e){let t,n,a,o,s,c,u=(0,r.c)(25),{ariaLabelId:m,currentLineNumberText:f,setCommentLineChangeConfig:h,baseEndLineNumber:g,diffSide:p,baseStartLineNumber:b}=e,[v,y]=(0,l.useState)(!1);u[0]!==g||u[1]!==b?(t=()=>b&&g?"lineRange":g?"line":"file",u[0]=g,u[1]=b,u[2]=t):t=u[2];let[C,x]=(0,l.useState)(t),[L,_]=(0,l.useState)("LEFT"===p),[S,N]=(0,l.useState)(b?String(b):""),[w,D]=(0,l.useState)(g?String(g):""),[j,I]=(0,l.useState)(""),k=F(el),A=(0,l.useRef)(null);u[3]!==w||u[4]!==k||u[5]!==L||u[6]!==C||u[7]!==h||u[8]!==S?(n=()=>{var e,t,n;let i,r,a=k(eE(L,Number(w),"file"===C)),l=k(eE(L,Number(S),"file"===C)),o=a?.startNewComment,s=a?.diffLineKey,d=l?.diffLineKey;(e="lineRange"===C?S:void 0,t=w,i=Number(e),(Number.isInteger(r=Number(t))&&r>0&&(void 0===e||Number.isInteger(i)&&i>0&&i<=r)||"file"===C)&&o&&s)?h({diffSide:(n={isLeftSide:L,startLineNumber:"lineRange"===C?Number(S):void 0,endDiffLineKey:s,endLineNumber:Number(w),isFileLevelComment:"file"===C,startDiffLineKey:"lineRange"===C?d:void 0,startConversationOnNewLine:o,closeLineMovingDialog:()=>y(!1),setErrorMessage:e=>I(e)}).isLeftSide?"LEFT":"RIGHT",startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,isFileLevelComment:n.isFileLevelComment,startDiffLineKey:n.startDiffLineKey,endDiffLineKey:n.endDiffLineKey,setErrorMessage:n.setErrorMessage,startConversationOnNewLine:n.startConversationOnNewLine,closeLineMovingDialog:n.closeLineMovingDialog}):I("Please enter a valid line number or range.")},u[3]=w,u[4]=k,u[5]=L,u[6]=C,u[7]=h,u[8]=S,u[9]=n):n=u[9];let E=n;return u[10]===Symbol.for("react.memo_cache_sentinel")?(a=()=>y(!0),u[10]=a):a=u[10],u[11]!==m||u[12]!==f?(o=(0,i.jsx)(eC.Q,{"aria-labelledby":m,"aria-description":"Select to change location",ref:A,type:"button",size:"small",onClick:a,trailingAction:d.TriangleDownIcon,children:f}),u[11]=m,u[12]=f,u[13]=o):o=u[13],u[14]!==w||u[15]!==j||u[16]!==v||u[17]!==L||u[18]!==C||u[19]!==S||u[20]!==E?(s=v&&(0,i.jsx)(ex.l,{onClose:()=>y(!1),returnFocusRef:A,title:"Add comment on",width:"medium",footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{y(!1)}},{buttonType:"primary",content:"Save",onClick:E}],children:(0,i.jsxs)(eL.A,{name:"line-number-selection",onChange:e=>{x(e)},children:[(0,i.jsx)(eL.A.Label,{}),(0,i.jsxs)(e_.A,{children:[(0,i.jsx)(eS.A,{value:"line",defaultChecked:"line"===C}),(0,i.jsx)(e_.A.Label,{children:"Line number"}),"line"===C&&(0,i.jsxs)(e_.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eA,{isLeftSelected:L,setIsLeftSelected:_}),(0,i.jsx)(eN.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:w,onChange:e=>D(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}})]})]}),(0,i.jsxs)(e_.A,{children:[(0,i.jsx)(eS.A,{value:"lineRange",defaultChecked:"lineRange"===C}),(0,i.jsx)(e_.A.Label,{children:"Line range"}),"lineRange"===C&&(0,i.jsxs)(e_.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eA,{isLeftSelected:L,setIsLeftSelected:_}),(0,i.jsx)(eN.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:S,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}}),(0,i.jsx)(d.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(eN.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:w,onChange:e=>D(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}})]})]}),(0,i.jsxs)(e_.A,{children:[(0,i.jsx)(eS.A,{value:"file",defaultChecked:"file"===C}),(0,i.jsx)(e_.A.Label,{children:"File"})]}),j&&(0,i.jsx)(eL.A.Validation,{variant:"error",children:j})]})}),u[14]=w,u[15]=j,u[16]=v,u[17]=L,u[18]=C,u[19]=S,u[20]=E,u[21]=s):s=u[21],u[22]!==o||u[23]!==s?(c=(0,i.jsxs)("div",{className:"ml-1",children:[o,s]}),u[22]=o,u[23]=s,u[24]=c):c=u[24],c}ej.displayName="ChangeCommentLineNumberButton";let eI="Left (L)",ek="Right (R)";function eA(e){let t,n,a,l,o,s=(0,r.c)(12),{isLeftSelected:d,setIsLeftSelected:c}=e,u=d?eI:ek;return s[0]!==u?(t=(0,i.jsx)(ew.W.Button,{children:u}),s[0]=u,s[1]=t):t=s[1],s[2]!==c?(n=(0,i.jsx)(eD.l.Item,{onSelect:()=>{c(!0)},children:eI}),s[2]=c,s[3]=n):n=s[3],s[4]!==c?(a=(0,i.jsx)(eD.l.Item,{onSelect:()=>{c(!1)},children:ek}),s[4]=c,s[5]=a):a=s[5],s[6]!==n||s[7]!==a?(l=(0,i.jsx)(ew.W.Overlay,{children:(0,i.jsxs)(eD.l,{children:[n,a]})}),s[6]=n,s[7]=a,s[8]=l):l=s[8],s[9]!==t||s[10]!==l?(o=(0,i.jsxs)(ew.W,{children:[t,l]}),s[9]=t,s[10]=l,s[11]=o):o=s[11],o}function eE(e,t,n){return n?"F0":`${e?"L":"R"}${t}`}eA.displayName="MoveCommentLineNumberDropdown";var eT=n(64855);function eR(e){let t,n,a,o,m,h,g,p,b,v,y,C,x,L,_,S,N,w,D,j,I,k=(0,r.c)(56);if(k[0]!==e){let{addCommentDialogTitle:i,isLeftSide:r,fileLevelComment:l,filePath:s,focusOnMount:d,lineNumber:c,onAddComment:u,onClose:f,viewerData:C,threadsConnectionId:x,showOnCloseIcon:L,..._}=e;t=i,o=r,n=l,a=s,b=d,m=c,h=u,g=f,y=C,v=L,p=_,k[0]=e,k[1]=t,k[2]=n,k[3]=a,k[4]=o,k[5]=m,k[6]=h,k[7]=g,k[8]=p,k[9]=b,k[10]=v,k[11]=y}else t=k[1],n=k[2],a=k[3],o=k[4],m=k[5],h=k[6],g=k[7],p=k[8],b=k[9],v=k[10],y=k[11];let A=void 0===b||b,E=void 0===v||v,[T,R]=(0,l.useState)(void 0),O=(0,eT.u)("move_new_comments_ui")&&!1,{disableDialogMode:$}=F(ee);k[12]!==h?(C=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:r}=e;h({text:t,onError:i,onCompleted:(e,t)=>{t&&f(t.toString()),n?.(e,t)},submitBatch:r})},k[12]=h,k[13]=C):C=k[13];let M=C;k[14]!==$||k[15]!==g?(x=()=>{g?.(),$()},k[14]=$,k[15]=g,k[16]=x):x=k[16];let B=x,P=`diff-comment-positioning-${(0,l.useId)()}`,H=y.avatarUrl||"";k[17]!==H||k[18]!==y.login?(L=(0,i.jsx)(s.r,{alt:y.login,size:24,src:H,className:"mr-2"}),k[17]=H,k[18]=y.login,k[19]=L):L=k[19],k[20]!==t||k[21]!==n||k[22]!==O?(_=!O&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:t?`Add a comment on ${t}`:"Add a comment"})),k[20]=t,k[21]=n,k[22]=O,k[23]=_):_=k[23],k[24]!==t||k[25]!==P||k[26]!==n||k[27]!==o||k[28]!==m||k[29]!==O||k[30]!==p?(S=O&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",id:P,children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(ej,{ariaLabelId:P,currentLineNumberText:n?"file":t??"",baseEndLineNumber:m,baseStartLineNumber:p.startLineNumber,diffSide:o?"LEFT":"RIGHT",setCommentLineChangeConfig:R})]}),k[24]=t,k[25]=P,k[26]=n,k[27]=o,k[28]=m,k[29]=O,k[30]=p,k[31]=S):S=k[31],k[32]!==L||k[33]!==_||k[34]!==S?(N=(0,i.jsxs)(c.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[L,_,S]}),k[32]=L,k[33]=_,k[34]=S,k[35]=N):N=k[35],k[36]!==g||k[37]!==B||k[38]!==E?(w=g&&E&&(0,i.jsx)(u.K,{variant:"invisible",icon:d.XIcon,onClick:B,"aria-label":"Cancel"}),k[36]=g,k[37]=B,k[38]=E,k[39]=w):w=k[39],k[40]!==w||k[41]!==N?(D=(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[N,w]}),k[40]=w,k[41]=N,k[42]=D):D=k[42];let K=n??!1,U=o?"LEFT":"RIGHT";return k[43]!==T||k[44]!==a||k[45]!==A||k[46]!==M||k[47]!==m||k[48]!==B||k[49]!==p||k[50]!==K||k[51]!==U?(j=(0,i.jsx)(ey,{focusOnMount:A,condensed:!1,fileLevelComment:K,filePath:a,lineNumber:m,onAddComment:M,onCancelComment:B,commentLineChangeConfig:T,side:U,...p}),k[43]=T,k[44]=a,k[45]=A,k[46]=M,k[47]=m,k[48]=B,k[49]=p,k[50]=K,k[51]=U,k[52]=j):j=k[52],k[53]!==D||k[54]!==j?(I=(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[D,j]}),k[53]=D,k[54]=j,k[55]=I):I=k[55],I}eR.displayName="StartThreadComment";var eO=n(53928),e$=n(67296),eM=n(97286),eF=n(29207),eB=n(7478);function eP(e){let t,n,a,l,o,s,d=(0,r.c)(29),{queryConfig:c,initialData:u}=e;if(u&&(u.proseDiffHtml||u.renderInfo||u.dependencyDiffPath)){let e;d[0]!==u.dependencyDiffPath||d[1]!==u.proseDiffHtml||d[2]!==u.renderInfo?(e={proseDiffHtml:u.proseDiffHtml,renderInfo:u.renderInfo,dependencyDiffPath:u.dependencyDiffPath},d[0]=u.dependencyDiffPath,d[1]=u.proseDiffHtml,d[2]=u.renderInfo,d[3]=e):e=d[3],s=e}let m=c?.key,f=c?.args;d[4]!==m||d[5]!==f?(t=[m,f],d[4]=m,d[5]=f,d[6]=t):t=d[6],d[7]!==c?(n=async()=>await c?.fetcher(c.args)||{},d[7]=c,d[8]=n):n=d[8];let h=!!c;d[9]!==s||d[10]!==t||d[11]!==n||d[12]!==h?(a={queryKey:t,queryFn:n,initialData:s,staleTime:1/0,enabled:h},d[9]=s,d[10]=t,d[11]=n,d[12]=h,d[13]=a):a=d[13];let g=(0,eM.I)(a);d[14]!==s||d[15]!==c||d[16]!==g?(l=c?g:{data:s,isLoading:!1},d[14]=s,d[15]=c,d[16]=g,d[17]=l):l=d[17];let{data:p,isLoading:b}=l;d[18]!==p?(o=p||{},d[18]=p,d[19]=o):o=d[19];let{proseDiffHtml:v,renderInfo:y,dependencyDiffPath:C}=o;if(b){let e;return d[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center pr-p-4",children:(0,i.jsx)(eB.A,{size:"large"})}),d[20]=e):e=d[20],e}if(v){let e;return d[21]!==v?(e=(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(eF.vb,{html:v})}),d[21]=v,d[22]=e):e=d[22],e}if(y){let e;return d[23]!==y?(e=(0,i.jsx)(eO.default,{...y,viewportClassName:"RichDiff-module__fileRendererViewport__wcmGL",iframeClassName:"RichDiff-module__fileRendererIframe__w06bk"}),d[23]=y,d[24]=e):e=d[24],e}if(C){let e,t;return d[25]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:"text-center pr-py-3",children:[(0,i.jsx)(eB.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]}),d[25]=e):e=d[25],d[26]!==C?(t=(0,i.jsx)("div",{children:(0,i.jsx)(e$.x,{src:C,children:e})}),d[26]=C,d[27]=t):t=d[27],t}{let e;return d[28]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center pr-p-4",children:"This rich diff is not supported at the moment."}),d[28]=e):e=d[28],e}}eP.displayName="RichDiff";var eH=n(4735),eK=n(17818),eU=n(83223);function eV(e){let t,n,a,o,s,c,u,m,f,h,g=(0,r.c)(27),{children:p,helpText:v,helpUrl:y,onLoadDiff:C,diffAnchor:x}=e,L=y&&v,[_,S]=(0,l.useState)("initial");g[0]!==C?(t=async()=>{try{S("loading"),await C()}catch{S("error")}},g[0]=C,g[1]=t):t=g[1];let N=t;return g[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,b.$)("HiddenDiffPatch-module__gridColumnTemplate__o4otv"),g[2]=n):n=g[2],g[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:"340px"},g[3]=a):a=g[3],g[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:a,viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})}),g[4]=o):o=g[4],g[5]!==_?(s="loading"===_&&(0,i.jsx)(eB.A,{size:"medium"}),g[5]=_,g[6]=s):s=g[6],g[7]!==_?(c="error"===_&&(0,i.jsx)(d.AlertIcon,{size:24}),g[7]=_,g[8]=c):c=g[8],g[9]!==_||g[10]!==N?(u="initial"===_&&(0,i.jsx)(eC.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{N(),S("loading")},children:"Load Diff"}),g[9]=_,g[10]=N,g[11]=u):u=g[11],g[12]!==p||g[13]!==v||g[14]!==y||g[15]!==_||g[16]!==N||g[17]!==L?(m="error"===_?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(eU.A,{inline:!0,as:"button",onClick:()=>{N(),S("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[p,L&&(0,i.jsx)(eU.A,{inline:!0,href:y,children:v})]}),g[12]=p,g[13]=v,g[14]=y,g[15]=_,g[16]=N,g[17]=L,g[18]=m):m=g[18],g[19]!==s||g[20]!==c||g[21]!==u||g[22]!==m?(f=(0,i.jsxs)("div",{className:n,children:[o," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:[s,c,u,m]})]}),g[19]=s,g[20]=c,g[21]=u,g[22]=m,g[23]=f):f=g[23],g[24]!==x||g[25]!==f?(h=(0,i.jsx)("div",{className:"pr-px-3 pr-py-4 fgColor-muted","data-diff-anchor":x,children:f}),g[24]=x,g[25]=f,g[26]=h):h=g[26],h}eV.displayName="HiddenDiffPatch";var eq=n(12431),ez=n(19701);let eW="final-hunk-header-line";function eG(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function eX(e,t){if("HUNK"===e.type&&e.__id===eW)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(eG).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function eJ(e){let t,n=[],i=0;for(let r=1;r<e.length;r++){let a=e[r];if(a&&!(0,w.Po)(a)&&(t=a,"HUNK"===a.type)){let t,l=e[i];if(!l||(0,w.Po)(l))continue;let o=r-1;for(;(!t||(0,w.Po)(t))&&(t=e[o],-1!=--o););t&&!(0,w.Po)(t)&&n.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),a.__id===eW&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),i=r;continue}}if(t&&"HUNK"!==t.type){let r=e[i];r&&!(0,w.Po)(r)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}var eQ=n(71313),eY=n(41031),eZ=n(45800),e0=n(29941);let e1=e0.z0.ArrowAll;e0.z0.ArrowHorizontal,e0.z0.ArrowVertical,e0.z0.ArrowVertical,e0.z0.ArrowHorizontal;var e2=n(50467);class e3{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,r=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(r)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let a=this.markers[n];if(a)return this.currentMarkerPosition={markerId:a.id,index:n},a}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),r=i?.getAttribute("data-marker-id");if(!i||!r)return;let a=this.markerComments[r]||[];if(0===a.length)return;let l=t.getAttribute("data-marker-navigation-comment-id"),o=a.findIndex(e=>e.id===l);if(-1===o)return;let s=o===a.length-1;switch(e){case"ArrowDown":if(s)return;n=o+1;break;case"ArrowUp":if(0===o)return;n=o-1;break;default:return}let d=a[n];if(d)return this.currentMarkerCommentPosition={markerId:d.id,index:n},d}constructor(e,t,n){if((0,e2._)(this,"markers",void 0),(0,e2._)(this,"markerComments",null),(0,e2._)(this,"currentMarkerPosition",null),(0,e2._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){const e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}}function e4({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous"}){let r=(0,l.useRef)(void 0),a=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{a.current=new e3(t,r.current?.focusedMarker?.id||void 0),r.current=a.current},[t]);let o=(0,l.useCallback)((e,t,n)=>{let i=n.key,r=!e6(t)&&!e5(t)&&!te(t)&&!e7(t);switch(!0){case r&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return e9(t)||e8(t)||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(a.current&&e6(t)){let e=a.current.moveToNextMarker(i,e8(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(a.current&&e7(t)){let e=a.current.moveToNextMarker(i,e7(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(a.current&&te(t)){let e=a.current.moveToNextMarkerItem(i,te(t));if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0;return t}if(a.current&&e5(t)){let e=a.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(e5(t))return e9(t);if(e6(t))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(e6(t))return e8(t);if(e7(t))return e7(t);if(te(t))return te(t);if(e5(t))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[a]);return(0,eZ.G)({containerRef:e,bindKeys:e1,getNextFocusable:o,focusableElementFilter:e=>!n&&!!(e.hasAttribute("data-marker-id")&&e.hasAttribute("data-marker-navigation-comment-id")),focusInStrategy:i,disabled:n},[o,n]),{markerNavigator:a}}function e6(e){return!!e?.hasAttribute("data-marker-id")}function e5(e){return!!e?.hasAttribute("data-marker-navigation-comment-id")}function e7(e){return e?.closest("[data-marker-navigation-new-thread]")??void 0}function e8(e){return e?.closest("[data-marker-id]")??void 0}function e9(e){return e?.closest("[data-marker-navigation-comment-id]")??void 0}function te(e){return e?.closest("[data-marker-navigation-thread-reply]")??void 0}var tt=n(68173);let tn="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function ti(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(tn)??[]))t.setAttribute("tabindex","0")}function tr(e){let t,n,i=(0,r.c)(7),{commentSubjectType:a,gridCellId:o,markerRef:s,isThread:d,thread:c}=e,u=void 0!==d&&d,m=H(o);i[0]!==a||i[1]!==m||i[2]!==u||i[3]!==s||i[4]!==c?(t=()=>{let e=null;if(!u||c){if(m)"commit"===a?e=setTimeout(()=>{ti(s.current)},100):ti(s.current);else{var t;t=s.current,t?.setAttribute("aria-hidden","true"),function e(n=0){setTimeout(()=>{let n=Array.from(t?.querySelectorAll("*")??[]),i=Array.from(t?.querySelectorAll(tn)??[]);if(0===i.length)return e(200);for(let e of n)e?.setAttribute("aria-hidden","true");for(let e of i)e.setAttribute("tabindex","-1")},n)}()}return()=>{e&&clearTimeout(e)}}},n=[m,a,s,u,c],i[0]=a,i[1]=m,i[2]=u,i[3]=s,i[4]=c,i[5]=t,i[6]=n):(t=i[5],n=i[6]),(0,l.useEffect)(t,n)}var ta=n(64221);function tl(e){let t,n,a,o,s=(0,r.c)(14),{annotation:d,gridCellId:c,isFirstMarker:u}=e,m=(0,l.useRef)(null),f=H(c);s[0]!==c?(t={commentSubjectType:"pull request",gridCellId:c,markerRef:m},s[0]=c,s[1]=t):t=s[1],tr(t);let h=`annotation_${d.databaseId}`,g=u?"mb-1":"mb-2";s[2]!==g?(n=(0,b.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",g,"InlineAnnotation-module__inlineAnnotation__ww6B1"),s[2]=g,s[3]=n):n=s[3];let p=`annotation-${d.id}`,v=`${d.id}`,y=f?0:-1;return s[4]!==d?(a=(0,i.jsx)(ta.YH,{annotation:d}),s[4]=d,s[5]=a):a=s[5],s[6]!==d.annotationLevel||s[7]!==h||s[8]!==n||s[9]!==p||s[10]!==v||s[11]!==y||s[12]!==a?(o=(0,i.jsx)("div",{id:h,ref:m,className:n,"data-level":d.annotationLevel,"data-testid":p,"data-marker-id":v,tabIndex:y,children:a}),s[6]=d.annotationLevel,s[7]=h,s[8]=n,s[9]=p,s[10]=v,s[11]=y,s[12]=a,s[13]=o):o=s[13],o}tl.displayName="InlineAnnotation";var to=n(33335),ts=n(86280),td=n(16135),tc=n(4925),tu=n(59134),tm=n(14623);function tf(){let e,t,n,a=(0,r.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(tm.E.Visual,{children:(0,i.jsx)(d.AlertIcon,{size:24,className:"fgColor-muted pr-mt-3 pr-mb-3"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(tm.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(tm.E,{border:!0,children:[e,t,(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(tm.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(tm.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})}),a[2]=n):n=a[2],n}tf.displayName="CommentErrorFallback";let th="InlineReviewThread-module__inlineReviewThreadHeading__o7jqD";var tg=n(65512),tp=n(47596),tb=n(41431),tv=n(41626),ty=n(90321),tC=n(97665),tx=n(94747),tL=n(58388),t_=n(1925),tS=n(28629),tN=n(66977),tw=n(27310);function tD(e){let t,n,a,o,s,d,c,u,m,h,p=(0,r.c)(82),{batchingEnabled:b,commentAnchorPrefix:v,lineMarkersKey:y,disableDialogMode:C,enableDialogMode:L,filePath:_,gridCellId:S,isInlineComment:N,isInDialogMode:w,onDeleteLineComment:D,thread:j,threadPositionNumber:I,shouldLimitHeight:k,suggestedChangesConfig:A,viewerData:E,ghostUser:T}=e,R=void 0===k||k,[O,$]=(0,l.useState)(!1),[M,F]=(0,l.useState)(void 0),{sendAnalyticsEvent:B}=(0,td.s)(),P=(0,x.Kp)(),H=(0,l.useRef)(null),K=(0,l.useRef)(null),{mutate:U}=function(e,t){let n,i,a,l=(0,r.c)(13),o=(0,x.Kp)(),s=(0,tC.jE)(),d=`${o}/page_data/${tv.uT.createReviewComment}`,{updateThread:c}=(0,x.an)(),{addPendingComment:u,clearPendingReview:m}=(0,x._N)();return l[0]!==d?(n=async e=>{let t=await (0,tL.Sr)(`${d}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,ty.hp)(t);return(0,ty.R)(t,n),n},l[0]=d,l[1]=n):n=l[1],l[2]!==u||l[3]!==o||l[4]!==m||l[5]!==e||l[6]!==t||l[7]!==s||l[8]!==c?(i=(n,i)=>(void 0!==i.submitBatch&&!i.submitBatch&&n.thread&&u(Number(n.thread.id)),i.submitBatch&&m(),c(Number(n.thread.id),e,t,e=>n.thread),s.invalidateQueries({queryKey:(0,t_.XG)(o)})),l[2]=u,l[3]=o,l[4]=m,l[5]=e,l[6]=t,l[7]=s,l[8]=c,l[9]=i):i=l[9],l[10]!==n||l[11]!==i?(a={mutationFn:n,onSuccess:i},l[10]=n,l[11]=i,l[12]=a):a=l[12],(0,tx.n)(a)}(_,y),{baseOid:V,headOid:q}=(0,x.E4)();p[0]!==U||p[1]!==q||p[2]!==_||p[3]!==B||p[4]!==V||p[5]!==j.commentsData?.comments?(t=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:r}=e,a=j.commentsData?.comments[j.commentsData?.comments.length-1];U({text:t,submitBatch:r,inReplyTo:a?.databaseId,path:_,comparisonEndOid:q,comparisonStartOid:V},{onError:i,onSuccess:e=>{var t;(t=e.comment.databaseId)&&f(t.toString()),n?.()}}),B("comments.add","ADD_COMMENT_BUTTON")},p[0]=U,p[1]=q,p[2]=_,p[3]=B,p[4]=V,p[5]=j.commentsData?.comments,p[6]=t):t=p[6];let z=t;p[7]!==B?(n=()=>{$(!1),F(void 0),B("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),g.cg?.requestAnimationFrame(()=>H.current?.focus())},p[7]=B,p[8]=n):n=p[8];let W=n;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{F(e),$(!0)},p[9]=a):a=p[9];let G=a;if(!j.commentsData||null===j.commentsData.comments||j.commentsData.comments.length<1)return null;p[10]!==j?(o=(0,tS.Lm)(j),p[10]=j,p[11]=o):o=p[11];let X=o;p[12]!==X||p[13]!==j.subjectType?(s=j.subjectType?.toLowerCase()==="line"?{lineRange:X}:void 0,p[12]=X,p[13]=j.subjectType,p[14]=s):s=p[14];let J=s;p[15]!==O?(d=e=>{K.current===e.target&&(O?K.current?.querySelector("textarea")?.focus():H.current?.focus())},p[15]=O,p[16]=d):d=p[16];let Q=d;if(p[17]!==J||p[18]!==P||p[19]!==v||p[20]!==C||p[21]!==L||p[22]!==_||p[23]!==T||p[24]!==S||p[25]!==w||p[26]!==N||p[27]!==y||p[28]!==D||p[29]!==A||p[30]!==j.commentsData.__id||p[31]!==j.commentsData.comments||p[32]!==j.id||p[33]!==j.isResolved||p[34]!==j.positioning?.isOutdated||p[35]!==I||p[36]!==E){let e;p[38]!==J||p[39]!==P||p[40]!==v||p[41]!==C||p[42]!==L||p[43]!==_||p[44]!==T||p[45]!==S||p[46]!==w||p[47]!==N||p[48]!==y||p[49]!==D||p[50]!==A||p[51]!==j.commentsData.__id||p[52]!==j.commentsData.comments.length||p[53]!==j.id||p[54]!==j.isResolved||p[55]!==j.positioning?.isOutdated||p[56]!==I||p[57]!==E?(e=(e,t)=>(function(e,t){return e.reviewVariantType===tt.hH.Automated&&0===t})(e,t)?(0,i.jsx)(ts.t,{fallback:(0,i.jsx)(tN.k,{}),boundaryName:"AutomatedReviewThreadComment",children:(0,i.jsx)(tN.y,{anchorPrefix:v,basePath:P,comment:e,isAnchorable:!0,isInDialogMode:w,isOutdated:j.positioning?.isOutdated,onQuoteReply:G,threadId:j.id,threadPositionNumber:I},e.id)},e.id):(0,i.jsx)(tw.U,{lineMarkersKey:y,isAnchorable:!0,index:t,threadPositionNumber:I,isFirstComment:0===t,isInlineComment:N,isLastChild:t===(j.commentsData?.comments.length??0)-1,anchorPrefix:v,comment:e,commentConnectionId:j.commentsData?.__id,disableDialogMode:C,enableDialogMode:L,filePath:_,gridCellId:S,isInDialogMode:w,isOutdated:j.positioning?.isOutdated,threadId:j.id,onDeleteLineComment:D,onQuoteReply:G,threadCommentCount:j.commentsData?.comments.length,isThreadResolved:!!j.isResolved,suggestedChangesConfig:A,applySuggestedChangesValidationData:J,viewerData:E,ghostUser:T},e.id),p[38]=J,p[39]=P,p[40]=v,p[41]=C,p[42]=L,p[43]=_,p[44]=T,p[45]=S,p[46]=w,p[47]=N,p[48]=y,p[49]=D,p[50]=A,p[51]=j.commentsData.__id,p[52]=j.commentsData.comments.length,p[53]=j.id,p[54]=j.isResolved,p[55]=j.positioning?.isOutdated,p[56]=I,p[57]=E,p[58]=e):e=p[58],c=j.commentsData.comments.map(e),p[17]=J,p[18]=P,p[19]=v,p[20]=C,p[21]=L,p[22]=_,p[23]=T,p[24]=S,p[25]=w,p[26]=N,p[27]=y,p[28]=D,p[29]=A,p[30]=j.commentsData.__id,p[31]=j.commentsData.comments,p[32]=j.id,p[33]=j.isResolved,p[34]=j.positioning?.isOutdated,p[35]=I,p[36]=E,p[37]=c}else c=p[37];return p[59]!==j.reviewCommentsLimit||p[60]!==j.reviewCommentsLimitExceeded?(u=j.reviewCommentsLimitExceeded&&(0,i.jsx)(tb.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(j.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"pr-m-3"}),p[59]=j.reviewCommentsLimit,p[60]=j.reviewCommentsLimitExceeded,p[61]=u):u=p[61],p[62]!==z||p[63]!==b||p[64]!==W||p[65]!==_||p[66]!==Q||p[67]!==w||p[68]!==O||p[69]!==X?.endLineNumber||p[70]!==X?.startLineNumber||p[71]!==M||p[72]!==B||p[73]!==A||p[74]!==j.id||p[75]!==j.viewerCanReply?(m=j.viewerCanReply&&(0,i.jsxs)("div",{id:tp.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":j.id,"data-marker-navigation-comment-id":`${j.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:w?0:-1,onFocus:Q,ref:K,children:[O&&(0,i.jsx)(ey,{startLineNumber:X?.startLineNumber,lineNumber:X?.endLineNumber,batchingEnabled:b,condensed:!1,fileLevelComment:!0,filePath:_,focusOnMount:!0,isReplying:!0,onCancelComment:W,quotedText:M,threadId:j.id,onAddComment:z,suggestedChangesConfig:A}),!O&&(0,i.jsx)(tg.z,{ref:H,onClick:()=>{B("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),$(!0)},children:"Write a reply"})]}),p[62]=z,p[63]=b,p[64]=W,p[65]=_,p[66]=Q,p[67]=w,p[68]=O,p[69]=X?.endLineNumber,p[70]=X?.startLineNumber,p[71]=M,p[72]=B,p[73]=A,p[74]=j.id,p[75]=j.viewerCanReply,p[76]=m):m=p[76],p[77]!==R||p[78]!==m||p[79]!==c||p[80]!==u?(h=(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:"ReviewThread-module__ReviewThreadContainer__TvwhT","data-limit-height":R,children:[c,u,m]})}),p[77]=R,p[78]=m,p[79]=c,p[80]=u,p[81]=h):h=p[81],h}tD.displayName="ReviewThread";var tj=n(61291),tI=n(27262),tk=n(35148),tA=n(94007);function tE(e){if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}var tT=n(48128);function tR(e){let t,n,a,l=(0,r.c)(20),{automatedComment:o,thread:s,filePath:d,lineMarkersKey:c,setErrorMessage:u,setIsCollapsed:m,safeLocalStorage:f}=e,{mutate:h,isPending:g,error:p}=function(e,t){let n,i,a,l,o=(0,r.c)(12),s=(0,x.Kp)();o[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,tA.cj)(),o[0]=n):n=o[0];let d=n,c=(0,tC.jE)(),{updateThread:u}=(0,x.an)();return o[1]!==s?(i=async e=>{let{automatedReviewCommentId:t,reason:n,resolutionNote:i}=e,r=(0,tk.L7I)({basePath:s,automatedReviewCommentId:t}),a=await (0,ty.q$)(r,{method:"PUT",body:{reason:n,resolution_note:i}});(0,ty.R)(a)},o[1]=s,o[2]=i):i=o[2],o[3]!==s||o[4]!==e||o[5]!==t||o[6]!==c||o[7]!==u?(a=(n,i)=>{u(Number(i.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:d,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),c.invalidateQueries({queryKey:(0,t_.XG)(s)})},o[3]=s,o[4]=e,o[5]=t,o[6]=c,o[7]=u,o[8]=a):a=o[8],o[9]!==i||o[10]!==a?(l={mutationFn:i,onSuccess:a},o[9]=i,o[10]=a,o[11]=l):l=o[11],(0,tx.n)(l)}(d,c);l[0]!==o.id||l[1]!==h||l[2]!==f||l[3]!==u||l[4]!==m||l[5]!==s.id?(t=(e,t)=>{let{reason:n,resolutionNote:i}=e,{onSuccess:r}=t;h({automatedReviewCommentId:o.id,threadId:s.id,reason:n,resolutionNote:i},{onError:()=>u("Failed to dismiss"),onSuccess:()=>{r(),m(!0),f.removeItem(`reviewThreadIsCollapsed_${s.id}`)}})},l[0]=o.id,l[1]=h,l[2]=f,l[3]=u,l[4]=m,l[5]=s.id,l[6]=t):t=l[6];let b=t,{mutate:v,isPending:y}=function(e,t){let n,i,a,l=(0,r.c)(11),o=(0,x.Kp)(),s=(0,tC.jE)(),{updateThread:d}=(0,x.an)();return l[0]!==o?(n=async e=>{let{automatedReviewCommentId:t}=e,n=(0,tk.Aav)({basePath:o,automatedReviewCommentId:t}),i=await (0,ty.q$)(n,{method:"PUT"});(0,ty.R)(i)},l[0]=o,l[1]=n):n=l[1],l[2]!==o||l[3]!==e||l[4]!==t||l[5]!==s||l[6]!==d?(i=(n,i)=>{d(Number(i.threadId),e,t,tE),s.invalidateQueries({queryKey:(0,t_.XG)(o)})},l[2]=o,l[3]=e,l[4]=t,l[5]=s,l[6]=d,l[7]=i):i=l[7],l[8]!==n||l[9]!==i?(a={mutationFn:n,onSuccess:i},l[8]=n,l[9]=i,l[10]=a):a=l[10],(0,tx.n)(a)}(d,c);l[7]!==o.id||l[8]!==v||l[9]!==f||l[10]!==u||l[11]!==m||l[12]!==s.id?(n=()=>{v({automatedReviewCommentId:o.id,threadId:s.id},{onError:()=>u("Failed to reopen"),onSuccess:()=>{m(!1),f.removeItem(`reviewThreadIsCollapsed_${s.id}`)}})},l[7]=o.id,l[8]=v,l[9]=f,l[10]=u,l[11]=m,l[12]=s.id,l[13]=n):n=l[13];let C=n,L=g||y;return l[14]!==o||l[15]!==p||l[16]!==b||l[17]!==C||l[18]!==L?(a=(0,i.jsx)(tT.K,{automatedComment:o,dismissError:p,isButtonDisabled:L,onDismiss:b,onReopen:C,className:"p-2 border-top"}),l[14]=o,l[15]=p,l[16]=b,l[17]=C,l[18]=L,l[19]=a):a=l[19],a}function tO(e){let t,n=(0,r.c)(2),{children:a}=e;return n[0]!==a?(t=(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:a}),n[0]=a,n[1]=t):t=n[1],t}function t$({thread:e}){if(void 0===e)return null;let t=e.positioning??e.subject;return void 0!==t&&t.endDiffSide&&t.endLine?t.startLine&&t.startDiffSide&&t.startLine!==t.endLine?tF({positioning:t}):tM({positioning:t}):null}function tM(e){let t,n=(0,r.c)(3),{positioning:a}=e,l="LEFT"===a.endDiffSide?"L":"R",o=a.endLine??"";return n[0]!==l||n[1]!==o?(t=(0,i.jsxs)("h2",{className:th,children:["Comment on line"," ",(0,i.jsxs)(tO,{children:[l,o]})]}),n[0]=l,n[1]=o,n[2]=t):t=n[2],t}function tF(e){let t,n,a,l=(0,r.c)(9),{positioning:o}=e,s="LEFT"===o.startDiffSide?"L":"R",d="LEFT"===o.endDiffSide?"L":"R",c=o.startLine??"";l[0]!==s||l[1]!==c?(t=(0,i.jsxs)(tO,{children:[s,c]}),l[0]=s,l[1]=c,l[2]=t):t=l[2];let u=o.endLine??"";return l[3]!==d||l[4]!==u?(n=(0,i.jsxs)(tO,{children:[d,u]}),l[3]=d,l[4]=u,l[5]=n):n=l[5],l[6]!==t||l[7]!==n?(a=(0,i.jsxs)("h2",{className:th,children:["Comment on lines"," ",t," ","to"," ",n]}),l[6]=t,l[7]=n,l[8]=a):a=l[8],a}function tB(e){let t,n,a,o,s,c,m,f,h,g,p,v,y,C,L,_,S,N,w,D,j,k,A,E,T,R,O,$,M,B,P,K,U=(0,r.c)(99);U[0]!==e?({fileAnchor:t,filePath:n,gridCellId:o,onDeleteLineComment:m,threadId:g,threadPositionNumber:p,lineMarkersKey:c,threadsConnectionId:v,isFirstThread:s,ghostUser:a,suggestedChangesConfig:h,...f}=e,U[0]=e,U[1]=t,U[2]=n,U[3]=a,U[4]=o,U[5]=s,U[6]=c,U[7]=m,U[8]=f,U[9]=h,U[10]=g,U[11]=p,U[12]=v):(t=U[1],n=U[2],a=U[3],o=U[4],s=U[5],c=U[6],m=U[7],f=U[8],h=U[9],g=U[10],p=U[11],v=U[12]);let V=(0,x._W)(g,n,c),{mutate:q}=(0,tj.H)(n,c),z=()=>{V&&(q({threadId:V.id},{onError:()=>Y("Failed to resolve thread"),onSuccess:()=>{en(!0),G.removeItem(`reviewThreadIsCollapsed_${g}`)}}),ed("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},W=(0,l.useRef)(null),G=(0,I.A)("localStorage"),X=V?.isResolved,[J,Q]=(0,l.useState)(""),Y=Q,[Z,et]=(0,l.useState)(X??!1),en=et,ei=H(o),{disableDialogMode:er,enableDialogMode:ea}=F(ee);U[13]!==X||U[14]!==g?(y=[X,g],U[13]=X,U[14]=g,U[15]=y):y=U[15],(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${g}`);null!==e?en(JSON.parse(e)):X&&en(!0)},y);let el=()=>{window.requestAnimationFrame(()=>{G.setItem(`reviewThreadIsCollapsed_${g}`,JSON.stringify(!Z))}),en(tH)};U[16]!==o||U[17]!==V?(C={commentSubjectType:"pull request",gridCellId:o,markerRef:W,isThread:!0,thread:V},U[16]=o,U[17]=V,U[18]=C):C=U[18],tr(C);e:{let e=V?.positioning??V?.subject;if(!e){L=void 0;break e}if(t&&V&&e.startDiffSide&&e.endDiffSide&&e.startLine&&e.endLine&&h?.configureSuggestedChangesFromLineRange){let n,i=e.startLine??e.endLine,r=e.startDiffSide??e.endDiffSide,a="LEFT"===e.endDiffSide?"left":"right",l="LEFT"===r?"left":"right",o="LEFT"===r?"left":"right";if(U[19]!==t||U[20]!==e.endLine||U[21]!==i||U[22]!==h||U[23]!==a||U[24]!==l||U[25]!==o){let r={diffAnchor:t,endLineNumber:e.endLine,endOrientation:a,startLineNumber:i,startOrientation:l,firstSelectedLineNumber:i,firstSelectedOrientation:o};n=h?.configureSuggestedChangesFromLineRange(r),U[19]=t,U[20]=e.endLine,U[21]=i,U[22]=h,U[23]=a,U[24]=l,U[25]=o,U[26]=n}else n=U[26];L=n;break e}L=void 0}let eo=L,{sendAnalyticsEvent:es}=(0,td.s)(),ed=es,{mutate:ec}=(0,tI.i)(n,c);U[27]!==G||U[28]!==ed||U[29]!==Y||U[30]!==en||U[31]!==V||U[32]!==ec?(_=()=>{V&&(ec({threadId:V.id},{onError:()=>Y("Failed to unresolve thread"),onSuccess:()=>{en(!1),G.removeItem(`reviewThreadIsCollapsed_${V.id}`)}}),ed("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},U[27]=G,U[28]=ed,U[29]=Y,U[30]=en,U[31]=V,U[32]=ec,U[33]=_):_=U[33];let eu=_,em=V?.commentsData?.comments[0]?.reviewVariantType===tt.hH.Automated,ef=em?V.commentsData?.comments[0]?.automatedComment:null,eh=ef&&ef.dismissable,eg=ef&&ef.source===tt.vk.LicenseCompliance;if(!V||!((V.commentsData?.comments?.length??0)>0))return null;let ep=!!V.isResolved;U[34]===Symbol.for("react.memo_cache_sentinel")?(S=(0,tA.M3)(),U[34]=S):S=U[34];let eb=S;U[35]!==V.commentsData?.comments?(N=eb&&V.commentsData?.comments?.some(tP),U[35]=V.commentsData?.comments,U[36]=N):N=U[36];let ev=N,ey=V.commentsData?.comments?.[0]?.createdAt,ex=V.commentsData?.comments?.[0]?.author?.login??"Unknown Author",eL=`${X?"Unresolve":"Resolve"} comment`;if(ey){let e;U[37]!==ey?(e=(0,to.C)(new Date(ey)),U[37]=ey,U[38]=e):e=U[38];let t=e;eL=`${X?"Unresolve":"Resolve"} ${ex}'s comment, ${t}`}U[39]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(tf,{}),U[39]=w):w=U[39],U[40]===Symbol.for("react.memo_cache_sentinel")?(D=(0,b.$)("px-1","InlineReviewThread-module__ReviewThreadContainer__iFcNZ"),U[40]=D):D=U[40];let e_=Z?"Expand comment":"Collapse comment",eS=Z?d.ChevronRightIcon:d.ChevronDownIcon;return U[41]!==el||U[42]!==s||U[43]!==e_||U[44]!==eS?(j=(0,i.jsx)(u.K,{"aria-label":e_,icon:eS,size:"small",variant:"invisible",onClick:el,"data-is-first-collapse-button":s}),U[41]=el,U[42]=s,U[43]=e_,U[44]=eS,U[45]=j):j=U[45],U[46]!==V?(k=(0,i.jsx)(t$,{thread:V}),U[46]=V,U[47]=k):k=U[47],U[48]!==V.positioning?.isOutdated?(A=V.positioning?.isOutdated&&(0,i.jsx)(tc.A,{variant:"secondary",children:"Outdated"}),U[48]=V.positioning?.isOutdated,U[49]=A):A=U[49],U[50]!==em||U[51]!==ep?(E=ep&&!em&&(0,i.jsx)(tc.A,{variant:"secondary",children:"Resolved"}),U[50]=em,U[51]=ep,U[52]=E):E=U[52],U[53]!==ef?.isDismissed?(T=ef?.isDismissed&&(0,i.jsx)(tc.A,{variant:"secondary",children:"Dismissed"}),U[53]=ef?.isDismissed,U[54]=T):T=U[54],U[55]!==A||U[56]!==E||U[57]!==T?(R=(0,i.jsxs)("div",{className:"InlineReviewThread-module__ResolvableContainer__hBgdw",children:[A,E,T]}),U[55]=A,U[56]=E,U[57]=T,U[58]=R):R=U[58],U[59]!==j||U[60]!==k||U[61]!==R?(O=(0,i.jsxs)("div",{className:D,children:[j,k,R]}),U[59]=j,U[60]=k,U[61]=R,U[62]=O):O=U[62],U[63]===Symbol.for("react.memo_cache_sentinel")?($=(0,i.jsxs)("div",{className:"InlineReviewThread-module__ThreadLoading__JOBQj",children:[(0,i.jsx)(eB.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),U[63]=$):$=U[63],U[64]!==J?(M=J&&(0,i.jsxs)(tu.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(d.StopIcon,{className:"mr-2"}),J]}),U[64]=J,U[65]=M):M=U[65],U[66]!==ef||U[67]!==eo||U[68]!==er||U[69]!==eh||U[70]!==ea||U[71]!==n||U[72]!==a||U[73]!==o||U[74]!==z||U[75]!==eu||U[76]!==Z||U[77]!==ei||U[78]!==ev||U[79]!==X||U[80]!==ep||U[81]!==eg||U[82]!==c||U[83]!==m||U[84]!==eL||U[85]!==f||U[86]!==G||U[87]!==Y||U[88]!==en||U[89]!==V||U[90]!==p||U[91]!==v?(B=!Z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tD,{lineMarkersKey:c,disableDialogMode:er,enableDialogMode:ea,filePath:n,gridCellId:o,onDeleteLineComment:m,isInlineComment:!0,isInDialogMode:ei,thread:V,threadPositionNumber:p,threadsConnectionId:v,suggestedChangesConfig:eo,shouldLimitHeight:!1,...f,ghostUser:a}),ev&&!eh&&!eg&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eC.Q,{"aria-label":eL,onClick:ep?eu:z,className:"mr-2",children:X?"Unresolve comment":"Resolve comment"}),ep&&V.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:V.resolvedBy})," marked this comment as resolved"]})]}),eh&&(0,i.jsx)(tR,{automatedComment:ef,thread:V,filePath:n,lineMarkersKey:c,setErrorMessage:Y,setIsCollapsed:en,safeLocalStorage:G})]}),U[66]=ef,U[67]=eo,U[68]=er,U[69]=eh,U[70]=ea,U[71]=n,U[72]=a,U[73]=o,U[74]=z,U[75]=eu,U[76]=Z,U[77]=ei,U[78]=ev,U[79]=X,U[80]=ep,U[81]=eg,U[82]=c,U[83]=m,U[84]=eL,U[85]=f,U[86]=G,U[87]=Y,U[88]=en,U[89]=V,U[90]=p,U[91]=v,U[92]=B):B=U[92],U[93]!==M||U[94]!==B?(P=(0,i.jsxs)(l.Suspense,{fallback:$,children:[M,B]}),U[93]=M,U[94]=B,U[95]=P):P=U[95],U[96]!==O||U[97]!==P?(K=(0,i.jsx)(ts.t,{boundaryName:"InlineReviewThread",fallback:w,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:W,children:[O,P]})}),U[96]=O,U[97]=P,U[98]=K):K=U[98],K}function tP(e){return e.state?.toUpperCase()!=="PENDING"}function tH(e){return!e}tR.displayName="InlineAutomatedReviewThreadActions",tO.displayName="Emphasis",t$.displayName="ThreadBanner",tM.displayName="SingleLineThreadBanner",tF.displayName="MultineLineThreadBanner",tB.displayName="InlineReviewThread";var tK=n(18127),tU=n(99589);function tV(e,t){let n,i,a,l,o=(0,r.c)(16),{sendAnalyticsEvent:s}=(0,td.s)(),d=F(z),c=(0,x.ww)(),u=F(J),{isServer:m}=(0,tU.V)();o[0]!==d||o[1]!==e?(n=function(t){var n;let i;if(!t||t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation)return"DELETION"!==e.type;let r="right"===t.startOrientation&&"right"===t.endOrientation,a=d(t)?.selectedRightLines[0],l=a&&(0,w.qK)(a)&&(0,w.Ji)(a);return!!r&&!l||(n=t,!(i=d(n)?.selectedLeftLines)||!(i.length>0)||i.every(tq))},o[0]=d,o[1]=e,o[2]=n):n=o[2],o[3]!==d||o[4]!==m||o[5]!==e?(i=function(t){let n=t?d(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return m?"":(0,w.Ls)(n);if(!e)return"";let[i]=(0,w.dv)(e.text,e.type);return i},o[3]=d,o[4]=m,o[5]=e,o[6]=i):i=o[6];let f=i;o[7]!==f||o[8]!==c||o[9]!==n||o[10]!==s?(a=function(e,t){let i=!!(n(e)&&!c);return{isValidSuggestionRange:i,showSuggestChangesButton:i,sourceContentFromDiffLines:i?f(e):void 0,onInsertSuggestedChange:()=>{s("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:t}},o[7]=f,o[8]=c,o[9]=n,o[10]=s,o[11]=a):a=o[11];let h=(0,tK.K)(a);return o[12]!==h||o[13]!==u||o[14]!==t?(l={getSelectedLineRange:u,configureSuggestedChangesFromLineRange:h,shouldStartNewConversationWithSuggestedChange:t},o[12]=h,o[13]=u,o[14]=t,o[15]=l):l=o[15],l}function tq(e){return"empty-diff-line"!==e&&"DELETION"!==e.type}let tz={[tt.UZ.Failure]:0,[tt.UZ.Warning]:1,[tt.UZ.Notice]:2};function tW(e){let t,n=(0,r.c)(2);return n[0]!==e?(t=(0,i.jsx)(eY.j,{children:(0,i.jsx)(tG,{...e})}),n[0]=e,n[1]=t):t=n[1],t}function tG(e){let t,n,a,o,s,c,m,f,h,p,v,y,C,L,_,S,N,w,D,j,I,k,A,E,T,R,O,$,M,B,P,K,U,V,q,z,W=(0,r.c)(108);if(W[0]!==e){let{annotations:i,cellRef:r,diffLine:l,dispatchMarkersStatus:d,children:u,conversationListThreads:g,inlineMarkersRef:b,isRowSelected:x,lineMarkersKey:j,fileAnchor:I,filePath:k,gridCellId:A,gutterSizeOffset:E,lineType:T,onCloseConversationList:R,onCloseFocusMode:O,onDeleteLineComment:$,threadsConnectionId:M,shouldStartNewConversationWithSuggestedChange:F,ghostUser:B,shouldListenForEscapeKey:P,...H}=e;t=i,n=r,s=l,c=d,a=u,o=g,y=b,C=j,m=I,f=k,p=A,v=E,L=O,_=$,D=M,w=F,h=B,N=P,S=H,W[0]=e,W[1]=t,W[2]=n,W[3]=a,W[4]=o,W[5]=s,W[6]=c,W[7]=m,W[8]=f,W[9]=h,W[10]=p,W[11]=v,W[12]=y,W[13]=C,W[14]=L,W[15]=_,W[16]=S,W[17]=N,W[18]=w,W[19]=D}else t=W[1],n=W[2],a=W[3],o=W[4],s=W[5],c=W[6],m=W[7],f=W[8],h=W[9],p=W[10],v=W[11],y=W[12],C=W[13],L=W[14],_=W[15],S=W[16],N=W[17],w=W[18],D=W[19];let G=H(p),{disableDialogMode:X,enableDialogMode:J}=F(ee),Q=function(e,t,n){let i,a=(0,r.c)(5),{enableDialogMode:l}=F(ee);return a[0]!==t||a[1]!==n||a[2]!==l||a[3]!==e?(i=(i,r)=>{t.current?.classList.contains("diff-text-cell")&&(l(e),n("USER_EXPANDED_MARKERS"),(void 0===i?{shouldFocusFirstMarker:!0}:i).shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):r&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${r}"]`)?.focus()},0))},a[0]=t,a[1]=n,a[2]=l,a[3]=e,a[4]=i):i=a[4],i}(p,n,c),Y=tV(s,w),Z=(0,l.useRef)(null);W[20]!==t?(j=[...t].sort(tY),W[20]=t,W[21]=j):j=W[21];let et=j;e:{let e;if(a){let e,t;W[22]===Symbol.for("react.memo_cache_sentinel")?(e={id:"new-comment"},W[22]=e):e=W[22],W[23]!==o||W[24]!==et?(t=[...o,e,...et],W[23]=o,W[24]=et,W[25]=t):t=W[25],I=t;break e}W[26]!==o||W[27]!==et?(e=[...o,...et],W[26]=o,W[27]=et,W[28]=e):e=W[28],I=e}let en=I,ei=tQ;W[29]!==X||W[30]!==p||W[31]!==L||W[32]!==N?(k=e=>{let t=e.target,n=e.target,i=n.closest(`[data-grid-cell-id=${p}]`);if(N&&i?.contains(t)&&e?.key==="Escape"){L(),X(),i?.focus();return}if(i?.contains(t)&&"true"===n.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),i?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(i?.contains(t)&&"true"===n.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),i?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}},W[29]=X,W[30]=p,W[31]=L,W[32]=N,W[33]=k):k=W[33];let er=k;W[34]!==J||W[35]!==p||W[36]!==G?(A=e=>{ei(e),G||J(p)},W[34]=J,W[35]=p,W[36]=G,W[37]=A):A=W[37];let ea=A;W[38]!==X||W[39]!==G?(E=e=>{e.target&&G&&(e.target.closest("[data-inline-markers]")||X())},W[38]=X,W[39]=G,W[40]=E):E=W[40];let el=E;W[41]!==el?(T=()=>(g.XC?.addEventListener("mousedown",el),()=>g.XC?.removeEventListener("mousedown",el)),R=[el],W[41]=el,W[42]=T,W[43]=R):(T=W[42],R=W[43]),(0,l.useEffect)(T,R);let eo=(0,x.mF)(),es=(0,l.useRef)(null);W[44]!==t||W[45]!==o||W[46]!==Q||W[47]!==eo?(O=()=>{if(eo&&es.current!==eo){let e=o.map(tJ),n=t.map(tX);(e.includes(eo)||n.includes(eo))&&(es.current=eo,Q({shouldFocusFirstMarker:!1},eo))}},$=[eo,Q,o,t],W[44]=t,W[45]=o,W[46]=Q,W[47]=eo,W[48]=O,W[49]=$):(O=W[48],$=W[49]),(0,l.useEffect)(O,$);let ed=!G;W[50]!==en||W[51]!==ed?(M={containerRef:Z,markers:en,disabled:ed},W[50]=en,W[51]=ed,W[52]=M):M=W[52],e4(M);let ec=G?"InlineMarkers-module__markersDialogActive__gXOXF":"";W[53]!==ec?(B=(0,b.$)("d-flex pt-1",ec),W[53]=ec,W[54]=B):B=W[54];let eu=`-${v}`;W[55]!==eu?(P={marginRight:eu},W[55]=eu,W[56]=P):P=W[56];let em=G?"false":"true";if(W[57]!==o||W[58]!==m||W[59]!==f||W[60]!==h||W[61]!==p||W[62]!==G||W[63]!==C||W[64]!==en||W[65]!==_||W[66]!==S||W[67]!==Y||W[68]!==D){let e;W[70]!==m||W[71]!==f||W[72]!==h||W[73]!==p||W[74]!==G||W[75]!==C||W[76]!==en||W[77]!==_||W[78]!==S||W[79]!==Y||W[80]!==D?(e=(e,t)=>(0,i.jsx)("div",{className:(0,b.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===en.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:G?0:-1,children:(0,i.jsx)(tB,{threadPositionNumber:t+1,isFirstThread:0===t,filePath:f,lineMarkersKey:C,fileAnchor:m,gridCellId:p,onDeleteLineComment:_,threadId:e.id,threadsConnectionId:D,suggestedChangesConfig:Y,ghostUser:h,...S})},`review-thread-${e.id}`),W[70]=m,W[71]=f,W[72]=h,W[73]=p,W[74]=G,W[75]=C,W[76]=en,W[77]=_,W[78]=S,W[79]=Y,W[80]=D,W[81]=e):e=W[81],K=o.map(e),W[57]=o,W[58]=m,W[59]=f,W[60]=h,W[61]=p,W[62]=G,W[63]=C,W[64]=en,W[65]=_,W[66]=S,W[67]=Y,W[68]=D,W[69]=K}else K=W[69];if(W[82]!==p||W[83]!==en||W[84]!==et){let e;W[86]!==p||W[87]!==en?(e=(e,t)=>{let n=0===t&&e===en[0];return(0,i.jsx)(tl,{annotation:e,gridCellId:p,isFirstMarker:n},`annotation-${e.id}`)},W[86]=p,W[87]=en,W[88]=e):e=W[88],U=et.map(e),W[82]=p,W[83]=en,W[84]=et,W[85]=U}else U=W[85];return W[89]!==a||W[90]!==K||W[91]!==U?(V=(0,i.jsxs)("div",{className:"InlineMarkers-module__markersWrapper__g3Aig",ref:Z,children:[K,a,U]}),W[89]=a,W[90]=K,W[91]=U,W[92]=V):V=W[92],W[93]!==n||W[94]!==o.length||W[95]!==X||W[96]!==G||W[97]!==L?(q=G&&(0,i.jsx)(u.K,{icon:d.UndoIcon,className:(0,b.$)("InlineMarkers-module__closeMarkersDialogButton__Re5bj","ml-2 position-relative",0===o.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:()=>{L(),X(),n.current?.focus()},onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&(L(),X(),n.current?.focus())}}),W[93]=n,W[94]=o.length,W[95]=X,W[96]=G,W[97]=L,W[98]=q):q=W[98],W[99]!==ea||W[100]!==er||W[101]!==y||W[102]!==B||W[103]!==P||W[104]!==em||W[105]!==V||W[106]!==q?(z=(0,i.jsxs)("div",{className:B,style:P,"aria-hidden":em,onFocus:ea,onClick:ei,onKeyDown:er,onKeyUp:ei,onMouseDown:ei,onMouseUp:ei,"data-inline-markers":!0,ref:y,children:[V,q]}),W[99]=ea,W[100]=er,W[101]=y,W[102]=B,W[103]=P,W[104]=em,W[105]=V,W[106]=q,W[107]=z):z=W[107],z}function tX(e){return e.id}function tJ(e){return e.id}function tQ(e){return e.stopPropagation()}function tY(e,t){return tz[e.annotationLevel]-tz[t.annotationLevel]}function tZ(e){let t,n=(0,r.c)(4),{line:i,isRowSelected:a}=e,l=F(es);e:{let e;if(!a){let e;n[0]!==i?(e=!!i&&(0,w.xB)(i),n[0]=i,n[1]=e):e=n[1],t=e;break e}n[2]!==l?(e=l(),n[2]=l,n[3]=e):e=n[3],t=e}return t}tW.displayName="InlineMarkers",tG.displayName="InlineMarkersInternal";var t0=n(88126);function t1(){let e,t,n,i=(0,r.c)(12),a=(0,x.Kp)(),l=(0,tC.jE)(),s=`${a}/page_data/${tv.uT.createReviewComment}`,{updateThread:d}=(0,x.an)(),{onCommentThreadAdded:c}=(0,x.Ud)(),{addPendingComment:u,clearPendingReview:m}=(0,x._N)();return i[0]!==s?(e=async e=>{let t=await (0,tL.Sr)(`${s}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,ty.hp)(t);return(0,ty.R)(t,n),n},i[0]=s,i[1]=e):e=i[1],i[2]!==u||i[3]!==a||i[4]!==m||i[5]!==c||i[6]!==l||i[7]!==d?(t=(e,t)=>{let n=t.subjectType===o.Wr.File?"FILE":"right"===t.side?`R${t.line}`:`L${t.line}`,i=t.startSide&&t.startLine?"right"===t.startSide?`R${t.startLine}`:`L${t.startLine}`:void 0;void 0!==t.submitBatch&&!t.submitBatch&&e.thread&&u(Number(e.thread.id)),t.submitBatch&&m(),d(Number(e.thread.id),t.path,n,()=>{let n=(0,t0.YY)(t);return e.thread.subject=n,e.thread.positioning=n,e.thread}),c({path:t.path,diffLineKey:n,startPosition:i,threadID:e.thread.id}),l.invalidateQueries({queryKey:(0,t_.XG)(a)})},i[2]=u,i[3]=a,i[4]=m,i[5]=c,i[6]=l,i[7]=d,i[8]=t):t=i[8],i[9]!==e||i[10]!==t?(n={mutationFn:e,onSuccess:t},i[9]=e,i[10]=t,i[11]=n):n=i[11],(0,tx.n)(n)}var t2=n(35750),t3=n(18150),t4=n(85242),t6=n(88243),t5=n(16213),t7=new WeakMap,t8=new WeakMap,t9=new WeakMap,ne=new WeakMap,nt=new WeakMap,nn=new WeakMap,ni=new WeakMap,nr=new WeakSet,na=new WeakSet,nl=new WeakSet;class no{fileRequestData(){return{...(0,t6._)(this,nl,nc).call(this),path:(0,t2._)(this,t8),subjectType:o.Wr.File}}lineRequestData(e){let{lineNumber:t,side:n}=e;return{...(0,t6._)(this,nl,nc).call(this),line:t,path:(0,t6._)(this,nr,ns).call(this,n),positioning:{type:o.Wr.Line,baseCommitOid:(0,t2._)(this,t7),headCommitOid:(0,t2._)(this,t9),path:(0,t6._)(this,nr,ns).call(this,n),line:t,commitOid:(0,t6._)(this,na,nd).call(this,n)},side:n,subjectType:o.Wr.Line}}multilineRequestData(e){let{endLineNumber:t,endSide:n,startLineNumber:i,startSide:r}=e;return{...(0,t6._)(this,nl,nc).call(this),line:t,path:(0,t6._)(this,nr,ns).call(this,n),positioning:{baseCommitOid:(0,t2._)(this,t7),headCommitOid:(0,t2._)(this,t9),type:o.Wr.Multiline,startPath:(0,t6._)(this,nr,ns).call(this,r),startLine:i,startCommitOid:(0,t6._)(this,na,nd).call(this,r),endPath:(0,t6._)(this,nr,ns).call(this,n),endLine:t,endCommitOid:(0,t6._)(this,na,nd).call(this,n)},side:n,startLine:i,startSide:r,subjectType:o.Wr.Multiline}}constructor({filePath:e,newTreeEntry:t,oldTreeEntry:n,effectiveDiffRange:i,submitBatch:r,text:a}){(0,t5._)(this,nr),(0,t5._)(this,na),(0,t5._)(this,nl),(0,t3._)(this,t7,{writable:!0,value:void 0}),(0,t3._)(this,t8,{writable:!0,value:void 0}),(0,t3._)(this,t9,{writable:!0,value:void 0}),(0,t3._)(this,ne,{writable:!0,value:void 0}),(0,t3._)(this,nt,{writable:!0,value:void 0}),(0,t3._)(this,nn,{writable:!0,value:void 0}),(0,t3._)(this,ni,{writable:!0,value:void 0}),(0,t4._)(this,t7,i.baseOid),(0,t4._)(this,t8,e),(0,t4._)(this,t9,i.headOid),(0,t4._)(this,ne,t),(0,t4._)(this,nt,n),(0,t4._)(this,nn,r),(0,t4._)(this,ni,a)}}function ns(e){return"left"===e&&(0,t2._)(this,nt)?.path&&(0,t2._)(this,ne)?.path&&(0,t2._)(this,nt).path!==(0,t2._)(this,ne).path?(0,t2._)(this,nt).path:(0,t2._)(this,t8)}function nd(e){return"left"===e?(0,t2._)(this,t7):(0,t2._)(this,t9)}function nc(){return{comparisonEndOid:(0,t2._)(this,t9),comparisonStartOid:(0,t2._)(this,t7),text:(0,t2._)(this,ni),submitBatch:(0,t2._)(this,nn)}}function nu(e){let t,n,a,o,s,d,c,u,m,f,h,g,p,b,v,y,C=(0,r.c)(45);if(C[0]!==e){let{diffAnchor:i,isInDialogMode:r,isLeftSide:l,isOpen:f,isRowSelected:h,onCloseCommentDialog:g,onCommentCreated:p,diffLine:b,shouldStartNewConversationWithSuggestedChange:v,...y}=e;n=r,a=l,o=f,s=h,d=g,c=p,t=b,m=v,u=y,C[0]=e,C[1]=t,C[2]=n,C[3]=a,C[4]=o,C[5]=s,C[6]=d,C[7]=c,C[8]=u,C[9]=m}else t=C[1],n=C[2],a=C[3],o=C[4],s=C[5],d=C[6],c=C[7],u=C[8],m=C[9];let{sendAnalyticsEvent:L}=(0,td.s)(),_=(0,l.useRef)(null),S=F(J);C[10]!==t||C[11]!==a||C[12]!==s?(f={line:t,isLeftSide:a,isRowSelected:s},C[10]=t,C[11]=a,C[12]=s,C[13]=f):f=C[13];let N=function(e){let t,n,i,a,l,o,s=(0,r.c)(18),{line:d,isLeftSide:c,isRowSelected:u}=e,m=F(W),f=F(J);s[0]!==u||s[1]!==d?(t={line:d,isRowSelected:u},s[0]=u,s[1]=d,s[2]=t):t=s[2];let h=tZ(t);e:{let e,t;if(!u){n=d.blobLineNumber;break e}s[3]!==f?(e=f(),s[3]=f,s[4]=e):e=s[4];let i=e;if(!i){n=d.blobLineNumber;break e}if(!c){n=i.endLineNumber;break e}if(!h){n=i.endLineNumber??d.blobLineNumber;break e}if(s[5]!==m){let e=m();t=(0,w.Lp)(e),s[5]=m,s[6]=t}else t=s[6];let r=t.leftLines,a=r[r.length-1];n=a?.blobLineNumber??d.blobLineNumber}let g=n;t:{let e,t;if(!u){i=void 0;break t}s[7]!==f?(e=f(),s[7]=f,s[8]=e):e=s[8];let n=e;if(!n){i=void 0;break t}if(!c){i=n.startLineNumber;break t}if(!h){i=n?.startLineNumber;break t}if(s[9]!==m){let e=m();t=(0,w.Lp)(e),s[9]=m,s[10]=t}else t=s[10];let r=t.leftLines[0];i=r?.blobLineNumber}let p=i;n:{if(!d||!(0,w.xB)(d)){a=c;break n}if(!u||h){a=!1;break n}let e=f();a=e?"left"===e.endOrientation:c}let b=a;i:{if(!u){l=c;break i}if(h){l=!1;break i}let e=f();l=e?"left"===e.startOrientation:c}let v=l,y=!!p&&p!==g,C=p??void 0,x=b?"left":"right",L=y?v?"left":"right":void 0;return s[11]!==h||s[12]!==y||s[13]!==g||s[14]!==C||s[15]!==x||s[16]!==L?(o={lineNumber:g,startLineNumber:C,side:x,startSide:L,isMultiline:y,allLinesAreRetargetable:h},s[11]=h,s[12]=y,s[13]=g,s[14]=C,s[15]=x,s[16]=L,s[17]=o):o=s[17],o}(f),D=tV(t,m),{newTreeEntry:j,oldTreeEntry:I}=F(ea),{effectiveRange:k}=(0,x.L3)(),{baseOid:A,headOid:E}=(0,x.E4)(),T=(0,eT.u)("cotd_ui"),R=function(e){let t;if(e.isMultiline){let n="left"===e.startSide?"L":"R",i="left"===e.side?"L":"R";t=` lines ${n}${e.startLineNumber} to ${i}${e.lineNumber}`}else{let n="left"===e.side?"L":"R";t=` line ${n}${e.lineNumber}`}return t}(N),{mutate:O}=t1();C[14]!==T||C[15]!==O||C[16]!==t||C[17]!==k||C[18]!==E||C[19]!==j||C[20]!==I||C[21]!==c||C[22]!==u||C[23]!==N||C[24]!==A?(h=e=>{let{onCompleted:n,onError:i,submitBatch:r,text:a}=e;if(t)if(T){let e=new no({filePath:u.filePath,newTreeEntry:j,oldTreeEntry:I,effectiveDiffRange:k,submitBatch:r,text:a});O(N.isMultiline?e.multilineRequestData({startLineNumber:N.startLineNumber,startSide:N.startSide,endLineNumber:N.lineNumber,endSide:N.side}):e.lineRequestData({lineNumber:N.lineNumber,side:N.side}),{onError:i,onSuccess:e=>{n?.(e.thread.id,e.comment?.databaseId),c?.()}})}else O({text:a,line:N.lineNumber,path:u.filePath,side:N.side,startSide:N.startSide,submitBatch:r,startLine:N.startLineNumber,comparisonEndOid:E,comparisonStartOid:A},{onError:i,onSuccess:e=>{n?.(e.thread.id,e.comment?.databaseId),c?.()}})},C[14]=T,C[15]=O,C[16]=t,C[17]=k,C[18]=E,C[19]=j,C[20]=I,C[21]=c,C[22]=u,C[23]=N,C[24]=A,C[25]=h):h=C[25];let $=h;e:{if(o&&D?.configureSuggestedChangesFromLineRange){let e;if(C[26]!==S||C[27]!==D){let t=S();e=D.configureSuggestedChangesFromLineRange(t,D?.shouldStartNewConversationWithSuggestedChange),C[26]=S,C[27]=D,C[28]=e}else e=C[28];g=e;break e}g=void 0}let M=g;if(!o)return null;C[29]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{e.target===_.current&&_.current.querySelector("textarea")?.focus()},C[29]=p):p=C[29];let B=p,P=n?0:-1;C[30]!==d||C[31]!==L?(b=e=>{d(e),L("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},C[30]=d,C[31]=L,C[32]=b):b=C[32];let H="left"===N.side;return C[33]!==R||C[34]!==M||C[35]!==$||C[36]!==u||C[37]!==N.lineNumber||C[38]!==N.startLineNumber||C[39]!==b||C[40]!==H?(v=(0,i.jsx)(eR,{onClose:b,showOnCloseIcon:!1,suggestedChangesConfig:M,onAddComment:$,addCommentDialogTitle:R,lineNumber:N.lineNumber,startLineNumber:N.startLineNumber,isLeftSide:H,...u}),C[33]=R,C[34]=M,C[35]=$,C[36]=u,C[37]=N.lineNumber,C[38]=N.startLineNumber,C[39]=b,C[40]=H,C[41]=v):v=C[41],C[42]!==P||C[43]!==v?(y=(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:_,tabIndex:P,onFocus:B,children:v}),C[42]=P,C[43]=v,C[44]=y):y=C[44],y}nu.displayName="StartConversation";let nm="ActionBar-module__actionBarHeight__dwJkU";var nf=n(66768);function nh(e){let t,n=(0,r.c)(4),{authorAvatarUrl:a,authorLogin:l,lineSpacingPreference:o}=e,s="compact"===o?18:20,c=`${l}'s avatar image with pending indicator`;return n[0]!==a||n[1]!==s||n[2]!==c?(t=(0,i.jsx)(nf.k,{altText:c,icon:d.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:s,src:a,backgroundClassName:"InProgressCommentIndicator-module__statusAvatarBackground__yiUfi",className:"InProgressCommentIndicator-module__statusAvatar__eRTUu"}),n[0]=a,n[1]=s,n[2]=c,n[3]=t):t=n[3],t}nh.displayName="InProgressCommentIndicator";var ng=n(46937),np=n(99159),nb=n(58625);function nv(e){let t,n,a,l=(0,r.c)(13),{hasDraftComment:o,handleMouseLeaveAddCommentButton:s,handleMouseDownAddCommentButton:c,lineSpacingPreference:u,openStartConversationDialog:m,authorLogin:f,authorAvatarUrl:h}=e,{sendAnalyticsEvent:g}=(0,td.s)(),p=(0,nb.J)();l[0]!==p||l[1]!==m||l[2]!==g?(t=e=>{let t=p();(0,ng.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{g("diff-lines.inp_interaction","PRS_ADD_COMMENT_BUTTON_CLICK",{latency:e.latency}),(0,np.au)({name:"PRS_ADD_COMMENT_BUTTON_CLICK",tags:t,value:e.latency})}}),m()},l[0]=p,l[1]=m,l[2]=g,l[3]=t):t=l[3];let v=t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,b.$)("d-flex","flex-row","ActionBar-module__addCommentButton__Z5ZZ6"),l[4]=n):n=l[4],l[5]!==h||l[6]!==f||l[7]!==c||l[8]!==s||l[9]!==v||l[10]!==o||l[11]!==u?(a=(0,i.jsx)("div",{"aria-hidden":!1,className:n,children:o?(0,i.jsx)(eC.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,b.$)("py-0","compact"===u?"ActionBar-module__addCommentButtonDraftCompact__m_rxJ":"ActionBar-module__addCommentButtonDraftRelaxed__tVF5m",nm),onClick:v,onKeyDown:ny,children:(0,i.jsx)(nh,{lineSpacingPreference:u,authorAvatarUrl:h,authorLogin:f})}):(0,i.jsx)(eC.Q,{icon:d.PlusIcon,"aria-label":"Add comment",size:"small","data-add-comment-button":!0,className:(0,b.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0","ActionBar-module__addCommentButtonNew__mlYWD",nm,"ActionBar-module__actionBarStartCommentWidth__pPdJV"),onKeyDown:ny,onClick:v,onMouseDown:c,onMouseLeave:s,onMouseUp:v})}),l[5]=h,l[6]=f,l[7]=c,l[8]=s,l[9]=v,l[10]=o,l[11]=u,l[12]=a):a=l[12],a}function ny(e){"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),e.currentTarget.closest("td")?.focus())}nv.displayName="SimpleAddCommentButton";var nC=n(47819),nx=n(54395),nL=n(16056),n_=n(77768);let nS={ArrowLeft:e0.z0.ArrowHorizontal,ArrowDown:e0.z0.ArrowVertical,ArrowUp:e0.z0.ArrowVertical,ArrowRight:e0.z0.ArrowHorizontal,h:e0.z0.HL,j:e0.z0.JK,k:e0.z0.JK,l:e0.z0.HL,a:e0.z0.AD,s:e0.z0.WS,w:e0.z0.WS,d:e0.z0.AD,Tab:e0.z0.Tab,Home:e0.z0.HomeAndEnd,End:e0.z0.HomeAndEnd,Backspace:e0.z0.Backspace},nN=e0.z0.ArrowAll|e0.z0.HomeAndEnd|e0.z0.AD,nw={compact:{avatarSize:18},relaxed:{avatarSize:20}},nD={avatarUrl:"https://avatars.githubusercontent.com/ghost",id:"ghost",login:"ghost",url:"/ghost",__typename:"Author"};function nj({shouldAnimateRef:e,lineSpacingPreference:t="relaxed",threads:n,annotations:r}){(0,l.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:a}=nw[t],o=n.length+r.length;if(0===o)return null;let d={},c=[];r.map(e=>{e?.annotationLevel&&c.push({id:e.id,level:e.annotationLevel})}),n.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?d[e?.author.login]=e.author:nD?.login&&(d[nD.login]=nD)}));let u=[...c.sort((e,t)=>(n_.GF[e.level]?.priority||0)<(n_.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(n_.S,{annotationLevel:t.level},t.id):(0,i.jsx)(n_.Xh,{annotationLevel:t.level},t.id)),...Object.keys(d).map(e=>{let t=d[e]?.login,n=d[e]?.avatarUrl??(nD?.avatarUrl||" ");return(0,i.jsx)(s.r,{alt:t,size:20,src:n},t)})].slice(0,3),m=o>9?"9+":`${o}`;return(0,i.jsxs)("div",{className:(0,b.$)("d-flex","flex-justify-between","flex-items-center","CommentIndicator-module__commentIndicatorContainer__rTx6B"),children:[(0,i.jsx)(nL.A,{disableExpand:!0,size:a,className:(0,b.$)("CommentIndicator-module__AvatarStack__c4pM9","relaxed"===t?"CommentIndicator-module__Relaxed__yk0Ok":"CommentIndicator-module__Compact__irtUV"),children:u}),(0,i.jsx)("span",{className:(0,b.$)("fgColor-default","ml-1","CommentIndicator-module__textStyles__tVmbv"),children:m})]})}nj.displayName="CommentIndicator";var nI=n(1215);function nk(e){let t,n,i,a,l=(0,r.c)(18),{currentHunk:o,nextHunk:s,previousHunk:d}=e,{addInjectedContextLines:c}=F(er),u=!!o&&0!==o.startBlobLineNumber,m=!!o&&!!s;l[0]!==c||l[1]!==u||l[2]!==o||l[3]!==d?(t=()=>{if(!u||!o)return;let e=d&&o&&d.endBlobLineNumber+20>o.startBlobLineNumber,t={start:Math.max(0,o.startBlobLineNumber-20),end:o.startBlobLineNumber};e&&(t.start=d.endBlobLineNumber+1),c(t)},l[0]=c,l[1]=u,l[2]=o,l[3]=d,l[4]=t):t=l[4];let f=t;l[5]!==c||l[6]!==m||l[7]!==o?(n=()=>{m&&o&&c({start:o.endBlobLineNumber+1,end:o.endBlobLineNumber+1+20})},l[5]=c,l[6]=m,l[7]=o,l[8]=n):n=l[8];let h=n;l[9]!==c||l[10]!==d?(i=()=>{d&&c({start:d.endBlobLineNumber+1,end:d.endBlobLineNumber+1+20})},l[9]=c,l[10]=d,l[11]=i):i=l[11];let g=i;return l[12]!==m||l[13]!==u||l[14]!==h||l[15]!==g||l[16]!==f?(a={expandStartOfHunk:f,expandEndOfHunk:h,expandEndOfPreviousHunk:g,canExpandEndOfHunk:m,canExpandStartOfHunk:u},l[12]=m,l[13]=u,l[14]=h,l[15]=g,l[16]=f,l[17]=a):a=l[17],a}var nA=n(79076);let nE={left:"L",right:"R"},nT="Add comment",nR="Suggest change";function nO(e,t,n){let i=n&&!(0,w.xB)(t)?nE.left:nE.right;return`${e} on line ${i}${t.blobLineNumber}`}function n$(e){let t,n,a,l,o,s,c,u,m,f,h,g,p,b,v,y=(0,r.c)(63),{diffLine:C,handleStartConversationWithSuggestedChange:x,handleStartConversation:L,isLeftSide:_,isSplit:S}=e,{selectMultipleLines:N}=F(ei),D=F(W),j=F(J);y[0]!==j?(t=j(),y[0]=j,y[1]=t):t=y[1];let I=t;y[2]!==D?(n=(0,w.Lp)(D()),y[2]=D,y[3]=n):n=y[3];let k=n,A=!!I;y[4]!==C||y[5]!==A?(a={line:C,isRowSelected:A},y[4]=C,y[5]=A,y[6]=a):a=y[6];let E=tZ(a),T=k.leftLines[0],R=k.leftLines[k.leftLines.length-1];y[7]!==k.leftLines?(l=k.leftLines.every(nM),y[7]=k.leftLines,y[8]=l):l=y[8];let O=l,$=k.rightLines[0],M=k.rightLines[k.rightLines.length-1],B=0===k.rightLines.length,P=0===k.leftLines.length;y[9]!==T||y[10]!==L||y[11]!==x||y[12]!==R||y[13]!==N||y[14]!==I?(o=(e,t)=>{I&&R&&T&&T.left&&R.left&&T.key&&(N({endLineKey:R.key,endOrientation:"left",startLineKey:T.key,startOrientation:"left",firstLineSelectionOnDrag:{lineKey:T.key,lineNumber:T.left,orientation:"left",shouldStartConversation:!1}},eh),t?.withSuggestedChange?x():L())},y[9]=T,y[10]=L,y[11]=x,y[12]=R,y[13]=N,y[14]=I,y[15]=o):o=y[15];let H=o;y[16]!==$||y[17]!==L||y[18]!==x||y[19]!==M||y[20]!==N||y[21]!==I?(s=(e,t)=>{I&&M&&$&&$.right&&M.right&&$.key&&(N({endLineKey:M.key,endOrientation:"right",startLineKey:$.key,startOrientation:"right",firstLineSelectionOnDrag:{lineKey:$.key,lineNumber:$.right,orientation:"right",shouldStartConversation:!1}},eh),t?.withSuggestedChange?x():L())},y[16]=$,y[17]=L,y[18]=x,y[19]=M,y[20]=N,y[21]=I,y[22]=s):s=y[22];let K=s,U="DELETION"!==C.type;e:{if(!I){c=!1;break e}if(I.startOrientation!==I.endOrientation||I.startLineNumber!==I.endLineNumber){c=!0;break e}c=!1}let V=c,q=!1,z=!1;if(I&&V){let e,t=nE[I.startOrientation],n=nE[I.endOrientation];if(f=` on lines ${t}${I.startLineNumber}-${n}${I.endLineNumber}`,T&&R){let e;(q=!0,y[23]!==T||y[24]!==R||y[25]!==B)?(e=T.left===R.left?B?` on line L${T.left}`:`, original line L${T.left}`:B?` on lines L${T.left}-L${R.right}`:`, original lines L${T.left}-L${R.left}`,y[23]=T,y[24]=R,y[25]=B,y[26]=e):e=y[26],u=e}if($&&M){let e;(z=!0,y[27]!==E||y[28]!==$||y[29]!==S||y[30]!==M||y[31]!==P)?(e=$.right===M.right?P||S&&E?` on line R${$.right}`:`, modified line R${M.right}`:P||S&&E?` on lines R${$.right}-R${M.right}`:`, modified lines R${$.right}-R${M.right}`,y[27]=E,y[28]=$,y[29]=S,y[30]=M,y[31]=P,y[32]=e):e=y[32],m=e}return y[33]!==E||y[34]!==O||y[35]!==U||y[36]!==L||y[37]!==x||y[38]!==K||y[39]!==H||y[40]!==S||y[41]!==B||y[42]!==m||y[43]!==u||y[44]!==z||y[45]!==q||y[46]!==f?(e=(0,i.jsx)(i.Fragment,{children:S?(0,i.jsx)(i.Fragment,{children:E?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eD.l.Item,{onSelect:K,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusIcon,{})}),nT+m,(0,i.jsx)(eD.l.TrailingVisual,{children:(0,i.jsx)(nA.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eD.l.Item,{onSelect:e=>K(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusCircleIcon,{})}),nR+m]})]}):(0,i.jsxs)(i.Fragment,{children:[q?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eD.l.Item,{onSelect:H,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusIcon,{})}),nT+u,(0,i.jsx)(eD.l.TrailingVisual,{children:(0,i.jsx)(nA.U,{keys:B?"Alt+n":"Alt+Shift+N"})})]}),O&&(0,i.jsxs)(eD.l.Item,{onSelect:e=>H(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusCircleIcon,{})}),nR+u]})]}):null,z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eD.l.Item,{onSelect:K,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusIcon,{})}),nT+m,(0,i.jsx)(eD.l.TrailingVisual,{children:(0,i.jsx)(nA.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eD.l.Item,{onSelect:e=>K(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusCircleIcon,{})}),nR+m]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eD.l.Item,{onSelect:L,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusIcon,{})}),nT+f]}),U&&O&&(0,i.jsxs)(eD.l.Item,{onSelect:x,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusCircleIcon,{})}),nR+f]})]})}),y[33]=E,y[34]=O,y[35]=U,y[36]=L,y[37]=x,y[38]=K,y[39]=H,y[40]=S,y[41]=B,y[42]=m,y[43]=u,y[44]=z,y[45]=q,y[46]=f,y[47]=e):e=y[47],e}return y[48]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusIcon,{})}),y[48]=h):h=y[48],y[49]!==_||y[50]!==C?(g=nO(nT,C,_),y[49]=_,y[50]=C,y[51]=g):g=y[51],y[52]!==L||y[53]!==g?(p=(0,i.jsxs)(eD.l.Item,{onSelect:L,children:[h,g]}),y[52]=L,y[53]=g,y[54]=p):p=y[54],y[55]!==U||y[56]!==x||y[57]!==_||y[58]!==C?(b=U&&(0,i.jsxs)(eD.l.Item,{onSelect:x,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.PlusCircleIcon,{})}),nO(nR,C,_)]}),y[55]=U,y[56]=x,y[57]=_,y[58]=C,y[59]=b):b=y[59],y[60]!==p||y[61]!==b?(v=(0,i.jsxs)(i.Fragment,{children:[p,b]}),y[60]=p,y[61]=b,y[62]=v):v=y[62],v}function nM(e){return"DELETION"!==e.type}n$.displayName="StartConversationContextMenuItems";var nF=n(14208),nB=n(35322);function nP(e){let t,n,a,l,o,s,d,c=(0,r.c)(27);return c[0]!==e?(t=(0,i.jsx)(nq,{...e}),c[0]=e,c[1]=t):t=c[1],c[2]!==e.copilotChatReference||c[3]!==e.diffAnchor||c[4]!==e.diffLine||c[5]!==e.isLeftSide||c[6]!==e.viewerData.shouldDisplayComments?(n=e.viewerData.shouldDisplayComments&&(0,i.jsx)(nU,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),c[2]=e.copilotChatReference,c[3]=e.diffAnchor,c[4]=e.diffLine,c[5]=e.isLeftSide,c[6]=e.viewerData.shouldDisplayComments,c[7]=n):n=c[7],c[8]!==e.handleCopyCode?(a=(0,i.jsx)(nJ,{handleCopyCode:e.handleCopyCode}),c[8]=e.handleCopyCode,c[9]=a):a=c[9],c[10]!==e.diffAnchor?(l=(0,i.jsx)(nV,{diffAnchor:e.diffAnchor}),c[10]=e.diffAnchor,c[11]=l):l=c[11],c[12]!==e.diffAnchor||c[13]!==e.diffLine||c[14]!==e.viewerData.shouldDisplayComments?(o=e.viewerData.shouldDisplayComments&&(0,i.jsx)(nH,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),c[12]=e.diffAnchor,c[13]=e.diffLine,c[14]=e.viewerData.shouldDisplayComments,c[15]=o):o=c[15],c[16]!==e.currentHunk||c[17]!==e.nextHunk||c[18]!==e.previousHunk?(s=(0,i.jsx)(nY,{currentHunk:e.currentHunk,nextHunk:e.nextHunk,previousHunk:e.previousHunk}),c[16]=e.currentHunk,c[17]=e.nextHunk,c[18]=e.previousHunk,c[19]=s):s=c[19],c[20]!==t||c[21]!==n||c[22]!==a||c[23]!==l||c[24]!==o||c[25]!==s?(d=(0,i.jsxs)(i.Fragment,{children:[t,n,a,l,o,s]}),c[20]=t,c[21]=n,c[22]=a,c[23]=l,c[24]=o,c[25]=s,c[26]=d):d=c[26],d}function nH(e){let t,n,a,l,o=(0,r.c)(8),{diffLine:s,diffAnchor:c}=e,u=F(J);o[0]!==c||o[1]!==u||o[2]!==s?(t=()=>{let e=u(),t=(0,w.j2)({line:s,range:e,fileAnchor:c});t&&(0,nF.D)(t)},o[0]=c,o[1]=u,o[2]=s,o[3]=t):t=o[3];let m=t;return o[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.LinkIcon,{})}),o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eD.l.TrailingVisual,{children:(0,i.jsx)(nA.U,{keys:"Mod+Alt+y"})}),o[5]=a):a=o[5],o[6]!==m?(l=(0,i.jsxs)(eD.l.Item,{onSelect:m,onMouseDown:nK,children:[n,"Copy link",a]}),o[6]=m,o[7]=l):l=o[7],l}function nK(e){window.getSelection()?.toString()!==""&&e.preventDefault()}nP.displayName="CellContextMenu",nH.displayName="CopyAnchorLink";let nU=e=>{let t,n,a=(0,r.c)(8),l=F(J);if(a[0]!==l||a[1]!==e.diffAnchor||a[2]!==e.diffLine||a[3]!==e.isLeftSide){let n=l();t=(0,w.Av)(n,e.diffLine,e.isLeftSide,e.diffAnchor),a[0]=l,a[1]=e.diffAnchor,a[2]=e.diffLine,a[3]=e.isLeftSide,a[4]=t}else t=a[4];let o=t;return e.fileDiffReference?(a[5]!==o||a[6]!==e.fileDiffReference?(n=(0,i.jsx)(nI.w,{showDivider:!0,selectedRange:o,fileDiffReference:e.fileDiffReference}),a[5]=o,a[6]=e.fileDiffReference,a[7]=n):n=a[7],n):null};function nV(e){let t,n,a,l,o=(0,r.c)(6),{diffAnchor:s}=e;o[0]!==s?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${s}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},o[0]=s,o[1]=t):t=o[1];let c=t;return o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.MultiSelectIcon,{})}),o[2]=n):n=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eD.l.TrailingVisual,{children:(0,i.jsx)(nA.U,{keys:"Mod+a"})}),o[3]=a):a=o[3],o[4]!==c?(l=(0,i.jsxs)(eD.l.Item,{onSelect:c,children:[n,"Select all",a]}),o[4]=c,o[5]=l):l=o[5],l}function nq(e){let t,n,a,l,o=(0,r.c)(21),{diffLine:s,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,showStartConversation:f,startConversationCurrentLine:h,startConversationWithSuggestedChange:g,threads:p,annotations:b,viewerData:v}=e,y=b.length>0;return f||p||y?(o[0]!==s||o[1]!==c||o[2]!==u||o[3]!==f||o[4]!==h||o[5]!==g||o[6]!==v.shouldDisplayComments?(t=v.shouldDisplayComments&&f&&(0,i.jsx)(n$,{diffLine:s,handleStartConversation:h,handleStartConversationWithSuggestedChange:g,isLeftSide:c,isSplit:u}),o[0]=s,o[1]=c,o[2]=u,o[3]=f,o[4]=h,o[5]=g,o[6]=v.shouldDisplayComments,o[7]=t):t=o[7],o[8]!==b||o[9]!==s||o[10]!==d||o[11]!==c||o[12]!==u||o[13]!==m||o[14]!==p||o[15]!==v?(n=(0,i.jsx)(nz,{threads:p,annotations:b,diffLine:s,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,viewerData:v}),o[8]=b,o[9]=s,o[10]=d,o[11]=c,o[12]=u,o[13]=m,o[14]=p,o[15]=v,o[16]=n):n=o[16],o[17]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eD.l.Divider,{}),o[17]=a):a=o[17],o[18]!==t||o[19]!==n?(l=(0,i.jsxs)(i.Fragment,{children:[t,n,a]}),o[18]=t,o[19]=n,o[20]=l):l=o[20],l):null}function nz(e){let t,n=(0,r.c)(14),{diffLine:a,handleViewMarkersSelection:l,isLeftSide:o,isSplit:s,threads:d,annotations:c,shouldDisplayCollapseComments:u,viewerData:m}=e;if(m.commentsPreference===nx.sI.Visible)return null;if(!s){let e,t;return n[0]!==l?(e=()=>l(),n[0]=l,n[1]=e):e=n[1],n[2]!==c||n[3]!==a||n[4]!==u||n[5]!==e||n[6]!==d?(t=(0,i.jsx)(nG,{threads:d,annotations:c,diffLine:a,onSelect:e,shouldDisplayCollapseComments:u}),n[2]=c,n[3]=a,n[4]=u,n[5]=e,n[6]=d,n[7]=t):t=n[7],t}return n[8]!==c||n[9]!==l||n[10]!==o||n[11]!==u||n[12]!==d?(t=(0,i.jsx)(nW,{threads:d,annotations:c,handleViewMarkersSelection:l,isLeftSide:o,shouldDisplayCollapseComments:u}),n[8]=c,n[9]=l,n[10]=o,n[11]=u,n[12]=d,n[13]=t):t=n[13],t}function nW(e){let t,n,a=(0,r.c)(13),{handleViewMarkersSelection:l,isLeftSide:o,shouldDisplayCollapseComments:s,threads:d,annotations:c}=e,u=d.length>0,m=c.length>0;if(o){let e,t;return a[0]!==l||a[1]!==u||a[2]!==s?(e=u&&(0,i.jsx)(nX,{text:s?"Collapse comments":"Expand comments",onSelect:()=>l("LEFT")}),a[0]=l,a[1]=u,a[2]=s,a[3]=e):e=a[3],a[4]!==e?(t=(0,i.jsx)(i.Fragment,{children:e}),a[4]=e,a[5]=t):t=a[5],t}return a[6]!==l||a[7]!==m||a[8]!==u||a[9]!==s?(t=(u||m)&&(0,i.jsx)(nX,{text:s?"Collapse comments":"Expand comments",onSelect:()=>l("RIGHT")}),a[6]=l,a[7]=m,a[8]=u,a[9]=s,a[10]=t):t=a[10],a[11]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[11]=t,a[12]=n):n=a[12],n}function nG(e){let t,n,a=(0,r.c)(5),{diffLine:l,onSelect:o,threads:s,annotations:d,shouldDisplayCollapseComments:c}=e;if(!(l&&(s.length>0||d.length>0)))return null;let u=c?"Collapse comments":"Expand comments";return a[0]!==o?(t=()=>o(),a[0]=o,a[1]=t):t=a[1],a[2]!==u||a[3]!==t?(n=(0,i.jsx)(nX,{text:u,onSelect:t}),a[2]=u,a[3]=t,a[4]=n):n=a[4],n}function nX(e){let t,n,a=(0,r.c)(4),{onSelect:l,text:o}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.CommentDiscussionIcon,{})}),a[0]=t):t=a[0],a[1]!==l||a[2]!==o?(n=(0,i.jsxs)(eD.l.Item,{onSelect:l,children:[t,o]}),a[1]=l,a[2]=o,a[3]=n):n=a[3],n}function nJ(e){let t,n,a,l=(0,r.c)(4),{handleCopyCode:o}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eD.l.TrailingVisual,{children:(0,i.jsx)(nA.U,{keys:"Mod+c"})}),l[1]=n):n=l[1],l[2]!==o?(a=(0,i.jsxs)(eD.l.Item,{onSelect:o,onMouseDown:nQ,children:[t,"Copy",n]}),l[2]=o,l[3]=a):a=l[3],a}function nQ(e){window.getSelection()?.toString()!==""&&e.preventDefault()}function nY(e){let t,n,a,l,o=(0,r.c)(12),{currentHunk:s,nextHunk:d,previousHunk:c}=e,u=F(Z);o[0]!==s||o[1]!==d||o[2]!==c?(t={currentHunk:s,nextHunk:d,previousHunk:c},o[0]=s,o[1]=d,o[2]=c,o[3]=t):t=o[3];let{canExpandStartOfHunk:m,canExpandEndOfHunk:f}=nk(t);return m||f||c||d?(o[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eD.l.Divider,{}),o[4]=n):n=o[4],o[5]!==s||o[6]!==u||o[7]!==d||o[8]!==c?(a=u.has(nB.YR.expandLines)?null:(0,i.jsx)(nZ,{currentHunk:s,nextHunk:d,previousHunk:c}),o[5]=s,o[6]=u,o[7]=d,o[8]=c,o[9]=a):a=o[9],o[10]!==a?(l=(0,i.jsxs)(i.Fragment,{children:[n,a]}),o[10]=a,o[11]=l):l=o[11],l):null}function nZ(e){let t,n,a,l,o=(0,r.c)(13),{currentHunk:s,nextHunk:c,previousHunk:u}=e;o[0]!==s||o[1]!==c||o[2]!==u?(t={currentHunk:s,nextHunk:c,previousHunk:u},o[0]=s,o[1]=c,o[2]=u,o[3]=t):t=o[3];let{canExpandStartOfHunk:m,expandEndOfHunk:f,expandStartOfHunk:h,canExpandEndOfHunk:g}=nk(t);return o[4]!==m||o[5]!==h?(n=m&&(0,i.jsxs)(eD.l.Item,{onSelect:h,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.FoldUpIcon,{})}),"Expand above"]}),o[4]=m,o[5]=h,o[6]=n):n=o[6],o[7]!==g||o[8]!==f?(a=g&&(0,i.jsxs)(eD.l.Item,{onSelect:f,children:[(0,i.jsx)(eD.l.LeadingVisual,{children:(0,i.jsx)(d.FoldDownIcon,{})}),"Expand below"]}),o[7]=g,o[8]=f,o[9]=a):a=o[9],o[10]!==n||o[11]!==a?(l=(0,i.jsxs)(i.Fragment,{children:[n,a]}),o[10]=n,o[11]=a,o[12]=l):l=o[12],l}async function n0({diffLine:e,diffLines:t,getSelectedDiffLines:n,getSelectedLineRange:i,isSplit:r,isLeftSide:a}){let l,o=window.getSelection();if(o&&""!==o.toString())return void document.execCommand("copy");let s=n().length<=1;switch(!0){case s:l=n2(e);break;case r:l=n3({diffLines:t,diffOrientation:a?"left":"right",getSelectedLineRange:i});break;default:l=n1({diffLines:t,getSelectedLineRange:i})}await (0,nF.D)(l)}nU.displayName="CopilotListItems",nV.displayName="SelectAllListItem",nq.displayName="MarkerListItems",nz.displayName="ViewMarkerListItems",nW.displayName="SplitDiffMarkersListItems",nG.displayName="UnifiedDiffMarkerListItem",nX.displayName="MarkerListItem",nJ.displayName="CopyContentListItems",nY.displayName="HunkListItems",nZ.displayName="ExpandHunksListItems";let n1=({diffLines:e,getSelectedLineRange:t})=>{let n=t();if(!n)return"";let{startOrientation:i,endOrientation:r,startLineNumber:a,endLineNumber:l}=n,o=0,s=0;return e.length>1&&(o=e.findIndex(e=>"left"===i?e.left===a:e.right===a),s=e.findIndex(e=>"left"===r?e.left===l:e.right===l)),(0,w.Ls)(e.slice(o,s+1))},n2=e=>(0,w.Po)(e)||!e?"":(0,w.Ls)([e]),n3=({diffLines:e,diffOrientation:t,getSelectedLineRange:n})=>{if(void 0===t)return"";let i=n();if(!i)return"";let r=(0,w.Mk)(e),{selectedRightLines:a,selectedLeftLines:l}=D({selectedLineRange:i,leftLines:r.leftLines,rightLines:r.rightLines});return"left"===t?(0,w.Ls)(l):(0,w.Ls)(a)};function n4(e){let t,n,a,o,s,c,u,m,f,h,g=(0,r.c)(53),{showStartConversation:p,viewerData:v,openStartConversationDialog:y,threads:C,annotations:x,shouldDisplayMinimizedComments:L,diffAnchor:_,diffLine:S,isLeftSide:N,isSplit:w,nextHunk:D,previousHunk:j,currentHunk:I,copilotChatReference:k,shouldDisplayCollapseComments:A,toggleViewingMarkers:E,setShouldStartNewConversationWithSuggestedChange:T,setIsContextMenuOpen:R,contextMenuOpen:O}=e,$=(0,l.useRef)(null),M=C.reduce(n6,0),B=x.length,{commentsPreference:P,lineSpacingPreference:H}=v,K=F(G),U=F(W),V=F(J);g[0]!==S||g[1]!==K||g[2]!==U||g[3]!==V||g[4]!==N||g[5]!==w?(t=async()=>{let e=K();await n0({diffLine:S,diffLines:e,getSelectedDiffLines:U,getSelectedLineRange:V,isSplit:w,isLeftSide:N})},g[0]=S,g[1]=K,g[2]=U,g[3]=V,g[4]=N,g[5]=w,g[6]=t):t=g[6];let q=t,z=M+B>0&&P===nx.sI.Collapsed;g[7]!==x.length||g[8]!==C.length||g[9]!==E?(n=e=>{(1===C.length||1===x.length)&&e.preventDefault(),E?.()},g[7]=x.length,g[8]=C.length,g[9]=E,g[10]=n):n=g[10];let X=n;return g[11]===Symbol.for("react.memo_cache_sentinel")?(a=(0,b.$)("d-flex","flex-row","ActionBar-module__action-bar-position__QToB4"),g[11]=a):a=g[11],g[12]!==x||g[13]!==O||g[14]!==X||g[15]!==H||g[16]!==L||g[17]!==C||g[18]!==z?(o=z&&L&&(0,i.jsx)(eC.Q,{"aria-expanded":O,"aria-label":"View comments",size:"small",className:(0,b.$)("py-0","px-1",nm),onClick:X,children:(0,i.jsx)(nj,{threads:C,annotations:x,lineSpacingPreference:H})}),g[12]=x,g[13]=O,g[14]=X,g[15]=H,g[16]=L,g[17]=C,g[18]=z,g[19]=o):o=g[19],g[20]!==O||g[21]!==R?(s=()=>R(!O),g[20]=O,g[21]=R,g[22]=s):s=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(c=(0,b.$)("fgColor-muted","ActionBar-module__actionBarArrowSizing__T5m0o"),g[23]=c):c=g[23],g[24]!==O||g[25]!==R?(u=(0,i.jsx)(ew.W.Anchor,{children:(0,i.jsx)(eC.Q,{ref:$,"aria-haspopup":"true","aria-label":"More actions",icon:d.TriangleDownIcon,size:"small",className:c,onClick:()=>R(!O)})}),g[24]=O,g[25]=R,g[26]=u):u=g[26],g[27]!==x||g[28]!==k||g[29]!==I||g[30]!==_||g[31]!==S||g[32]!==q||g[33]!==N||g[34]!==w||g[35]!==D||g[36]!==y||g[37]!==j||g[38]!==T||g[39]!==A||g[40]!==p||g[41]!==C||g[42]!==E||g[43]!==v?(m=(0,i.jsx)(ew.W.Overlay,{width:"medium",children:(0,i.jsx)(eD.l,{children:(0,i.jsx)(nP,{threads:C,annotations:x,currentHunk:I,diffAnchor:_,diffLine:S,shouldDisplayCollapseComments:A,copilotChatReference:k,showStartConversation:p,handleCopyCode:q,handleViewMarkersSelection:E,isLeftSide:N,isSplit:w,nextHunk:D,previousHunk:j,startConversationCurrentLine:y,startConversationWithSuggestedChange:T,viewerData:v})})}),g[27]=x,g[28]=k,g[29]=I,g[30]=_,g[31]=S,g[32]=q,g[33]=N,g[34]=w,g[35]=D,g[36]=y,g[37]=j,g[38]=T,g[39]=A,g[40]=p,g[41]=C,g[42]=E,g[43]=v,g[44]=m):m=g[44],g[45]!==O||g[46]!==s||g[47]!==u||g[48]!==m?(f=(0,i.jsxs)(ew.W,{anchorRef:$,open:O,onOpenChange:s,children:[u,m]}),g[45]=O,g[46]=s,g[47]=u,g[48]=m,g[49]=f):f=g[49],g[50]!==o||g[51]!==f?(h=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-hidden":!1,className:a,children:(0,i.jsxs)(nC.A,{className:"ActionBar-module__action-bar-button-group___4uda",children:[o,f]})})}),g[50]=o,g[51]=f,g[52]=h):h=g[52],h}function n6(e,t){return e+(t.commentsData?.comments.length??0)}n4.displayName="SimpleContextMenu";let n5=new Set,n7=!1,n8=e=>{let t=e.target instanceof Node?e.target:null;for(let e of n5){let{element:n,shouldIgnore:i,onPointerExit:r}=e;if(!n.isConnected){n5.delete(e);continue}if(t&&n.contains(t)){e.pendingExit=!1;continue}e.pendingExit=!0,i?.()||(e.pendingExit=!1,r())}0===n5.size&&n9()},n9=()=>{n7&&g.XC&&!(n5.size>0)&&(g.XC.removeEventListener("pointermove",n8),n7=!1)};function ie(e){let t,n,a,o,s,d,c,u,m,f,h=(0,r.c)(54),{ref:p,annotations:b,authorAvatarUrl:v,authorLogin:y,copilotChatReference:C,currentHunk:x,diffAnchor:L,diffLine:_,hasDraftComment:S,handleMouseLeaveAddCommentButton:N,handleMouseDownAddCommentButton:w,isLeftSide:D,isSplit:j,nextHunk:I,previousHunk:k,shouldDisplayCollapseComments:A,shouldDisplayMinimizedComments:E,shouldDisplayComments:T,threads:R,toggleViewingMarkers:O,viewerData:M,openStartConversationDialog:B,setIsContextMenuOpen:P,cellId:H,isAddCommentBoxOpen:K,filePath:U,contextMenuOpen:V}=e,q=F(J);e:{if(!T){t=!0;break e}if(K||!M.viewerCanComment){t=!1;break e}t=!0}let z=t,W=F(ed);h[0]!==H||h[1]!==W?(n=()=>{W(H)},h[0]=H,h[1]=W,h[2]=n):n=h[2];let G=(0,l.useEffectEvent)(n);h[3]!==p||h[4]!==V||h[5]!==G?(a=()=>{if(p?.current)return function(e){let{element:t}=e;if(!t)return()=>{};let n={...e,pendingExit:!1};return n5.add(n),!n7&&g.XC&&(g.XC.addEventListener("pointermove",n8),n7=!0),()=>{n5.delete(n),n9()}}({element:p?.current,shouldIgnore:()=>V,onPointerExit:G})},h[3]=p,h[4]=V,h[5]=G,h[6]=a):a=h[6],h[7]!==p||h[8]!==H||h[9]!==V?(o=[p,V,H],h[7]=p,h[8]=H,h[9]=V,h[10]=o):o=h[10],(0,l.useEffect)(a,o),h[11]!==L||h[12]!==_||h[13]!==U||h[14]!==q||h[15]!==D?(s=()=>{let e=q();e||(e={startLineNumber:_.blobLineNumber,endLineNumber:_.blobLineNumber,startOrientation:D?"left":"right",endOrientation:D?"left":"right",diffAnchor:L});let t=new $.L(e,U);g.cg?.dispatchEvent(t)},h[11]=L,h[12]=_,h[13]=U,h[14]=q,h[15]=D,h[16]=s):s=h[16];let X=s;h[17]!==v||h[18]!==y||h[19]!==w||h[20]!==N||h[21]!==S||h[22]!==X||h[23]!==B||h[24]!==z||h[25]!==M.lineSpacingPreference?(d=z&&(0,i.jsx)(nv,{hasDraftComment:S,handleMouseLeaveAddCommentButton:N,handleMouseDownAddCommentButton:w,lineSpacingPreference:M.lineSpacingPreference,openStartConversationDialog:()=>{B(!1),X()},authorLogin:y,authorAvatarUrl:v}),h[17]=v,h[18]=y,h[19]=w,h[20]=N,h[21]=S,h[22]=X,h[23]=B,h[24]=z,h[25]=M.lineSpacingPreference,h[26]=d):d=h[26],h[27]!==X||h[28]!==B?(c=()=>{B(!1),X()},u=()=>{B(!0),X()},h[27]=X,h[28]=B,h[29]=c,h[30]=u):(c=h[29],u=h[30]);let Q=E??!1;return h[31]!==b||h[32]!==V||h[33]!==C||h[34]!==x||h[35]!==L||h[36]!==_||h[37]!==D||h[38]!==j||h[39]!==I||h[40]!==k||h[41]!==P||h[42]!==A||h[43]!==z||h[44]!==c||h[45]!==u||h[46]!==Q||h[47]!==R||h[48]!==O||h[49]!==M?(m=(0,i.jsx)(n4,{showStartConversation:z,viewerData:M,openStartConversationDialog:c,setShouldStartNewConversationWithSuggestedChange:u,setIsContextMenuOpen:P,contextMenuOpen:V,threads:R,annotations:b,shouldDisplayMinimizedComments:Q,diffAnchor:L,diffLine:_,isLeftSide:D,isSplit:j,nextHunk:I,previousHunk:k,currentHunk:x,copilotChatReference:C,shouldDisplayCollapseComments:A,toggleViewingMarkers:O}),h[31]=b,h[32]=V,h[33]=C,h[34]=x,h[35]=L,h[36]=_,h[37]=D,h[38]=j,h[39]=I,h[40]=k,h[41]=P,h[42]=A,h[43]=z,h[44]=c,h[45]=u,h[46]=Q,h[47]=R,h[48]=O,h[49]=M,h[50]=m):m=h[50],h[51]!==m||h[52]!==d?(f=(0,i.jsxs)(i.Fragment,{children:[d,m]}),h[51]=m,h[52]=d,h[53]=f):f=h[53],f}function it(e){let t,n,a,l=(0,r.c)(5),{isSplit:o}=e,s=!o&&"hunk-kebab-icon-unified";return l[0]!==s?(t=(0,b.$)("hunk-kebab-icon pr-2 pb-1",s),l[0]=s,l[1]=t):t=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(d.KebabHorizontalIcon,{}),l[2]=n):n=l[2],l[3]!==t?(a=(0,i.jsx)("div",{className:t,children:n}),l[3]=t,l[4]=a):a=l[4],a}ie.displayName="SimpleActionBar",ie.displayName="ActionBar",it.displayName="HunkKebabIcon";var ii=new WeakMap,ir=new WeakMap,ia=new WeakMap,il=new WeakMap,io=new WeakMap,is=new WeakMap,id=new WeakSet,ic=new WeakSet,iu=new WeakSet,im=new WeakSet,ih=new WeakSet,ig=new WeakSet,ip=new WeakSet,ib=new WeakSet;class iv{moveToNextItem(e,t){let n,i=(0,t2._)(this,ir).get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,a]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,t6._)(this,ih,i_).call(this,r)&&(0,t2._)(this,il)&&(a=(0,t2._)(this,il),(0,t4._)(this,il,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,t2._)(this,ii).length-1,t=(0,t2._)(this,ii)[e]?.length;t&&(n=(0,t2._)(this,ii)[e]?.[t-1]);break}case"ArrowUp"===e:(0,t6._)(this,ih,i_).call(this,r-1)?((0,t6._)(this,ib,iw).call(this,a),n=(0,t2._)(this,ii)[r-1]?.[0]):n=(0,t2._)(this,ii)[r-1]?.[a];break;case"ArrowDown"===e:(0,t6._)(this,ih,i_).call(this,r+1)?((0,t6._)(this,ib,iw).call(this,a),n=(0,t2._)(this,ii)[r+1]?.[0]):n=(0,t2._)(this,ii)[r+1]?.[a];break;case"ArrowLeft"===e:n=(0,t2._)(this,ii)[r]?.[a-1];break;case"ArrowRight"===e:n=(0,t2._)(this,ii)[r]?.[a+1]}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,t6._)(this,ic,iC).call(this,e,t)}focusFirstGridCell(e){e&&(0,t2._)(this,ir).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,t2._)(this,ii)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,t2._)(this,ir).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,t2._)(this,ii)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,r=(0,t2._)(this,ir).get(i?.cellId??"");if(!r)return;let[a,l]=r;if("ArrowUp"===e){let e=a-1;for(;!t&&e>=0;)t=(0,t6._)(this,id,iy).call(this,{rowIndex:e,columnIndex:l}),e--}if("ArrowDown"===e){let e=a+1;for(;!t&&e<(0,t2._)(this,ii).length;)t=(0,t6._)(this,id,iy).call(this,{rowIndex:e,columnIndex:l}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,t2._)(this,ir).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,t2._)(this,is)?(0,t2._)(this,ii)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,t2._)(this,is)?(0,t2._)(this,ii)[e]?.[this.focusedGridCell.columnIndex+2]:(0,t2._)(this,ii)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,t2._)(this,ii).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,t2._)(this,ii).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,w.qX)((0,t2._)(this,io),e,t),r=(0,w.u6)(i,0),a=(0,t2._)(this,ir).get(r);if(!a)return!1;let[l]=a;return!!n===(0,t6._)(this,ih,i_).call(this,l)}constructor(e,t,n,i,r){(0,t5._)(this,id),(0,t5._)(this,ic),(0,t5._)(this,iu),(0,t5._)(this,im),(0,t5._)(this,ih),(0,t5._)(this,ig),(0,t5._)(this,ip),(0,t5._)(this,ib),(0,t3._)(this,ii,{writable:!0,value:[]}),(0,t3._)(this,ir,{writable:!0,value:new Map}),(0,t3._)(this,ia,{writable:!0,value:new Set}),(0,e2._)(this,"focusedGridCell",void 0),(0,e2._)(this,"lastSelectedGridCell",void 0),(0,t3._)(this,il,{writable:!0,value:void 0}),(0,t3._)(this,io,{writable:!0,value:void 0}),(0,t3._)(this,is,{writable:!0,value:void 0}),(0,t4._)(this,io,e),(0,t4._)(this,is,t),(0,t6._)(this,ic,iC).call(this,n,i),this.focusFirstGridCell(r)}}function iy({rowIndex:e,columnIndex:t}){let n=(0,t2._)(this,ii)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,t2._)(this,is):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,t2._)(this,is):return n?.[t+1];default:return n?.[t]}}function iC(e,t){(0,t4._)(this,ii,[]),(0,t4._)(this,ir,new Map),(0,t4._)(this,ia,new Set);for(let n=0;n<e.length;n++){let i=[],r=e[n];if((0,t2._)(this,is)){let e=(t||[])[n],a=(0,w.qX)((0,t2._)(this,io),r,e);(0,w.Po)(r)||r?.type!=="HUNK"?(0,t6._)(this,ig,iS).call(this,{leftLine:r,rightLine:e,row:i,rowIdentifier:a,rowIndex:n}):(0,t6._)(this,im,iL).call(this,i,a,n,r)}else{let e=(0,w.qX)((0,t2._)(this,io),r,r);(0,w.Po)(r)||r?.type!=="HUNK"?(0,t6._)(this,ip,iN).call(this,{diffLine:r,row:i,rowIdentifier:e,rowIndex:n}):(0,t6._)(this,im,iL).call(this,i,e,n,r)}(0,t2._)(this,ii).push(i)}}function ix({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:r,rowIndex:a,isSplit:l}){let o,s,d=(0,w.u6)(r,e);s=!(l||(0,w.Po)(t))&&t?.type==="DELETION"&&1===e||!(l||(0,w.Po)(t))&&t?.type==="ADDITION"&&0===e||(0,w.Po)(t),(0,w.Po)(t)||"left"!==n||(o=t?.left),(0,w.Po)(t)||"right"!==n||(o=t?.right),i.push({lineNumber:o,orientation:n,isEmpty:s,isHunk:!1,cellId:(0,w.u6)(r,e),columnIndex:e,lineKey:!(0,w.Po)(t)&&t?.key?t.key:void 0}),(0,t2._)(this,ir).set(d,[a,e])}function iL(e,t,n,i){let r=(0,w.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:r,columnIndex:0,lineKey:i.key}),(0,t2._)(this,ir).set(r,[n,0]),(0,t2._)(this,ia).add(n)}function i_(e){return(0,t2._)(this,ia).has(e)}function iS({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){(0,t6._)(this,iu,ix).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,t6._)(this,iu,ix).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,t6._)(this,iu,ix).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,t6._)(this,iu,ix).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0})}function iN({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let r=(0,w.Po)(e)||e?.type!=="DELETION"?"right":"left";(0,t6._)(this,iu,ix).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,t6._)(this,iu,ix).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,t6._)(this,iu,ix).call(this,{cellIndex:2,diffLine:e,orientation:r,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function iw(e){(0,t6._)(this,ih,i_).call(this,e)||(0,t4._)(this,il,e)}function iD(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function ij({addLineToSelection:e,clearSelectedLines:t,containerRef:n,fileAnchor:i,getfirstLineSelectionOnDrag:a,isSplitDiff:o,leftLines:s,rightLines:d,selectMultipleLines:c,disabled:u}){var m;let f,h,g,p,b,v,y,C,x=(0,l.useRef)(void 0),L=(0,l.useMemo)(()=>new iv(i,o,s,d,x.current?.focusedGridCell?.cellId),[i,o,s,d]);(0,l.useEffect)(()=>{x.current=L},[L]),(0,l.useEffect)(()=>{let e=n.current,t=()=>{L.clearLastSelectedCell()};return e?.addEventListener("mousedown",t),()=>e?.removeEventListener("mousedown",t)},[n,L]),m=x.current,(g=(0,r.c)(8))[0]!==n||g[1]!==i||g[2]!==L||g[3]!==s||g[4]!==m||g[5]!==d?(f=()=>{if(m&&document.activeElement){let e=function(e,t,n){let i=[];for(let r=0;r<t.length;r++){let a=t[r],l=n?.[r]??a,o=!(0,w.Po)(a)&&a?.type==="HUNK";a&&l&&!e.hasLine(a,l,o)&&i.push(a)}return i}(m,s,d);if(0!==e.length){if(document.activeElement===document.body){let t,n,r,a=s.indexOf(e[e.length-1]),l=s[a+1],o=e[0];l&&!(0,w.Po)(l)&&"HUNK"===l.type&&(t=(0,w.u6)((0,w.qX)(i,l,l),0),n=document.querySelector(`[data-grid-cell-id=${t}]`),r=n?.querySelector("button[data-direction=down], button[data-direction=all]")),r||(t=(0,w.u6)((0,w.qX)(i,o,o),0),n=document.querySelector(`[data-grid-cell-id=${t}]`),r=n?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&n&&(r?r.focus():n.focus(),L.focusGridCell(t),iD(n))}else if("BUTTON"===document.activeElement.tagName)iD(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=L.focusedGridCell?.cellId;if(e!==t){let e=n.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},h=[i,s,L,d,m,n],g[0]=n,g[1]=i,g[2]=L,g[3]=s,g[4]=m,g[5]=d,g[6]=f,g[7]=h):(f=g[6],h=g[7]),(0,l.useEffect)(f,h),(y=(0,r.c)(6))[0]!==L?(p=e=>{let t=e.target.getAttribute("data-grid-cell-id");t&&L.focusGridCell(t)},y[0]=L,y[1]=p):p=y[1],C=p,y[2]!==n||y[3]!==C?(b=()=>{let e=n.current;return e?.addEventListener("focusin",C),()=>e?.removeEventListener("focusin",C)},v=[n,C],y[2]=n,y[3]=C,y[4]=b,y[5]=v):(b=y[4],v=y[5]),(0,l.useEffect)(b,v);let _=(0,l.useCallback)((n,i,r)=>{let l=L.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=L.getFirstCodeCell(),t=L.getLastCodeCell();if(!e||!t)return i;return e.lineKey&&e.lineNumber&&e.orientation&&c({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:e.lineKey,startOrientation:e.orientation,firstLineSelectionOnDrag:{lineKey:e.lineKey,lineNumber:e.lineNumber,orientation:e.orientation,shouldStartConversation:!1}},eh),i}case r.shiftKey&&"ArrowDown"===r.key:{let t=L.getNextSelectableCell("ArrowDown");if(!t||!l)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},eh):l.lineKey&&l.lineNumber&&l.orientation&&c({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:l.lineKey,startOrientation:l.orientation,firstLineSelectionOnDrag:{lineKey:l.lineKey,lineNumber:l.lineNumber,orientation:l.orientation,shouldStartConversation:!1}},eh),iI(t.cellId),i}case r.shiftKey&&"ArrowUp"===r.key:{let t=L.getNextSelectableCell("ArrowUp");if(!t||!l)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},eh):l.lineKey&&l.lineNumber&&l.orientation&&c({endLineKey:l.lineKey,endOrientation:l.orientation,startLineKey:t.lineKey,startOrientation:t.orientation,firstLineSelectionOnDrag:{lineKey:l.lineKey,lineNumber:l.lineNumber,orientation:l.orientation,shouldStartConversation:!1}},eh),iI(t.cellId),i}case"ArrowLeft"===r.key&&r.metaKey&&r.shiftKey:return i;default:{let e=L.moveToNextItem(r.key,r.ctrlKey),n=e&&document.querySelector(`[data-grid-cell-id=${e.cellId}]`);return t(),L.clearLastSelectedCell(),n??void 0}}},[e,a,L,c,t]);return(0,eZ.G)({containerRef:n,bindKeys:nN,getNextFocusable:_,focusableElementFilter:e=>"TD"===e.tagName&&"gridcell"===e.getAttribute("role"),focusInStrategy:"previous",disabled:u},[_]),{gridNavigator:L}}function iI(e){let t=g.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!g.XC||!g.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(g.cg.innerHeight||g.XC.documentElement.clientHeight)&&t.right<=(g.cg.innerWidth||g.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}function ik(e){var t;(t=e.key)in nS&&(nS[t]&nN)>0&&e.stopPropagation()}function iA(e){let t,n,a,o,s,d,c,u=(0,r.c)(22),{diffAnchor:m,diffLine:f,isSplit:h,renderHunkButton:g}=e,p=(0,l.useRef)(null),[b,v]=function(e){let t,n,i,a,o,s,d,c=(0,r.c)(17),[u,m]=(0,l.useState)(!1),[f,h]=(0,l.useState)(!1),g=u?0:-1;c[0]!==e?(t=t=>{e.current&&e.current.contains(t.relatedTarget)||m(!1)},c[0]=e,c[1]=t):t=c[1];let p=t;c[2]!==e?(n=()=>{e.current===document.activeElement&&m(!0)},c[2]=e,c[3]=n):n=c[3];let b=n;c[4]!==e?(i=t=>{e.current&&!e.current.contains(t.relatedTarget)&&m(!1),h(!1)},c[4]=e,c[5]=i):i=c[5];let v=i;c[6]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{e.stopPropagation(),h(!0)},c[6]=a):a=c[6];let y=a;c[7]!==p||c[8]!==b?(o={onFocus:b,onBlur:p},c[7]=p,c[8]=b,c[9]=o):o=c[9];let C=o,x=!f;c[10]!==g||c[11]!==v||c[12]!==x?(s={"aria-hidden":x,tabIndex:g,onBlur:v,onFocusCapture:y,onKeyDownCapture:ik},c[10]=g,c[11]=v,c[12]=x,c[13]=s):s=c[13];let L=s;return c[14]!==L||c[15]!==C?(d=[C,L],c[14]=L,c[15]=C,c[16]=d):d=c[16],d}(p);if(u[0]!==m||u[1]!==f){let e=(0,w.qX)(m,f,f);t=(0,w.u6)(e,0),u[0]=m,u[1]=f,u[2]=t}else t=u[2];let y=t;u[3]!==m||u[4]!==f.blobLineNumber||u[5]!==f.type?(n=(0,N.IQ)(m,(0,N.XU)(f.type),f.blobLineNumber),u[3]=m,u[4]=f.blobLineNumber,u[5]=f.type,u[6]=n):n=u[6];let C=n;u[7]===Symbol.for("react.memo_cache_sentinel")?(a={userSelect:"none",position:"relative",backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},u[7]=a):a=u[7],u[8]!==v||u[9]!==h||u[10]!==g?(o=g?.(v)??(0,i.jsx)(it,{isSplit:h}),u[8]=v,u[9]=h,u[10]=g,u[11]=o):o=u[11];let x=f.html;return u[12]!==x?(s=(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eF.$6,{className:"diff-text-inner color-fg-muted",html:x})}),u[12]=x,u[13]=s):s=u[13],u[14]!==o||u[15]!==s?(d=(0,i.jsxs)("div",{className:"d-flex flex-row",children:[o,s]}),u[14]=o,u[15]=s,u[16]=d):d=u[16],u[17]!==y||u[18]!==b||u[19]!==C||u[20]!==d?(c=(0,i.jsx)("td",{ref:p,colSpan:4,"data-grid-cell-id":y,"data-line-anchor":C,role:"gridcell",style:a,tabIndex:-1,valign:"top",className:"diff-hunk-cell focusable-grid-cell left-side",...b,children:d}),u[17]=y,u[18]=b,u[19]=C,u[20]=d,u[21]=c):c=u[21],c}iA.displayName="HunkCell";let iE="ExpandableHunkHeaderDiffLine-module__expand-up-and-down__LHSa8";function iT(e){let t,n,a,l,o,s,d,c,u,m,f,h,g=(0,r.c)(24);g[0]!==e?({direction:o,icon:t,isSplit:s,label:d,onClick:c,ariaLabel:a,className:l,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=a,g[4]=l,g[5]=o,g[6]=s,g[7]=d,g[8]=c):(t=g[1],n=g[2],a=g[3],l=g[4],o=g[5],s=g[6],d=g[7],c=g[8]);let{sendAnalyticsEvent:p}=(0,td.s)();g[9]!==c||g[10]!==p?(u=()=>{c(),p("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},g[9]=c,g[10]=p,g[11]=u):u=g[11];let v=!s&&"ExpandableHunkHeaderDiffLine-module__expand-button-unified__H6Vo1";g[12]!==l||g[13]!==v?(m=(0,b.$)("Button Button--iconOnly Button--invisible","ExpandableHunkHeaderDiffLine-module__expand-button-line__Nw5Pq",v,l),g[12]=l,g[13]=v,g[14]=m):m=g[14];let y=a??d;return g[15]!==t?(f=(0,i.jsx)(t,{}),g[15]=t,g[16]=f):f=g[16],g[17]!==n||g[18]!==o||g[19]!==u||g[20]!==m||g[21]!==y||g[22]!==f?(h=(0,i.jsx)("button",{onClick:u,className:m,"aria-label":y,"data-direction":o,...n,children:f}),g[17]=n,g[18]=o,g[19]=u,g[20]=m,g[21]=y,g[22]=f,g[23]=h):h=g[23],h}function iR(e){let t,n,a,l,o,s,c,u,m,f,h,g=(0,r.c)(24),{currentHunk:p,diffAnchor:b,diffLine:v,isSplit:y,nextHunk:C,nextLine:x,previousHunk:L,prevLine:_}=e;g[0]!==p||g[1]!==C||g[2]!==L?(t={currentHunk:p,nextHunk:C,previousHunk:L},g[0]=p,g[1]=C,g[2]=L,g[3]=t):t=g[3];let{expandStartOfHunk:S,expandEndOfPreviousHunk:N}=nk(t),w=0===v.position&&0!==v.blobLineNumber||!_,D=!x,j=0===v.blobLineNumber,I=F(en),k=w||D,A=D&&_?.blobLineNumber===I;e:{if(k||v.blobLineNumber<=0){n=!1;break e}if(v.blobLineNumber-_.blobLineNumber<=20||x.blobLineNumber-v.blobLineNumber>=20){n=!0;break e}n=!1}let E=n;t:{if(k||A){a=!1;break t}if(v.blobLineNumber-_.blobLineNumber>20){a=!0;break t}a=!1}let T=a;n:{if(v.blobLineNumber<=0||j){l=!1;break n}if(w){l=!0;break n}l=!1}let R=l;i:{if(w||A){o=!1;break i}if(D){o=!0;break i}o=!1}let O=o;r:{switch(!0){case E:s="expand-all";break r;case T:s="expand-up-and-down";break r;case R:s="expand-up";break r;case O:s="expand-down";break r}s=void 0}let $=s;g[4]!==S?(c=()=>S(),g[4]=S,g[5]=c):c=g[5];let M=c;g[6]!==N?(u=()=>N(),g[6]=N,g[7]=u):u=g[7];let B=u;g[8]!==S?(m=()=>S(),g[8]=S,g[9]=m):m=g[9];let P=m,H=F(Z);g[10]!==$||g[11]!==M||g[12]!==P||g[13]!==B||g[14]!==H||g[15]!==y||g[16]!==x?.blobLineNumber||g[17]!==_?.blobLineNumber?(f=e=>{if(H.has(nB.YR.expandLines))return null;switch($){case"expand-all":return(0,i.jsx)(iT,{...e,direction:"all",icon:d.UnfoldIcon,isSplit:y,label:`Expand file from line ${_?.blobLineNumber||""} to line ${x?.blobLineNumber||""}`,onClick:P});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(iT,{...e,direction:"down",icon:d.FoldDownIcon,isSplit:y,label:`Expand file down from line ${_?.blobLineNumber||""}`,className:iE,onClick:B}),(0,i.jsx)(iT,{...e,direction:"up",icon:d.FoldUpIcon,isSplit:y,label:`Expand file up from line ${x?.blobLineNumber||""}`,className:iE,onClick:M})]});case"expand-up":return(0,i.jsx)(iT,{...e,direction:"up",icon:d.FoldUpIcon,isSplit:y,label:`Expand file up from line ${x?.blobLineNumber||""}`,onClick:M});case"expand-down":return(0,i.jsx)(iT,{...e,direction:"down",icon:d.FoldDownIcon,isSplit:y,label:`Expand file down from line ${_?.blobLineNumber||""}`,onClick:B});default:return null}},g[10]=$,g[11]=M,g[12]=P,g[13]=B,g[14]=H,g[15]=y,g[16]=x?.blobLineNumber,g[17]=_?.blobLineNumber,g[18]=f):f=g[18];let K=f;return g[19]!==b||g[20]!==v||g[21]!==y||g[22]!==K?(h=(0,i.jsx)(iA,{renderHunkButton:K,diffAnchor:b,diffLine:v,isSplit:y}),g[19]=b,g[20]=v,g[21]=y,g[22]=K,g[23]=h):h=g[23],h}iT.displayName="ExpandButtonLine",iR.displayName="ExpandableHunkHeaderDiffLine";let iO=(0,l.memo)(function(e){let t,n,a,l,o=(0,r.c)(11),{lineHtml:s,lineType:d,lineTypeCharacter:c}=e,u="ADDITION"===d,m="DELETION"===d;return o[0]!==u||o[1]!==m?(t=(0,b.$)("diff-text syntax-highlighted-line",{addition:u,deletion:m}),o[0]=u,o[1]=m,o[2]=t):t=o[2],o[3]!==c?(n=c&&(0,i.jsx)("span",{className:"diff-text-marker",children:c}),o[3]=c,o[4]=n):n=o[4],o[5]!==s?(a=(0,i.jsx)(eF.$6,{html:s,className:"diff-text-inner"}),o[5]=s,o[6]=a):a=o[6],o[7]!==t||o[8]!==n||o[9]!==a?(l=(0,i.jsxs)("code",{className:t,children:[n,a]}),o[7]=t,o[8]=n,o[9]=a,o[10]=l):l=o[10],l});iO.displayName="LineTextWrapper";let i$="SimpleDiff-module__comment-indicator__iwZDp";function iM(e){let t,n,a=(0,r.c)(3),{children:l}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={left:"-1px",zIndex:"1"},a[0]=t):t=a[0],a[1]!==l?(n=(0,i.jsx)("span",{className:"position-absolute",style:t,children:l}),a[1]=l,a[2]=n):n=a[2],n}iM.displayName="DiffCodeAlert";var iF=n(671);let iB=e=>(e.target??void 0)?.nodeName==="TD",iP=e=>{let t=iK(e),n=t?.querySelector('[data-first-marker="true"]')??t?.querySelector("[data-marker-id]");n?.focus()},iH=e=>{let t=iK(e);t?.querySelector('[data-marker-id="new-comment"]')?.querySelector("textarea")?.focus()},iK=e=>{let t=e.currentTarget.classList.contains("new-diff-line-number")?e.currentTarget.nextElementSibling:e.currentTarget;return t?.classList.contains("new-diff-line-number")&&(t=t?.nextElementSibling),t},iU=["CONTEXT","INJECTED_CONTEXT"],iV="focusable-grid-cell new-diff-line-number empty-diff-line left-side",iq="focusable-grid-cell new-diff-line-number left-side",iz=(0,l.memo)(function(e){let t,n,a,o,s,c,u,m,f,h,g,p,v,y,C=(0,r.c)(103),{diffLine:L,nextDiffLine:_,prevDiffLine:S,filePath:D,avatarURL:j,userLogin:I,viewerCanApplySuggestion:k,handleMouseDownOnNumberCell:A,handleMouseEnterCell:E,handleMouseUpRow:T,handleMouseLeaveAddCommentButton:R,handleMouseDownAddCommentButton:O,copilotChatReference:$,hunksData:M,viewerCanComment:B,shouldDisplayComments:P}=e,K="HUNK"===L.type,z="ADDITION"!==L.type,W="DELETION"!==L.type,G=U(L.key),X=F(et),{enableDialogMode:J}=F(ee),Q=(0,w.qX)(X,L,L),Y=j??"",Z=I??"",en=k??!1,ei=B??!1;C[0]!==Y||C[1]!==Z||C[2]!==en||C[3]!==ei?(t={avatarUrl:Y,login:Z,viewerCanApplySuggestion:en,viewerCanComment:ei},C[0]=Y,C[1]=Z,C[2]=en,C[3]=ei,C[4]=t):t=C[4];let er=t;C[5]!==L.type||C[6]!==G.isSelected?(n=(0,w.Yf)(L.type,!0,G.isSelected),C[5]=L.type,C[6]=G.isSelected,C[7]=n):n=C[7];let ea=n;C[8]!==L.type||C[9]!==G.isSelected?(a=(0,w.Yf)(L.type,!1,G.isSelected),C[8]=L.type,C[9]=G.isSelected,C[10]=a):a=C[10];let el=a;C[11]!==L.html||C[12]!==L.type?(o=(0,w.x_)(L.html,L.type),C[11]=L.html,C[12]=L.type,C[13]=o):o=C[13];let[eo,es]=o;C[14]!==es?(s=es&&["+","-"].includes(es),C[14]=es,C[15]=s):s=C[15];let ef=s,[eh,eg]=(0,l.useState)(!1),[ep,eb]=(0,l.useState)(!1);C[16]!==L||C[17]!==M?(c=eX(L,M),C[16]=L,C[17]=M,C[18]=c):c=C[18];let{currentHunk:ev,nextHunk:ey,previousHunk:eC}=c,ex=`inline-dialog-heading-${(0,l.useId)()}`,eL="DELETION"!==L.type?"RIGHT":"LEFT",e_="RIGHT"===eL?L.right:L.left;C[19]!==e_||C[20]!==eL?(u=(0,w.oH)(e_,eL),C[19]=e_,C[20]=eL,C[21]=u):u=C[21];let eS=u,eN=V(eS??""),{threads:ew,annotations:eD,commentsPreference:ej}=(0,x.rP)(D,eS??"");C[22]!==ew?(m=ew.filter(iW),C[22]=ew,C[23]=m):m=C[23];let eI=m,ek=eI.length+eD.length!==0,eA=G.isSelected??!1,eE=ej===nx.sI.Collapsed,[eT,eR]=(0,l.useState)(!1),eO=ek&&eE;C[24]!==eO?(f=(0,w.S4)({hasThreads:eO}),C[24]=eO,C[25]=f):f=C[25];let e$=f,eM=(0,l.useRef)(null),eF=(0,l.useRef)(null),eB="DELETION"===L.type,[eP,eH]=(0,l.useState)(eI.length>0||eD.length>0||eN),[eK,eU]=(0,l.useState)(eN??!1),eV=P&&(!eE||eT||eK)&&(eP||ek||eN||eK),eq=(0,w.u6)(Q,0),ez=(0,w.u6)(Q,1),eW=(0,w.u6)(Q,2),eG=H(eW);C[26]!==X||C[27]!==L.blobLineNumber||C[28]!==L.type?(h=(0,N.IQ)(X,(0,N.XU)(L.type),L.blobLineNumber),C[26]=X,C[27]=L.blobLineNumber,C[28]=L.type,C[29]=h):h=C[29];let eJ=h;C[30]!==eW||C[31]!==J||C[32]!==eN||C[33]!==ek||C[34]!==eU?(g=e=>{!function(e,{hasThreads:t,hasStoredComment:n,enableDialogMode:i,codeCellId:r,setIsNewConversationDialogOpen:a}){if("Enter"===e.key&&iB(e)){if(e.preventDefault(),n){i(r),iH(e);return}if(t){i(r),iP(e);return}a(!0)}}(e,{hasThreads:ek,hasStoredComment:eN,codeCellId:eW,enableDialogMode:J,setIsNewConversationDialogOpen:eU})},C[30]=eW,C[31]=J,C[32]=eN,C[33]=ek,C[34]=eU,C[35]=g):g=C[35];let eY=g,eZ=F(ec),e0=F(ed),e1=F(eu),e2=F(em),e3=q(eW);C[36]!==T||C[37]!==eU||C[38]!==eH?(p=()=>{let{shouldStartConversation:e}=T();e&&(eU(!0),eH(!0))},C[36]=T,C[37]=eU,C[38]=eH,C[39]=p):p=C[39];let e4=p;return C[40]!==eD||C[41]!==j||C[42]!==e2||C[43]!==el||C[44]!==eW||C[45]!==e$||C[46]!==eT||C[47]!==eE||C[48]!==ej||C[49]!==$||C[50]!==ev||C[51]!==X||C[52]!==L||C[53]!==D||C[54]!==O||C[55]!==A||C[56]!==E||C[57]!==R||C[58]!==eY||C[59]!==eN||C[60]!==e0||C[61]!==ex||C[62]!==e3||C[63]!==eh||C[64]!==K||C[65]!==eG||C[66]!==eB||C[67]!==eK||C[68]!==eA||C[69]!==eq||C[70]!==eJ||C[71]!==eo||C[72]!==eS||C[73]!==ea||C[74]!==eL||C[75]!==es||C[76]!==_||C[77]!==ey||C[78]!==S||C[79]!==eC||C[80]!==ez||C[81]!==eR||C[82]!==e1||C[83]!==eg||C[84]!==eU||C[85]!==eb||C[86]!==eH||C[87]!==P||C[88]!==eV||C[89]!==ep||C[90]!==eZ||C[91]!==z||C[92]!==ef||C[93]!==W||C[94]!==eI||C[95]!==I||C[96]!==k||C[97]!==B||C[98]!==er?(v=K?(0,i.jsx)(iR,{currentHunk:ev,diffAnchor:X,diffLine:L,isSplit:!1,nextHunk:ey,nextLine:_,previousHunk:eC,prevLine:S}):(0,i.jsxs)(i.Fragment,{children:[z?(0,i.jsxs)("td",{className:(0,b.$)(iq,iU.includes(L.type)&&"diff-line-number-neutral"),"data-diff-side":"left","data-diff-line-key":L.key,"data-first-unified-line-number-cell":"true","data-grid-cell-id":eq,"data-line-number":L.left,"data-selected":eA,role:"gridcell",style:{backgroundColor:ea},tabIndex:-1,onKeyDown:eY,onMouseDown:A,onMouseEnter:E,children:[eB&&L.hasHiddenUnicode&&(0,i.jsx)(iM,{children:(0,i.jsx)(iF.o,{})}),L.left]}):(0,i.jsx)("td",{style:{backgroundColor:ea},"data-grid-cell-id":eq,"data-selected":eA,className:iV,role:"gridcell",onKeyDown:eY,tabIndex:-1}),W?(0,i.jsxs)("td",{className:(0,b.$)(iq,iU.includes(L.type)&&"diff-line-number-neutral"),"data-diff-side":"right","data-diff-line-key":L.key,"data-first-unified-line-number-cell":"false","data-grid-cell-id":ez,"data-line-number":L.right,"data-selected":eA,role:"gridcell",style:{backgroundColor:ea},tabIndex:-1,onKeyDown:eY,onMouseDown:A,onMouseEnter:E,children:[!eB&&L.hasHiddenUnicode&&(0,i.jsx)(iM,{children:(0,i.jsx)(iF.o,{})}),L.right]}):(0,i.jsx)("td",{style:{backgroundColor:ea},"data-grid-cell-id":ez,"data-selected":eA,className:iV,role:"gridcell",onKeyDown:eY,tabIndex:-1}),(0,i.jsxs)("td",{"data-grid-cell-id":eW,className:"diff-text-cell focusable-grid-cell left-side",style:{backgroundColor:el,paddingRight:e$},"data-diff-line-key":L.key,"data-line-anchor":eJ,"data-diff-side":eL.toLowerCase(),"data-line-number":eB?L.left:L.right,"data-selected":eA,onKeyDown:eY,onMouseEnter:e=>{eZ(eW),E(e)},onMouseLeave:()=>e0(eW),onFocus:()=>e1(eW),onBlur:e=>{let t=e.relatedTarget;t instanceof Node&&e.currentTarget.contains(t)||e2()},"aria-labelledby":eG?ex:void 0,role:eG?"dialog":"gridcell",ref:e=>{e3?eM.current=e:eM.current=null},tabIndex:-1,children:[eG&&(0,i.jsx)("h1",{id:ex,className:"sr-only",children:"Comment view"}),(0,i.jsx)(iO,{lineHtml:eo,lineType:L.type,lineTypeCharacter:ef?es:void 0}),L.displayNoNewLineWarning&&(0,i.jsx)(d.NoEntryIcon,{size:16,className:"fgColor-danger"}),eV?(0,i.jsx)(tW,{diffLine:L,gridCellId:eW,gutterSizeOffset:e$,inlineMarkersRef:eF,cellRef:eM,fileAnchor:X,dispatchMarkersStatus:eQ.l,shouldListenForEscapeKey:!0,batchingEnabled:!0,lineMarkersKey:eS,annotations:eD,conversationListThreads:eI,filePath:D,onCloseFocusMode:eQ.l,isRowSelected:eA,lineType:L.type,shouldStartNewConversationWithSuggestedChange:ep,viewerData:er,onCloseConversationList:()=>{eU(!1),eH(!1),eb(!1)},onDeleteLineComment:()=>{eU(!1),eH(!1),eb(!1)},children:(eK||eN)&&(0,i.jsx)("div",{className:(0,b.$)(" border rounded-2 color-border-default",(eI.length,"mt-2 mb-1")),children:(0,i.jsx)(nu,{diffLine:L,diffAnchor:X,batchingEnabled:!0,filePath:D,focusOnMount:!eN,isLeftSide:eB,isInDialogMode:!1,isOpen:!0,isRowSelected:eA,shouldStartNewConversationWithSuggestedChange:ep,viewerData:er,onCloseCommentDialog:()=>{eM.current?.focus(),eU(!1),eH(!1),eb(!1)}})})}):null,(e3||eh)&&(0,i.jsx)(ie,{openStartConversationDialog:e=>{eb(e),eU(!0),eH(!0)},authorAvatarUrl:j??"",authorLogin:I??"",ref:eM,copilotChatReference:$,currentHunk:ev,diffAnchor:X,diffLine:L,threads:eI,annotations:eD,hasDraftComment:eN,handleMouseLeaveAddCommentButton:R,handleMouseDownAddCommentButton:O,isLeftSide:eB,isSplit:!1,filePath:D,nextHunk:ey,previousHunk:eC,shouldDisplayComments:P,shouldDisplayMinimizedComments:P,shouldDisplayCollapseComments:eT,setIsContextMenuOpen:eg,cellId:eW,contextMenuOpen:eh,isAddCommentBoxOpen:eK,toggleViewingMarkers:()=>eR(!eT),viewerData:{avatarUrl:j??"",diffViewPreference:"unified",lineSpacingPreference:"compact",login:I??"",commentsPreference:ej,shouldDisplayComments:P??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:B??!1,viewerCanApplySuggestion:k??!1}}),(eI.length>0||eD.length>0)&&eE&&(0,i.jsx)("div",{"aria-hidden":"true",className:(0,b.$)("position-absolute top-0 d-flex user-select-none",i$),children:(0,i.jsx)(nj,{threads:eI,annotations:eD,lineSpacingPreference:"compact"})})]})]}),C[40]=eD,C[41]=j,C[42]=e2,C[43]=el,C[44]=eW,C[45]=e$,C[46]=eT,C[47]=eE,C[48]=ej,C[49]=$,C[50]=ev,C[51]=X,C[52]=L,C[53]=D,C[54]=O,C[55]=A,C[56]=E,C[57]=R,C[58]=eY,C[59]=eN,C[60]=e0,C[61]=ex,C[62]=e3,C[63]=eh,C[64]=K,C[65]=eG,C[66]=eB,C[67]=eK,C[68]=eA,C[69]=eq,C[70]=eJ,C[71]=eo,C[72]=eS,C[73]=ea,C[74]=eL,C[75]=es,C[76]=_,C[77]=ey,C[78]=S,C[79]=eC,C[80]=ez,C[81]=eR,C[82]=e1,C[83]=eg,C[84]=eU,C[85]=eb,C[86]=eH,C[87]=P,C[88]=eV,C[89]=ep,C[90]=eZ,C[91]=z,C[92]=ef,C[93]=W,C[94]=eI,C[95]=I,C[96]=k,C[97]=B,C[98]=er,C[99]=v):v=C[99],C[100]!==e4||C[101]!==v?(y=(0,i.jsx)("tr",{className:"diff-line-row",onMouseUp:e4,children:v}),C[100]=e4,C[101]=v,C[102]=y):y=C[102],y});function iW(e){return!e.shouldNotRenderInDiffLines}iz.displayName="SimpleUnifiedDiffRow";let iG=(0,l.memo)(function(e){let t,n,a,l=(0,r.c)(25),{diffAnchor:o,diffLines:s,filePath:d,tableRef:c,avatarURL:u,userLogin:m,viewerCanApplySuggestion:f,handleMouseDownOnNumberCell:h,handleMouseEnterCell:g,handleMouseUpRow:p,handleMouseLeaveAddCommentButton:b,handleMouseDownAddCommentButton:v,copilotChatReference:y,viewerCanComment:C,shouldDisplayComments:x}=e;l[0]!==s?(t=eJ(s),l[0]=s,l[1]=t):t=l[1];let L=t,{addLineToSelection:_,clearSelectedLines:S,selectMultipleLines:N}=F(ei),w=F(X);return l[2]!==_||l[3]!==S||l[4]!==o||l[5]!==w||l[6]!==N||l[7]!==s||l[8]!==c?(n={addLineToSelection:_,clearSelectedLines:S,containerRef:c,fileAnchor:o,getfirstLineSelectionOnDrag:w,isSplitDiff:!1,leftLines:s,selectMultipleLines:N,disabled:!1},l[2]=_,l[3]=S,l[4]=o,l[5]=w,l[6]=N,l[7]=s,l[8]=c,l[9]=n):n=l[9],ij(n),l[10]!==u||l[11]!==y||l[12]!==s||l[13]!==d||l[14]!==v||l[15]!==h||l[16]!==g||l[17]!==b||l[18]!==p||l[19]!==L||l[20]!==x||l[21]!==m||l[22]!==f||l[23]!==C?(a=s.map((e,t)=>{let n=`unified-diff-row-l:${e.left}-r:${e.right}-b:${e.blobLineNumber}`,r=s[t+1],a=s[t-1];return(0,i.jsx)(iz,{hunksData:L,diffLine:e,nextDiffLine:r,prevDiffLine:a,filePath:d,handleMouseDownOnNumberCell:h,handleMouseEnterCell:g,handleMouseUpRow:p,handleMouseLeaveAddCommentButton:b,handleMouseDownAddCommentButton:v,copilotChatReference:y,avatarURL:u,userLogin:m,viewerCanApplySuggestion:f,viewerCanComment:C,shouldDisplayComments:x},n)}),l[10]=u,l[11]=y,l[12]=s,l[13]=d,l[14]=v,l[15]=h,l[16]=g,l[17]=b,l[18]=p,l[19]=L,l[20]=x,l[21]=m,l[22]=f,l[23]=C,l[24]=a):a=l[24],a});iG.displayName="SimpleUnifiedDiffLines";let iX=["CONTEXT","INJECTED_CONTEXT"],iJ="focusable-grid-cell empty-diff-line left-side",iQ="focusable-grid-cell new-diff-line-number left-side",iY="diff-text-cell v-align-top focusable-grid-cell",iZ=(0,l.memo)(function(e){let t,n,a,o,s,c,u,m,f,h,g,p,v,y,C,L,_,S,D,j,I,k,A,E,T,R,O=(0,r.c)(142),{leftDiffLine:$,rightDiffLine:M,nextDiffLine:B,prevDiffLine:P,filePath:K,handleMouseDownOnNumberCell:z,handleMouseEnterCell:W,handleMouseUpRow:G,handleDiffSideCellSelectionBlocking:X,handleMouseLeaveAddCommentButton:J,handleMouseDownAddCommentButton:Q,copilotChatReference:Y,avatarURL:Z,userLogin:en,viewerCanApplySuggestion:ei,hunksData:er,viewerCanComment:ea,shouldDisplayComments:el}=e,eo=$?.type==="HUNK",es=F(et),ef=U($?.key),eh=U(M?.key);if(O[0]!==es||O[1]!==$||O[2]!==M){let e=(0,w.qX)(es,$??"empty-diff-line",M);n=(0,w.u6)(e,0),t=(0,w.u6)(e,1),a=(0,w.u6)(e,2),o=(0,w.u6)(e,3),O[0]=es,O[1]=$,O[2]=M,O[3]=t,O[4]=n,O[5]=a,O[6]=o}else t=O[3],n=O[4],a=O[5],o=O[6];let eg=o,{enableDialogMode:ep}=F(ee),eb=(ef.isSelected||eh.isSelected)??!1;O[7]!==eb||O[8]!==$?(s=$?(0,w.Yf)($.type,!0,eb):"",O[7]=eb,O[8]=$,O[9]=s):s=O[9];let ev=s;O[10]!==eb||O[11]!==M?(c=M?(0,w.Yf)(M.type,!0,eb):"",O[10]=eb,O[11]=M,O[12]=c):c=O[12];let ey=c;O[13]!==eb||O[14]!==$?(u=$?(0,w.Yf)($.type,!1,eb):"",O[13]=eb,O[14]=$,O[15]=u):u=O[15];let eC=u;O[16]!==eb||O[17]!==M?(m=M?(0,w.Yf)(M.type,!1,eb):"",O[16]=eb,O[17]=M,O[18]=m):m=O[18];let ex=m,eL=`inline-dialog-heading-${(0,l.useId)()}`,e_=H(t),eS=H(eg);O[19]!==$?(f=$?(0,w.x_)($.html,$.type):[void 0,void 0],O[19]=$,O[20]=f):f=O[20];let[eN,ew]=f;O[21]!==ew?(h=ew&&["+","-"].includes(ew),O[21]=ew,O[22]=h):h=O[22];let eD=h;O[23]!==M?(g=M?(0,w.x_)(M.html,M.type):[void 0,void 0],O[23]=M,O[24]=g):g=O[24];let[ej,eI]=g;O[25]!==eI?(p=eI&&["+","-"].includes(eI),O[25]=eI,O[26]=p):p=O[26];let ek=p;O[27]!==$?(v=$?(0,w.oH)($.left,"LEFT"):void 0,O[27]=$,O[28]=v):v=O[28];let eA=v,{threads:eE,annotations:eT}=(0,x.rP)(K,eA??"");O[29]!==eE?(y=eE.filter(i0),O[29]=eE,O[30]=y):y=O[30];let eR=y,eO=V(eA??""),e$=Z??"",eM=en??"",eF=ei??!1,eB=ea??!1;O[31]!==e$||O[32]!==eM||O[33]!==eF||O[34]!==eB?(C={avatarUrl:e$,login:eM,viewerCanApplySuggestion:eF,viewerCanComment:eB},O[31]=e$,O[32]=eM,O[33]=eF,O[34]=eB,O[35]=C):C=O[35];let eP=C;O[36]!==M?(L=M?(0,w.oH)(M.right,"RIGHT"):void 0,O[36]=M,O[37]=L):L=O[37];let eH=L,eK=V(eH??""),{threads:eU,annotations:eV,commentsPreference:eq}=(0,x.rP)(K,eH??"");O[38]!==eU?(_=eU.filter(i1),O[38]=eU,O[39]=_):_=O[39];let ez=_,eW=eq===nx.sI.Collapsed,[eG,eJ]=(0,l.useState)(!1),[eY,eZ]=(0,l.useState)(!1),[e0,e1]=(0,l.useState)(eO??!1),[e2,e3]=(0,l.useState)(!1),[e4,e6]=(0,l.useState)(!1),[e5,e7]=(0,l.useState)(eK??!1),[e8,e9]=(0,l.useState)(!1),[te,tt]=(0,l.useState)(!1),[tn,ti]=(0,l.useState)(eR.length>0||eT.length>0||e0),[tr,ta]=(0,l.useState)(ez.length>0||eV.length>0||e5),tl=eR.length+eT.length!==0,to=ez.length+eV.length!==0,ts=tl&&eW;O[40]!==ts?(S=(0,w.S4)({hasThreads:ts}),O[40]=ts,O[41]=S):S=O[41];let td=S,tc=to&&eW;O[42]!==tc?(D=(0,w.S4)({hasThreads:tc}),O[42]=tc,O[43]=D):D=O[43];let tu=D,tm=(0,w.Po)($)?(0,w.Po)(M)?void 0:M:$,tf=el&&(!eW||eG||e0)&&(tn||tl||eO||e0),th=el&&(!eW||eY||e5)&&(tr||to||eK||e5),tg=(0,l.useRef)(null),tp=(0,l.useRef)(null),tb=(0,l.useRef)(null);O[44]!==ep||O[45]!==eO||O[46]!==tl||O[47]!==eK||O[48]!==to||O[49]!==t||O[50]!==eg?(j=e=>{!function(e,{hasLeftThreads:t,hasRightThreads:n,hasRightStoredComment:i,hasLeftStoredComment:r,enableDialogMode:a,leftCodeCellId:l,rightCodeCellId:o,setIsLeftNewConversationDialogOpen:s,setIsRightNewConversationDialogOpen:d}){if("Enter"!==e.key||!iB(e))return;e.preventDefault();let c=e.currentTarget.getAttribute("data-diff-side");if("left"===c){if(r){a(l),iH(e);return}if(t){a(l),iP(e);return}s(!0)}else if("right"===c){if(i){a(o),iH(e);return}if(n){a(o),iP(e);return}d(!0)}}(e,{hasLeftThreads:tl,hasRightThreads:to,hasRightStoredComment:eK,hasLeftStoredComment:eO,enableDialogMode:ep,leftCodeCellId:t,rightCodeCellId:eg,setIsLeftNewConversationDialogOpen:e1,setIsRightNewConversationDialogOpen:e7})},O[44]=ep,O[45]=eO,O[46]=tl,O[47]=eK,O[48]=to,O[49]=t,O[50]=eg,O[51]=j):j=O[51];let tv=j,ty=F(ec),tC=F(ed),tx=F(eu),tL=F(em),t_=q(t),tS=q(eg);O[52]!==G||O[53]!==$||O[54]!==M?(I=e=>{let{shouldStartConversation:t}=G();if(t){let t=e.target,n=t.closest("[data-diff-side]")?.getAttribute("data-diff-side");"left"===n&&$?(e1(!0),ti(!0)):"right"===n&&M?(e7(!0),ta(!0)):$?(e1(!0),ti(!0)):M&&(e7(!0),ta(!0))}},O[52]=G,O[53]=$,O[54]=M,O[55]=I):I=O[55];let tN=I;if(!tm)return null;O[56]!==tm||O[57]!==er?(k=eX(tm,er),O[56]=tm,O[57]=er,O[58]=k):k=O[58];let{currentHunk:tw,nextHunk:tD,previousHunk:tj}=k;O[59]!==es||O[60]!==$?.blobLineNumber||O[61]!==$?.type?(A=(0,N.IQ)(es,(0,N.XU)($?.type??"EMPTY"),$?.blobLineNumber??0),O[59]=es,O[60]=$?.blobLineNumber,O[61]=$?.type,O[62]=A):A=O[62];let tI=A;O[63]!==es||O[64]!==M?.blobLineNumber||O[65]!==M?.type?(E=(0,N.IQ)(es,(0,N.XU)(M?.type??"EMPTY"),M?.blobLineNumber??0),O[63]=es,O[64]=M?.blobLineNumber,O[65]=M?.type,O[66]=E):E=O[66];let tk=E;return O[67]!==Z||O[68]!==tL||O[69]!==eW||O[70]!==eq||O[71]!==Y||O[72]!==tw||O[73]!==es||O[74]!==K||O[75]!==X||O[76]!==Q||O[77]!==z||O[78]!==W||O[79]!==J||O[80]!==tv||O[81]!==eO||O[82]!==eK||O[83]!==tC||O[84]!==eL||O[85]!==eo||O[86]!==t_||O[87]!==e2||O[88]!==e_||O[89]!==e0||O[90]!==tS||O[91]!==e8||O[92]!==eS||O[93]!==e5||O[94]!==eb||O[95]!==eT||O[96]!==eC||O[97]!==t||O[98]!==td||O[99]!==eG||O[100]!==$||O[101]!==tI||O[102]!==eN||O[103]!==eA||O[104]!==ev||O[105]!==n||O[106]!==ew||O[107]!==eR||O[108]!==B||O[109]!==tD||O[110]!==P||O[111]!==tj||O[112]!==eV||O[113]!==ex||O[114]!==eg||O[115]!==tu||O[116]!==eY||O[117]!==M||O[118]!==tk||O[119]!==ej||O[120]!==eH||O[121]!==ey||O[122]!==a||O[123]!==eI||O[124]!==ez||O[125]!==tx||O[126]!==el||O[127]!==tf||O[128]!==th||O[129]!==e4||O[130]!==te||O[131]!==ty||O[132]!==eD||O[133]!==ek||O[134]!==en||O[135]!==ei||O[136]!==ea||O[137]!==eP?(T=eo?(0,i.jsx)(iR,{currentHunk:tw,diffAnchor:es,diffLine:$,isSplit:!0,nextHunk:tD,nextLine:B,previousHunk:tj,prevLine:P}):(0,i.jsxs)(i.Fragment,{children:[$?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("td",{className:(0,b.$)(iQ,iX.includes($.type)&&"diff-line-number-neutral"),"data-diff-side":"left","data-diff-line-key":$.key,"data-grid-cell-id":n,"data-line-number":$.left,"data-selected":eb,onMouseDown:z,onMouseEnter:W,onKeyDown:tv,role:"gridcell",style:{backgroundColor:ev},tabIndex:-1,children:[$.hasHiddenUnicode&&(0,i.jsx)(iM,{children:(0,i.jsx)(iF.o,{})}),$.left]}),(0,i.jsxs)("td",{className:(0,b.$)(iY,"left-side-diff-cell"),"data-grid-cell-id":t,"data-diff-line-key":$.key,"data-diff-side":"left","data-line-number":$.left,"data-line-anchor":tI,"data-selected":eb,onKeyDown:tv,onMouseDown:X,onMouseEnter:e=>{ty(t),W(e)},onMouseLeave:()=>tC(t),onFocus:()=>tx(t),onBlur:e=>{let t=e.relatedTarget;t instanceof Node&&e.currentTarget.contains(t)||tL()},"aria-labelledby":e_?eL:void 0,role:e_?"dialog":"gridcell",ref:e=>{t_?tp.current=e:tp.current=null},style:{backgroundColor:eC,paddingRight:td},tabIndex:-1,children:[e_&&(0,i.jsx)("h1",{id:eL,className:"sr-only",children:"Comment view"}),(0,i.jsx)(iO,{lineHtml:eN??"",lineType:$.type,lineTypeCharacter:eD?ew:void 0}),$.displayNoNewLineWarning&&(0,i.jsx)(d.NoEntryIcon,{size:16,className:"fgColor-danger"}),tf&&(0,i.jsx)(tW,{diffLine:$,gridCellId:t,shouldListenForEscapeKey:!0,gutterSizeOffset:td,inlineMarkersRef:tg,cellRef:tp,fileAnchor:es,batchingEnabled:!0,dispatchMarkersStatus:eQ.l,lineMarkersKey:eA,annotations:eT,conversationListThreads:eR,filePath:K,onCloseFocusMode:eQ.l,isRowSelected:eb,lineType:$.type,onCloseConversationList:()=>{e1(!1),ti(!1),e6(!1)},onDeleteLineComment:()=>{e1(!1),ti(!1),e6(!1)},viewerData:eP,children:(e0||eO)&&(0,i.jsx)("div",{className:(0,b.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(nu,{diffLine:$,diffAnchor:es,batchingEnabled:!0,filePath:K,focusOnMount:!eO,isLeftSide:!0,isInDialogMode:!1,isOpen:!0,isRowSelected:eb,viewerData:eP,shouldStartNewConversationWithSuggestedChange:e4,onCloseCommentDialog:()=>{tp.current?.focus(),e1(!1),ti(!1),e6(!1)}})})}),(t_||e2)&&(0,i.jsx)(ie,{openStartConversationDialog:e=>{e6(e),e1(!0),ti(!0)},isAddCommentBoxOpen:e0,authorAvatarUrl:Z??"",authorLogin:en??"",ref:tp,copilotChatReference:Y,currentHunk:tw,diffAnchor:es,diffLine:$,threads:eR,annotations:eT,hasDraftComment:eO,handleMouseLeaveAddCommentButton:J,handleMouseDownAddCommentButton:Q,isLeftSide:!0,isSplit:!0,contextMenuOpen:e2,setIsContextMenuOpen:e3,cellId:t,nextHunk:tD,previousHunk:tj,shouldDisplayComments:el,shouldDisplayMinimizedComments:el,shouldDisplayCollapseComments:eG,filePath:K,toggleViewingMarkers:()=>eJ(!eG),viewerData:{avatarUrl:Z??"",diffViewPreference:"split",lineSpacingPreference:"compact",login:en??"",commentsPreference:eq,shouldDisplayComments:el??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:ea??!1,viewerCanApplySuggestion:ei??!1}}),(eR.length>0||eT.length>0)&&eW&&(0,i.jsx)("div",{"aria-hidden":"true",className:(0,b.$)("position-absolute top-0 d-flex user-select-none",i$),children:(0,i.jsx)(nj,{threads:eR,annotations:eT,lineSpacingPreference:"compact"})})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{role:"gridcell",className:iJ,tabIndex:-1}),(0,i.jsx)("td",{role:"gridcell",className:iJ,tabIndex:-1})]}),M?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("td",{className:(0,b.$)(iQ,iX.includes(M.type)&&"diff-line-number-neutral"),"data-diff-side":"right","data-diff-line-key":M.key,"data-grid-cell-id":a,"data-line-number":M.right,"data-selected":eb,onKeyDown:tv,onMouseDown:z,onMouseEnter:W,role:"gridcell",style:{backgroundColor:ey},tabIndex:-1,children:[M.hasHiddenUnicode&&(0,i.jsx)(iM,{children:(0,i.jsx)(iF.o,{})}),M.right]}),(0,i.jsxs)("td",{className:(0,b.$)(iY,"right-side-diff-cell"),"data-grid-cell-id":eg,"data-diff-line-key":M.key,"data-diff-side":"right","data-line-anchor":tk,"data-line-number":M.right,"data-selected":eb,onKeyDown:tv,onMouseDown:X,onMouseEnter:e=>{ty(eg),W(e)},onMouseLeave:()=>tC(eg),onFocus:()=>tx(eg),onBlur:e=>{let t=e.relatedTarget;t instanceof Node&&e.currentTarget.contains(t)||tL()},"aria-labelledby":eS?eL:void 0,role:eS?"dialog":"gridcell",ref:e=>{tS?tb.current=e:tb.current=null},style:{backgroundColor:ex,paddingRight:tu},tabIndex:-1,children:[eS&&(0,i.jsx)("h1",{id:eL,className:"sr-only",children:"Comment view"}),(0,i.jsx)(iO,{lineHtml:ej??"",lineType:M.type,lineTypeCharacter:ek?eI:void 0}),M.displayNoNewLineWarning&&(0,i.jsx)(d.NoEntryIcon,{size:16,className:"fgColor-danger"}),th&&(0,i.jsx)(tW,{diffLine:M,gridCellId:eg,shouldListenForEscapeKey:!0,gutterSizeOffset:tu,inlineMarkersRef:tg,cellRef:tb,fileAnchor:es,batchingEnabled:!0,dispatchMarkersStatus:eQ.l,lineMarkersKey:eH,annotations:eV,conversationListThreads:ez,filePath:K,viewerData:eP,onCloseFocusMode:eQ.l,isRowSelected:eb,lineType:M.type,onCloseConversationList:()=>{e7(!1),ta(!1),tt(!1)},onDeleteLineComment:()=>{e7(!1),ta(!1),tt(!1)},children:(e5||eK)&&(0,i.jsx)("div",{className:(0,b.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(nu,{diffLine:M,diffAnchor:es,batchingEnabled:!0,filePath:K,focusOnMount:!eK,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,isRowSelected:eb,shouldStartNewConversationWithSuggestedChange:te,viewerData:eP,onCloseCommentDialog:()=>{tb.current?.focus(),e7(!1),ta(!1),tt(!1)}})})}),(tS||e8)&&(0,i.jsx)(ie,{openStartConversationDialog:e=>{tt(e),e7(!0),ta(!0)},authorAvatarUrl:Z??"",authorLogin:en??"",ref:tb,isAddCommentBoxOpen:e5,copilotChatReference:Y,currentHunk:tw,diffAnchor:es,diffLine:M,threads:ez,contextMenuOpen:e8,setIsContextMenuOpen:e9,cellId:eg,annotations:eV,hasDraftComment:eK,handleMouseLeaveAddCommentButton:J,handleMouseDownAddCommentButton:Q,isLeftSide:!1,isSplit:!0,nextHunk:tD,previousHunk:tj,filePath:K,shouldDisplayComments:el,shouldDisplayMinimizedComments:el,shouldDisplayCollapseComments:eY,toggleViewingMarkers:()=>eZ(!eY),viewerData:{avatarUrl:Z??"",diffViewPreference:"split",lineSpacingPreference:"compact",login:en??"",commentsPreference:eq,shouldDisplayComments:el??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:ea??!1,viewerCanApplySuggestion:ei??!1}}),(ez.length>0||eV.length>0)&&eW&&(0,i.jsx)("div",{"aria-hidden":"true",className:(0,b.$)("position-absolute top-0 d-flex user-select-none",i$),children:(0,i.jsx)(nj,{threads:ez,annotations:eV,lineSpacingPreference:"compact"})})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{role:"gridcell",className:iJ,tabIndex:-1}),(0,i.jsx)("td",{role:"gridcell",className:iJ,tabIndex:-1})]})]}),O[67]=Z,O[68]=tL,O[69]=eW,O[70]=eq,O[71]=Y,O[72]=tw,O[73]=es,O[74]=K,O[75]=X,O[76]=Q,O[77]=z,O[78]=W,O[79]=J,O[80]=tv,O[81]=eO,O[82]=eK,O[83]=tC,O[84]=eL,O[85]=eo,O[86]=t_,O[87]=e2,O[88]=e_,O[89]=e0,O[90]=tS,O[91]=e8,O[92]=eS,O[93]=e5,O[94]=eb,O[95]=eT,O[96]=eC,O[97]=t,O[98]=td,O[99]=eG,O[100]=$,O[101]=tI,O[102]=eN,O[103]=eA,O[104]=ev,O[105]=n,O[106]=ew,O[107]=eR,O[108]=B,O[109]=tD,O[110]=P,O[111]=tj,O[112]=eV,O[113]=ex,O[114]=eg,O[115]=tu,O[116]=eY,O[117]=M,O[118]=tk,O[119]=ej,O[120]=eH,O[121]=ey,O[122]=a,O[123]=eI,O[124]=ez,O[125]=tx,O[126]=el,O[127]=tf,O[128]=th,O[129]=e4,O[130]=te,O[131]=ty,O[132]=eD,O[133]=ek,O[134]=en,O[135]=ei,O[136]=ea,O[137]=eP,O[138]=T):T=O[138],O[139]!==tN||O[140]!==T?(R=(0,i.jsx)("tr",{className:"diff-line-row",onMouseUp:tN,children:T}),O[139]=tN,O[140]=T,O[141]=R):R=O[141],R});function i0(e){return!e.shouldNotRenderInDiffLines}function i1(e){return!e.shouldNotRenderInDiffLines}iZ.displayName="SimpleSplitDiffRow";let i2=(0,l.memo)(function(e){let t,n,a,l=(0,r.c)(28),{diffAnchor:o,diffLines:s,filePath:d,avatarURL:c,userLogin:u,viewerCanApplySuggestion:m,handleMouseDownOnNumberCell:f,handleMouseEnterCell:h,handleMouseUpRow:g,handleDiffSideCellSelectionBlocking:p,handleMouseLeaveAddCommentButton:b,handleMouseDownAddCommentButton:v,copilotChatReference:y,viewerCanComment:C,shouldDisplayComments:x,tableRef:L}=e,{leftLines:_,rightLines:S}=function(e){let t,n,i=(0,r.c)(5);i[0]!==e?(t=function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(void 0);for(;n.length<t.length;)n.push(void 0)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:a,rightLines:l}=t;return i[2]!==a||i[3]!==l?(n={leftLines:a,rightLines:l},i[2]=a,i[3]=l,i[4]=n):n=i[4],n}(s);l[0]!==s?(t=eJ(s),l[0]=s,l[1]=t):t=l[1];let N=t,{addLineToSelection:D,clearSelectedLines:j,selectMultipleLines:I}=F(ei),k=F(X);return l[2]!==D||l[3]!==j||l[4]!==o||l[5]!==k||l[6]!==I||l[7]!==_||l[8]!==S||l[9]!==L?(n={addLineToSelection:D,clearSelectedLines:j,containerRef:L,fileAnchor:o,getfirstLineSelectionOnDrag:k,isSplitDiff:!0,leftLines:_,rightLines:S,selectMultipleLines:I,disabled:!1},l[2]=D,l[3]=j,l[4]=o,l[5]=k,l[6]=I,l[7]=_,l[8]=S,l[9]=L,l[10]=n):n=l[10],ij(n),l[11]!==c||l[12]!==y||l[13]!==d||l[14]!==p||l[15]!==v||l[16]!==f||l[17]!==h||l[18]!==b||l[19]!==g||l[20]!==N||l[21]!==_||l[22]!==S||l[23]!==x||l[24]!==u||l[25]!==m||l[26]!==C?(a=_.map((e,t)=>{let n=_[t],r=S[t],a=_[t-1],l=(0,w.Po)(_[t+1])?S[t+1]:_[t+1],o=`${(0,w.Po)(n)||!n?`empty-left-diff-${t}`:n.blobLineNumber}-${(0,w.Po)(r)||!r?`empty-right-diff-${t}`:r.blobLineNumber}`;return(0,i.jsx)(iZ,{hunksData:N,leftDiffLine:n,rightDiffLine:r,prevDiffLine:a,nextDiffLine:l,filePath:d,handleMouseDownOnNumberCell:f,handleMouseEnterCell:h,handleMouseUpRow:g,handleDiffSideCellSelectionBlocking:p,handleMouseLeaveAddCommentButton:b,handleMouseDownAddCommentButton:v,copilotChatReference:y,avatarURL:c,userLogin:u,viewerCanApplySuggestion:m,viewerCanComment:C,shouldDisplayComments:x},o)}),l[11]=c,l[12]=y,l[13]=d,l[14]=p,l[15]=v,l[16]=f,l[17]=h,l[18]=b,l[19]=g,l[20]=N,l[21]=_,l[22]=S,l[23]=x,l[24]=u,l[25]=m,l[26]=C,l[27]=a):a=l[27],a});function i3(e){let t,n=(0,r.c)(3),{diffAnchor:a,children:l}=e;return n[0]!==l||n[1]!==a?(t=(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":a,children:l}),n[0]=l,n[1]=a,n[2]=t):t=n[2],t}i2.displayName="SimpleSplitDiffLines",i3.displayName="PlainTextStatus";let i4=(0,l.memo)(function(e){let t,n=(0,r.c)(42),{diffEntryData:a,diffLinesManuallyUnhidden:l,baseHelpUrl:o,handleSetShowHiddenUnicodeCharacters:s,onHandleLoadDiff:d,copilotChatReference:c,hasExpandedAllRanges:u,isSplitView:m,showHiddenUnicodeCharacters:f,subjectId:h,tableAriaLabel:g,viewerData:p}=e,b=`diff-${a.pathDigest}`;if(a.isBinary){let e;return n[0]!==b?(e=(0,i.jsx)(i3,{diffAnchor:b,children:"Binary file not shown."}),n[0]=b,n[1]=e):e=n[1],e}if((0,eH.dK)(a)){let e;return n[2]!==b?(e=(0,i.jsx)(i3,{diffAnchor:b,children:"File renamed without changes."}),n[2]=b,n[3]=e):e=n[3],e}if((0,eH.Jc)(a)){let e;return n[4]!==b?(e=(0,i.jsx)(i3,{diffAnchor:b,children:"File copied without changes."}),n[4]=b,n[5]=e):e=n[5],e}if((0,eH.Sn)(a,a.status,a.oldTreeEntry?.mode,a.newTreeEntry?.mode)){let e;return n[6]!==b?(e=(0,i.jsx)(i3,{diffAnchor:b,children:"File mode changed."}),n[6]=b,n[7]=e):e=n[7],e}if(!l&&(0,eH.HI)(a)){let e,t,r=a.truncatedReason;return n[8]!==r?(e=(0,eH.l_)(r),n[8]=r,n[9]=e):e=n[9],n[10]!==b||n[11]!==d||n[12]!==e?(t=(0,i.jsx)(eV,{diffAnchor:b,onLoadDiff:d,children:e}),n[10]=b,n[11]=d,n[12]=e,n[13]=t):t=n[13],t}if((0,eH.s8)(a)){let e;return n[14]!==b?(e=(0,i.jsx)(i3,{diffAnchor:b,children:"Whitespace-only changes."}),n[14]=b,n[15]=e):e=n[15],e}if(!l&&(0,eH.lO)(a)){let e;return n[16]!==b||n[17]!==d?(e=(0,i.jsx)(eV,{diffAnchor:b,onLoadDiff:d,children:"This file was deleted."}),n[16]=b,n[17]=d,n[18]=e):e=n[18],e}if(!l&&(0,eH.xW)(a)){let e,t=`${o}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`;return n[19]!==b||n[20]!==d||n[21]!==t?(e=(0,i.jsxs)(eV,{diffAnchor:b,helpText:"customizing how changed files appear on GitHub.",helpUrl:t,onLoadDiff:d,children:["Some generated files are not rendered by default. Learn more about"," "]}),n[19]=b,n[20]=d,n[21]=t,n[22]=e):e=n[22],e}if(a.isTooBig&&0===a.diffLines.length)if(l){let e,t,r=`${o}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`;return n[23]!==r?(e=(0,i.jsx)(eU.A,{inline:!0,href:r,children:"check out this pull request locally."}),n[23]=r,n[24]=e):e=n[24],n[25]!==b||n[26]!==e?(t=(0,i.jsxs)(i3,{diffAnchor:b,children:["Diff is too big to render. To view,"," ",e]}),n[25]=b,n[26]=e,n[27]=t):t=n[27],t}else{let e;return n[28]!==b||n[29]!==d?(e=(0,i.jsx)(eV,{diffAnchor:b,onLoadDiff:d,children:"Large diffs are not rendered by default."}),n[28]=b,n[29]=d,n[30]=e):e=n[30],e}return a.diffLines?(n[31]!==c||n[32]!==b||n[33]!==a||n[34]!==s||n[35]!==u||n[36]!==m||n[37]!==f||n[38]!==h||n[39]!==g||n[40]!==p?(t=(0,i.jsx)(i6,{diffAnchor:b,diffEntryData:a,viewerData:p,copilotChatReference:c,handleSetShowHiddenUnicodeCharacters:s,hasExpandedAllRanges:u,isSplitView:m,showHiddenUnicodeCharacters:f,subjectId:h,tableAriaLabel:g}),n[31]=c,n[32]=b,n[33]=a,n[34]=s,n[35]=u,n[36]=m,n[37]=f,n[38]=h,n[39]=g,n[40]=p,n[41]=t):t=n[41],t):null});function i6(e){let t,n,a,s,d,c,u,f,h,g,p,v,y,C,L,_,S,w,D,j,I=(0,r.c)(93),{diffAnchor:k,viewerData:E,diffEntryData:T,copilotChatReference:R,handleSetShowHiddenUnicodeCharacters:O,hasExpandedAllRanges:$,isSplitView:M,showHiddenUnicodeCharacters:B,tableAriaLabel:P}=e,H=(0,l.useRef)(null),{clearSelectedLines:K,clearFirstLineSelectionOnDrag:U,setIsDraggingFromAddCommentButton:V}=F(ei),q=F(X),z=F(Q),[G,Z]=(0,l.useState)(null),ee=T.newTreeEntry?.lineCount??T.oldTreeEntry?.lineCount??0;e:{let e=T.diffLines[T.diffLines.length-1];if(e?.blobLineNumber&&e.blobLineNumber<ee){let n;I[0]!==T.diffLines||I[1]!==e.blobLineNumber?(n=T.diffLines.concat({__id:eW,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}),I[0]=T.diffLines,I[1]=e.blobLineNumber,I[2]=n):n=I[2],t=n;break e}t=T.diffLines}let et=t,{lineSpacingPreference:en,tabSizePreference:er}=E,ea=F(Y),el=(0,x.Py)(T.pathDigest);I[3]!==K||I[4]!==ea||I[5]!==el?(n=()=>{!el&&ea()&&(K(),(0,ef.i)("Selection Cleared"))},a=[K,ea,el],I[3]=K,I[4]=ea,I[5]=el,I[6]=n,I[7]=a):(n=I[6],a=I[7]),(0,l.useEffect)(n,a),I[8]!==et?(s=(0,N.c7)(et),I[8]=et,I[9]=s):s=I[9];let eo=s;I[10]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{Z(e.currentTarget.classList.contains("left-side-diff-cell")?"right":"left")},I[10]=d):d=I[10];let es=d;I[11]!==T.path||I[12]!==$?(c=e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!$&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${T.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},I[11]=T.path,I[12]=$,I[13]=c):c=I[13];let ed=c,ec=F(J),eu=F(W);I[14]!==et||I[15]!==G||I[16]!==eu||I[17]!==ec||I[18]!==M?(u=async e=>{let t=document.getSelection();if(t&&t.rangeCount>=1){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, td.new-diff-line-number, span.diff-text-marker${M?`, ${"left"===G?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length&&!e.matches?.("td.diff-text-cell"))continue;let t=e.textContent;"\n"===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join("\n")),e.preventDefault();return}if("TD"!==e.target.nodeName)return;let n=e.target.getAttribute("data-diff-side");if(!n)return;let i=eu()[0];i?await n0({diffLine:i,diffLines:et,getSelectedDiffLines:eu,getSelectedLineRange:ec,isSplit:M,isLeftSide:"left"===n}):await (0,nF.D)(e.target.textContent)},I[14]=et,I[15]=G,I[16]=eu,I[17]=ec,I[18]=M,I[19]=u):u=I[19];let em=u;I[20]!==et?(f=et.some(i5),I[20]=et,I[21]=f):f=I[21];let eg=f,{addLineToSelection:ep,selectLine:eb}=F(ei),ev=(0,x.gW)(),{sendAnalyticsEvent:ey}=(0,td.s)(),eC=(0,nb.J)();I[22]!==ep||I[23]!==K||I[24]!==T.pathDigest||I[25]!==q||I[26]!==eC||I[27]!==eu||I[28]!==ec||I[29]!==eb||I[30]!==ey||I[31]!==ev?(h=e=>{let t=e.target,n=t.getAttribute("data-diff-line-key"),i=t.getAttribute("data-diff-side");if(!A(n)||!(0,o.e)(i))return;let r=document.getSelection();r?.empty();let a=eC();(0,ng.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{ey("diff-lines.inp_interaction","PULL_REQUESTS_DIFF_LINE_NUMBER_CLICK",{latency:e.latency}),(0,np.au)({name:"PULL_REQUESTS_DIFF_LINE_NUMBER_CLICK",tags:a,value:e.latency})}});let l=eu();if(n&&1===l.length&&l[0]?.key===n&&null===q()){K(),(0,m.K3)();return}if(ec()&&e.shiftKey)return void ep({lineKey:n,orientation:i},eh);let s=t.getAttribute("data-line-number");s&&(eb({lineKey:n,firstLineSelectionOnDrag:{orientation:i,lineNumber:parseInt(s),shouldStartConversation:!1,lineKey:n}},eh),ev(T.pathDigest))},I[22]=ep,I[23]=K,I[24]=T.pathDigest,I[25]=q,I[26]=eC,I[27]=eu,I[28]=ec,I[29]=eb,I[30]=ey,I[31]=ev,I[32]=h):h=I[32];let ex=h;I[33]!==U||I[34]!==q||I[35]!==z||I[36]!==V?(g=()=>{let e=q(),t=z();return null!==e?U():t&&V(!1),{shouldStartConversation:t&&null!==e}},I[33]=U,I[34]=q,I[35]=z,I[36]=V,I[37]=g):g=I[37];let eL=g;I[38]!==ep||I[39]!==q?(p=e=>{if(1!==e.buttons)return;let t=e.target,n=t.closest("[data-diff-line-key]")?.getAttribute("data-diff-line-key"),i=t.closest("[data-diff-side]")?.getAttribute("data-diff-side");A(n)&&(0,o.e)(i)&&q()&&ep({lineKey:n,orientation:i},eh)},I[38]=ep,I[39]=q,I[40]=p):p=I[40];let e_=p;I[41]!==ec?(v=(e,t)=>{let n=ec();if(!n)return!1;let i="left"===e;return"right"===n.endOrientation&&!i&&n.endLineNumber===t||!!n&&"left"===n.endOrientation&&!!i&&n.endLineNumber===t},I[41]=ec,I[42]=v):v=I[42];let eS=v;I[43]!==ep||I[44]!==T.pathDigest||I[45]!==eS||I[46]!==el||I[47]!==eb||I[48]!==ev?(y=e=>{if(1!==e.buttons)return;let t=e.target,n=t.closest("[data-diff-line-key]")?.getAttribute("data-diff-line-key"),i=t.closest("[data-diff-side]")?.getAttribute("data-diff-side");if(!A(n)||!(0,o.e)(i)||!n)return;let r=t.closest("[data-selected]")?.getAttribute("data-selected"),a=t.closest("[data-line-number]")?.getAttribute("data-line-number"),l=a?parseInt(a,10):void 0;r||!l||eS(i,l)?ep({lineKey:n,orientation:i},eh):eb({lineKey:n,firstLineSelectionOnDrag:{lineNumber:l,orientation:i,lineKey:n,shouldStartConversation:!0}},eh),el||ev(T.pathDigest)},I[43]=ep,I[44]=T.pathDigest,I[45]=eS,I[46]=el,I[47]=eb,I[48]=ev,I[49]=y):y=I[49];let eN=y;I[50]!==K||I[51]!==eS||I[52]!==V?(C=e=>{V(!0);let t=e.target,n=t.closest("[data-diff-side]")?.getAttribute("data-diff-side"),i=t.closest("[data-line-number]")?.getAttribute("data-line-number"),r=i?parseInt(i,10):void 0;(0,o.e)(n)&&r&&!eS(n,r)&&K()},I[50]=K,I[51]=eS,I[52]=V,I[53]=C):C=I[53];let ew=C;I[54]!==eg||I[55]!==O||I[56]!==B?(L=eg&&(0,i.jsx)(eq.a,{isShown:B,toggleShowHiddenCharacters:()=>O(!B)}),I[54]=eg,I[55]=O,I[56]=B,I[57]=L):L=I[57];let eD="compact"===en;I[58]!==eD?(_=(0,b.$)("tab-size","width-full","DiffLines-module__tableLayoutFixed__Ui4OU",{"DiffLines-module__compact__Rvh2a":eD}),I[58]=eD,I[59]=_):_=I[59];let ej=`${eo}px`,eI=`${2*parseFloat(eo)}px`;return I[60]!==ej||I[61]!==eI?(S={"--line-number-cell-width":ej,"--line-number-cell-width-unified":eI},I[60]=ej,I[61]=eI,I[62]=S):S=I[62],I[63]!==R||I[64]!==k||I[65]!==T.path||I[66]!==et||I[67]!==ew||I[68]!==ex||I[69]!==e_||I[70]!==eN||I[71]!==eL||I[72]!==M||I[73]!==eo||I[74]!==E.avatarUrl||I[75]!==E.login||I[76]!==E.shouldDisplayComments||I[77]!==E.viewerCanApplySuggestion||I[78]!==E.viewerCanComment?(w=M?(0,i.jsx)(eK.wj,{lineWidth:eo,children:(0,i.jsx)(i2,{diffAnchor:k,diffLines:et,filePath:T.path,handleDiffSideCellSelectionBlocking:es,handleMouseDownOnNumberCell:ex,handleMouseEnterCell:e_,handleMouseUpRow:eL,handleMouseLeaveAddCommentButton:eN,handleMouseDownAddCommentButton:ew,copilotChatReference:R,avatarURL:E.avatarUrl,userLogin:E.login,viewerCanApplySuggestion:E.viewerCanApplySuggestion,viewerCanComment:E.viewerCanComment,shouldDisplayComments:E.shouldDisplayComments,tableRef:H})}):(0,i.jsx)(eK.Qe,{lineWidth:eo,children:(0,i.jsx)(iG,{diffAnchor:k,diffLines:et,filePath:T.path,handleMouseDownOnNumberCell:ex,handleMouseEnterCell:e_,handleMouseUpRow:eL,handleMouseLeaveAddCommentButton:eN,handleMouseDownAddCommentButton:ew,copilotChatReference:R,avatarURL:E.avatarUrl,userLogin:E.login,viewerCanApplySuggestion:E.viewerCanApplySuggestion,viewerCanComment:E.viewerCanComment,shouldDisplayComments:E.shouldDisplayComments,tableRef:H})}),I[63]=R,I[64]=k,I[65]=T.path,I[66]=et,I[67]=ew,I[68]=ex,I[69]=e_,I[70]=eN,I[71]=eL,I[72]=M,I[73]=eo,I[74]=E.avatarUrl,I[75]=E.login,I[76]=E.shouldDisplayComments,I[77]=E.viewerCanApplySuggestion,I[78]=E.viewerCanComment,I[79]=w):w=I[79],I[80]!==k||I[81]!==G||I[82]!==ed||I[83]!==em||I[84]!==_||I[85]!==S||I[86]!==w||I[87]!==er||I[88]!==P?(D=(0,i.jsx)("table",{"aria-label":P,onKeyDown:ed,ref:H,className:_,"data-block-diff-cell-selection":G,"data-diff-anchor":k,"data-tab-size":er,"data-paste-markdown-skip":!0,onCopy:em,role:"grid",style:S,children:w}),I[80]=k,I[81]=G,I[82]=ed,I[83]=em,I[84]=_,I[85]=S,I[86]=w,I[87]=er,I[88]=P,I[89]=D):D=I[89],I[90]!==L||I[91]!==D?(j=(0,i.jsxs)(i.Fragment,{children:[L,D]}),I[90]=L,I[91]=D,I[92]=j):j=I[92],j}function i5(e){return(0,ez.Y)(e.text)}i4.displayName="DiffLines",i6.displayName="CodeDiffLines";var i7=n(67662),i8=n(46251),i9=n(66935);function re(e){let t,n,a,l,o,s,c=(0,r.c)(28),{submodule:u}=e,{basePath:m,changedFiles:f,contentsUrl:h,newCommitOid:g,oldCommitOid:p,status:b,submoduleUrl:v}=u,y=u.summary.length>0&&u.contentsUrl&&"MODIFIED"===b;switch(b){case"ADDED":{let e;c[0]!==h||c[1]!==g?(e=(0,i.jsx)(ri,{commitOid:g,contentsUrl:h,type:"added"}),c[0]=h,c[1]=g,c[2]=e):e=c[2],t=e;break}case"DELETED":case"REMOVED":{let e;c[3]!==h||c[4]!==p?(e=(0,i.jsx)(ri,{commitOid:p,contentsUrl:h,type:"deleted"}),c[3]=h,c[4]=p,c[5]=e):e=c[5],t=e;break}default:{let e;c[6]!==f||c[7]!==h||c[8]!==g||c[9]!==p?(e=(0,i.jsx)(rr,{newCommitOid:g,oldCommitOid:p,changedFiles:f,contentsUrl:h}),c[6]=f,c[7]=h,c[8]=g,c[9]=p,c[10]=e):e=c[10],t=e}}let C=t,x=`pr-px-3 py-2 ${y?"border-bottom bgColor-muted":""}`;return c[11]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(d.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),c[11]=n):n=c[11],c[12]!==m||c[13]!==v?(a=(0,i.jsx)(rt,{basePath:m,submoduleUrl:v}),c[12]=m,c[13]=v,c[14]=a):a=c[14],c[15]!==C||c[16]!==x||c[17]!==a?(l=(0,i.jsxs)("div",{className:x,children:[n,a,C]}),c[15]=C,c[16]=x,c[17]=a,c[18]=l):l=c[18],c[19]!==h||c[20]!==g||c[21]!==p||c[22]!==y||c[23]!==u.summary?(o=y&&(0,i.jsx)(eD.l,{className:"SubmoduleDiff-module__filesActionList__KgCK2",showDividers:!0,variant:"full",children:u.summary.map(e=>(0,i.jsx)(ra,{compareUrl:`${h}/compare/${p}...${g}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))}),c[19]=h,c[20]=g,c[21]=p,c[22]=y,c[23]=u.summary,c[24]=o):o=c[24],c[25]!==l||c[26]!==o?(s=(0,i.jsxs)("div",{children:[l,o]}),c[25]=l,c[26]=o,c[27]=s):s=c[27],s}function rt(e){let t,n,a=(0,r.c)(5),{basePath:l,submoduleUrl:o}=e;return a[0]!==l||a[1]!==o?(t=o?(0,i.jsx)(eU.A,{inline:!0,href:o,children:l}):l,a[0]=l,a[1]=o,a[2]=t):t=a[2],a[3]!==t?(n=(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t," "]}),a[3]=t,a[4]=n):n=a[4],n}function rn(e){return e.slice(0,7)}function ri(e){let t=(0,r.c)(13),{commitOid:n,contentsUrl:a,type:l}=e,o=void 0===n?"":n,s="added"===l?"added at":"deleted from";if(a){let e,n,r,l=`${a}/tree/${o}`;return t[0]!==o?(e=rn(o),t[0]=o,t[1]=e):e=t[1],t[2]!==l||t[3]!==e?(n=(0,i.jsx)(eU.A,{inline:!0,href:l,children:e}),t[2]=l,t[3]=e,t[4]=n):n=t[4],t[5]!==n||t[6]!==s?(r=(0,i.jsxs)(i.Fragment,{children:[s," ",n]}),t[5]=n,t[6]=s,t[7]=r):r=t[7],r}{let e,n;return t[8]!==o?(e=rn(o),t[8]=o,t[9]=e):e=t[9],t[10]!==e||t[11]!==s?(n=(0,i.jsxs)(i.Fragment,{children:[s," ",e]}),t[10]=e,t[11]=s,t[12]=n):n=t[12],n}}function rr(e){let t,n,a,l=(0,r.c)(12),{newCommitOid:o,oldCommitOid:s,changedFiles:d,contentsUrl:c}=e,u=void 0===o?"":o,m=void 0===s?"":s,f=void 0===d?0:d;l[0]!==f||l[1]!==c||l[2]!==u||l[3]!==m?(t=f>0&&c?`${f} ${1===f?"file":"files"}`:`from ${rn(m)} to ${rn(u)}`,l[0]=f,l[1]=c,l[2]=u,l[3]=m,l[4]=t):t=l[4];let h=t;return l[5]!==h||l[6]!==c||l[7]!==u||l[8]!==m?(n=c?(0,i.jsx)(eU.A,{inline:!0,href:`${c}/compare/${m}...${u}`,children:h}):h,l[5]=h,l[6]=c,l[7]=u,l[8]=m,l[9]=n):n=l[9],l[10]!==n?(a=(0,i.jsxs)(i.Fragment,{children:["updated"," ",n]}),l[10]=n,l[11]=a):a=l[11],a}function ra(e){let t,n,l,o,s,d,c=(0,r.c)(16),{compareUrl:u,linesAdded:m,linesDeleted:f,path:h,pathDigest:g,status:p}=e,b=`${u}#diff-${g}`;return c[0]!==p?(t=(0,i.jsx)(i9.E,{status:p}),c[0]=p,c[1]=t):t=c[1],c[2]!==h?(n=(0,i.jsx)("span",{className:"SubmoduleDiff-module__path__Ra2pU",children:h}),c[2]=h,c[3]=n):n=c[3],c[4]!==m||c[5]!==f?(l=(m>0||f>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:"SubmoduleDiff-module__linesAdded__uCgg2",children:m>0&&(0,i.jsxs)(a.C,{isAddition:!0,children:["+",rl(m)]})}),(0,i.jsx)("div",{className:"SubmoduleDiff-module__linesDeleted__Qb7bx",children:f>0&&(0,i.jsxs)(a.C,{isAddition:!1,children:["-",rl(f)]})})]}),c[4]=m,c[5]=f,c[6]=l):l=c[6],c[7]!==n||c[8]!==l?(o=(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[n,l]}),c[7]=n,c[8]=l,c[9]=o):o=c[9],c[10]!==t||c[11]!==o?(s=(0,i.jsxs)(i8.B,{gap:"condensed",direction:"horizontal",align:"center",className:"SubmoduleDiff-module__fileRow__oBxlW",children:[t,o]}),c[10]=t,c[11]=o,c[12]=s):s=c[12],c[13]!==b||c[14]!==s?(d=(0,i.jsx)(eD.l.LinkItem,{href:b,className:"SubmoduleDiff-module__fileRowLinkItem__SlLM_",children:s}),c[13]=b,c[14]=s,c[15]=d):d=c[15],d}function rl(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}re.displayName="SubmoduleDiff",rt.displayName="SubmodulePath",ri.displayName="SubmoduleCommitChange",rr.displayName="SubmoduleModified",ra.displayName="SubmoduleFileRow";let ro=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,tk.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null;function rs(e){let t,n,a,o,s,c,m,f,h,g,p,v,y,C,x,L,_,S,N,w,D,j,k,A,E,T,R=(0,r.c)(69);if(R[0]!==e){let{fileAnchor:i,filePath:r,thread:l,isFirstThread:d,ghostUser:c,manuallyUpdateCommentsWithThisThreadId:u,...m}=e;t=r,s=l,a=d,n=c,o=m,R[0]=e,R[1]=t,R[2]=n,R[3]=a,R[4]=o,R[5]=s}else t=R[1],n=R[2],a=R[3],o=R[4],s=R[5];let O=(0,l.useRef)(null);R[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,I.A)("localStorage"),R[6]=c):c=R[6];let $=c,M=s?.isResolved,[F,B]=(0,l.useState)(""),[P,H]=(0,l.useState)(M??!1);R[7]!==M||R[8]!==s.id?(m=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${s.id}`);null!==e?H(JSON.parse(e)):M&&H(!0)},f=[M,s.id],R[7]=M,R[8]=s.id,R[9]=m,R[10]=f):(m=R[9],f=R[10]),(0,l.useEffect)(m,f),R[11]!==P||R[12]!==s.id?(h=()=>{window.requestAnimationFrame(()=>{$.setItem(`reviewThreadIsCollapsed_${s.id}`,JSON.stringify(!P))}),H(rc)},R[11]=P,R[12]=s.id,R[13]=h):h=R[13];let K=h,{sendAnalyticsEvent:U}=(0,td.s)(),{mutate:V}=(0,tj.H)(t,"FILE");R[14]!==V||R[15]!==U||R[16]!==s?(g=()=>{s&&!s.isResolved&&(V({threadId:s.id},{onError:()=>B("Failed to resolve thread"),onSuccess:()=>{H(!0),$.removeItem(`reviewThreadIsCollapsed_${s.id}`)}}),U("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},R[14]=V,R[15]=U,R[16]=s,R[17]=g):g=R[17];let q=g,{mutate:z}=(0,tI.i)(t,"FILE");R[18]!==U||R[19]!==s||R[20]!==z?(p=()=>{s&&(z({threadId:s.id},{onError:()=>B("Failed to unresolve thread"),onSuccess:()=>{H(!1),$.removeItem(`reviewThreadIsCollapsed_${s.id}`)}}),U("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},R[18]=U,R[19]=s,R[20]=z,R[21]=p):p=R[21];let W=p;if(!s||!(s.commentsData?.comments&&s.commentsData.comments.length>0))return null;let G=s?.commentsData?.comments[0]?.reviewVariantType===tt.hH.Automated?s.commentsData?.comments[0]?.automatedComment:null,X=G&&G.dismissable,J=G&&G.source===tt.vk.LicenseCompliance,Q=!!s.isResolved;R[22]===Symbol.for("react.memo_cache_sentinel")?(v=(0,tA.M3)(),R[22]=v):v=R[22];let Y=v;R[23]!==s.commentsData?.comments?(y=Y&&s.commentsData?.comments?.some(rd),R[23]=s.commentsData?.comments,R[24]=y):y=R[24];let Z=y,ee=s.commentsData?.comments[0]?.createdAt,et=s.commentsData?.comments[0]?.author?.login??"Unknown Author",en=`${M?"Unresolve":"Resolve"} comment`;if(ee){let e;R[25]!==ee?(e=(0,to.C)(new Date(ee)),R[25]=ee,R[26]=e):e=R[26];let t=e;en=`${M?"Unresolve":"Resolve"} ${et}'s comment, ${t}`}R[27]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)(tf,{}),R[27]=C):C=R[27],R[28]===Symbol.for("react.memo_cache_sentinel")?(x=(0,b.$)("px-1","FileReviewThread-module__ReviewThreadContainer__NSCqn"),R[28]=x):x=R[28];let ei=P?"Expand comment":"Collapse comment",er=P?d.ChevronRightIcon:d.ChevronDownIcon;return R[29]!==K||R[30]!==a||R[31]!==ei||R[32]!==er?(L=(0,i.jsx)(u.K,{"aria-label":ei,icon:er,size:"small",variant:"invisible",onClick:K,"data-is-first-collapse-button":a}),R[29]=K,R[30]=a,R[31]=ei,R[32]=er,R[33]=L):L=R[33],R[34]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)("h2",{className:"FileReviewThread-module__ReviewThreadHeading__Uv4bD",children:"Comment on file"}),R[34]=_):_=R[34],R[35]!==s.positioning?.isOutdated?(S=s.positioning?.isOutdated&&(0,i.jsx)(tc.A,{variant:"secondary",children:"Outdated"}),R[35]=s.positioning?.isOutdated,R[36]=S):S=R[36],R[37]!==Q?(N=Q&&(0,i.jsx)(tc.A,{variant:"secondary",children:"Resolved"}),R[37]=Q,R[38]=N):N=R[38],R[39]!==S||R[40]!==N?(w=(0,i.jsxs)("div",{className:"FileReviewThread-module__ReviewThreadInnerContainer__oGZcv",children:[S,N]}),R[39]=S,R[40]=N,R[41]=w):w=R[41],R[42]!==L||R[43]!==w?(D=(0,i.jsxs)("div",{className:x,children:[L,_,w]}),R[42]=L,R[43]=w,R[44]=D):D=R[44],R[45]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsxs)("div",{className:"FileReviewThread-module__SpinnerWrapper__Ed5Um",children:[(0,i.jsx)(eB.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),R[45]=j):j=R[45],R[46]!==F?(k=F&&(0,i.jsxs)(tu.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(d.StopIcon,{className:"mr-2"}),F]}),R[46]=F,R[47]=k):k=R[47],R[48]!==G||R[49]!==X||R[50]!==t||R[51]!==n||R[52]!==q||R[53]!==W||R[54]!==P||R[55]!==Z||R[56]!==M||R[57]!==Q||R[58]!==J||R[59]!==en||R[60]!==o||R[61]!==s?(A=!P&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tD,{lineMarkersKey:"FILE",batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:s,shouldLimitHeight:!1,...o,ghostUser:n}),Z&&!X&&!J&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eC.Q,{"aria-label":en,onClick:Q?W:q,className:"mr-2",children:M?"Unresolve comment":"Resolve comment"}),Q&&s.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:s.resolvedBy})," marked this comment as resolved"]})]}),X&&(0,i.jsx)(tR,{automatedComment:G,thread:s,filePath:t,lineMarkersKey:"FILE",setErrorMessage:B,setIsCollapsed:H,safeLocalStorage:$})]}),R[48]=G,R[49]=X,R[50]=t,R[51]=n,R[52]=q,R[53]=W,R[54]=P,R[55]=Z,R[56]=M,R[57]=Q,R[58]=J,R[59]=en,R[60]=o,R[61]=s,R[62]=A):A=R[62],R[63]!==k||R[64]!==A?(E=(0,i.jsxs)(l.Suspense,{fallback:j,children:[k,A]}),R[63]=k,R[64]=A,R[65]=E):E=R[65],R[66]!==D||R[67]!==E?(T=(0,i.jsx)(ts.t,{boundaryName:"FileReviewThread",fallback:C,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:O,children:[D,E]})}),R[66]=D,R[67]=E,R[68]=T):T=R[68],T}function rd(e){return e.state?.toUpperCase()!=="PENDING"}function rc(e){return!e}function ru(e){let t,n,a,o,s,d,c,u=(0,r.c)(19);if(u[0]!==e){let{conversationListThreads:i,filePath:r,manuallyUpdateCommentsWithThisThreadId:l,ghostUser:s,...d}=e;t=i,n=r,a=s,o=d,u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=o}else t=u[1],n=u[2],a=u[3],o=u[4];let m=(0,l.useRef)(null);if(u[5]!==t?(s={containerRef:m,markers:t,disabled:!1,focusInStrategy:"closest"},u[5]=t,u[6]=s):s=u[6],e4(s),u[7]!==t||u[8]!==n||u[9]!==a||u[10]!==o){let e;u[12]!==t.length||u[13]!==n||u[14]!==a||u[15]!==o?(e=(e,r)=>(0,i.jsx)("div",{className:(0,b.$)("mt-1 border rounded-2 color-border-default color-shadow-small",r===t.length-1?"mb-1":"mb-2"),"data-first-marker":0===r,"data-marker-id":`${e.id}`,tabIndex:0,children:(0,i.jsx)(rs,{viewerData:o.viewerData,filePath:n,thread:e,ghostUser:a},e.id)},`review-thread-${e.id}`),u[12]=t.length,u[13]=n,u[14]=a,u[15]=o,u[16]=e):e=u[16],d=t.map(e),u[7]=t,u[8]=n,u[9]=a,u[10]=o,u[11]=d}else d=u[11];return u[17]!==d?(c=(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:"InlineMarkers-module__fileMarkersWrapper__nDvmf",ref:m,children:d})}),u[17]=d,u[18]=c):c=u[18],c}rs.displayName="FileReviewThread",ru.displayName="FileMarkers";var rm=n(16968),rf=n(31284);let rh=new Set;function rg(e){let t,n,s,c,u,m,f,h,p,y,C,L,_,S,N,D,j,I,k,A,E,T,R=(0,r.c)(149),{ref:$,addFileCommentButtonRef:M,collapsed:F,currentUser:P,diffLines:H,diffManuallyExpanded:K,diffSize:U,helpUrl:V,estimatedDiffHeight:q,fileComments:z,headerStickyOffset:W,hiddenFeatures:G,isAddingFileComment:X,isBinary:J,isSelected:Q,isSubmodule:Y,isTooBig:Z,leftSideContent:ee,linesAdded:et,linesChanged:en,linesDeleted:ei,newTreeEntry:er,newCommitOid:ea,objectId:el,oldTreeEntry:eo,oldCommitOid:es,onToggleCollapse:ed,path:ec,pathDigest:eu,pullRequestGlobalRelayId:em,repository:ef,richDiffState:eh,rightSideContent:eg,setIsAddingFileComment:ep,hasExpandedAllRanges:eb,expandAllContextLines:ev,canExpandOrCollapseLines:ey,status:eC,submodule:ex,truncatedReason:eL,addInjectedContextLines:e_,loadDiff:eS}=e,eN=void 0===q?0:q,ew=void 0===G?rh:G,eD=void 0!==Q&&Q,ej=Y&&!!ex,eI=!ej&&!eh?.showRichDiff,[ek,eA]=(0,l.useState)(K),eE=(0,x.j5)(),{comparisonView:eO}=(0,x.L3)(),e$=(0,x.Kp)(),[eM,eF]=(0,l.useState)(!1);if(R[0]!==H||R[1]!==eM){let e;R[3]!==eM?(e=e=>{let t,n;return{...(t=!1,n=e,t=(0,ez.Y)(e.text),n={...n,hasHiddenUnicode:t},eM&&t&&(n=e.html?{...n,html:(0,rm.Gx)(e.html)??e.html}:{...n,text:(0,ez.TA)(e.text)}),n),key:`b:${e.blobLineNumber}-l:${e.left}-r:${e.right}`}},R[3]=eM,R[4]=e):e=R[4],t=H.map(e),R[0]=H,R[1]=eM,R[2]=t}else t=R[2];let eB=t;R[5]!==e$||R[6]!==H||R[7]!==ec?(n=function(e,t,n){let i={};for(let r of e){let e="DELETION"===r.type?"LEFT":"RIGHT",a=O((0,v.sI)({diffSide:e,filePath:t,line:("LEFT"===e?r.left:r.right)??r.blobLineNumber,subjectId:n},!1)),l="DELETION"!==r.type?"RIGHT":"LEFT",o="RIGHT"===l?r.right:r.left,s=(0,w.oH)(o,l),d=!!a?.text?.trim();s&&d&&(i[s]=!0)}return i}(H,ec,e$),R[5]=e$,R[6]=H,R[7]=ec,R[8]=n):n=R[8];let eH=n;R[9]!==P.hasCopilotAccess||R[10]!==J||R[11]!==Y||R[12]!==ea||R[13]!==er||R[14]!==es||R[15]!==eo||R[16]!==ec||R[17]!==eu||R[18]!==ef||R[19]!==eC?(s={isBinary:J,isSubmodule:Y,path:ec,status:eC,repository:ef,newCommitOid:ea,newTreeEntry:er,oldCommitOid:es,oldTreeEntry:eo,pathDigest:eu,hasCopilotAccess:P.hasCopilotAccess},R[9]=P.hasCopilotAccess,R[10]=J,R[11]=Y,R[12]=ea,R[13]=er,R[14]=es,R[15]=eo,R[16]=ec,R[17]=eu,R[18]=ef,R[19]=eC,R[20]=s):s=R[20];let eK=function(e){let t,n=(0,r.c)(8),{isBinary:i,isSubmodule:a,path:l,status:o,repository:s,newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,pathDigest:f,hasCopilotAccess:h}=e;e:{let e;if(!(({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:r,status:a})=>!!e&&!t&&!n&&!!i&&"DELETED"!==a&&"REMOVED"!==a&&!!r.id&&!!r.name&&!!r.ownerLogin&&!0)({isBinary:i,isSubmodule:a,path:l,status:o,repository:s,hasCopilotAccess:h})){t=void 0;break e}n[0]!==d||n[1]!==c||n[2]!==u||n[3]!==m||n[4]!==l||n[5]!==f||n[6]!==s?(e=(({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:r,pathDigest:a,repository:l})=>{let o=n&&e?(0,tk.IO9)({repo:l,commitish:n,action:"raw",path:r}):"";return{baseFile:ro({path:i?.path,oid:n,repository:l}),headFile:ro({path:t?.path,oid:e,repository:l}),baseBranchRef:n,id:`#diff-${a}`,type:"file-diff",url:o}})({newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,path:l,pathDigest:f,repository:s}),n[0]=d,n[1]=c,n[2]=u,n[3]=m,n[4]=l,n[5]=f,n[6]=s,n[7]=e):e=n[7],t=e}return t}(s);R[21]!==eS?(c=async()=>{await eS(),eA(!0)},R[21]=eS,R[22]=c):c=R[22];let eU=c,{baseOid:eV,headOid:eq}=(0,x.E4)(),eW=(0,eT.u)("cotd_ui"),{effectiveRange:eG}=(0,x.L3)(),{mutate:eX}=t1();R[23]!==ep?(u=()=>{ep(!0)},R[23]=ep,R[24]=u):u=R[24];let eJ=u;R[25]!==eJ?(m={F0:{startNewComment:eJ,diffLineKey:"b:0-l:null-r:null"}},R[25]=eJ,R[26]=m):m=R[26];let eQ=m;R[27]!==eW||R[28]!==eX||R[29]!==eG||R[30]!==eq||R[31]!==ec||R[32]!==ep||R[33]!==eV?(f=e=>{let{onCompleted:t,onError:n,submitBatch:i,text:r}=e;eW?eX(new no({filePath:ec,effectiveDiffRange:eG,submitBatch:i,text:r}).fileRequestData(),{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),ep(!1)}}):eX({text:r,path:ec,submitBatch:i,subjectType:o.Wr.File,comparisonEndOid:eq,comparisonStartOid:eV},{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),ep(!1)}})},R[27]=eW,R[28]=eX,R[29]=eG,R[30]=eq,R[31]=ec,R[32]=ep,R[33]=eV,R[34]=f):f=R[34];let eY=f;R[35]!==M||R[36]!==ep?(h=()=>{ep(!1),M?.current?.focus()},R[35]=M,R[36]=ep,R[37]=h):h=R[37];let eZ=h,e0=P?.avatarURL??"",e1=P?.splitPreference,e2=P?.login??"",e3=P?.lineSpacing,e4=P?.shouldDisplayComments,e6=P?.shouldDisplayEditOptions,e5=P?.tabSize??4,e7=P?.canComment,e8=P?.canApplySuggestion;R[38]!==e0||R[39]!==e1||R[40]!==e2||R[41]!==e3||R[42]!==e4||R[43]!==e6||R[44]!==e5||R[45]!==e7||R[46]!==e8?(p={avatarUrl:e0,diffViewPreference:e1,login:e2,lineSpacingPreference:e3,shouldDisplayComments:e4,shouldDisplayEditOptions:e6,tabSizePreference:e5,viewerCanComment:e7,viewerCanApplySuggestion:e8},R[38]=e0,R[39]=e1,R[40]=e2,R[41]=e3,R[42]=e4,R[43]=e6,R[44]=e5,R[45]=e7,R[46]=e8,R[47]=p):p=R[47];let e9=p,te=(0,l.useId)(),tt=`heading-${te}`;e:{if("split"===new URLSearchParams(g.cg?.location.search).get("diff")){y=!0;break e}y="split"===P.splitPreference}let tn=y,ti=er?.lineCount??eo?.lineCount??0;eo?.path,er?.path;t:{let e,t=eo?.path,n=er?.path;if(!t&&!n){C=void 0;break t}e="RENAMED"===eC?`${t} renamed to ${n}`:"DELETED"===eC||"REMOVED"===eC?t:n,C=`Diff for: ${e}`}let tr=C;R[48]!==eB||R[49]!==J||R[50]!==Z||R[51]!==en||R[52]!==ea||R[53]!==er||R[54]!==el||R[55]!==es||R[56]!==eo||R[57]!==ec||R[58]!==eu||R[59]!==eC||R[60]!==eL?(L={diffLines:eB,isBinary:J,isTooBig:Z,linesChanged:en,newTreeEntry:er,newCommitOid:ea,objectId:el,oldTreeEntry:eo,oldCommitOid:es,path:ec,pathDigest:eu,status:eC,truncatedReason:eL},R[48]=eB,R[49]=J,R[50]=Z,R[51]=en,R[52]=ea,R[53]=er,R[54]=el,R[55]=es,R[56]=eo,R[57]=ec,R[58]=eu,R[59]=eC,R[60]=eL,R[61]=L):L=R[61];let ta=L,tl=`diff-${eu}`,to=`diff-${eu}`;R[62]===Symbol.for("react.memo_cache_sentinel")?(_=(0,b.$)(i7.A.diffTargetable,i7.A.diff),R[62]=_):_=R[62];let ts=`${eu}_${eB.length}`,td=`auto ${eN}px`;R[63]!==td?(S={contentVisibility:"auto",containIntrinsicSize:td},R[63]=td,R[64]=S):S=R[64];let tc=`${void 0===W?0:W}px`;R[65]!==tc?(N={"--header-sticky-offset":tc},R[65]=tc,R[66]=N):N=R[66];let tu=`#diff-${eu}`,tm=eh?.richDiff?.canToggleRichDiff,tf=er?.mode,th=er?.path,tg=eo?.mode,tp=eo?.path;R[67]!==F||R[68]!==ed?(D=e=>ed(e,!F),R[67]=F,R[68]=ed,R[69]=D):D=R[69];let tb=eh?.onToggleRichDiff,tv=eh?.showRichDiff;return R[70]!==ey||R[71]!==F||R[72]!==U||R[73]!==ev||R[74]!==eb||R[75]!==tt||R[76]!==ew||R[77]!==J||R[78]!==eE||R[79]!==ee||R[80]!==et||R[81]!==en||R[82]!==ei||R[83]!==ec||R[84]!==eg||R[85]!==eC||R[86]!==tu||R[87]!==tm||R[88]!==tf||R[89]!==th||R[90]!==tg||R[91]!==tp||R[92]!==D||R[93]!==tb||R[94]!==tv?(j=(0,i.jsx)(a.B,{headingId:tt,hiddenFeatures:ew,areLinesExpanded:eb,canExpandOrCollapseLines:ey,fileLinkHref:tu,isCollapsed:F,isBinary:J,size:U,canToggleRichDiff:tm,linesAdded:et,linesChanged:en,linesDeleted:ei,newMode:tf,newPath:th,oldMode:tg,oldPath:tp,patchStatus:eC,path:ec,onToggleExpandAllLines:ev,onToggleFileCollapsed:D,onToggleDiffDisplay:tb,additionalLeftSideContent:ee,rightSideContent:eg,showRichDiff:tv,isInSingleFileMode:eE}),R[70]=ey,R[71]=F,R[72]=U,R[73]=ev,R[74]=eb,R[75]=tt,R[76]=ew,R[77]=J,R[78]=eE,R[79]=ee,R[80]=et,R[81]=en,R[82]=ei,R[83]=ec,R[84]=eg,R[85]=eC,R[86]=tu,R[87]=tm,R[88]=tf,R[89]=th,R[90]=tg,R[91]=tp,R[92]=D,R[93]=tb,R[94]=tv,R[95]=j):j=R[95],R[96]!==N||R[97]!==j?(I=(0,i.jsx)("div",{className:i7.A.diffHeaderWrapper,style:N,children:j}),R[96]=N,R[97]=j,R[98]=I):I=R[98],R[99]!==F||R[100]!==eK||R[101]!==ta||R[102]!==z||R[103]!==eY||R[104]!==eb||R[105]!==V||R[106]!==X||R[107]!==tn||R[108]!==ek||R[109]!==eZ||R[110]!==eU||R[111]!==ec||R[112]!==em||R[113]!==ef||R[114]!==eh||R[115]!==eI||R[116]!==eM||R[117]!==ej||R[118]!==ex||R[119]!==tr||R[120]!==e9?(k=F?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsx)(rf.nB,{full:!0,repo:ef,refName:ta.newCommitOid||"",filePath:ta.path}),(0,i.jsxs)(i.Fragment,{children:[z.length>0&&(0,i.jsx)(ru,{conversationListThreads:z,filePath:ec}),X&&(0,i.jsx)("div",{className:(0,b.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",i7.A.diffAddFileThread),children:(0,i.jsx)(eR,{batchingEnabled:!0,filePath:ec,fileLevelComment:!0,isLeftSide:void 0,viewerData:e9,onAddComment:eY,onClose:eZ})})]}),ej&&(0,i.jsx)(re,{submodule:ex}),eh?.showRichDiff&&(0,i.jsx)(eP,{queryConfig:eh.queryConfig,initialData:eh.richDiff}),eI&&(0,i.jsx)(i4,{hasExpandedAllRanges:eb,copilotChatReference:eK,diffEntryData:ta,baseHelpUrl:V,subjectId:em||"",viewerData:e9,isSplitView:tn,diffLinesManuallyUnhidden:ek,handleSetShowHiddenUnicodeCharacters:eF,onHandleLoadDiff:eU,showHiddenUnicodeCharacters:eM,tableAriaLabel:tr})]}),R[99]=F,R[100]=eK,R[101]=ta,R[102]=z,R[103]=eY,R[104]=eb,R[105]=V,R[106]=X,R[107]=tn,R[108]=ek,R[109]=eZ,R[110]=eU,R[111]=ec,R[112]=em,R[113]=ef,R[114]=eh,R[115]=eI,R[116]=eM,R[117]=ej,R[118]=ex,R[119]=tr,R[120]=e9,R[121]=k):k=R[121],R[122]!==eN||R[123]!==tt||R[124]!==eD||R[125]!==$||R[126]!==to||R[127]!==ts||R[128]!==S||R[129]!==I||R[130]!==k?(A=(0,i.jsxs)("div",{"data-estimated-height":eN,role:"region",ref:$,"aria-labelledby":tt,id:to,className:_,"data-targeted":eD,style:S,children:[I,k]},ts),R[122]=eN,R[123]=tt,R[124]=eD,R[125]=$,R[126]=to,R[127]=ts,R[128]=S,R[129]=I,R[130]=k,R[131]=A):A=R[131],R[132]!==eO||R[133]!==eE?(E=eE&&(0,i.jsxs)("div",{className:i7.A.diffFooter,children:[(0,i.jsx)(d.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:function(e){switch(e){case"COMMIT":return"Due to the large number of changes in the selected commit, only one file is being shown at a time.";case"RANGE":return"Due to the large number of changes in the selected commit range, only one file is being shown at a time.";default:return"Due to the large number of changes in this pull request, only one file is being shown at a time."}}(eO)})]}),R[132]=eO,R[133]=eE,R[134]=E):E=R[134],R[135]!==e_||R[136]!==eB||R[137]!==ti||R[138]!==ew||R[139]!==tn||R[140]!==er||R[141]!==eo||R[142]!==ec||R[143]!==eQ||R[144]!==eH||R[145]!==tl||R[146]!==A||R[147]!==E?(T=(0,i.jsxs)(B,{addInjectedContextLines:e_,diffAnchor:tl,diffLines:eB,fileLineCount:ti,path:ec,startNewConversationForLineOrFileMap:eQ,hiddenFeatures:ew,isSplitView:tn,oldTreeEntry:eo,newTreeEntry:er,storedCommentsMap:eH,children:[A,E]}),R[135]=e_,R[136]=eB,R[137]=ti,R[138]=ew,R[139]=tn,R[140]=er,R[141]=eo,R[142]=ec,R[143]=eQ,R[144]=eH,R[145]=tl,R[146]=A,R[147]=E,R[148]=T):T=R[148],T}function rp(e){let t,n,o,s,c,u=(0,r.c)(24),{path:m,pathDigest:f,linesAdded:h,linesChanged:g,linesDeleted:p,oldTreeEntry:v,newTreeEntry:y,status:C}=e,x=(0,l.useId)(),L=`heading-${x}`,[_,S]=(0,l.useState)(!1),N=`diff-${f}`;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.$)(i7.A.diffTargetable,i7.A.diff),u[0]=t):t=u[0];let w=`${f}_error`,D=y?.mode,j=y?.path,I=v?.mode,k=v?.path;return u[1]!==_?(n=()=>S(!_),u[1]=_,u[2]=n):n=u[2],u[3]!==L||u[4]!==_||u[5]!==h||u[6]!==g||u[7]!==p||u[8]!==m||u[9]!==C||u[10]!==D||u[11]!==j||u[12]!==I||u[13]!==k||u[14]!==n?(o=(0,i.jsx)("div",{className:i7.A.diffHeaderWrapper,children:(0,i.jsx)(a.B,{headingId:L,isCollapsed:_,isBinary:!1,linesAdded:h,linesChanged:g,linesDeleted:p,newMode:D,newPath:j,oldMode:I,oldPath:k,patchStatus:C,path:m,onToggleFileCollapsed:n})}),u[3]=L,u[4]=_,u[5]=h,u[6]=g,u[7]=p,u[8]=m,u[9]=C,u[10]=D,u[11]=j,u[12]=I,u[13]=k,u[14]=n,u[15]=o):o=u[15],u[16]!==_?(s=!_&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(tm.E,{children:[(0,i.jsx)(tm.E.Visual,{children:(0,i.jsx)(d.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(tm.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(tm.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})}),u[16]=_,u[17]=s):s=u[17],u[18]!==L||u[19]!==N||u[20]!==s||u[21]!==w||u[22]!==o?(c=(0,i.jsxs)("div",{role:"region","aria-labelledby":L,id:N,className:t,children:[o,s]},w),u[18]=L,u[19]=N,u[20]=s,u[21]=w,u[22]=o,u[23]=c):c=u[23],c}rg.displayName="DiffUnmemoized",rp.displayName="DiffErrorFallback";let rb=(0,l.memo)(rg);rb.displayName="Diff"},59080(e,t,n){function i(e){return[...e.querySelectorAll(".js-blob-code-addition")].map(e=>e.textContent).filter(e=>null!==e)}function r(e){if(!e||e.length>1e5)return null;let t=e.split(/\r?\n/),n=!1,i="",r=[];for(let e=0;e<t.length;e++){let a=t[e];if(void 0!==a)if(n){if(a.match(/^ {0,3}(`{3,}|~{3,})[ \t]*$/))return r;let e=a;if(i.length>0){let t=RegExp(`^ {0,${i.length}}`);e=a.replace(t,"")}r.push(e)}else{let e=a.match(/^( {0,3})(`{3,}|~{3,})suggestion[ \t]*$/);if(e){n=!0,i=e[1]||"";continue}}}return null}n.d(t,{T:()=>r,y:()=>i})},9722(e,t,n){n.d(t,{Av:()=>N,Ji:()=>f,Lp:()=>y,Ls:()=>_,Mk:()=>v,Po:()=>u,S4:()=>L,Yf:()=>w,a2:()=>o,dT:()=>S,dv:()=>g,j2:()=>x,oH:()=>s,qK:()=>m,qX:()=>d,u6:()=>c,xB:()=>h,x_:()=>p});var i=n(26151),r=n(92163),a=n(35322),l=n(84357);function o(e,t,n){return"left"===n?!u(e)&&e.left===t:!u(e)&&(0,i.XU)(e.type)===n&&e.right===t}function s(e,t){return"LEFT"===t?`L${e}`:`R${e}`}function d(e,t,n){let i=`-${u(t)||"number"!=typeof t?.left?"empty":t?.left}`,r=n?`-${u(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function c(e,t){return`${e}-${t}`}function u(e){return void 0===e||!!e&&e===l.Vv}function m(e){return!!e&&e!==l.Vv}function f(e){return"CONTEXT"===e.type}function h(e){return u(e)||f(e)||"INJECTED_CONTEXT"===e.type}function g(e,t){return t===a.w$.Empty||t===a.w$.Hunk?[e,void 0]:b(e,a.JF[t])}function p(e,t){let n;switch(t){case a.w$.Addition:n=a.JF[a.w$.Addition];break;case a.w$.Deletion:n=a.JF[a.w$.Deletion];break;case a.w$.Context:case a.w$.InjectedContext:n=a.JF[a.w$.Context]}return b(e,n)}function b(e,t){if(!t||!e.startsWith(t))return[e,void 0];let n=e[0];return[e.substring(1),n]}function v(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(l.Vv);for(;n.length<t.length;)n.push(l.Vv)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}function y(e){let t=[],n=[];for(let i of e)switch(i.type){case"ADDITION":n.push(i);break;case"DELETION":t.push(i);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":t.push(i),n.push(i)}return{leftLines:t,rightLines:n}}function C(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function x({line:e,range:t,fileAnchor:n}){let i,{origin:a,pathname:l}=window.location;if(e){let a=C(e)?e.left:e.right;i=t&&a&&t.startLineNumber<=a&&t.endLineNumber>=a?(0,r.j$)(t):function(e,t){let n=C(e),i=n?e.left:e.right,a=n?"left":"right";if(null!==i)return(0,r.j$)({diffAnchor:t,endLineNumber:i,endOrientation:a,startLineNumber:i,startOrientation:a})}(e,n)}else t&&(i=(0,r.j$)(t));if(i)return`${a}${l}#${i}`}function L({hasThreads:e}){return e?"80px":"24px"}let _=e=>e?e.filter(e=>!u(e)).map(e=>{var t;let[n]=p((t=e.html,new DOMParser().parseFromString(t,"text/html").documentElement.textContent||""),e.type);return n}).join("\n"):"";function S(e){return!!(e.text.length<1&&("CONTEXT"===e.type||"INJECTED_CONTEXT"===e.type)||("DELETION"===e.type||"ADDITION"===e.type)&&1===e.text.length&&["+","-"].includes(e.text.charAt(0)))}let N=(e,t,n,i)=>{let r;if(e)return e;if(!u(t)){let e=(n?t.left:t.right)??0,a=n?"left":"right";r={startOrientation:a,endOrientation:a,startLineNumber:e,endLineNumber:e,diffAnchor:i}}return r};function w(e,t=!1,n=!1){let i;if(n)return"";switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return i}},28629(e,t,n){n.d(t,{EJ:()=>r,Lm:()=>a,o_:()=>i});function i({suggestedChange:e,hasCommitRange:t,isOutdated:n,isPending:i,isResolved:r,pullRequestIsClosed:a,pullRequestIsInMergeQueue:l,userCanApplySuggestion:o,applySuggestedChangesValidationData:s,suggestedChangesConfig:d}){let{lineRange:c}=s;if(n)return{isValid:!1,reason:"This suggestion is outdated and cannot be applied."};if(i)return{isValid:!1,reason:"This suggestion is part of a pending comment and cannot be applied."};if(r)return{isValid:!1,reason:"This suggestion is part of a resolved comment and cannot be applied."};if(a)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is closed."};if(l)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is queued to merge."};if(!o)return{isValid:!1,reason:"You do not have permission to apply this suggestion."};if(!c)return{isValid:!1,reason:"This suggestion does not have a valid line range."};if(t)return{isValid:!1,reason:"Unable to apply suggestions when viewing a specific commit range."};if(!d)return{isValid:!1,reason:"Unable to determine the validity of this suggestion."};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:"Unable to apply suggestions on deleted lines."};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join("\n");return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:"This suggestion is invalid because no changes were made to the code."}:{isValid:!0}}function r(e,t){return t.length>=50?{isValid:!1,reason:"Unable to commit due to too many changes in the batch."}:e.threadId&&t.find(t=>t.threadId===e.threadId)||function(e,t){if(!e.lineRange||!e.path)return!1;for(let r of t)if(r.lineRange&&r.path&&e.path===r.path){var n,i;if(n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber)return!0}return!1}(e,t)?{isValid:!1,reason:"Unable to commit due to other pending changes affecting this line."}:{isValid:!0}}function a(e){if(!e||e.subjectType?.toUpperCase()!=="LINE")return;let t=e.positioning??e.subject;if(!t)return;let n=t.startDiffSide??t.endDiffSide;if(!n||"isOutdated"in t&&t.isOutdated||!t.endLine||!t.endDiffSide)return;let i=t.startLine??t.endLine;return{endLineNumber:t.endLine,endOrientation:t.endDiffSide,startLineNumber:i,startOrientation:n||"RIGHT"}}},49941(e,t,n){n.d(t,{L4:()=>c,sI:()=>d});var i=n(16522),r=n(69991),a=n(96540);let{getItem:l,removeItem:o,setItem:s}=(0,r.D)("localStorage"),d=(e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function c(e){let t,n,r,c,u,m,f=(0,i.c)(16),{diffSide:h,filePath:g,handlePersistedCommentExists:p,line:b,subjectId:v,threadId:y,fileLevelComment:C}=e;e:{let e;if(y){t=y;break e}f[0]!==h||f[1]!==C||f[2]!==g||f[3]!==b||f[4]!==v||f[5]!==y?(e=y??d({diffSide:h,filePath:g,line:b,subjectId:v},C),f[0]=h,f[1]=C,f[2]=g,f[3]=b,f[4]=v,f[5]=y,f[6]=e):e=f[6],t=e}let x=t,{hasPersistedComment:L,removePersistedCommentFromStorage:_}=(u=l(x),m=!!u?.text?.trim(),(0,a.useEffect)(()=>{m&&p?.(u)},[m]),{hasPersistedComment:m,removePersistedCommentFromStorage:()=>{o(x),m=!1,u=null}});f[7]!==x?(n=e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),s(x,t)},f[7]=x,f[8]=n):n=f[8];let S=n;f[9]!==v?(r=e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),s(d({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:v},e.shouldBeFileLevelComment),t)},f[9]=v,f[10]=r):r=f[10];let N=r;return f[11]!==L||f[12]!==N||f[13]!==S||f[14]!==_?(c={hasPersistedComment:L,persistCommentToStorage:S,persistCommentOnGivenLineToStorage:N,removePersistedCommentFromStorage:_},f[11]=L,f[12]=N,f[13]=S,f[14]=_,f[15]=c):c=f[15],c}},84357(e,t,n){function i(e){return"left"===e||"right"===e}n.d(t,{Vv:()=>r,Wr:()=>a,e:()=>i});let r="empty-diff-line",a={Line:"line",Multiline:"multiline",File:"file"}},50314(e,t,n){n.d(t,{J:()=>a,L:()=>r});var i=n(50467);class r extends Event{constructor(e,t){super("DiffAddCommentButtonClickedEvent",{bubbles:!0,cancelable:!0,composed:!0}),(0,i._)(this,"endLineNumber",void 0),(0,i._)(this,"endOrientation",void 0),(0,i._)(this,"filePath",void 0),(0,i._)(this,"startOrientation",void 0),(0,i._)(this,"startLineNumber",void 0),this.startLineNumber=e.startLineNumber,this.endLineNumber=e.endLineNumber,this.startOrientation=e.startOrientation,this.endOrientation=e.endOrientation,this.filePath=t}}class a extends Event{constructor(e,t){super("DiffSelectedLineEvent",{bubbles:!0,cancelable:!0,composed:!0}),(0,i._)(this,"endLineNumber",void 0),(0,i._)(this,"endOrientation",void 0),(0,i._)(this,"filePath",void 0),(0,i._)(this,"startOrientation",void 0),(0,i._)(this,"startLineNumber",void 0),this.startLineNumber=e.startLineNumber,this.endLineNumber=e.endLineNumber,this.startOrientation=e.startOrientation,this.endOrientation=e.endOrientation,this.filePath=t}}},99942(e,t,n){function i(e,t){for(let n of function e(t,n=[]){var i,a;let l;if(""===t)return n;let o=t.match(r());if(!o)return n;let s=o.groups.fence;if(!s)return n;let d=s.includes("~")?"~":"`",c=t.match((l=r([i=d],a=s.length),RegExp(`${l.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${i}{${a},}[ 	]*$`,"ms")));if(!c)return n;let u=0,m=o.groups.indent;""!==m&&(u=m.length);let f=c.groups.suggestion;if(u>0){let e=RegExp(`^ {0,${u}}`,"m");f=f.replace(e,"")}return n.push(f),e(t.slice(c.index+c[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function r(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},17523(e,t,n){n.d(t,{G:()=>i});let i=n(65319).$h.create("pull-requests")},61291(e,t,n){n.d(t,{H:()=>u});var i=n(16522),r=n(90321),a=n(41626),l=n(97665),o=n(94747),s=n(1925),d=n(6373),c=n(94007);function u(e,t){let n,u,m,f,h=(0,i.c)(12),g=(0,d.Kp)();h[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.cj)(),h[0]=n):n=h[0];let p=n,b=`${g}/page_data/${a.uT.resolveThread}`,v=(0,l.jE)(),{updateThread:y}=(0,d.an)();return h[1]!==b?(u=async e=>{let{threadId:t}=e,n=await (0,r.q$)(b,{method:"POST",body:{threadId:t}});(0,r.R)(n)},h[1]=b,h[2]=u):u=h[2],h[3]!==g||h[4]!==e||h[5]!==t||h[6]!==v||h[7]!==y?(m=(n,i)=>(y(Number(i.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:p}}),v.invalidateQueries({queryKey:(0,s.XG)(g)})),h[3]=g,h[4]=e,h[5]=t,h[6]=v,h[7]=y,h[8]=m):m=h[8],h[9]!==u||h[10]!==m?(f={mutationFn:u,onSuccess:m},h[9]=u,h[10]=m,h[11]=f):f=h[11],(0,o.n)(f)}},27262(e,t,n){n.d(t,{i:()=>c});var i=n(16522),r=n(90321),a=n(41626),l=n(97665),o=n(94747),s=n(1925),d=n(6373);function c(e,t){let n,c,m,f=(0,i.c)(11),h=(0,d.Kp)(),g=`${h}/page_data/${a.uT.unresolveThread}`,p=(0,l.jE)(),{updateThread:b}=(0,d.an)();return f[0]!==g?(n=async e=>{let{threadId:t}=e,n=await (0,r.q$)(g,{method:"POST",body:{threadId:t}});(0,r.R)(n)},f[0]=g,f[1]=n):n=f[1],f[2]!==h||f[3]!==e||f[4]!==t||f[5]!==p||f[6]!==b?(c=(n,i)=>(b(Number(i.threadId),e,t,u),p.invalidateQueries({queryKey:(0,s.XG)(h)})),f[2]=h,f[3]=e,f[4]=t,f[5]=p,f[6]=b,f[7]=c):c=f[7],f[8]!==n||f[9]!==c?(m={mutationFn:n,onSuccess:c},f[8]=n,f[9]=c,f[10]=m):m=f[10],(0,o.n)(m)}function u(e){if(e)return{...e,isResolved:!1,resolvedBy:void 0}}},1925(e,t,n){n.d(t,{CB:()=>c,XG:()=>d});var i=n(16522),r=n(41626),a=n(15610),l=n(58388),o=n(15481),s=n(66202);function d(e){return[r.uT.threadPreviews,e]}function c(e){let t,n,l,o=(0,i.c)(7),{pathName:s}=e;if(o[0]!==s?(t=d(s),o[0]=s,o[1]=t):t=o[1],o[2]!==s)n=`${s}/page_data/${r.uT.threadPreviews}`,o[2]=s,o[3]=n;else n=o[3];return o[4]!==t||o[5]!==n?(l={queryKey:t,initialPageParam:n,queryFn:m,getNextPageParam:u,staleTime:1/0},o[4]=t,o[5]=n,o[6]=l):l=o[6],(0,a.U)(l)}function u(e){return e.nextUrl??void 0}async function m(e){let{pageParam:t}=e,n=await (0,l.QJ)(t);if(!n.ok)throw Error(`Failed to fetch thread previews from ${t}: HTTP ${n.status}`);let i=await n.json(),r=n.headers.get("Link"),a=(0,o.N)(r,"next"),d=[];return i.length>0&&(d=i.map(s.OA)),{data:d,nextUrl:a}}},66202(e,t,n){function i(e){return e.commentsData?.comments?.[0]}function r(e){return{id:e.previewInfo.threadId,isOutdated:e.previewInfo.isOutdated,line:e.previewInfo.line,subject:e.previewInfo.subject,commentsData:e.previewInfo.firstComment?{comments:[e.previewInfo.firstComment]}:void 0,commentCount:e.previewInfo.threadPreviewComments.length,path:e.previewInfo.path,originalDiffPathUri:e.previewInfo.originalDiffPathUri}}n.d(t,{IV:()=>i,OA:()=>r})},60362(e,t,n){n.d(t,{j:()=>l});var i=n(37750),r=n(17523),a=n(21012);let l=r.G.createQueryRouteConfig("pullRequestsLayoutRoute",{path:"/:owner/:repo/pull/:pr_number",queries:[(0,a.Y)({queryDeps:({pathname:e})=>({pathname:`${e}/_layout`})}),{queryName:"tabCounts",queryDeps:({params:e})=>({pathname:`/${e.owner}/${e.repo}/pull/${e.pr_number}/page_data/tab_counts`}),queryFn:async e=>(0,i.X)(e)},{queryName:"diffstat",queryDeps:({params:e})=>({pathname:`/${e.owner}/${e.repo}/pull/${e.pr_number}/page_data/diffstat`}),queryFn:async e=>(0,i.X)(e)}]})},51454(e,t,n){n.d(t,{n:()=>g,Z:()=>h});var i=n(74848),r=n(96540),a=n(71323),l=n(97283),o=n(87134);n(16522),n(58388),n(98153);var s=n(41626),d=n(60362),c=n(46836),u=n(88005),m=n(62759);let f=(0,r.createContext)(null);function h(e){let t=(0,r.use)(f);if(!t)throw Error("Missing PullRequestAnalyticsStoreProvider in the tree");return(0,a.P)(t,e)}f.displayName="PullRequestAnalyticsStoreContext";let g=({initData:e,children:t})=>{let n=(0,r.useRef)(null),a=function(){if(m.X3||!(0,u.E)())return;let{data:e}=(0,c.xX)(d.j,s.uT.diffstat);return e?.diffstat}();return n.current||(n.current=p(e)),(0,r.useEffect)(()=>{var e;n.current&&a&&n.current.setState({diffSizeCategory:void 0===(e=a.linesChanged)?"unknown":e<100?"xs":e<500?"s":e<1e3?"m":e<5e3?"l":e<1e4?"xl":"xxl"})},[a]),(0,i.jsx)(f,{value:n.current,children:t})};g.displayName="PullRequestAnalyticsStoreProvider";let p=e=>(0,l.y)()((0,o.lt)((t,n)=>({...e,virtualizationEnabled:!0===e.virtualizationEnabled?"true":"false",diffSizeCategory:"unknown",getINPDiffTags:()=>({diffVersion:n().diffVersion,diffSizeCategory:n().diffSizeCategory,virtualizationEnabled:n().virtualizationEnabled})}),{name:"analytics-store"}))},58625(e,t,n){n.d(t,{J:()=>r});var i=n(51454);let r=()=>(0,i.Z)(a);function a(e){return e.getINPDiffTags}},15481(e,t,n){n.d(t,{N:()=>i});function i(e,t){if(!e)return null;let n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=RegExp(`<([^>]+)>;\\s*rel=["']?${n}["']?`,"i"),r=e.match(i);return r?.[1]??null}},91431(e,t,n){n.d(t,{Dg:()=>l,L_:()=>a,M0:()=>o});var i=n(99159),r=n(96540);function a(){let e=performance.memory;return e?.usedJSHeapSize&&e?.jsHeapSizeLimit?Math.round(e.usedJSHeapSize/e.jsHeapSizeLimit*1e4)/100:null}function l(){let e=performance.memory;return e?.usedJSHeapSize??null}function o({intervalMs:e=5e3,maxDatapoints:t=20,statName:n,tags:a}){(0,r.useEffect)(()=>{let r;if(!performance||!("memory"in performance)||t<=0)return;let l=0,o=()=>{document.hidden&&s()},s=()=>{void 0!==r&&(clearInterval(r),r=void 0),document.removeEventListener("visibilitychange",o)},d=()=>{!function({statName:e,tags:t}){requestIdleCallback(()=>{let n,r=(n=performance.memory,n?.usedJSHeapSize?Math.round(n.usedJSHeapSize/1024/1024*10)/10:null);r&&(0,i.au)({name:e,value:r,tags:t})})}({statName:n,tags:a}),++l>=t&&s()};return d(),l<t&&(r=setInterval(d,e)),document.addEventListener("visibilitychange",o),()=>{s()}},[e,t,n,a])}},44504(e,t,n){n.d(t,{n:()=>l});var i=n(99159),r=n(70730),a=n(91431);function l(e=.1){if(Math.random()>e)return()=>{};let t=(0,a.Dg)();if(null===t)return()=>{};let n=t,o=0,s=0,d=(e,t)=>{(0,i.au)({requestUrl:window.location.href,name:e,value:t})},c=(e,t)=>{"u">typeof requestIdleCallback?requestIdleCallback(()=>d(e,t)):setTimeout(()=>d(e,t),0)},u=()=>{if(o>=20)return void clearInterval(m);let e=(0,a.Dg)();if(null===e)return;n=Math.max(n,e);let t=Math.round(e/1024/1024*100)/100;if(2>Math.abs(t-s))return;o++,s=t,c("BROWSER_MEMORY_DIST_HEAP_USED",t);let i=(0,a.L_)();null!==i&&c("BROWSER_MEMORY_DIST_HEAP_UTILIZATION",i)},m=setInterval(u,3e4),f=()=>{if(r.XC?.visibilityState==="hidden"){let e=(0,a.Dg)();null!==e&&(c("BROWSER_MEMORY_DIST_SESSION_GROWTH",Math.round((e-t)/1024/1024*100)/100),c("BROWSER_MEMORY_DIST_SESSION_MAX",Math.round(n/1024/1024*100)/100))}};r.XC?.addEventListener("visibilitychange",f);let h=setTimeout(u,5e3);return()=>{clearInterval(m),clearTimeout(h),r.XC?.removeEventListener("visibilitychange",f)}}},46937(e,t,n){function i(){return!!document.querySelector('react-app[data-lazy="true"]')}function r(){return!!document.querySelector('react-app[data-alternate="true"]')}function a(){return!!document.querySelector("header.AppHeader")}function l(){return performance.getEntriesByType("resource").some(e=>"fetch"===e.initiatorType&&e.name.includes("_graphql?"))}function o(){return performance.getEntriesByType("resource").some(e=>"script"===e.initiatorType)}n.d(t,{Dk:()=>a,NT:()=>c,X:()=>d,_:()=>i,aE:()=>l,u$:()=>r,xF:()=>o}),n(24043),n(44504);let s=null;function d(){return s}function c(e){s=e}}}]);
//# sourceMappingURL=43175-43f44f871c221d2d-6e23e3cea89580ee.js.map