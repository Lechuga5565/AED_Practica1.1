performance.mark("js-parse-end:96121-bf03bd5d075b9f80.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["96121"],{25312(e,t,i){i.d(t,{A:()=>n});let n={"hide-on-mobile":"responsive-module__hide-on-mobile__v3LUR","hide-on-desktop":"responsive-module__hide-on-desktop__OjTXu","hide-on-small":"responsive-module__hide-on-small__sU0nD","hide-on-medium-up":"responsive-module__hide-on-medium-up__oyQXU"}},43495(e,t,i){i.d(t,{A:()=>n});let n={stickyHeader:"use-sticky-header-module__stickyHeader__sf0hv"}},65239(e,t,i){i.d(t,{V:()=>m,o:()=>u});var n=i(74848),l=i(16522),a=i(39775),s=i(94709);let r=[{unit:"month",ms:2592e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],o=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:void 0,timeZoneName:"short"}),d=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),c=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"});function m(e,t=!0){let i="",n=new Date,l=n.getTime()-e.getTime(),a=r.find(e=>e.ms<l);if(a&&"month"!==a.unit){let e=Math.floor(l/a.ms);i="day"===a.unit&&1===e?"yesterday":`${e} ${a.unit}${e>1?"s":""} ago`}else{let l=e.getFullYear()===n.getFullYear()?c:d;i=`${t?"on ":""}${l.format(e)}`}return i}function u(e){let t,i,r,d,c,u,h=(0,l.c)(24),{timestamp:f,usePreposition:p,linkUrl:g,sx:x}=e,v=void 0===p||p;h[0]!==f||h[1]!==v?(t=m(f,v),h[0]=f,h[1]=v,h[2]=t):t=h[2];let _=t;h[3]!==f?(i=o.format(f),h[3]=f,h[4]=i):i=h[4];let b=i;if(!g){let e,t;return h[5]!==b||h[6]!==x||h[7]!==_?(e=(0,n.jsx)(s.EY,{title:b,sx:x,children:_}),h[5]=b,h[6]=x,h[7]=_,h[8]=e):e=h[8],h[9]!==b||h[10]!==e?(t=(0,n.jsx)(a.A,{inline:!0,title:b,children:e}),h[9]=b,h[10]=e,h[11]=t):t=h[11],t}return h[12]!==x?(r={...x},h[12]=x,h[13]=r):r=h[13],h[14]!==b||h[15]!==_?(d=(0,n.jsx)("span",{title:b,className:"Ago-module__timestampText__OTeZJ",children:_}),h[14]=b,h[15]=_,h[16]=d):d=h[16],h[17]!==b||h[18]!==d?(c=(0,n.jsx)(a.A,{inline:!0,title:b,children:d}),h[17]=b,h[18]=d,h[19]=c):c=h[19],h[20]!==g||h[21]!==r||h[22]!==c?(u=(0,n.jsx)(s.N_,{sx:r,href:g,target:"_blank",className:"Ago-module__AgoTimestampLink__Wrukn",children:c}),h[20]=g,h[21]=r,h[22]=c,h[23]=u):u=h[23],u}u.displayName="Ago"},69525(e,t,i){i.d(t,{i:()=>f});var n=i(74848),l=i(16522),a=i(58388),s=i(21373),r=i(7478),o=i(44640),d=i(96540),c=i(16135),m=i(94154),u=i(1827);let h={stale:!1,latest_unsynced_push_to_head_ref_at:null};function f({processingIndicatorUrl:e,repositoryId:t,pullRequestId:i}){let[l,s]=(0,d.useState)(h),r=(0,u.A)(),o=(0,d.useCallback)(async()=>{try{let t=await (0,a.lS)(e);if(t.ok){let e=await t.json();r()&&s(e)}}catch{r()&&s(h)}},[r,e]);(0,d.useEffect)(()=>{o()},[]);let{stale:c,latest_unsynced_push_to_head_ref_at:f}=l;return(0,n.jsx)("div",{className:"border-left pl-1",children:(0,n.jsx)(m.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,n.jsx)(p,{pullRequestId:i,repositoryId:t,stale:c,latest_unsynced_push_to_head_ref_at:f})})})}function p(e){let t,i,a=(0,l.c)(6),{pullRequestId:d,repositoryId:m,stale:u,latest_unsynced_push_to_head_ref_at:h}=e,{sendAnalyticsEvent:f}=(0,c.s)();if(!u||!h)return null;if(a[0]!==h||a[1]!==d||a[2]!==m||a[3]!==f){t=Symbol.for("react.early_return_sentinel");e:{let e=new Date,i=new Date(h),n=Math.round(e.getTime()-i.getTime())/1e3;if(n<20||n>=86400){t=null;break e}f("pull_requests.processing_indicator","",{repositoryId:m,pullRequestId:d,secondsSinceLastPush:n})}a[0]=h,a[1]=d,a[2]=m,a[3]=f,a[4]=t}else t=a[4];return t!==Symbol.for("react.early_return_sentinel")?t:(a[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(o.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,n.jsx)(s.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:"PullRequestsProcessingIndicator-module__button__z0hTK",children:(0,n.jsxs)("div",{className:"PullRequestsProcessingIndicator-module__indicator__eW1bm",children:[(0,n.jsx)(r.A,{size:"small"}),(0,n.jsx)("span",{className:"PullRequestsProcessingIndicator-module__text__UZJrd",children:"Processing updates"})]})})}),a[5]=i):i=a[5],i)}f.displayName="PullRequestsProcessingIndicatorWithDataFetching",p.displayName="PullRequestsProcessingIndicator"},78421(e,t,i){i.d(t,{b:()=>lN});var n=i(74848),l=i(16522),a=i(23115),s=i(29604),r=i(54395),o=i(24043),d=i(64855),c=i(70966),m=i(64663),u=i(39081),h=i(87555),f=i(34164),p=i(96540),g=i(70170),x=i(41757),v=i(18990),_=i(7771),b=i(33751),w=i(84471),y=i(26759),j=i(6373);function S(e){let t,i,a,s,r,o,d,c,m,u,h,f,S,C,R,T,I=(0,l.c)(62),{ref:E,basePath:D,fileFilterMenuOptions:L,fileFilterState:O,filterSize:A,viewerLogin:P,setFileFilterState:F}=e,[k]=(0,b.o)();I[0]!==D?(t={basePath:D},I[0]=D,I[1]=t):t=I[1];let{data:$}=(0,y.dG)(t),B=(0,p.useRef)(null);I[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>({focus:()=>{B.current?.focus()}}),I[2]=i):i=I[2],(0,p.useImperativeHandle)(E,i),I[3]!==O?(a={...O},I[3]=O,I[4]=a):a=I[4];let{filterText:M,fileExtensions:q,unselectedFileExtensions:V,showOnlyOwnedFiles:G,showDeletedFiles:z,showOnlyManifestFiles:U,showVendoredFiles:H,showViewedFiles:W}=a,{canSeeDeletedFilesFilter:Q,canSeeOnlyManifestFilesFilter:K,canSeeVendorFilesFilter:Y}=L,J=(0,j.q6)(),{clearAllFilters:X}=(0,j.or)(),{canSeeCodeownersFilter:Z}=L,ee=0;if($){let e;Z=$.isViewerOneOfMultipleCodeowners,I[5]!==$.ownershipByPath?(e=Object.values($.ownershipByPath).filter(N),I[5]=$.ownershipByPath,I[6]=e):e=I[6],ee=e.length}let et=(0,p.useRef)((0,g.s)(e=>en({filterText:e}),250)),ei=(e,t)=>{let i=V;"selectFileExtension"===e?i=new Set([...V].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(i=new Set([...V,t.extension]));let n=Object.keys(q).filter(e=>!i.has(e)),l=new URLSearchParams(k);l.delete("file-filters[]"),n.map(e=>{l.append("file-filters[]",e)}),en({unselectedFileExtensions:i},l)};I[7]!==F?(s=(e,t)=>{t&&(0,w.MM)(t),F({...e})},I[7]=F,I[8]=s):s=I[8];let en=s;I[9]!==X||I[10]!==k?(r=()=>{let e=new URLSearchParams(k);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,w.MM)(e),X()},I[9]=X,I[10]=k,I[11]=r):r=I[11];let el=r;return I[12]!==et?(o=e=>et.current(e),I[12]=et,I[13]=o):o=I[13],I[14]!==Z||I[15]!==ee||I[16]!==en||I[17]!==k||I[18]!==G||I[19]!==P?(d=Z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.l.Divider,{}),(0,n.jsx)(v.l.Group,{selectionVariant:"single",children:(0,n.jsx)(v.l.Item,{selected:G,onSelect:()=>{if(!P)return;let e=new URLSearchParams(k);G?e.delete("owned-by[]",P):e.set("owned-by[]",P),en({showOnlyOwnedFiles:!G},e)},children:(0,n.jsxs)(n.Fragment,{children:["Only files owned by you ",(0,n.jsx)(_.A,{children:ee})]})})})]}),I[14]=Z,I[15]=ee,I[16]=en,I[17]=k,I[18]=G,I[19]=P,I[20]=d):d=I[20],I[21]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(v.l.Divider,{}),I[21]=c):c=I[21],I[22]!==K||I[23]!==en||I[24]!==k||I[25]!==U?(m=K&&(0,n.jsx)(v.l.Item,{selected:U,onSelect:()=>{let e=new URLSearchParams(k);e.set("manifests",`${!U}`),en({showOnlyManifestFiles:!U},e)},children:"Only manifest files"}),I[22]=K,I[23]=en,I[24]=k,I[25]=U,I[26]=m):m=I[26],I[27]!==Q||I[28]!==en||I[29]!==k||I[30]!==z?(u=Q&&(0,n.jsx)(v.l.Item,{selected:z,onSelect:()=>{let e=new URLSearchParams(k);e.set("show-deleted-files",`${!z}`),en({showDeletedFiles:!z},e)},children:"Deleted files"}),I[27]=Q,I[28]=en,I[29]=k,I[30]=z,I[31]=u):u=I[31],I[32]!==Y||I[33]!==en||I[34]!==k||I[35]!==H?(h=Y&&(0,n.jsx)(v.l.Item,{selected:H,onSelect:()=>{let e=new URLSearchParams(k);e.set("show-vendored-files",`${!H}`),en({showVendoredFiles:!H},e)},children:"Vendored files"}),I[32]=Y,I[33]=en,I[34]=k,I[35]=H,I[36]=h):h=I[36],I[37]!==en||I[38]!==k||I[39]!==W?(f=()=>{let e=new URLSearchParams(k);e.set("show-viewed-files",`${!W}`),en({showViewedFiles:!W},e)},I[37]=en,I[38]=k,I[39]=W,I[40]=f):f=I[40],I[41]!==W||I[42]!==f?(S=(0,n.jsx)(v.l.Item,{selected:W,onSelect:f,children:"Viewed files"}),I[41]=W,I[42]=f,I[43]=S):S=I[43],I[44]!==u||I[45]!==h||I[46]!==S||I[47]!==m?(C=(0,n.jsxs)(v.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[m,u,h,S]}),I[44]=u,I[45]=h,I[46]=S,I[47]=m,I[48]=C):C=I[48],I[49]!==C||I[50]!==d?(R=(0,n.jsxs)(n.Fragment,{children:[d,c,C]}),I[49]=C,I[50]=d,I[51]=R):R=I[51],I[52]!==q||I[53]!==A||I[54]!==M||I[55]!==J||I[56]!==el||I[57]!==ei||I[58]!==R||I[59]!==o||I[60]!==V?(T=(0,n.jsx)(x.kF,{filterSize:A,filterText:M,fileExtensions:q,unselectedFileExtensions:V,onFilterTextChange:o,onFilterChange:ei,onClearAllFilters:el,isFilteringActive:J,additionalFilterGroups:R,ref:B}),I[52]=q,I[53]=A,I[54]=M,I[55]=J,I[56]=el,I[57]=ei,I[58]=R,I[59]=o,I[60]=V,I[61]=T):T=I[61],T}function N(e){return e.isOwnedByViewer}S.displayName="FileFilter";var C=i(58630),R=i(48696),T=i(97627),I=i(63187),E=i(38621),D=i(44640),L=i(83223),O=i(66935),A=i(70730),P=i(87029);function F(e){if(!e||!A.cg)return;let t=A.cg.scrollY??0,i=e.getBoundingClientRect().top+t-10-60;A.cg.scrollTo({top:i,left:0}),e.focus()}var k=i(46937),$=i(99159),B=i(16135),M=i(58625);let q=(0,p.memo)(function(e){let t,i=(0,l.c)(3),{changeType:a,isSymlink:s}=e;return i[0]!==a||i[1]!==s?(t=(0,n.jsx)(O.E,{status:a,isSymlink:s}),i[0]=a,i[1]=s,i[2]=t):t=i[2],t});q.displayName="FileStatusIconItem";let V=(0,p.memo)(function(e){let t,i,a,s,r,o,d,c,m,u,h=(0,l.c)(43),{file:f,depth:g,onSelect:x}=e,v=(0,p.useRef)(null),_=(0,p.useRef)(null),b=`#diff-${f.diff.pathDigest}`;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:v,mouseRowRef:v},h[0]=t):t=h[0];let y=(0,I.Z)(t),S=f.diff.totalCommentsCount??0,N=f.diff.highestAnnotationLevel,R=(0,j.gW)(),T=(0,j.Py)(f.diff.pathDigest),{sendAnalyticsEvent:O}=(0,B.s)(),V=(0,M.J)(),z=f.fileName??"This file",U=null;switch(S>0&&(z+=` has ${S<10?S:"9+"} ${S>1?"comments":"comment"}`),N){case"WARNING":{let e;z+=`${S>0?" and":""} has warning annotations`,h[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"pl-1 fgColor-attention",children:(0,n.jsx)(E.AlertIcon,{})}),h[1]=e):e=h[1],U=e;break}case"NOTICE":{let e;z+=`${S>0?" and":""} has notice annotations`,h[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"pl-1 fgColor-default",children:(0,n.jsx)(E.InfoIcon,{})}),h[2]=e):e=h[2],U=e;break}case"FAILURE":{let e;z+=`${S>0?" and":""} has failure annotations`,h[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"pl-1 fgColor-danger",children:(0,n.jsx)(E.XCircleFillIcon,{})}),h[3]=e):e=h[3],U=e}}h[4]!==U||h[5]!==z?(i={screenReaderText:z,annotationElement:U},h[4]=U,h[5]=z,h[6]=i):i=h[6];let{screenReaderText:H,annotationElement:W}=i;h[7]!==T?(a=()=>{if(v.current&&T){let e=window.setTimeout(()=>{let e=A.XC?.getElementById("diff_file_tree")?.parentElement,t=v.current.offsetTop,i=A.cg?.innerHeight??0;e&&(e.scrollTop=t-i/2)},0);return()=>{window.clearTimeout(e)}}},h[7]=T,h[8]=a):a=h[8],h[9]!==f.diff.pathDigest||h[10]!==T?(s=[f.diff.pathDigest,T],h[9]=f.diff.pathDigest,h[10]=T,h[11]=s):s=h[11],(0,p.useEffect)(a,s),h[12]!==b||h[13]!==f.diff.pathDigest||h[14]!==V||h[15]!==x||h[16]!==O||h[17]!==R?(r=e=>{let t=V();if(e.nativeEvent instanceof KeyboardEvent){if(v?.current!==document.activeElement)return void e.preventDefault();if("Enter"===e.key||" "===e.key){e.preventDefault(),(0,k.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{O("diff-lines.inp_interaction","PULL_REQUESTS_FILE_TREE_DIFF_FILE_KEYBOARD_SELECTION",{latency:e.latency}),(0,$.au)({name:"PULL_REQUESTS_FILE_TREE_DIFF_FILE_KEYBOARD_SELECTION",tags:t,value:e.latency})}}),R(f.diff.pathDigest),(0,w.Zu)(`diff-${f.diff.pathDigest}`),(0,w.kd)(window.location.href),x?.(),A.cg?.requestAnimationFrame(()=>{F(document.getElementById(`diff-${f.diff.pathDigest}`))});return}}if(e.nativeEvent instanceof MouseEvent){if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),window.open(b,"_blank");return}(0,k.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{O("diff-lines.inp_interaction","PULL_REQUESTS_FILE_TREE_DIFF_FILE_CLICK",{latency:e.latency}),(0,$.au)({name:"PULL_REQUESTS_FILE_TREE_DIFF_FILE_CLICK",tags:t,value:e.latency})}}),R(f.diff.pathDigest),(0,w.Zu)(`diff-${f.diff.pathDigest}`),(0,w.kd)(window.location.href),x?.(),A.cg?.requestAnimationFrame(()=>{F(document.getElementById(`diff-${f.diff.pathDigest}`))})}},h[12]=b,h[13]=f.diff.pathDigest,h[14]=V,h[15]=x,h[16]=O,h[17]=R,h[18]=r):r=h[18];let Q=r,K=f.fileName??"";h[19]!==b||h[20]!==K?(o=(0,n.jsx)(L.A,{href:b,muted:!0,ref:_,role:"presentation",className:"fgColor-default",tabIndex:-1,onClick:G,children:K}),h[19]=b,h[20]=K,h[21]=o):o=h[21];let Y=o;return h[22]!==f.diff.changeType||h[23]!==f.diff.isSymlink?(d=(0,n.jsx)(C.G.LeadingVisual,{children:(0,n.jsx)(q,{changeType:f.diff.changeType,isSymlink:f.diff.isSymlink})}),h[22]=f.diff.changeType,h[23]=f.diff.isSymlink,h[24]=d):d=h[24],h[25]!==Y||h[26]!==K||h[27]!==y?(c=y?(0,n.jsx)(D.m,{text:K,direction:"ne",children:Y}):Y,h[25]=Y,h[26]=K,h[27]=y,h[28]=c):c=h[28],h[29]!==W||h[30]!==N||h[31]!==S?(m=(!!S||N)&&(0,n.jsx)(C.G.TrailingVisual,{children:(0,n.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[!!S&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.CommentIcon,{}),(0,n.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:S<10?S:"9+"})]}),W]})}),h[29]=W,h[30]=N,h[31]=S,h[32]=m):m=h[32],h[33]!==g||h[34]!==f.diff.path||h[35]!==f.diff.pathDigest||h[36]!==T||h[37]!==Q||h[38]!==H||h[39]!==d||h[40]!==c||h[41]!==m?(u=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(C.G.Item,{defaultExpanded:!0,"aria-label":H,"aria-level":g,current:T,id:f.diff.path,onSelect:Q,ref:v,className:P.A["file-tree-row"],children:[d,c,m]},f.diff.pathDigest)}),h[33]=g,h[34]=f.diff.path,h[35]=f.diff.pathDigest,h[36]=T,h[37]=Q,h[38]=H,h[39]=d,h[40]=c,h[41]=m,h[42]=u):u=h[42],u});function G(e){return e.preventDefault()}V.displayName="File";let z=(0,p.memo)(function e({directory:t,depth:i=0,leadingPath:l="",sortByDiffOrder:a,onSelect:s,fileNodeRenderer:r}){let o=l?`${l}/`:"",d=(0,p.useRef)(null),c=(0,p.useRef)(null),m=(0,I.Z)({focusRowRef:c,mouseRowRef:d});if(!t.files.length&&1===t.directories.length)return(0,n.jsx)(n.Fragment,{children:t.directories.map(l=>(0,n.jsx)(e,{depth:0===i?1:i,directory:l,leadingPath:`${o}${t.name}`,sortByDiffOrder:a,onSelect:s,fileNodeRenderer:r},l.path))});function u(){return(0,n.jsx)(U,{directory:t,depth:i,sortByDiffOrder:a,onSelect:s,fileNodeRenderer:r})}return 0===i?u():(0,n.jsxs)(C.G.Item,{ref:c,defaultExpanded:!0,id:t.path,children:[(0,n.jsx)(C.G.LeadingVisual,{children:(0,n.jsx)(C.G.DirectoryIcon,{})}),(0,n.jsx)("span",{ref:d,children:`${o}${t.name}`}),m&&(0,n.jsx)(R.m,{"data-testid":`${t.name}-directory-item-tooltip`,id:`${t.name}-directory-item-tooltip`,contentRef:c,"aria-label":`${o}${t.name}`,open:!0,direction:"ne"}),(0,n.jsx)(C.G.SubTree,{children:u()})]},t.path)});z.displayName="Directory";let U=(0,p.memo)(function(e){let t,i,a,s=(0,l.c)(17),{directory:r,fileNodeRenderer:o,sortByDiffOrder:d,depth:c,onSelect:m}=e,u=void 0===c?0:c;s[0]!==r.directories||s[1]!==r.files||s[2]!==d?(t=r.files.map(W).concat(r.directories.map(Q)),d?t.sort(K):t.sort(Y),s[0]=r.directories,s[1]=r.files,s[2]=d,s[3]=t):t=s[3];let h=t;if(s[4]!==u||s[5]!==o||s[6]!==h||s[7]!==m||s[8]!==d){let e;s[10]!==u||s[11]!==o||s[12]!==m||s[13]!==d?(e=e=>"file"!==e.pathType?(0,n.jsx)(z,{depth:u+1,directory:e.node,fileNodeRenderer:o,sortByDiffOrder:d,onSelect:m},e.path):o?o({onSelect:m,file:e.node,depth:u+1}):(0,n.jsx)(V,{depth:u+1,file:e.node,onSelect:m},e.path),s[10]=u,s[11]=o,s[12]=m,s[13]=d,s[14]=e):e=s[14],i=h.map(e),s[4]=u,s[5]=o,s[6]=h,s[7]=m,s[8]=d,s[9]=i}else i=s[9];return s[15]!==i?(a=(0,n.jsx)(n.Fragment,{children:i}),s[15]=i,s[16]=a):a=s[16],a});U.displayName="DirectoryRendering";let H=(0,p.memo)(function(e){let t,i,a,s=(0,l.c)(10),{diffs:r,fileNodeRenderer:o,sortByDiffOrder:d,className:c,onSelect:m}=e;s[0]!==r?(t=(0,T.xY)(r),s[0]=r,s[1]=t):t=s[1];let u=t;return s[2]!==o||s[3]!==u||s[4]!==m||s[5]!==d?(i=(0,n.jsx)(z,{directory:u,fileNodeRenderer:o,sortByDiffOrder:d,onSelect:m}),s[2]=o,s[3]=u,s[4]=m,s[5]=d,s[6]=i):i=s[6],s[7]!==c||s[8]!==i?(a=(0,n.jsx)(C.G,{"aria-label":"File Tree",className:c,children:i}),s[7]=c,s[8]=i,s[9]=a):a=s[9],a});function W(e){return{path:e.filePath,pathType:"file",node:e,sortOrder:e.sortOrder}}function Q(e){return{path:e.path,pathType:"directory",node:e,sortOrder:e.sortOrder}}function K(e,t){return e.sortOrder-t.sortOrder}function Y(e,t){return(0,T.wH)(e.path,t.path)}H.displayName="PullRequestDiffFileTree";var J=i(86280),X=i(46249),Z=i(7478),ee=i(42473);function et(){let e,t,i=(0,l.c)(5),{sendPullRequestAnalyticsEvent:n}=(0,ee.q)(),a=(0,j.JA)();i[0]!==a||i[1]!==n?(e=e=>{let{isErrorState:t,unavailableReason:i,userPreferenceDisabled:l,hasGroups:s}=e,r=void 0!==t&&t,o=void 0!==l&&l,d=void 0!==s&&s;n("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:d&&!r&&!o,presented_and_not_visible:d&&!r&&o,has_groups:d,is_error_state:r,selected_group_id:a?.id,browser_width:"u">typeof window?window.innerWidth:0,...i&&{unavailable_reason:i},...a&&{selected_group_name:a.name}})},i[0]=a,i[1]=n,i[2]=e):e=i[2];let s=e;return i[3]!==s?(t={sendChangeGroupsPresentedEvent:s},i[3]=s,i[4]=t):t=i[4],t}var ei=i(26108),en=i(64451),el=i(7624),ea=i(85965),es=i(65820),er=i(21373);function eo(e){let t,i,a,s,r=(0,l.c)(16),{onClose:o,onSubmit:d,returnFocusRef:c,feedbackOptions:m,precheckOther:h}=e,f=void 0!==h&&h,[g,x]=(0,p.useState)(!1);r[0]!==f?(t=f?["OTHER"]:[],r[0]=f,r[1]=t):t=r[1];let[v,_]=(0,p.useState)(t),[b,w]=(0,p.useState)("");r[2]!==v||r[3]!==d||r[4]!==b?(i=e=>{e.preventDefault(),x(!0),v.length&&d({type:"NEGATIVE",feedbackChoice:v,textResponse:b})},r[2]=v,r[3]=d,r[4]=b,r[5]=i):i=r[5];let y=i;return r[6]!==g||r[7]!==v||r[8]!==m||r[9]!==y||r[10]!==b?(a=()=>(0,n.jsxs)("form",{onSubmit:y,children:[(0,n.jsxs)(u.l.Body,{children:[(0,n.jsx)("div",{className:"pr-mb-3",children:(0,n.jsxs)(en.A,{onChange:_,required:!0,children:[(0,n.jsx)(en.A.Label,{children:"Category"}),m.map(e=>(0,n.jsxs)(el.A,{id:`feedback_choice_${e.value}`,children:[(0,n.jsx)(ea.A,{value:e.value,checked:v.includes(e.value)}),(0,n.jsx)(el.A.Label,{children:e.label})]},e.value)),g&&!v.length&&(0,n.jsx)(en.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,n.jsxs)(el.A,{id:"text_response",children:[(0,n.jsx)(el.A.Label,{children:"How should we improve this response?"}),(0,n.jsx)(es.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:b,resize:"vertical",onChange:e=>w(e.currentTarget.value)})]})]}),(0,n.jsx)(u.l.Footer,{children:(0,n.jsx)(er.Q,{type:"submit",disabled:g&&(!b||!v),children:"Submit"})})]}),r[6]=g,r[7]=v,r[8]=m,r[9]=y,r[10]=b,r[11]=a):a=r[11],r[12]!==o||r[13]!==c||r[14]!==a?(s=(0,n.jsx)(u.l,{onClose:o,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:c,renderBody:a}),r[12]=o,r[13]=c,r[14]=a,r[15]=s):s=r[15],s}function ed(e){let t,i,a=(0,l.c)(5),{disabled:s,onSubmit:r}=e;return a[0]!==r?(t=()=>r({type:"POSITIVE"}),a[0]=r,a[1]=t):t=a[1],a[2]!==s||a[3]!==t?(i=(0,n.jsx)(ei.K,{size:"small",variant:"invisible",disabled:s,icon:E.ThumbsupIcon,"aria-label":"Positive feedback",onClick:t}),a[2]=s,a[3]=t,a[4]=i):i=a[4],i}function ec(e){let t,i,a,s,r,o=(0,l.c)(12),{disabled:d,onSubmit:c,feedbackOptions:m}=e,[u,h]=(0,p.useState)(!1),f=(0,p.useRef)(null);o[0]!==c?(t=e=>{c(e),h(!1)},o[0]=c,o[1]=t):t=o[1];let g=t;return o[2]!==u||o[3]!==m||o[4]!==g?(i=u&&(0,n.jsx)(eo,{onClose:()=>h(!1),onSubmit:g,returnFocusRef:f,feedbackOptions:m}),o[2]=u,o[3]=m,o[4]=g,o[5]=i):i=o[5],o[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>h(!0),o[6]=a):a=o[6],o[7]!==d?(s=(0,n.jsx)(ei.K,{ref:f,size:"small",variant:"invisible",disabled:d,icon:E.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:a}),o[7]=d,o[8]=s):s=o[8],o[9]!==i||o[10]!==s?(r=(0,n.jsxs)(n.Fragment,{children:[i,s]}),o[9]=i,o[10]=s,o[11]=r):r=o[11],r}eo.displayName="NegativeFeedbackForm",ed.displayName="PositiveFeedbackButton",ec.displayName="NegativeFeedbackButton";var em=i(41626),eu=i(98153),eh=i(94747),ef=i(90321);function ep(){let e,t=(0,l.c)(2),i=(0,eu.e)(em.uT.submitCopilotGroupsFeedback);return t[0]!==i?(e={mutationFn:async e=>{let{type:t,feedbackChoice:n,textResponse:l}=e,a={feedback:t};l&&(a.text_response=l),n&&n.length>0&&(a.feedback_choice=n);let s=await (0,ef.q$)(i,{method:"POST",headers:{Accept:"application/json"},body:a}),r=await (0,ef.hp)(s);return(0,ef.R)(s,r),r}},t[0]=i,t[1]=e):e=t[1],(0,eh.n)(e)}let eg=e=>{let t,i,a,s,r,o=(0,l.c)(15),{onNegativeFeedbackSubmit:d}=e,[c,m]=(0,p.useState)(),{mutate:u}=ep(),h=(0,j.xW)().changeGroupFeedbackOptions;o[0]!==u?(t=e=>{m(e.type),u(e)},o[0]=u,o[1]=t):t=o[1];let f=t;o[2]!==f||o[3]!==d?(i=e=>{d(),f(e)},o[2]=f,o[3]=d,o[4]=i):i=o[4];let g=i;return o[5]!==f||o[6]!==c?(a="NEGATIVE"!==c&&(0,n.jsx)(ed,{disabled:!!c,onSubmit:f}),o[5]=f,o[6]=c,o[7]=a):a=o[7],o[8]!==h||o[9]!==g||o[10]!==c?(s="POSITIVE"!==c&&(0,n.jsx)(ec,{disabled:!!c,onSubmit:g,feedbackOptions:h}),o[8]=h,o[9]=g,o[10]=c,o[11]=s):s=o[11],o[12]!==a||o[13]!==s?(r=(0,n.jsxs)("div",{className:"d-flex",children:[a,s]}),o[12]=a,o[13]=s,o[14]=r):r=o[14],r};eg.displayName="Feedback";let ex=e=>{let t,i,a=(0,l.c)(5),{className:s,onNegativeFeedbackSubmit:r}=e;return a[0]!==r?(t=(0,n.jsx)(J.t,{boundaryName:"GroupsFeedback",fallback:null,children:(0,n.jsx)(eg,{onNegativeFeedbackSubmit:r})}),a[0]=r,a[1]=t):t=a[1],a[2]!==s||a[3]!==t?(i=(0,n.jsx)("div",{className:s,children:t}),a[2]=s,a[3]=t,a[4]=i):i=a[4],i};ex.displayName="GroupsFeedback";var ev=i(1827),e_=i(9234),eb=i(97286),ew=i(58388);function ey(e){switch(e){case"CREATED":case"RUNNING":case"STARTED":case"WAITING":return!1;default:return!0}}function ej(e,t){let i,n,a,s,r,o=(0,l.c)(15),d=(0,eu.e)(em.uT.changeGroups);o[0]!==t||o[1]!==d||o[2]!==e?(i=function({baseSha:e,headSha:t,changeGroupsURL:i}){return[em.uT.changeGroups,i,`baseSha:${e}`,`headSha:${t}`]}({headSha:e,baseSha:t,changeGroupsURL:d}),o[0]=t,o[1]=d,o[2]=e,o[3]=i):i=o[3];let c=i,{updateChangeGroupGeneration:m}=(0,j.wL)(),u=(0,j.xW)();o[4]!==u?(n=()=>{let e=u.latestChangeGroupOrchestration?.state;if(e&&ey(e))return u},o[4]=u,o[5]=n):n=o[5];let h=n;return o[6]!==d||o[7]!==m?(a=async()=>{let e=await (0,ew.QJ)(d);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return m(t),t},o[6]=d,o[7]=m,o[8]=a):a=o[8],o[9]!==h?(s=h(),o[9]=h,o[10]=s):s=o[10],o[11]!==c||o[12]!==a||o[13]!==s?(r={queryKey:c,queryFn:a,initialData:s,staleTime:1/0},o[11]=c,o[12]=a,o[13]=s,o[14]=r):r=o[14],(0,eb.I)(r)}var eS=i(69991);function eN(e){let t,i,a,s,r,o,d,c,m,u,h,x=(0,l.c)(46),{groups:b,activeGroupId:w,onSelectGroup:y,onClearActiveGroup:S,isLoadingState:N}=e,{sendPullRequestAnalyticsEvent:C}=(0,ee.q)(),{sendChangeGroupsPresentedEvent:R}=et(),{fullDiff:T}=(0,j.L3)(),I=(0,j.a_)(),D=(0,j.TV)(),L=(0,j.r$)(),O=(0,p.useRef)(null),{error:P}=ej(T.headOid,T.baseOid),F=!!P&&!N;!function(e,t,i){let n,a,s=(0,l.c)(7),r=(0,ev.A)(),{refetch:o}=ej(i,t);s[0]!==r||s[1]!==o?(n=(0,g.n)(()=>{r()&&o()},2e3),s[0]=r,s[1]=o,s[2]=n):n=s[2];let d=n;s[3]!==t||s[4]!==i||s[5]!==d?(a=e=>{e?.base_commit_oid===t&&e?.head_commit_oid===i&&window.setTimeout(()=>d(),e.wait||0)},s[3]=t,s[4]=i,s[5]=d,s[6]=a):a=s[6];let c=a;(0,e_.x)(e,c)}(I,T.baseOid,T.headOid),x[0]!==b.length||x[1]!==N||x[2]!==R||x[3]!==F||x[4]!==D?(t=()=>{N||(F||D?R({isErrorState:!0,unavailableReason:D||void 0}):b.length>0?R({isErrorState:!1,hasGroups:!0}):R({isErrorState:!1,hasGroups:!1}))},x[0]=b.length,x[1]=N,x[2]=R,x[3]=F,x[4]=D,x[5]=t):t=x[5],x[6]!==b||x[7]!==N||x[8]!==R||x[9]!==F||x[10]!==D?(i=[b,N,F,D,R],x[6]=b,x[7]=N,x[8]=R,x[9]=F,x[10]=D,x[11]=i):i=x[11],(0,p.useEffect)(t,i),x[12]!==S||x[13]!==C?(a=()=>{C("groups_list.clear_group","GROUPS_LIST_ITEM"),S()},x[12]=S,x[13]=C,x[14]=a):a=x[14];let k=a;x[15]!==k?(s=()=>{k(),requestAnimationFrame(()=>{O.current?.focus()})},x[15]=k,x[16]=s):s=x[16];let $=s,B=b.length>0,{isCollapsed:M,handleToggleCollapsed:q}=function(e){let t=(0,eS.A)("localStorage"),[i,n]=(0,p.useState)(!1),{sendPullRequestAnalyticsEvent:l}=(0,ee.q)();return(0,p.useEffect)(()=>{let i=t.getItem(eI(e));null!==i&&n(JSON.parse(i))},[]),{isCollapsed:i,handleToggleCollapsed:()=>{let a=!i;A.cg?.requestAnimationFrame(()=>{t.setItem(eI(e),JSON.stringify(a))}),n(()=>a),l("groups_list.toggle_collapse","GROUPS_LIST_TOGGLE",{is_collapsed:a})}}}(L);x[17]!==q?(r=()=>{q(),requestAnimationFrame(()=>{O.current?.focus()})},x[17]=q,x[18]=r):r=x[18];let V=r;x[19]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(X.A,{as:"h2",className:"h6",children:"Groups by Copilot"}),x[19]=o):o=x[19];let G=o;return x[20]===Symbol.for("react.memo_cache_sentinel")?(d=(0,f.$)("GroupsList-module__GroupsListContainer__UhdhU"),x[20]=d):d=x[20],x[21]!==b.length||x[22]!==q||x[23]!==B||x[24]!==M||x[25]!==N?(c=N?(0,n.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[G,(0,n.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,n.jsx)(Z.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,n.jsxs)("button",{className:(0,f.$)("d-flex flex-row flex-items-center fgColor-muted","GroupsList-module__GroupsListToggle__PbjE0"),onClick:q,"aria-expanded":!M,ref:O,children:[G,M&&B&&(0,n.jsx)(_.A,{scheme:"secondary",className:"mx-2",children:b.length}),M?(0,n.jsx)(E.ChevronDownIcon,{className:"ml-auto"}):(0,n.jsx)(E.ChevronUpIcon,{className:"ml-auto"})]}),x[21]=b.length,x[22]=q,x[23]=B,x[24]=M,x[25]=N,x[26]=c):c=x[26],x[27]!==w||x[28]!==b||x[29]!==k||x[30]!==$||x[31]!==B||x[32]!==M||x[33]!==y||x[34]!==V?(m=B&&(0,n.jsxs)("div",{className:(0,f.$)("mt-n2","GroupsList-module__GroupsListItemsShiftLeft__xaCXu"),children:[M&&!w?(0,n.jsx)("div",{className:"pb-2"}):(0,n.jsxs)(v.l,{children:[!M&&(0,n.jsx)(v.l.Item,{active:void 0===w,onSelect:k,children:"All files"},"All files"),b.toSorted(eC).map(e=>(0,n.jsx)(eT,{group:e,activeGroupId:w,onSelectGroup:y,isListCollapsed:M,onClickGroupWhenCollapsed:$},e.id)).filter(Boolean)]}),!M&&(0,n.jsx)(ex,{className:"ml-2",onNegativeFeedbackSubmit:V})]}),x[27]=w,x[28]=b,x[29]=k,x[30]=$,x[31]=B,x[32]=M,x[33]=y,x[34]=V,x[35]=m):m=x[35],x[36]!==B||x[37]!==M||x[38]!==N||x[39]!==F||x[40]!==D?(u=!M&&!B&&!N&&(0,n.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:D?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-0 d-inline",children:function(e){switch(e){case"DIFF_TOO_LARGE":case"TOO_MANY_GROUPS":return"Groups are unavailable because the PR exceeds the size limit.";case"DIFF_TOO_SMALL":case"TOO_FEW_GROUPS":return"Grouping was skipped because all changes are closely related.";default:return"Copilot was unable to generate groups for this pull request."}}(D)})," ",(0,n.jsx)(eR,{})]}):F&&(0,n.jsx)("p",{className:"mb-0",children:"No groups created"})}),x[36]=B,x[37]=M,x[38]=N,x[39]=F,x[40]=D,x[41]=u):u=x[41],x[42]!==u||x[43]!==c||x[44]!==m?(h=(0,n.jsxs)("div",{className:d,children:[c,m,u]}),x[42]=u,x[43]=c,x[44]=m,x[45]=h):h=x[45],h}function eC(e,t){return t.priority-e.priority}function eR(){let e,t,i,a,s=(0,l.c)(9),r=(0,p.useRef)(null),{mutate:o}=ep(),[d,c]=(0,p.useState)(!1),m=(0,j.xW)().changeGroupFeedbackOptions;s[0]!==o?(e=e=>{o(e),c(!1)},s[0]=o,s[1]=e):e=s[1];let u=e;return s[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(L.A,{className:"d-inline",as:"button",ref:r,inline:!0,muted:!0,onClick:()=>c(!0),children:"Give feedback"}),s[2]=t):t=s[2],s[3]!==d||s[4]!==m||s[5]!==u?(i=d&&(0,n.jsx)(eo,{feedbackOptions:m,onSubmit:u,onClose:()=>c(!1),returnFocusRef:r,precheckOther:!0}),s[3]=d,s[4]=m,s[5]=u,s[6]=i):i=s[6],s[7]!==i?(a=(0,n.jsxs)(n.Fragment,{children:[t,i]}),s[7]=i,s[8]=a):a=s[8],a}function eT(e){let t,i,a,s,r,o,d=(0,l.c)(20),{group:c,activeGroupId:m,isListCollapsed:u,onSelectGroup:h,onClickGroupWhenCollapsed:g}=e,{sendPullRequestAnalyticsEvent:x}=(0,ee.q)(),_=(0,p.useRef)(null);d[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:_,mouseRowRef:_},d[0]=t):t=d[0];let b=(0,I.Z)(t);d[1]!==c.id||d[2]!==h||d[3]!==x?(i=()=>{x("groups_list.select_group","GROUPS_LIST_ITEM"),h(c.id)},d[1]=c.id,d[2]=h,d[3]=x,d[4]=i):i=d[4];let w=i,y=m===c.id;if(u&&!y)return null;let j=`${c.name}-${u?"collapsed":"expanded"}`,S=u?void 0:w;d[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,f.$)("GroupsList-module__GroupItem__Oxspy","PRIVATE_TreeView-item-content-text"),d[5]=a):a=d[5],d[6]!==c.name?(s=(0,n.jsx)("div",{className:a,children:c.name}),d[6]=c.name,d[7]=s):s=d[7],d[8]!==u||d[9]!==g?(r=u?(0,n.jsx)(v.l.TrailingAction,{as:"button",label:"Clear active group",icon:E.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),g()}}):null,d[8]=u,d[9]=g,d[10]=r):r=d[10],d[11]!==y||d[12]!==j||d[13]!==S||d[14]!==s||d[15]!==r?(o=(0,n.jsxs)(v.l.Item,{active:y,onSelect:S,ref:_,children:[s,r]},j),d[11]=y,d[12]=j,d[13]=S,d[14]=s,d[15]=r,d[16]=o):o=d[16];let N=o;if(b){let e;return d[17]!==c.name||d[18]!==N?(e=(0,n.jsx)(D.m,{text:c.name,direction:"ne",children:N}),d[17]=c.name,d[18]=N,d[19]=e):e=d[19],e}return N}function eI(e){return`GroupsListIsCollapsed_${e}`}eN.displayName="GroupsList",eR.displayName="FeedbackButton",eT.displayName="GroupItem";let eE="pr-file-tree";function eD(e){let t,i,a,s,r,d,c,m,u,h,g,x,v=(0,l.c)(35),{className:_,fileFilter:b,filteredDiffs:w,onFileSelected:y,onSetFilterState:S,allowPullRequestGroups:N}=e,C=void 0!==N&&N,R=(0,j.iY)(),T=(0,j.YL)(),I=(0,j.ww)(),E=(0,j.Fl)(),D=(0,j.WA)(),{sendChangeGroupsPresentedEvent:L}=et();v[0]!==E?(t=E&&!ey(E.state),v[0]=E,v[1]=t):t=v[1];let O=t,A=(0,j.TV)();v[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.G7)("hide_groups_list_for_few_groups"),v[2]=i):i=v[2];let P=i&&("TOO_FEW_GROUPS"===A||"DIFF_TOO_SMALL"===A||"NOT_GENERATED_YET"===A);return v[3]!==C||v[4]!==R.length||v[5]!==I||v[6]!==L||v[7]!==D?(a=()=>{C&&R.length>0&&!I&&!D&&L({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},s=[C,I,D,L,R.length],v[3]=C,v[4]=R.length,v[5]=I,v[6]=L,v[7]=D,v[8]=a,v[9]=s):(a=v[8],s=v[9]),(0,p.useEffect)(a,s),v[10]!==T||v[11]!==C||v[12]!==R||v[13]!==I||v[14]!==O||v[15]!==S||v[16]!==P||v[17]!==D?(r=C&&!I&&D&&!P&&(0,n.jsx)(eN,{activeGroupId:T,groups:R,onClearActiveGroup:()=>{S({activeChangeGroupId:void 0})},onSelectGroup:e=>{S({activeChangeGroupId:e})},isLoadingState:O||!1}),v[10]=T,v[11]=C,v[12]=R,v[13]=I,v[14]=O,v[15]=S,v[16]=P,v[17]=D,v[18]=r):r=v[18],v[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)("span",{children:"File tree failed to load."}),v[19]=d):d=v[19],v[20]!==_?(c=(0,f.$)("d-flex flex-column min-height-0",_),v[20]=_,v[21]=c):c=v[21],v[22]!==b?(m=(0,n.jsx)("div",{className:"pb-3 pr-lg-3",children:b}),v[22]=b,v[23]=m):m=v[23],v[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)("h2",{className:"sr-only",children:"File tree"}),v[24]=u):u=v[24],v[25]!==w||v[26]!==y?(h=(0,n.jsxs)("div",{className:"PullRequestFileTree-module__FileTreeScrollable__OW_Y2",children:[u,(0,n.jsx)(H,{diffs:w,fileNodeRenderer:eL,sortByDiffOrder:!0,onSelect:y,className:"pr-pr-lg-3"})]}),v[25]=w,v[26]=y,v[27]=h):h=v[27],v[28]!==h||v[29]!==c||v[30]!==m?(g=(0,n.jsx)(J.t,{boundaryName:"PullRequestDiffFileTree",fallback:d,children:(0,n.jsxs)("div",{className:c,id:eE,children:[m,h]})}),v[28]=h,v[29]=c,v[30]=m,v[31]=g):g=v[31],v[32]!==g||v[33]!==r?(x=(0,n.jsxs)("div",{className:"d-flex flex-column height-fit",children:[r,g]}),v[32]=g,v[33]=r,v[34]=x):x=v[34],x}function eL(e){return(0,n.jsx)(eO,{...e},e.file.filePath)}eD.displayName="PullRequestFileTree";let eO=(0,p.memo)(function(e){let t,i,a,s,r,o,d=(0,l.c)(14);d[0]!==e?({file:t,...i}=e,d[0]=e,d[1]=t,d[2]=i):(t=d[1],i=d[2]),d[3]!==t.diff?(a=Object.values(t.diff?.markersMap??{}).flatMap(eP),d[3]=t.diff,d[4]=a):a=d[4];let c=a,m=(0,j.Qb)(c);d[5]!==m||d[6]!==t.diff?(s={...t.diff,totalCommentsCount:m},d[5]=m,d[6]=t.diff,d[7]=s):s=d[7],d[8]!==t||d[9]!==s?(r={...t,diff:s},d[8]=t,d[9]=s,d[10]=r):r=d[10];let u=r;return d[11]!==u||d[12]!==i?(o=(0,n.jsx)(V,{file:u,...i}),d[11]=u,d[12]=i,d[13]=o):o=d[13],o});function eA(e){return e.id}function eP(e){return e.threads.map(eA)}eO.displayName="PullRequestFile";var eF=i(41431);function ek(e){return e.reviewThreadsPaginatedLimit>e.reviewThreadsLimit}function e$(e){let t,i,a,s=(0,l.c)(6),{pageLimits:r}=e,o=r.filesLimitExceeded||r.reviewThreadsLimitExceeded||r.annotationsLimitExceeded;s[0]!==r?(t=()=>{let e=[];r.filesLimitExceeded&&e.push(`first ${r.filesLimit} files`),r.reviewThreadsLimitExceeded&&e.push(`latest ${r.reviewThreadsLimit} comments`),r.annotationsLimitExceeded&&e.push(`first ${r.annotationsLimit} alerts`);let t="";1===e.length?t=`${e[0]}`:2===e.length?t=`${e[0]} and ${e[1]}`:3===e.length&&(t=`${e[0]}, ${e[1]}, and ${e[2]}`);let i="Only the "+t+" are currently being shown.";return r.reviewThreadsLimitExceeded&&ek(r)&&(r.reviewThreadsPaginatedLimitExceeded?i+=` To view up to ${r.reviewThreadsPaginatedLimit} comments, open the comments side panel.`:i+=" To view the remaining comments, open the comments side panel"),i},s[0]=r,s[1]=t):t=s[1];let d=t();s[2]!==d?(i=(0,n.jsx)("span",{children:d}),s[2]=d,s[3]=i):i=s[3];let c=i;return o?(s[4]!==c?(a=(0,n.jsx)(eF.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:c,className:"pr-mb-3"}),s[4]=c,s[5]=a):a=s[5],a):null}e$.displayName="PageLimitsBanner";let eB="ViewedFileProgress-module__FilesCountText__NwSKr",eM=e=>{let t,i,a,s,r=(0,l.c)(5),{progress:o}=e;r[0]===Symbol.for("react.memo_cache_sentinel")?(t={transform:"rotate(-90deg)"},r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),r[1]=i):i=r[1];let d=38-38*o;return r[2]===Symbol.for("react.memo_cache_sentinel")?(a={transition:"stroke-dashoffset 0.35s"},r[2]=a):a=r[2],r[3]!==d?(s=(0,n.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:t,width:"16",children:[i,(0,n.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:d,strokeLinecap:"round",strokeWidth:"2",style:a})]}),r[3]=d,r[4]=s):s=r[4],s};function eq(e){let t,i,a,s,r,o,d,c=(0,l.c)(14),{totalFilesCount:m}=e,u=(0,j.gi)();if(0===m)return null;let h=(u??0)/m||0;return c[0]!==h?(t=(0,n.jsx)(eM,{progress:h}),c[0]=h,c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,f.$)("ml-1","ViewedFileProgress-module__ProgressContainer___3P2j"),c[2]=i):i=c[2],c[3]!==u?(a=(0,n.jsx)("span",{className:eB,children:u}),c[3]=u,c[4]=a):a=c[4],c[5]!==m?(s=(0,n.jsx)("span",{className:eB,children:m}),c[5]=m,c[6]=s):s=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("span",{className:"ViewedFileProgress-module__ViewedText__s4QAn",children:"viewed"}),c[7]=r):r=c[7],c[8]!==a||c[9]!==s?(o=(0,n.jsxs)("span",{className:i,children:[a," /"," ",s," ",r]}),c[8]=a,c[9]=s,c[10]=o):o=c[10],c[11]!==t||c[12]!==o?(d=(0,n.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[t,o]}),c[11]=t,c[12]=o,c[13]=d):d=c[13],d}function eV(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),i=document.querySelector(`#${e} div[role="dialog"]`);(t||i)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}eM.displayName="ProgressIcon",eq.displayName="ViewedFileProgress";var eG=i(89823),ez=i(38750),eU=i(67323),eH=i(35592),eW=i(66202);function eQ(e,t){let{filterText:i,showResolvedThreads:n}=t;if(!n&&e.isResolved||!t.showOutdatedThreads&&e.isOutdated)return!1;if(i){let t=i.toLowerCase();if(!e.authorLogin.toLowerCase().includes(t)&&!e.body.toLowerCase().includes(t)&&!e.path.toLowerCase().includes(t))return!1}return!t.selectedAuthor||e.authorLogin===t.selectedAuthor}function eK(e){return e.id}let eY={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0};function eJ(e){let t,i,a,s,r,o,d,c,m,u=(0,l.c)(32),{authorList:h,className:p,filterState:g,onFilterStateChange:x,hideReviewThreadFilters:_}=e;u[0]!==g||u[1]!==x?(t=e=>{x({...g,filterText:e})},u[0]=g,u[1]=x,u[2]=t):t=u[2];let b=t;u[3]!==g||u[4]!==x?(i=()=>{x({...g,showResolvedThreads:!g.showResolvedThreads})},u[3]=g,u[4]=x,u[5]=i):i=u[5];let w=i;u[6]!==g||u[7]!==x?(a=()=>{x({...g,showOutdatedThreads:!g.showOutdatedThreads})},u[6]=g,u[7]=x,u[8]=a):a=u[8];let y=a;u[9]!==g||u[10]!==x?(s=e=>{if(g.selectedAuthor===e)return x({...g,selectedAuthor:void 0});x({...g,selectedAuthor:e})},u[9]=g,u[10]=x,u[11]=s):s=u[11];let j=s;return u[12]!==p?(r=(0,f.$)("d-flex flex-row gap-2 flex-nowrap",p),u[12]=p,u[13]=r):r=u[13],u[14]!==b?(o=e=>b(e.target.value),u[14]=b,u[15]=o):o=u[15],u[16]!==g.filterText||u[17]!==o?(d=(0,n.jsx)(ez.A,{block:!0,"aria-label":"Filter comments",leadingVisual:E.SearchIcon,placeholder:"Filter comments",value:g.filterText,onChange:o}),u[16]=g.filterText,u[17]=o,u[18]=d):d=u[18],u[19]!==h||u[20]!==g.selectedAuthor||u[21]!==g.showOutdatedThreads||u[22]!==g.showResolvedThreads||u[23]!==_||u[24]!==j||u[25]!==y||u[26]!==w?(c=!_||h.length>1?(0,n.jsxs)(eU.W,{children:[(0,n.jsx)(eU.W.Anchor,{children:(0,n.jsx)(er.Q,{"aria-label":"Additional comment filters",className:"flex-shrink-0",leadingVisual:E.FilterIcon,trailingAction:E.TriangleDownIcon,children:"Filter"})}),(0,n.jsx)(eU.W.Overlay,{width:"small",children:(0,n.jsxs)(v.l,{selectionVariant:"single",children:[!_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.l.Item,{selected:g.showResolvedThreads,onSelect:()=>w(),children:"Show resolved comments"}),(0,n.jsx)(v.l.Item,{selected:g.showOutdatedThreads,onSelect:()=>y(),children:"Show outdated comments"})]}),h.length>1&&(0,n.jsxs)(n.Fragment,{children:[!_&&(0,n.jsx)(v.l.Divider,{}),(0,n.jsxs)(v.l.Group,{children:[(0,n.jsx)(v.l.GroupHeading,{children:"Filter by"}),h.map(e=>(0,n.jsxs)(v.l.Item,{selected:g.selectedAuthor===e.login,onSelect:()=>j(e.login),children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(eH.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]}):null,u[19]=h,u[20]=g.selectedAuthor,u[21]=g.showOutdatedThreads,u[22]=g.showResolvedThreads,u[23]=_,u[24]=j,u[25]=y,u[26]=w,u[27]=c):c=u[27],u[28]!==r||u[29]!==d||u[30]!==c?(m=(0,n.jsxs)("div",{className:r,children:[d,c]}),u[28]=r,u[29]=d,u[30]=c,u[31]=m):m=u[31],m}eJ.displayName="CommentsFilter";var eX=i(27310),eZ=i(74072),e0=i(55159),e1=i(59134),e2=i(4925);function e3(e){let t,i,a,s,r,o,d,c,m,u,h,g,x,v,_,b=(0,l.c)(47),{firstCommentId:w,isCollapsed:y,isOutdated:j,isResolved:S,line:N,onToggleCollapsed:C,onNavigateToDiffComment:R,path:T,rightSideContent:I,threadId:O,headingLevel:A}=e,P=void 0===A?"h3":A;b[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eS.A)("localStorage"),b[0]=t):t=b[0];let F=t,[k,$]=(0,p.useState)(y);b[1]!==O?(i=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${O}`);null!==e&&$(JSON.parse(e))},b[1]=O,b[2]=i):i=b[2],b[3]!==k||b[4]!==O?(a=[k,O],b[3]=k,b[4]=O,b[5]=a):a=b[5],(0,p.useEffect)(i,a),b[6]!==k||b[7]!==C||b[8]!==O?(s=()=>{F.setItem(`reviewThreadIsCollapsed_${O}`,JSON.stringify(!k)),$(e4),C()},b[6]=k,b[7]=C,b[8]=O,b[9]=s):s=b[9];let B=s,M=k&&"rounded-2",q=k&&"border-bottom-0";b[10]!==M||b[11]!==q?(r=(0,f.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",M,q),b[10]=M,b[11]=q,b[12]=r):r=b[12];let V=k?"Open review comment":"Close review comment",G=k?E.ChevronRightIcon:E.ChevronDownIcon;b[13]!==B||b[14]!==G||b[15]!==V?(o=(0,n.jsx)(ei.K,{"aria-label":V,icon:G,size:"small",variant:"invisible",onClick:B}),b[13]=B,b[14]=G,b[15]=V,b[16]=o):o=b[16],b[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,f.$)("ConversationHeader-module__file-name-overflow__PjZXd","d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),b[17]=d):d=b[17];let z=`#r${w}`;b[18]!==R||b[19]!==T||b[20]!==z?(c=(0,n.jsxs)(L.A,{className:d,onClick:R,href:z,muted:!0,children:["\u200E",T,"\u200E"]}),b[18]=R,b[19]=T,b[20]=z,b[21]=c):c=b[21],b[22]!==T||b[23]!==c?(m=(0,n.jsx)(D.m,{direction:"n",text:T,type:"label",children:c}),b[22]=T,b[23]=c,b[24]=m):m=b[24],b[25]!==N?(u=!!N&&(0,n.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",N]}),b[25]=N,b[26]=u):u=b[26],b[27]!==P||b[28]!==m||b[29]!==u?(h=(0,n.jsxs)(X.A,{as:P,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[m,u]}),b[27]=P,b[28]=m,b[29]=u,b[30]=h):h=b[30],b[31]!==S?(g=S&&(0,n.jsx)(e2.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),b[31]=S,b[32]=g):g=b[32],b[33]!==j||b[34]!==S?(x=j&&!S&&(0,n.jsx)(e2.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),b[33]=j,b[34]=S,b[35]=x):x=b[35];let U=`#r${w}`;return b[36]!==R||b[37]!==U?(v=(0,n.jsx)(ei.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:E.FileSymlinkFileIcon,variant:"invisible",href:U,onClick:R}),b[36]=R,b[37]=U,b[38]=v):v=b[38],b[39]!==I||b[40]!==o||b[41]!==h||b[42]!==g||b[43]!==x||b[44]!==v||b[45]!==r?(_=(0,n.jsxs)("div",{className:r,children:[o,h,g,x,v,I]}),b[39]=I,b[40]=o,b[41]=h,b[42]=g,b[43]=x,b[44]=v,b[45]=r,b[46]=_):_=b[46],_}function e4(e){return!e}e3.displayName="ConversationHeader";var e5=i(61291),e6=i(27262),e7=i(94007);function e8(e){let t,i,a,s,r,o,d,c=(0,l.c)(35),{firstCommentId:m,isCollapsed:u,onToggleCollapsed:h,onNavigateToDiffComment:f,thread:g,headingLevel:x,isResolved:v,isOutdated:_,lineKey:b}=e,{sendPullRequestAnalyticsEvent:w}=(0,ee.q)(),[y,j]=(0,p.useState)(void 0),S=g.path??"",{line:N}=g;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e7.M3)(),c[0]=t):t=c[0];let C=t,{mutate:R}=(0,e5.H)(S,b);c[1]!==u||c[2]!==v||c[3]!==h||c[4]!==R||c[5]!==g.id?(i=()=>{v||R({threadId:g.id},{onError:()=>j("Failed to resolve thread"),onSuccess:()=>{u||h()}})},c[1]=u,c[2]=v,c[3]=h,c[4]=R,c[5]=g.id,c[6]=i):i=c[6];let T=i,{mutate:I}=(0,e6.i)(S,b);c[7]!==u||c[8]!==v||c[9]!==h||c[10]!==w||c[11]!==g||c[12]!==I?(a=async()=>{!g||v&&(I({threadId:g.id},{onError:()=>j("Failed to unresolve thread"),onSuccess:()=>{u&&h()}}),w("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},c[7]=u,c[8]=v,c[9]=h,c[10]=w,c[11]=g,c[12]=I,c[13]=a):a=c[13];let D=a;return c[14]!==T||c[15]!==D||c[16]!==v?(s=C?(0,n.jsx)(ei.K,{"aria-label":v?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:v?E.CheckCircleFillIcon:E.CheckCircleIcon,"data-thread-resolved":v,className:"ThreadHeader-module__ThreadHeaderIconButton__jXAlb",variant:"invisible",onClick:v?D:T}):null,c[14]=T,c[15]=D,c[16]=v,c[17]=s):s=c[17],c[18]!==S||c[19]!==m||c[20]!==x||c[21]!==u||c[22]!==_||c[23]!==v||c[24]!==N||c[25]!==f||c[26]!==h||c[27]!==s||c[28]!==g.id?(r=(0,n.jsx)(e3,{firstCommentId:m,isCollapsed:u,isOutdated:_,isResolved:v,line:N,path:S,rightSideContent:s,onNavigateToDiffComment:f,onToggleCollapsed:h,threadId:g.id,headingLevel:x}),c[18]=S,c[19]=m,c[20]=x,c[21]=u,c[22]=_,c[23]=v,c[24]=N,c[25]=f,c[26]=h,c[27]=s,c[28]=g.id,c[29]=r):r=c[29],c[30]!==y?(o=y&&(0,n.jsxs)(e1.A,{variant:"danger",className:"m-2",children:[(0,n.jsx)(E.StopIcon,{className:"mr-2"}),y]}),c[30]=y,c[31]=o):o=c[31],c[32]!==r||c[33]!==o?(d=(0,n.jsxs)(n.Fragment,{children:[r,o]}),c[32]=r,c[33]=o,c[34]=d):d=c[34],d}e8.displayName="ThreadHeader";var e9=i(16056);function te(e){let t,i,a=(0,l.c)(4),{commentAuthors:s}=e;return s.length<1?null:(a[0]!==s?(t=s.map(tt),a[0]=s,a[1]=t):t=a[1],a[2]!==t?(i=(0,n.jsx)(e9.A,{children:t}),a[2]=t,a[3]=i):i=a[3],i)}function tt(e){let{login:t,avatarUrl:i}=e;return(0,n.jsx)(eH.r,{alt:t,size:18,src:i},t)}te.displayName="PreviewAuthors";var ti=i(29207);let tn=(0,p.memo)(function(e){var t;let i,a,s,r,o,d,c,m,u=(0,l.c)(30),{commentPreview:h,onNavigateToDiffComment:g,tabSize:x}=e,[v,_]=(0,p.useState)(!1),b=h.commentId,{navigateToSelectedComment:y}=(0,j.Lh)();u[0]!==h.commentsData?(a=h.commentsData??{comments:[]},u[0]=h.commentsData,u[1]=a):a=u[1],u[2]!==b||u[3]!==a?(s=tl(b,a),u[2]=b,u[3]=a,u[4]=s):s=u[4];let S=s,N=h.threadPreviewComments.length,C=`${N} previous ${1===N?"comment":"comments"}`;u[5]!==b||u[6]!==y||u[7]!==g?(r=()=>{let e=parseInt(b);y(e);let t=window.location.pathname+window.location.search;(0,w.kd)(`${t}#r${e}`),g(b)},u[5]=b,u[6]=y,u[7]=g,u[8]=r):r=u[8];let R=r,T=h.isOutdated||!1,I=h.isResolved||!1,D=h.line,L=h.path;u[9]===Symbol.for("react.memo_cache_sentinel")?(o=()=>_(ta),u[9]=o):o=u[9];let O=h.threadId,A=parseInt(h.commentId);return u[10]!==h.line||u[11]!==h.path||u[12]!==h.threadId||u[13]!==v||u[14]!==R||u[15]!==A||u[16]!==T||u[17]!==I?(d=(0,n.jsx)(e3,{isCollapsed:v,isOutdated:T,isResolved:I,line:D,path:L,onNavigateToDiffComment:R,onToggleCollapsed:o,threadId:O,firstCommentId:A}),u[10]=h.line,u[11]=h.path,u[12]=h.threadId,u[13]=v,u[14]=R,u[15]=A,u[16]=T,u[17]=I,u[18]=d):d=u[18],u[19]!==S||u[20]!==h||u[21]!==v||u[22]!==R||u[23]!==N||u[24]!==C||u[25]!==x?(c=!v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,n.jsx)(eZ.i,{diffTableClassName:"border-0",diffLines:h.subject?.diffLines,className:"m-0 border-0",tabSize:x||4})}),N>0&&(0,n.jsx)("div",{className:"my-2 px-2",children:(0,n.jsx)(er.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:E.ChevronRightIcon,variant:"invisible",onClick:R,children:(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,n.jsx)("span",{children:C}),(0,n.jsx)(te,{commentAuthors:S})]})})}),(0,n.jsx)(ti.$6,{className:(0,f.$)("markdown-body","PendingCommentPreview-module__commentBody__ULYiF"),html:(t=h,i=(t.commentsData?.comments??[]).find(e=>e&&String(e.databaseId)===t.commentId),i?.bodyHTML??"")})]}),u[19]=S,u[20]=h,u[21]=v,u[22]=R,u[23]=N,u[24]=C,u[25]=x,u[26]=c):c=u[26],u[27]!==d||u[28]!==c?(m=(0,n.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[d,c]}),u[27]=d,u[28]=c,u[29]=m):m=u[29],m});function tl(e,t){let i=new Set;return(t?.comments??[]).reduce((t,n)=>{if(!n||n.id===e)return t;let l=n.author?.login??"",a=n.author?.avatarUrl??"",s=n.author?.id??"",r=n.author?.url??"";return i.has(l)||(t.push({avatarUrl:a,login:l,id:s,url:r}),i.add(l)),t},[])}function ta(e){return!e}tn.displayName="PendingCommentPreview";let ts=(0,p.memo)(function({onNavigateToDiffComment:e,tabSize:t,thread:i,headingLevel:l}){var a;let s=(0,eW.IV)(i),r=s?.id,{navigateToSelectedComment:o}=(0,j.Lh)(),d=(0,j.SM)(),c=i.subject?.endDiffSide==="RIGHT"?"R":"L",m=i.path??"",u=i.subject?.originalEndLine?`${c}${i.subject.originalEndLine}`:"FILE",h=d(Number(i.id),m,u),f=h?.isResolved||i.isResolved||!1,p=i.isOutdated||!1,g=()=>{let t=s?.databaseId;if(t){if(p&&i.originalDiffPathUri){let e=new URL(i.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else{o(t);let e=window.location.pathname+window.location.search;(0,w.kd)(`${e}#r${t}`)}e()}},[x,v]=(0,e0.Mj)((a=i.id,`panel-thread-collapsed-state-${a}`),!1),_=i.commentCount?i.commentCount:0,b=0===_?"No replies":`${_} ${1===_?"reply":"replies"}`,y={...h,id:h?.id??i.id,commentsData:{comments:[]}};if(!s||!y)return null;let S=tl(s.id,h?.commentsData??i.commentsData??{comments:[]});return(0,n.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,n.jsx)(e8,{firstCommentId:s?.databaseId,isCollapsed:x,thread:i,onNavigateToDiffComment:g,onToggleCollapsed:()=>v(!x),headingLevel:l,isResolved:f,isOutdated:p,lineKey:u}),!x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,n.jsx)(eZ.i,{diffTableClassName:"border-0",diffLines:i.subject?.diffLines,className:"m-0 border-0",tabSize:t||4})}),(0,n.jsx)("div",{children:(0,n.jsx)(eX.U,{lineMarkersKey:u,hideActions:!0,isInlineComment:!1,comment:s,filePath:m,index:0,isAnchorable:!1,isOutdated:p,isThreadResolved:f,threadId:i.id,originalDiffPathUri:i.originalDiffPathUri,headingLevel:"h3"},r)}),(0,n.jsx)("div",{className:"mb-2 px-2",children:(0,n.jsx)(er.Q,{"aria-label":`View ${b}`,size:"small",trailingVisual:E.ChevronRightIcon,variant:"invisible",onClick:g,children:(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,n.jsx)("span",{children:b}),(0,n.jsx)(te,{commentAuthors:S})]})})})]})]})});ts.displayName="ThreadPreview";var tr=i(86276),to=i(5024);let td="ThreadPreviewSkeleton-module__diffLine__Tpn4W",tc="ThreadPreviewSkeleton-module__lineNumberCol__qrCwa",tm="ThreadPreviewSkeleton-module__diffContent__a7IGQ",tu="ThreadPreviewSkeleton-module__commentLine__B9BXU";function th(){let e,t,i,a,s,r,o,d=(0,l.c)(7);return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"ThreadPreviewSkeleton-module__header__UJ25Z",children:(0,n.jsx)(tr.r,{size:"bodyMedium",className:"ThreadPreviewSkeleton-module__filePath__TlVbt"})}),d[0]=e):e=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("div",{className:td,children:[(0,n.jsx)(to.f,{className:tc}),(0,n.jsx)(to.f,{className:tm})]}),d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsxs)("div",{className:td,children:[(0,n.jsx)(to.f,{className:tc}),(0,n.jsx)(to.f,{className:tm})]}),d[2]=i):i=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsxs)("div",{className:"ThreadPreviewSkeleton-module__diffPreview__Yqbd7",children:[t,i,(0,n.jsxs)("div",{className:td,children:[(0,n.jsx)(to.f,{className:tc}),(0,n.jsx)(to.f,{className:tm})]})]}),d[3]=a):a=d[3],d[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsxs)("div",{className:"ThreadPreviewSkeleton-module__commentHeader__elu0c",children:[(0,n.jsx)(tr.r,{size:"bodySmall",className:"ThreadPreviewSkeleton-module__authorName__X1_UH"}),(0,n.jsx)(tr.r,{size:"bodySmall",className:"ThreadPreviewSkeleton-module__timestamp__Gorjv"})]}),d[4]=s):s=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsxs)("div",{className:"ThreadPreviewSkeleton-module__comment__r78wa",children:[s,(0,n.jsxs)("div",{className:"ThreadPreviewSkeleton-module__commentBody__cXtLb",children:[(0,n.jsx)(tr.r,{size:"bodySmall",className:tu}),(0,n.jsx)(tr.r,{size:"bodySmall",className:tu})]})]}),d[5]=r):r=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsxs)("div",{className:"ThreadPreviewSkeleton-module__container__a5gOf","data-testid":"thread-preview-skeleton-item",children:[e,a,r,(0,n.jsx)("div",{className:"ThreadPreviewSkeleton-module__footer__SI2Y6",children:(0,n.jsx)(to.f,{className:"ThreadPreviewSkeleton-module__repliesButton__Ibr_c"})})]}),d[6]=o):o=d[6],o}function tf(e){let t,i=(0,l.c)(2),{count:a}=e,s=void 0===a?1:a;return i[0]!==s?(t=(0,n.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3","data-testid":"thread-preview-skeleton",children:Array.from({length:s},tp)}),i[0]=s,i[1]=t):t=i[1],t}function tp(e,t){return(0,n.jsx)(th,{},t)}th.displayName="ThreadPreviewSkeletonItem",tf.displayName="ThreadPreviewSkeleton";var tg=i(20267),tx=i(14623);function tv(e){let t,i,a,s,r=(0,l.c)(11),{heading:o,description:d,icon:c,headingLevel:m}=e,u=void 0===m?"h1":m;return r[0]!==c?(t=(0,n.jsx)(tx.E.Visual,{children:(0,n.jsx)(c,{size:"medium"})}),r[0]=c,r[1]=t):t=r[1],r[2]!==o||r[3]!==u?(i=(0,n.jsx)(tx.E.Heading,{as:u,children:o}),r[2]=o,r[3]=u,r[4]=i):i=r[4],r[5]!==d?(a=d&&(0,n.jsx)(tx.E.Description,{children:d}),r[5]=d,r[6]=a):a=r[6],r[7]!==t||r[8]!==i||r[9]!==a?(s=(0,n.jsxs)(tx.E,{children:[t,i,a]}),r[7]=t,r[8]=i,r[9]=a,r[10]=s):s=r[10],s}tv.displayName="ZeroState";var t_=i(1925),tb=i(15610),tw=i(15481);function ty(e){return e.nextUrl??void 0}var tj=i(88860),tS=i(58068),tN=i(64231);function tC(e){let t,i,a,s,r,d,c,m,u,h,f,g=(0,l.c)(37),{comment:x,pullRequestAuthorLogin:v,canReact:_,onQuoteReply:b}=e,{mutate:w}=function(){var e,t;let i,n,a,s,r=(0,l.c)(2),o=(0,j.Kp)(),{updateIssueComment:d}=(0,j._o)();return r[0]!==d?(s=(e,t)=>{d({match:e=>e.id===t.commentId,transform:t=>{if(t)return{...t,reactionGroups:e.reactionGroups}}})},r[0]=d,r[1]=s):s=r[1],e=o,t=s,(a=(0,l.c)(5))[0]!==e?(i=async t=>{let{commentId:i,reaction:n,viewerHasReacted:l}=t,a=`${e}/page_data/${l?em.uT.removeCommentReaction:em.uT.addCommentReaction}`,s=await (0,ef.q$)(a,{method:"POST",body:{reaction:n,issueCommentId:i}}),r=await (0,ef.hp)(s);return(0,ef.R)(s,r),r},a[0]=e,a[1]=i):i=a[1],a[2]!==t||a[3]!==i?(n={mutationFn:i,onSuccess:t},a[2]=t,a[3]=i,a[4]=n):n=a[4],(0,eh.n)(n)}(),y=(0,p.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("pr_comment_panel_footer"),g[0]=t):t=g[0];let S=t;if(!x.repository)return null;g[1]!==x.id||g[2]!==w?(i=(e,t)=>{w({commentId:x.id,reaction:e,viewerHasReacted:t})},g[1]=x.id,g[2]=w,g[3]=i):i=g[3];let N=i;g[4]!==x.body||g[5]!==b?(a=()=>{let e=A.cg?.getSelection(),t=null;e&&e.anchorNode&&e.rangeCount>0&&(t={anchorNode:e.anchorNode,range:e.getRangeAt(0)}),b((0,tN.E)(y.current,t,x.body)??x.body)},g[4]=x.body,g[5]=b,g[6]=a):a=g[6];let C=a,R=x.authorAvatarUrl||"";return g[7]!==x.authorAssociation||g[8]!==x.createdAt||g[9]!==x.id||g[10]!==x.isHidden||g[11]!==x.minimizedReason||g[12]!==x.repository||g[13]!==x.url?(s={id:x.id,authorAssociation:x.authorAssociation,createdAt:x.createdAt,isHidden:x.isHidden,minimizedReason:x.minimizedReason,repository:x.repository,url:x.url},g[7]=x.authorAssociation,g[8]=x.createdAt,g[9]=x.id,g[10]=x.isHidden,g[11]=x.minimizedReason,g[12]=x.repository,g[13]=x.url,g[14]=s):s=g[14],g[15]===Symbol.for("react.memo_cache_sentinel")?(r={},g[15]=r):r=g[15],g[16]!==x.authorLogin||g[17]!==v||g[18]!==R||g[19]!==s?(d=(0,n.jsx)("div",{className:"pt-2 pr-px-3",children:(0,n.jsx)(tj.v,{avatarUrl:R,comment:s,commentAuthorLogin:x.authorLogin,commentSubjectType:"pull request",commentSubjectAuthorLogin:v,forceInlineAvatar:!0,isMinimized:!1,containerStyle:r})}),g[16]=x.authorLogin,g[17]=v,g[18]=R,g[19]=s,g[20]=d):d=g[20],g[21]!==x.bodyHtml?(c=(0,n.jsx)(ti.$6,{className:"markdown-body mt-1 f5",html:x.bodyHtml}),g[21]=x.bodyHtml,g[22]=c):c=g[22],g[23]!==_||g[24]!==x.reactionGroups||g[25]!==x.viewerCanReact||g[26]!==N?(m=x.reactionGroups.length>0&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(tS.P,{reactionGroups:x.reactionGroups,canReact:_&&x.viewerCanReact,onReact:N})}),g[23]=_,g[24]=x.reactionGroups,g[25]=x.viewerCanReact,g[26]=N,g[27]=m):m=g[27],g[28]!==C?(u=S&&(0,n.jsx)(er.Q,{className:"mt-2 ml-n2",onClick:C,trailingVisual:E.ChevronRightIcon,variant:"invisible",children:"Quote Reply"}),g[28]=C,g[29]=u):u=g[29],g[30]!==u||g[31]!==c||g[32]!==m?(h=(0,n.jsxs)("div",{className:"pr-px-3 py-2",children:[c,m,u]}),g[30]=u,g[31]=c,g[32]=m,g[33]=h):h=g[33],g[34]!==h||g[35]!==d?(f=(0,n.jsxs)("div",{ref:y,className:"border rounded-2",children:[d,h]}),g[34]=h,g[35]=d,g[36]=f):f=g[36],f}tC.displayName="IssueCommentItem";var tR=i(42839),tT=i(81076),tI=i(47596);let tE="pullRequestCommentsPanelFooterCollapseState";function tD(e){let t,i,a,s,r,o,d,c=(0,l.c)(20),{commentText:m,onCommentTextChange:u,onSubmitComment:h,isPending:f}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tT.Gq)(tE),c[0]=t):t=c[0];let g=t,[x,v]=(0,p.useState)("true"===g),_=x?"Open PR comment panel":"Close PR comment panel",b=x?E.ChevronRightIcon:E.ChevronDownIcon,w=!x;return c[1]!==x?(i=()=>{let e=!x;v(e),(0,tT.SO)(tE,String(e))},c[1]=x,c[2]=i):i=c[2],c[3]!==_||c[4]!==b||c[5]!==w||c[6]!==i?(a=(0,n.jsx)(ei.K,{"aria-label":_,icon:b,size:"small","aria-expanded":w,tooltipDirection:"n",variant:"invisible",className:"mr-2",onClick:i}),c[3]=_,c[4]=b,c[5]=w,c[6]=i,c[7]=a):a=c[7],c[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("span",{className:"pb-2",children:"Add a comment"}),c[8]=s):s=c[8],c[9]!==a?(r=(0,n.jsxs)("h4",{className:"d-flex",children:[a,s]}),c[9]=a,c[10]=r):r=c[10],c[11]!==m||c[12]!==x||c[13]!==f||c[14]!==u||c[15]!==h?(o=!x&&(0,n.jsx)(tR.S,{label:"Add a comment",value:m,onChange:u,onPrimaryAction:h,disabled:f,children:(0,n.jsx)(er.Q,{variant:"primary",onClick:h,disabled:f||!m.trim(),children:"Comment"})}),c[11]=m,c[12]=x,c[13]=f,c[14]=u,c[15]=h,c[16]=o):o=c[16],c[17]!==r||c[18]!==o?(d=(0,n.jsxs)("div",{className:"d-flex flex-column gap-2 width-full",id:tI.Bq.issueCommentComposer,children:[r,o]}),c[17]=r,c[18]=o,c[19]=d):d=c[19],d}function tL(e){let t,i,a,s,r,o,d,c,m,u,h,f,x,v,_=(0,l.c)(41),{filteredThreadIds:b,onClose:w,pathName:y,isOpen:S,tabSize:N}=e;_[0]!==y?(t={pathName:y},_[0]=y,_[1]=t):t=_[1];let{data:C,hasNextPage:R,isFetchingNextPage:T,fetchNextPage:I}=(0,t_.CB)(t);_[2]!==C.pages?(i=C.pages.flatMap(tO),_[2]=C.pages,_[3]=i):i=_[3];let D=i,L=(0,p.useRef)(!1);_[4]!==I||_[5]!==R||_[6]!==T?(a=()=>{(async()=>{!R||T||L.current||(L.current=!0,await I(),L.current=!1)})()},s=[R,T,I],_[4]=I,_[5]=R,_[6]=T,_[7]=a,_[8]=s):(a=_[7],s=_[8]),(0,p.useEffect)(a,s);let O=(0,j.SM)(),{updateThread:A}=(0,j.an)();_[9]!==O||_[10]!==D||_[11]!==A?(r=()=>{for(let e of D){let t=e.path??"",i=e.subject?.endDiffSide==="RIGHT"?"R":"L",n=e.subject?.originalEndLine?`${i}${e.subject.originalEndLine}`:"FILE";O(Number(e.id),t,n)||A(Number(e.id),t,n,()=>({...e,shouldNotRenderInDiffLines:!0}))}},o=[O,D,A],_[9]=O,_[10]=D,_[11]=A,_[12]=r,_[13]=o):(r=_[12],o=_[13]),(0,p.useEffect)(r,o);let P=(0,p.useRef)(null);_[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,g.s)(tg.i,300),_[14]=d):d=_[14];let F=d,k=D.length>0;_[15]!==w?(c=()=>{w()},_[15]=w,_[16]=c):c=_[16];let $=c;if(_[17]!==b||_[18]!==$||_[19]!==N||_[20]!==D){let e;_[22]!==b||_[23]!==$||_[24]!==N?(e=e=>e&&b.has(e.id)?(0,n.jsx)(ts,{tabSize:N,thread:e,onNavigateToDiffComment:$,headingLevel:"h2"},e.id):null,_[22]=b,_[23]=$,_[24]=N,_[25]=e):e=_[25],m=D.map(e).filter(Boolean),_[17]=b,_[18]=$,_[19]=N,_[20]=D,_[21]=m}else m=_[21];let B=m;return _[26]!==T||_[27]!==S||_[28]!==B.length?(u=()=>{!S||T||F(B.length>0?`${B.length} ${1===B.length?"comment":"comments"}`:"No comments found",{element:P.current})},_[26]=T,_[27]=S,_[28]=B.length,_[29]=u):u=_[29],_[30]!==T||_[31]!==S||_[32]!==B?(h=[S,T,F,B],_[30]=T,_[31]=S,_[32]=B,_[33]=h):h=_[33],(0,p.useEffect)(u,h),_[34]!==k||_[35]!==T||_[36]!==B?(f=B.length>0?(0,n.jsx)(p.Suspense,{fallback:(0,n.jsx)(tf,{}),children:(0,n.jsxs)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:[B,T&&(0,n.jsx)(tf,{count:1})]})}):T?(0,n.jsx)(tf,{}):(0,n.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,n.jsx)(tv,{description:"Comments will show up here as soon as there are some.",heading:k?"No comments match the current filter":"No comments on changes yet",icon:E.CommentIcon,headingLevel:"h2"})}),_[34]=k,_[35]=T,_[36]=B,_[37]=f):f=_[37],_[38]===Symbol.for("react.memo_cache_sentinel")?(x=(0,n.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:P}),_[38]=x):x=_[38],_[39]!==f?(v=(0,n.jsxs)(n.Fragment,{children:[f,x]}),_[39]=f,_[40]=v):v=_[40],v}function tO(e){return e.data}function tA(e){let t,i,a,s,r,o,d,c,m,u,h,f=(0,l.c)(32),{filteredThreadIds:x,pathName:v,isOpen:_,pullRequestAuthorLogin:b,issueComments:w,onQuoteReply:y}=e;f[0]!==v?(t={pathName:v},f[0]=v,f[1]=t):t=f[1];let{hasNextPage:S,isFetchingNextPage:N,fetchNextPage:C}=function(e){let t,i,n,a,s=(0,l.c)(11),{pathName:r}=e,o=(0,j.$j)(),{setIssueComments:d}=(0,j._o)();return s[0]!==r?(t=[em.uT.issueComments,r],s[0]=r,s[1]=t):t=s[1],s[2]!==r?(i=`${r}/page_data/${em.uT.issueComments}`,s[2]=r,s[3]=i):i=s[3],s[4]!==o||s[5]!==d?(n=async e=>{let{pageParam:t}=e,i=await (0,ew.QJ)(t);if(!i.ok)throw Error(`Failed to fetch issue comments from ${t}: HTTP ${i.status}`);let n=await i.json(),l=i.headers.get("Link"),a=(0,tw.N)(l,"next");return d([...o,...n]),{data:n,nextUrl:a}},s[4]=o,s[5]=d,s[6]=n):n=s[6],s[7]!==t||s[8]!==i||s[9]!==n?(a={queryKey:t,initialPageParam:i,queryFn:n,getNextPageParam:ty,staleTime:1/0},s[7]=t,s[8]=i,s[9]=n,s[10]=a):a=s[10],(0,tb.U)(a)}(t),R=w.length>0,T=(0,p.useRef)(!1);if(f[2]!==C||f[3]!==S||f[4]!==N?(i=()=>{(async()=>{!S||N||T.current||(T.current=!0,await C(),T.current=!1)})()},a=[S,N,C],f[2]=C,f[3]=S,f[4]=N,f[5]=i,f[6]=a):(i=f[5],a=f[6]),(0,p.useEffect)(i,a),f[7]!==x||f[8]!==w){let e;f[10]!==x?(e=e=>x.has(e.id),f[10]=x,f[11]=e):e=f[11],s=w.filter(e),f[7]=x,f[8]=w,f[9]=s}else s=f[9];let I=s,D=(0,p.useRef)(null);f[12]===Symbol.for("react.memo_cache_sentinel")?(r=(0,g.s)(tg.i,300),f[12]=r):r=f[12];let L=r;f[13]!==N||f[14]!==_||f[15]!==I.length?(o=()=>{!_||N||L(I.length>0?`${I.length} ${1===I.length?"comment":"comments"}`:"No comments found",{element:D.current})},f[13]=N,f[14]=_,f[15]=I.length,f[16]=o):o=f[16],f[17]!==R||f[18]!==N||f[19]!==_||f[20]!==I?(d=[_,N,L,I,R],f[17]=R,f[18]=N,f[19]=_,f[20]=I,f[21]=d):d=f[21],(0,p.useEffect)(o,d),f[22]===Symbol.for("react.memo_cache_sentinel")?(c=(0,e7.M3)(),f[22]=c):c=f[22];let O=c;return f[23]!==R||f[24]!==N||f[25]!==y||f[26]!==b||f[27]!==I?(m=I.length>0?(0,n.jsx)(p.Suspense,{fallback:(0,n.jsx)(tf,{}),children:(0,n.jsxs)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:[I.map(e=>(0,n.jsx)(tC,{comment:e,pullRequestAuthorLogin:b,canReact:O,onQuoteReply:y},e.id)),N&&(0,n.jsx)(tf,{count:1})]})}):N?(0,n.jsx)(tf,{}):(0,n.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,n.jsx)(tv,{description:"Comments will show up here as soon as there are some.",heading:R?"No comments match the current filter":"No comments yet",icon:E.CommentIcon,headingLevel:"h2"})}),f[23]=R,f[24]=N,f[25]=y,f[26]=b,f[27]=I,f[28]=m):m=f[28],f[29]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:D}),f[29]=u):u=f[29],f[30]!==m?(h=(0,n.jsxs)(n.Fragment,{children:[m,u]}),f[30]=m,f[31]=h):h=f[31],h}tD.displayName="CommentsSidePanelFooter",tL.displayName="ThreadPreviewsContent",tA.displayName="IssueCommentsContent";let tP=(0,p.memo)(function(e){let t,i,a,s,r,d,c,m,h,f,g,x,v,_,b,w,y,S,N,C,R,T,I=(0,l.c)(57);I[0]!==e?({pathName:s,toggleSidesheetRef:c,pageLimits:a,pullRequestAuthorLogin:r,diffCommentCount:t,issueCommentsCount:i,...d}=e,I[0]=e,I[1]=t,I[2]=i,I[3]=a,I[4]=s,I[5]=r,I[6]=d,I[7]=c):(t=I[1],i=I[2],a=I[3],s=I[4],r=I[5],d=I[6],c=I[7]);let[D,L]=(0,p.useState)("thread-previews"),O=(0,j.BI)(),A=(0,j.$j)(),[P,F]=(0,p.useState)(tF),k=function(e,t){let i,n=(0,l.c)(4),a=(0,j.SM)();if(n[0]!==t||n[1]!==a||n[2]!==e)i=new Set([...e.filter(e=>{let i=(0,eW.IV)(e),n=e.path??"",l=e.subject?.endDiffSide==="RIGHT"?"R":"L",s=e.subject?.originalEndLine?`${l}${e.subject.originalEndLine}`:"FILE",r=a(Number(e.id),n,s);return eQ({authorLogin:i?.author?.login??"",body:i?.body??"",id:e.id,isResolved:r?.isResolved??e.isResolved??!1,isOutdated:e.isOutdated??!1,path:n},t)}).map(e=>e.id??"")]),n[0]=t,n[1]=a,n[2]=e,n[3]=i;else i=n[3];return i}(O,P),[$,B]=(0,p.useState)(tk),M=function(e,t){let i,n,a=(0,l.c)(7);if(a[0]!==t||a[1]!==e){let n;a[3]!==t?(n=e=>eQ({authorLogin:e.authorLogin,body:e.body,id:e.id,isResolved:!1,isOutdated:!1,path:""},t),a[3]=t,a[4]=n):n=a[4],i=e.filter(n),a[0]=t,a[1]=e,a[2]=i}else i=a[2];let s=i;return a[5]!==s?(n=new Set([...s.map(eK)]),a[5]=s,a[6]=n):n=a[6],n}(A,$),q=(0,p.useRef)(null);I[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.G7)("comments_panel_issue_comments"),I[8]=m):m=I[8];let V=m,[G,z]=(0,p.useState)(""),{mutate:U,isPending:H}=function(){let e,t,i,n=(0,l.c)(7),a=(0,j.Kp)(),s=`${a}/page_data/${em.uT.submitPullRequestTimelineComment}`,{addIssueComment:r}=(0,j._o)();return n[0]!==s?(e=async e=>{let t=await (0,ew.Sr)(`${s}`,{method:"POST",headers:{Accept:"application/json"},body:e}),i=await (0,ef.hp)(t);return(0,ef.R)(t,i),i},n[0]=s,n[1]=e):e=n[1],n[2]!==r?(t=(e,t)=>{r(e.issueComment)},n[2]=r,n[3]=t):t=n[3],n[4]!==e||n[5]!==t?(i={mutationFn:e,onSuccess:t},n[4]=e,n[5]=t,n[6]=i):i=n[6],(0,eh.n)(i)}();I[9]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{z(e)},I[9]=h):h=I[9];let W=h;I[10]!==G||I[11]!==U?(f=()=>{G.trim()&&U({text:G},{onSuccess:()=>{z("")}})},I[10]=G,I[11]=U,I[12]=f):f=I[12];let Q=f;I[13]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{z(e)},I[13]=g):g=I[13];let K=g;if(I[14]!==O){for(let e of(x=[],O)){let t=(0,eW.IV)(e);t?.author&&!x.some(e=>e.login===t.author?.login)&&("Copilot"===t.author.login?x.unshift(t.author):x.push(t.author))}I[14]=O,I[15]=x}else x=I[15];let Y=x;if(I[16]!==A){for(let e of(v=[],A))e.authorLogin&&!v.some(t=>t.login===e.authorLogin)&&("Copilot"===e.authorLogin?v.unshift({login:e.authorLogin,avatarUrl:e.authorAvatarUrl??""}):v.push({login:e.authorLogin,avatarUrl:e.authorAvatarUrl??""}));I[16]=A,I[17]=v}else v=I[17];let J=v;I[18]!==D?(_=(0,o.G7)("pr_comment_panel_footer")&&"issue-comments"===D,I[18]=D,I[19]=_):_=I[19];let X=_;I[20]!==G||I[21]!==Q||I[22]!==X||I[23]!==H?(b=X?(0,n.jsx)(u.l.Footer,{children:(0,n.jsx)(tD,{commentText:G,onCommentTextChange:W,onSubmitComment:Q,isPending:H})}):null,I[20]=G,I[21]=Q,I[22]=X,I[23]=H,I[24]=b):b=I[24];let Z=b,ee=ek(a),et=ee?a.reviewThreadsPaginatedLimitExceeded:a.reviewThreadsLimitExceeded,en=ee?a.reviewThreadsPaginatedLimit:a.reviewThreadsLimit;return d.isOpen?(I[25]===Symbol.for("react.memo_cache_sentinel")?(w={narrow:"fullscreen",regular:"right",wide:"right"},I[25]=w):w=I[25],I[26]!==Z?(y=()=>Z,I[26]=Z,I[27]=y):y=I[27],I[28]!==t||I[29]!==J||I[30]!==i||I[31]!==$||I[32]!==d.onClose||I[33]!==P||I[34]!==Y||I[35]!==D?(S=e=>{let{dialogLabelId:l}=e;return(0,n.jsxs)(u.l.Header,{children:[(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full pl-2",children:[(0,n.jsx)(u.l.Title,{id:l,children:"Comments"}),(0,n.jsx)(ei.K,{ref:q,"aria-label":"Close comments panel",icon:E.XIcon,variant:"invisible",onClick:d.onClose})]}),(0,n.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2",children:[V&&(0,n.jsxs)(eG.I,{"aria-label":"Comment view mode",className:"mt-2",onChange:e=>{L(0===e?"thread-previews":"issue-comments")},children:[(0,n.jsx)(eG.I.Button,{selected:"thread-previews"===D,count:t,children:"Review"}),(0,n.jsx)(eG.I.Button,{selected:"issue-comments"===D,count:i,children:"Conversation"})]}),"thread-previews"===D&&(0,n.jsx)(eJ,{authorList:Y,className:"mt-2 width-full",filterState:P,onFilterStateChange:F,hideReviewThreadFilters:!1}),"issue-comments"===D&&(0,n.jsx)(eJ,{authorList:J,className:"mt-2 width-full",filterState:$,onFilterStateChange:B,hideReviewThreadFilters:!0})]})]})},I[28]=t,I[29]=J,I[30]=i,I[31]=$,I[32]=d.onClose,I[33]=P,I[34]=Y,I[35]=D,I[36]=S):S=I[36],I[37]!==en||I[38]!==et||I[39]!==D?(N="thread-previews"===D&&et&&(0,n.jsx)(eF.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the ${en} latest comments are being shown.`,className:"pr-mb-3"}),I[37]=en,I[38]=et,I[39]=D,I[40]=N):N=I[40],I[41]===Symbol.for("react.memo_cache_sentinel")?(C=(0,n.jsx)(tf,{}),I[41]=C):C=I[41],I[42]!==M||I[43]!==k||I[44]!==A||I[45]!==s||I[46]!==r||I[47]!==d||I[48]!==D?(R=(0,n.jsx)(p.Suspense,{fallback:C,children:"thread-previews"===D?(0,n.jsx)(tL,{...d,filteredThreadIds:k,pathName:s}):(0,n.jsx)(tA,{filteredThreadIds:M,isOpen:d.isOpen,issueComments:A,pathName:s,pullRequestAuthorLogin:r,onQuoteReply:K})}),I[42]=M,I[43]=k,I[44]=A,I[45]=s,I[46]=r,I[47]=d,I[48]=D,I[49]=R):R=I[49],I[50]!==d.onClose||I[51]!==R||I[52]!==y||I[53]!==S||I[54]!==N||I[55]!==c?(T=(0,n.jsxs)(u.l,{initialFocusRef:q,position:w,returnFocusRef:c,onClose:d.onClose,renderFooter:y,renderHeader:S,children:[N,R]}),I[50]=d.onClose,I[51]=R,I[52]=y,I[53]=S,I[54]=N,I[55]=c,I[56]=T):T=I[56],T):null});function tF(){return{...eY}}function tk(){return{...eY}}function t$(e){let t,i,a,s,r,d,c,m=(0,l.c)(21),{isFileTreeExpanded:u,pageLimits:h,pullRequest:f,tabSize:g}=e,[x,v]=(0,p.useState)(!1),_=(0,p.useRef)(null),b=(0,j.Qb)(),w=(0,j.M3)(),{sendPullRequestAnalyticsEvent:y}=(0,ee.q)(),S=(0,o.G7)("comments_panel_issue_comments")?b+w:b;return m[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(er.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:E.CommentDiscussionIcon,size:"small",variant:"invisible"}),m[0]=t):t=m[0],m[1]!==y?(i=()=>{y("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eV(),v(!0)},m[1]=y,m[2]=i):i=m[2],m[3]!==u?(a=u&&(0,n.jsx)("span",{className:"d-none d-xl-block",children:"Comments"}),m[3]=u,m[4]=a):a=m[4],m[5]!==S||m[6]!==i||m[7]!==a?(s=(0,n.jsx)(er.Q,{ref:_,"aria-label":"Open comments side panel",count:S,leadingVisual:E.CommentDiscussionIcon,size:"small",onClick:i,children:a}),m[5]=S,m[6]=i,m[7]=a,m[8]=s):s=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>v(!1),m[9]=r):r=m[9],m[10]!==x||m[11]!==b||m[12]!==w||m[13]!==h||m[14]!==f.author.login||m[15]!==f.pathName||m[16]!==g?(d=(0,n.jsx)(tP,{isOpen:x,pageLimits:h,pathName:f.pathName,pullRequestAuthorLogin:f.author.login,tabSize:g,toggleSidesheetRef:_,onClose:r,diffCommentCount:b,issueCommentsCount:w}),m[10]=x,m[11]=b,m[12]=w,m[13]=h,m[14]=f.author.login,m[15]=f.pathName,m[16]=g,m[17]=d):d=m[17],m[18]!==s||m[19]!==d?(c=(0,n.jsx)("div",{className:"d-flex flex-items-center",children:(0,n.jsxs)(J.t,{boundaryName:"OpenCommentsSidePanelButton",fallback:t,children:[s,d]})}),m[18]=s,m[19]=d,m[20]=c):c=m[20],c}tP.displayName="CommentsSidePanel",t$.displayName="OpenCommentsSidePanelButton";var tB=i(64221);function tM(e){let t,i,a,s=(0,l.c)(8),{className:r,filteredText:o,onFilteredTextChange:d}=e;return s[0]!==d?(t=e=>d(e.target.value),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==t?(i=(0,n.jsx)(ez.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:E.SearchIcon,placeholder:"Filter alerts\u2026",value:o,onChange:t}),s[2]=o,s[3]=t,s[4]=i):i=s[4],s[5]!==r||s[6]!==i?(a=(0,n.jsx)("div",{className:r,children:i}),s[5]=r,s[6]=i,s[7]=a):a=s[7],a}tM.displayName="AlertsFilter";function tq(e){let t,i,a,s,r,o,d,c,m=(0,l.c)(25),{databaseId:u,lineNumber:h,path:p,toggleCollapsed:g,isCollapsed:x,onNavigateToAnnotation:v,annotationLevel:_}=e,b=x?"Expand annotation":"Collapse annotation",w=x?E.ChevronRightIcon:E.ChevronDownIcon;m[0]!==b||m[1]!==w||m[2]!==g?(t=(0,n.jsx)(ei.K,{"aria-label":b,icon:w,size:"small",variant:"invisible",className:"mr-1",onClick:g}),m[0]=b,m[1]=w,m[2]=g,m[3]=t):t=m[3];let y=tB.Gt[_];m[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,f.$)("overflow-hidden text-mono text-semibold f6 no-wrap","AlertsSidePanel-module__annotationsHeaderFileName__qHUmW"),m[4]=i):i=m[4];let j=`#annotation_${u}`;m[5]!==v||m[6]!==p||m[7]!==j?(a=(0,n.jsxs)(L.A,{className:i,href:j,onClick:v,muted:!0,children:["\u200E",p]}),m[5]=v,m[6]=p,m[7]=j,m[8]=a):a=m[8],m[9]!==p||m[10]!==a?(s=(0,n.jsx)(D.m,{direction:"n",text:p,type:"label",children:a}),m[9]=p,m[10]=a,m[11]=s):s=m[11],m[12]!==h?(r=(0,n.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",h]}),m[12]=h,m[13]=r):r=m[13],m[14]!==t||m[15]!==y||m[16]!==s||m[17]!==r?(o=(0,n.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[t,y,s,r]}),m[14]=t,m[15]=y,m[16]=s,m[17]=r,m[18]=o):o=m[18];let S=`#annotation_${u}`;return m[19]!==v||m[20]!==S?(d=(0,n.jsx)(ei.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:E.FileSymlinkFileIcon,variant:"invisible",href:S,onClick:v}),m[19]=v,m[20]=S,m[21]=d):d=m[21],m[22]!==o||m[23]!==d?(c=(0,n.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[o,d]}),m[22]=o,m[23]=d,m[24]=c):c=m[24],c}tq.displayName="AnnotationHeader";let tV=(0,p.memo)(function(e){let t,i,a,s,r,o,d,c,m,h,f=(0,l.c)(26),{annotations:x,onClose:v,isOpen:_,pageLimits:b,returnFocusRef:w}=e,[y,S]=(0,p.useState)(""),N=new Set(x.filter(e=>(function(e,t){if(t){let i=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(i)&&!e.message.toLowerCase().includes(i)&&!e.path.toLowerCase().includes(i)&&!e.title?.toLowerCase().includes(i)&&!e.checkRun.name?.toLowerCase().includes(i)&&!e.appAvatarAltText.toLowerCase().includes(i)&&!e.checkSuiteName?.toLowerCase().includes(i))return!1}return!0})(e,y)).map(e=>e.id)),C=(0,p.useRef)(null),R=x.length>0,T=(0,j.j5)(),{navigateToSelectedAnnotation:I}=(0,j.Lh)();f[0]!==T||f[1]!==I||f[2]!==v?(t=e=>{T&&I(e),v()},f[0]=T,f[1]=I,f[2]=v,f[3]=t):t=f[3];let D=t,L=x.map(e=>e&&N.has(e.id)?(0,n.jsx)(tG,{annotation:e,handleNavigateToAnnotation:D},e.id):null).filter(Boolean),O=(0,p.useRef)(null);f[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,g.s)(tg.i,300),f[4]=i):i=f[4];let A=i;return(f[5]!==L||f[6]!==_?(a=()=>{_&&A(L.length>0?`${L.length} ${1===L.length?"alert":"alerts"}`:"No alerts found",{element:O.current})},s=[_,A,L],f[5]=L,f[6]=_,f[7]=a,f[8]=s):(a=f[7],s=f[8]),(0,p.useEffect)(a,s),_)?(f[9]===Symbol.for("react.memo_cache_sentinel")?(r={narrow:"fullscreen",regular:"right",wide:"right"},f[9]=r):r=f[9],f[10]!==y||f[11]!==v?(o=e=>{let{dialogLabelId:t}=e;return(0,n.jsxs)(u.l.Header,{children:[(0,n.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full pl-2",children:[(0,n.jsx)(X.A,{as:"h1",className:"f4 text-bold",id:t,children:"Alerts"}),(0,n.jsx)(ei.K,{ref:C,"aria-label":"Close alerts panel",icon:E.XIcon,variant:"invisible",onClick:v})]}),(0,n.jsx)(tM,{className:"mt-2 width-full",filteredText:y,onFilteredTextChange:S})]})},f[10]=y,f[11]=v,f[12]=o):o=f[12],f[13]!==b.annotationsLimit||f[14]!==b.annotationsLimitExceeded?(d=b.annotationsLimitExceeded&&(0,n.jsx)(eF.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${b.annotationsLimit} alerts are currently being shown.`,className:"pr-mb-3"}),f[13]=b.annotationsLimit,f[14]=b.annotationsLimitExceeded,f[15]=d):d=f[15],f[16]!==L||f[17]!==R?(c=L.length>0?(0,n.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:L}):(0,n.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,n.jsx)(tv,{heading:R?"No alerts match the current filter":"No alerts on changes yet",icon:E.AlertIcon})}),f[16]=L,f[17]=R,f[18]=c):c=f[18],f[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:O}),f[19]=m):m=f[19],f[20]!==v||f[21]!==w||f[22]!==o||f[23]!==d||f[24]!==c?(h=(0,n.jsxs)(u.l,{initialFocusRef:C,onClose:v,position:r,returnFocusRef:w,renderHeader:o,children:[d,c,m]}),f[20]=v,f[21]=w,f[22]=o,f[23]=d,f[24]=c,f[25]=h):h=f[25],h):null});function tG(e){let t,i,a,s,r=(0,l.c)(18),{annotation:o,handleNavigateToAnnotation:d}=e,{isCollapsed:c,handleToggleCollapsed:m}=(0,tB.Vv)(o);return r[0]!==o.databaseId||r[1]!==d?(t=()=>d(o.databaseId),r[0]=o.databaseId,r[1]=d,r[2]=t):t=r[2],r[3]!==o.annotationLevel||r[4]!==o.databaseId||r[5]!==o.endLine||r[6]!==o.path||r[7]!==m||r[8]!==c||r[9]!==t?(i=(0,n.jsx)(tq,{databaseId:o.databaseId,lineNumber:o.endLine,annotationLevel:o.annotationLevel,path:o.path,toggleCollapsed:m,isCollapsed:c,onNavigateToAnnotation:t}),r[3]=o.annotationLevel,r[4]=o.databaseId,r[5]=o.endLine,r[6]=o.path,r[7]=m,r[8]=c,r[9]=t,r[10]=i):i=r[10],r[11]!==o||r[12]!==c?(a=!c&&(0,n.jsx)(tB.YH,{annotation:o,inSidePanel:!0}),r[11]=o,r[12]=c,r[13]=a):a=r[13],r[14]!==o.id||r[15]!==i||r[16]!==a?(s=(0,n.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[i,a]},o.id),r[14]=o.id,r[15]=i,r[16]=a,r[17]=s):s=r[17],s}function tz(e){let t,i,a=(0,l.c)(9),{isFileTreeExpanded:s,pageLimits:r,className:o}=e,[d,c]=(0,p.useState)(!1),m=(0,p.useRef)(null);a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>c(!1),a[0]=t):t=a[0];let u=t,h=(0,j.wI)(),{sendPullRequestAnalyticsEvent:f}=(0,ee.q)();if(!h)return null;let g=h.length;return a[1]!==h||a[2]!==o||a[3]!==s||a[4]!==r||a[5]!==f||a[6]!==d||a[7]!==g?(i=g>0?(0,n.jsx)("div",{className:"d-flex flex-items-center",children:(0,n.jsxs)(J.t,{boundaryName:"OpenAlertsPanelButton",fallback:(0,n.jsx)(ei.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:E.AlertIcon,size:"small",variant:"invisible"}),children:[(0,n.jsx)(er.Q,{ref:m,className:o,"aria-label":"Open alerts side panel",count:g,leadingVisual:E.AlertIcon,size:"small",onClick:()=>{f("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eV(),c(!0)},children:s&&(0,n.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,n.jsx)(tV,{annotations:h,isOpen:d,pageLimits:r,returnFocusRef:m,onClose:u})]})}):null,a[1]=h,a[2]=o,a[3]=s,a[4]=r,a[5]=f,a[6]=d,a[7]=g,a[8]=i):i=a[8],i}tV.displayName="AlertsSidePanel",tG.displayName="SidePanelAlert",tz.displayName="OpenAlertsPanelButton";var tU=i(46251),tH=i(66818),tW=i(64118);let tQ={approve:"approve",comment:"comment",requestChanges:"request changes"};var tK=i(74567);let{getItem:tY,removeItem:tJ,setItem:tX}=(0,eS.D)("localStorage");function tZ(e){return"pending"===e.state}var t0=i(79076),t1=i(87937),t2=i(15837),t3=i(45438),t4=i(30331);function t5(e){let t,i,a,s=(0,l.c)(13),{isPROpen:r,reviewEvent:o,viewerAllowedNonCommentReviewTypes:d,viewerCanWriteToRepo:m,viewerHasViolatedPushPolicy:u,viewerIsAuthor:h,viewerIsCopilotAttributed:f,handleReviewEventChange:p,handleReviewSubmit:g}=e;return r?(s[0]!==g?(t={"pull-request-files-changed:submit-review":g},s[0]=g,s[1]=t):t=s[1],s[2]!==p||s[3]!==o||s[4]!==d||s[5]!==m||s[6]!==u||s[7]!==h||s[8]!==f?(i=(0,n.jsx)(t6,{reviewEvent:o,viewerAllowedNonCommentReviewTypes:d,viewerCanWriteToRepo:m,viewerHasViolatedPushPolicy:u,viewerIsAuthor:h,viewerIsCopilotAttributed:f,onReviewEventChange:p}),s[2]=p,s[3]=o,s[4]=d,s[5]=m,s[6]=u,s[7]=h,s[8]=f,s[9]=i):i=s[9],s[10]!==t||s[11]!==i?(a=(0,n.jsx)(c.tL,{commands:t,children:i}),s[10]=t,s[11]=i,s[12]=a):a=s[12],a):null}t5.displayName="ReviewTypeSelector";let t6=(0,p.memo)(function(e){var t,i,a,s,r;let o,d,c,m,u,h,f,p,g,x,v,_,b,w=(0,l.c)(34),{onReviewEventChange:y,reviewEvent:j,viewerAllowedNonCommentReviewTypes:S,viewerCanWriteToRepo:N,viewerHasViolatedPushPolicy:C,viewerIsAuthor:R,viewerIsCopilotAttributed:T}=e;w[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(t2.A.Label,{visuallyHidden:!0,children:"Review Event"}),w[0]=o):o=w[0];let I=j===tQ.comment;w[1]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t1.ZH)(tQ.comment),w[1]=d):d=w[1],w[2]!==I?(c=(0,n.jsx)(t7,{checked:I,label:d,subLabel:"Submit general feedback without explicit approval.",value:tQ.comment}),w[2]=I,w[3]=c):c=w[3];let E=j===tQ.approve;w[4]!==S?(m=S.includes("APPROVE"),w[4]=S,w[5]=m):m=w[5];let D=!m;w[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t1.ZH)(tQ.approve),w[6]=u):u=w[6],w[7]!==T?(h=T?"Only users who did not collaborate with the coding agent will satisfy review requirements.":"Submit feedback and approve merging these changes.",w[7]=T,w[8]=h):h=w[8];let L=!!C;w[9]!==L||w[10]!==S||w[11]!==R?(t=R,i=L,a=S,f=t?"Pull request authors can't approve their own pull requests.":i?"Users that pushed changes to this pull request after it was opened can't approve":a.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests",w[9]=L,w[10]=S,w[11]=R,w[12]=f):f=w[12],w[13]!==f||w[14]!==E||w[15]!==D||w[16]!==h?(p=(0,n.jsx)(t7,{checked:E,disabled:D,label:u,subLabel:h,value:tQ.approve,disabledTooltip:f}),w[13]=f,w[14]=E,w[15]=D,w[16]=h,w[17]=p):p=w[17];let O=j===tQ.requestChanges;w[18]!==S?(g=S.includes("REQUEST_CHANGES"),w[18]=S,w[19]=g):g=w[19];let A=!g;w[20]!==S||w[21]!==R?(s=R,r=S,x=s?"Pull request authors can't request changes on their own pull requests.":r.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests",w[20]=S,w[21]=R,w[22]=x):x=w[22],w[23]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t1.ZH)(tQ.requestChanges),w[23]=v):v=w[23];let P=N?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes.";return w[24]!==O||w[25]!==A||w[26]!==x||w[27]!==P?(_=(0,n.jsx)(t7,{checked:O,disabled:A,disabledTooltip:x,label:v,value:tQ.requestChanges,subLabel:P}),w[24]=O,w[25]=A,w[26]=x,w[27]=P,w[28]=_):_=w[28],w[29]!==y||w[30]!==p||w[31]!==_||w[32]!==c?(b=(0,n.jsxs)(t2.A,{name:"reviewEvent",onChange:y,className:"ReviewMenu-module__RadioGroup__jnj83",children:[o,c,p,_]}),w[29]=y,w[30]=p,w[31]=_,w[32]=c,w[33]=b):b=w[33],b});function t7(e){let t,i,a,s,r,o,d=(0,l.c)(18),{checked:c,disabled:m,disabledTooltip:u,label:h,subLabel:f,value:p}=e;d[0]!==c||d[1]!==p?(t=(0,n.jsx)(t3.A,{checked:c,value:p,className:"ReviewMenu-module__Radio__gGWqZ"}),d[0]=c,d[1]=p,d[2]=t):t=d[2],d[3]!==h?(i=(0,n.jsx)("span",{className:"text-bold",children:h}),d[3]=h,d[4]=i):i=d[4],d[5]!==f?(a=(0,n.jsx)("span",{className:"ReviewMenu-module__RadioText__qkLyB",children:f}),d[5]=f,d[6]=a):a=d[6],d[7]!==i||d[8]!==a?(s=(0,n.jsxs)(el.A.Label,{className:"d-flex flex-column",children:[i,a]}),d[7]=i,d[8]=a,d[9]=s):s=d[9],d[10]!==m||d[11]!==t||d[12]!==s?(r=(0,n.jsxs)(el.A,{disabled:m,children:[t,s]}),d[10]=m,d[11]=t,d[12]=s,d[13]=r):r=d[13];let g=r;return d[14]!==m||d[15]!==u||d[16]!==g?(o=m&&u?(0,n.jsx)(t4.A,{text:u,children:g}):g,d[14]=m,d[15]=u,d[16]=g,d[17]=o):o=d[17],o}t6.displayName="ReviewRadioButtons",t7.displayName="RadioButton";var t8=i(4908),t9=i(58874);function ie(e){let t,i,a,s,r,o,d,c,m,u,h=(0,l.c)(23),{totalPendingComments:f,commentsList:g,handleNavigateToDiffComment:x}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={defaultOpen:!0,closeOnOutsideClick:!1},h[0]=t):t=h[0];let{getDetailsProps:v,open:b}=(0,t8.A)(t);return f?(h[1]!==v?(i=v(),h[1]=v,h[2]=i):i=h[2],h[3]!==b?(a=b&&(0,n.jsx)(E.ChevronDownIcon,{className:"fgColor-muted"}),h[3]=b,h[4]=a):a=h[4],h[5]!==b?(s=!b&&(0,n.jsx)(E.ChevronRightIcon,{className:"fgColor-muted"}),h[5]=b,h[6]=s):s=h[6],h[7]!==f?(r=(0,n.jsxs)(X.A,{as:"h2",className:"f5",children:["Pending comments ",(0,n.jsx)(_.A,{children:f})]}),h[7]=f,h[8]=r):r=h[8],h[9]!==a||h[10]!==s||h[11]!==r?(o=(0,n.jsx)(t9.A.Summary,{children:(0,n.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 pr-mt-4 mb-2",children:[a,s,r]})}),h[9]=a,h[10]=s,h[11]=r,h[12]=o):o=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(Z.A,{}),h[13]=d):d=h[13],h[14]!==g||h[15]!==x?(c=g?.map(e=>(0,n.jsx)(tn,{commentPreview:e,onNavigateToDiffComment:x},e.threadId)),h[14]=g,h[15]=x,h[16]=c):c=h[16],h[17]!==c?(m=(0,n.jsx)(p.Suspense,{fallback:d,children:(0,n.jsx)("div",{className:"d-flex flex-column gap-3",children:c})}),h[17]=c,h[18]=m):m=h[18],h[19]!==i||h[20]!==o||h[21]!==m?(u=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(t9.A,{...i,children:[o,m]})}),h[19]=i,h[20]=o,h[21]=m,h[22]=u):u=h[22],u):null}ie.displayName="ReviewCommentsSection";var it=i(56149);let ii=e=>{let t,i,a,s=(0,l.c)(4),{portalName:r}=e,o=(0,p.useRef)(null);return s[0]!==r?(t=()=>{o.current&&(0,it.cw)(o.current,r)},i=[r],s[0]=r,s[1]=t,s[2]=i):(t=s[1],i=s[2]),(0,p.useEffect)(t,i),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:o,className:"position-absolute"}),s[3]=a):a=s[3],a};ii.displayName="OverlayPortalContainer";let il="review-menu-portal-root";function ia(e){let t,i,a,s,r,o,c,m,h,f,g,x,v,_,b,w,y,S,N,C,R,T,I,D,L,O,A,P,F,k,$,B,M,q,V=(0,l.c)(102),{currentUserLogin:G,pullRequest:z,repository:U,redirectOnMutation:H}=e,W=void 0===H||H,Q=(0,d.u)("prx_robust_small_screen_support"),{author:K,pathName:Y,state:J,viewerAllowedNonCommentReviewTypes:Z,viewerHasViolatedPushPolicy:et,viewerIsCopilotAttributed:en,comparison:el}=z,ea=(0,j.ys)(),{persistedReview:es,persistReviewToStorage:eo,removePersistedReviewFromStorage:ed}=function(e){let t,i,n,a,s=(0,l.c)(11),[r,o]=(0,p.useState)(!1),d=`Review:${e}`;s[0]!==d?(t=()=>tY(d),s[0]=d,s[1]=t):t=s[1];let[c,m]=(0,p.useState)(t);s[2]!==d?(i=()=>{tJ(d),m(null)},s[2]=d,s[3]=i):i=s[3];let u=i;s[4]!==r||s[5]!==d?(n=(e,t)=>{if(!r)try{let i={event:e,text:t};tX(d,i),m(i)}catch{o(!0)}},s[4]=r,s[5]=d,s[6]=n):n=s[6];let h=(0,tK.d)(n,1e3);return s[7]!==h||s[8]!==c||s[9]!==u?(a={persistedReview:c,persistReviewToStorage:h,removePersistedReviewFromStorage:u},s[7]=h,s[8]=c,s[9]=u,s[10]=a):a=s[10],a}(Y),ec=ea.pendingReviewIDs?.length??0,ef=K?.login===G,ep=J!==tW.Q.Closed&&J!==tW.Q.Merged,eg="WRITE"===U.viewerPermission||"ADMIN"===U.viewerPermission,ex=el.headOid,[ev,e_]=(0,p.useState)("none"),[eb,ey]=(0,p.useState)("idle"),[ej,eS]=(0,p.useState)(),[eN,eC]=(0,p.useState)(es?.event??tQ.comment);V[0]!==ea.pendingReviewIDs?(t=ea?.pendingReviewIDs??[],V[0]=ea.pendingReviewIDs,V[1]=t):t=V[1];let eR=t.length>0,eT=(0,p.useRef)(null),eI=es?.text??"",eE=(0,p.useRef)(eI),[eD,eL]=(0,p.useState)(!!es?.text),eO="submitting"===eb||!eD&&eN===tQ.comment&&!ec,{sendPullRequestAnalyticsEvent:eA}=(0,ee.q)();V[2]!==eo||V[3]!==eN?(i=e=>{eE.current=e,eL(!!e.trim()),eo(eN,e)},V[2]=eo,V[3]=eN,V[4]=i):i=V[4];let eP=i;V[5]!==eo?(a=e=>{Object.values(tQ).includes(e)&&(eC(e),eo(e,eE.current))},V[5]=eo,V[6]=a):a=V[6];let eF=a;V[7]!==W||V[8]!==ed?(s=e=>{let{redirectUrl:t}=e;ed(),W&&(window.location.href=t)},V[7]=W,V[8]=ed,V[9]=s):s=V[9],V[10]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{ey("idle"),eS(e.message)},V[10]=r):r=V[10],V[11]!==s?(o={onSuccess:s,onError:r},V[11]=s,V[12]=o):o=V[12];let{mutate:ek}=function(e){let t,i,n,a,s=(0,l.c)(10),{onSuccess:r,onError:o}=e,d=(0,eu.e)(em.uT.submitReview);return s[0]!==d?(t=async e=>{let{body:t,event:i,headSha:n}=e;return(0,ew.Sr)(`${d}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:t,event:i,headSha:n}})},s[0]=d,s[1]=t):t=s[1],s[2]!==r?(i=async e=>{let t=await e.json(),i=t.error||"Unknown error occurred";if(!e.ok)throw Error(i);r(t)},s[2]=r,s[3]=i):i=s[3],s[4]!==o?(n=e=>{o(e)},s[4]=o,s[5]=n):n=s[5],s[6]!==t||s[7]!==i||s[8]!==n?(a={mutationFn:t,onSuccess:i,onError:n},s[6]=t,s[7]=i,s[8]=n,s[9]=a):a=s[9],(0,eh.n)(a)}(o);V[13]!==W||V[14]!==ed?(c=e=>{let{redirectUrl:t}=e;ed(),W&&(window.location.href=t)},V[13]=W,V[14]=ed,V[15]=c):c=V[15],V[16]===Symbol.for("react.memo_cache_sentinel")?(m=e=>{ey("idle"),eS(e.message)},V[16]=m):m=V[16],V[17]!==c?(h={onSuccess:c,onError:m},V[17]=c,V[18]=h):h=V[18];let{mutate:e$}=function(e){let t,i,n,a,s=(0,l.c)(10),{onSuccess:r,onError:o}=e,d=(0,eu.e)(em.uT.abandonReview);return s[0]!==d?(t=async()=>(0,ew.Sr)(`${d}`,{method:"DELETE",headers:{Accept:"application/json"}}),s[0]=d,s[1]=t):t=s[1],s[2]!==r?(i=async e=>{let t=await e.json(),i=t.error||"Unknown error occurred";if(!e.ok)throw Error(i);r(t)},s[2]=r,s[3]=i):i=s[3],s[4]!==o?(n=e=>{o(e)},s[4]=o,s[5]=n):n=s[5],s[6]!==t||s[7]!==i||s[8]!==n?(a={mutationFn:t,onSuccess:i,onError:n},s[6]=t,s[7]=i,s[8]=n,s[9]=a):a=s[9],(0,eh.n)(a)}(h);V[19]!==ej||V[20]!==ex||V[21]!==eN||V[22]!==eA||V[23]!==eO||V[24]!==ek?(f=()=>{eO||(ej&&eS(void 0),ey("submitting"),eA("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),ek({body:eE.current,event:eN,headSha:ex}))},V[19]=ej,V[20]=ex,V[21]=eN,V[22]=eA,V[23]=eO,V[24]=ek,V[25]=f):f=V[25];let eB=f;V[26]!==e$||V[27]!==ej||V[28]!==ea.pendingReviewIDs||V[29]!==eA?(g=()=>{!ea?.pendingReviewIDs||ea?.pendingReviewIDs.length===0||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(ej&&eS(void 0),ey("canceling"),eA("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),e$())},V[26]=e$,V[27]=ej,V[28]=ea.pendingReviewIDs,V[29]=eA,V[30]=g):g=V[30];let eM=g;V[31]!==ep||V[32]!==Z||V[33]!==ef?(x=function({viewerIsAuthor:e,viewerAllowedNonCommentReviewTypes:t,isPROpen:i}){let n=t.includes("APPROVE"),l=t.includes("REQUEST_CHANGES");switch(!0){case!i:return{isHidden:!1,text:"comments"};case e:case n:case l:return{isHidden:!1,text:"review"};default:return{isHidden:!1,text:"comments"}}}({isPROpen:ep,viewerAllowedNonCommentReviewTypes:Z,viewerIsAuthor:ef}),V[31]=ep,V[32]=Z,V[33]=ef,V[34]=x):x=V[34];let eq=x;V[35]!==eA?(v=()=>{window.innerWidth<768?e_("dialog"):e_("anchored"),eA("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},V[35]=eA,V[36]=v):v=V[36];let eV=v;V[37]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{e_("none")},V[37]=_):_=V[37];let eG=_;V[38]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{e_("none")},V[38]=b):b=V[38];let ez=b;V[39]!==eV||V[40]!==ev?(w=()=>{"none"===ev?eV():eG()},V[39]=eV,V[40]=ev,V[41]=w):w=V[41];let eU=w;V[42]!==eF||V[43]!==eB||V[44]!==eI||V[45]!==ep||V[46]!==eP||V[47]!==ea.pendingReviewIDs||V[48]!==eN||V[49]!==Z||V[50]!==eg||V[51]!==et||V[52]!==ef||V[53]!==en?(y=(0,n.jsx)(is,{pendingReviewIds:ea.pendingReviewIDs,initialReviewBody:eI,isPROpen:ep,onReviewBodyChange:eP,reviewEvent:eN,viewerAllowedNonCommentReviewTypes:Z,viewerCanWriteToRepo:eg,viewerHasViolatedPushPolicy:et,viewerIsAuthor:ef,viewerIsCopilotAttributed:en,handleNavigateToDiffComment:ez,handleReviewSubmit:eB,handleReviewEventChange:eF}),V[42]=eF,V[43]=eB,V[44]=eI,V[45]=ep,V[46]=eP,V[47]=ea.pendingReviewIDs,V[48]=eN,V[49]=Z,V[50]=eg,V[51]=et,V[52]=ef,V[53]=en,V[54]=y):y=V[54];let eH=y;if(eq.isHidden)return null;V[55]!==ej||V[56]!==eM||V[57]!==eB||V[58]!==eR||V[59]!==eq||V[60]!==eb||V[61]!==eO?(S=(0,n.jsx)(io,{errorMessage:ej,hasPendingReviews:eR,reviewSubmissionState:eb,handleReviewCancel:eM,handleCloseReviewDialog:eG,handleReviewSubmit:eB,submitDisabled:eO,reviewMenuButtonDisplayState:eq}),V[55]=ej,V[56]=eM,V[57]=eB,V[58]=eR,V[59]=eq,V[60]=eb,V[61]=eO,V[62]=S):S=V[62];let eW=S,eQ=ec||void 0;V[63]!==eq.text||V[64]!==Q?(N=Q?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"ReviewMenuButton-module__submitTextFull__wN_rM",children:["Submit ",eq.text]}),(0,n.jsx)("span",{className:"ReviewMenuButton-module__submitTextShort__zl992",children:eq.text})]}):(0,n.jsxs)(n.Fragment,{children:["Submit ",eq.text]}),V[63]=eq.text,V[64]=Q,V[65]=N):N=V[65],V[66]!==eU||V[67]!==eQ||V[68]!==N?(C=(0,n.jsx)(er.Q,{count:eQ,className:"ReviewMenuButton-module__ReviewMenuButton__eXO8O",trailingAction:E.TriangleDownIcon,variant:"primary",onClick:eU,size:"small",ref:eT,children:N}),V[66]=eU,V[67]=eQ,V[68]=N,V[69]=C):C=V[69],V[70]===Symbol.for("react.memo_cache_sentinel")?(R=(0,n.jsx)(ii,{portalName:il}),V[70]=R):R=V[70];let eK="anchored"===ev;return V[71]===Symbol.for("react.memo_cache_sentinel")?(T={regular:"anchored",narrow:"fullscreen"},V[71]=T):T=V[71],V[72]===Symbol.for("react.memo_cache_sentinel")?(I={disabled:!0},D={role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:il},V[72]=I,V[73]=D):(I=V[72],D=V[73]),V[74]!==eq.text?(L=(0,n.jsxs)(X.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",eq.text]}),V[74]=eq.text,V[75]=L):L=V[75],V[76]!==eR?(O=eR&&(0,n.jsx)(ei.K,{icon:E.MaximizeIcon,className:"ReviewMenuButton-module__ExpandSection__ifA_P",variant:"invisible","aria-label":"Expand this section",onClick:()=>e_("dialog")}),V[76]=eR,V[77]=O):O=V[77],V[78]===Symbol.for("react.memo_cache_sentinel")?(A=(0,n.jsx)(ei.K,{icon:E.XIcon,variant:"invisible","aria-label":"Close",onClick:eG}),V[78]=A):A=V[78],V[79]!==O?(P=(0,n.jsxs)(tU.B,{direction:"horizontal",align:"center",gap:"none",children:[O,A]}),V[79]=O,V[80]=P):P=V[80],V[81]!==L||V[82]!==P?(F=(0,n.jsxs)(tU.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom pr-pl-3 pr-2",children:[L,P]}),V[81]=L,V[82]=P,V[83]=F):F=V[83],V[84]!==eH?(k=(0,n.jsx)("div",{className:"ReviewMenuButton-module__AnchoredReviewBody__kOq9n",children:eH}),V[84]=eH,V[85]=k):k=V[85],V[86]!==eW?($=(0,n.jsx)("div",{className:"pr-p-3 border-top",children:eW}),V[86]=eW,V[87]=$):$=V[87],V[88]!==eK||V[89]!==F||V[90]!==k||V[91]!==$?(B=(0,n.jsxs)(tH.T,{open:eK,anchorRef:eT,width:"xlarge",onClose:eG,displayCloseButton:!1,variant:T,renderAnchor:null,focusZoneSettings:I,overlayProps:D,children:[F,k,$]}),V[88]=eK,V[89]=F,V[90]=k,V[91]=$,V[92]=B):B=V[92],V[93]!==eH||V[94]!==ev||V[95]!==eq.text||V[96]!==eW?(M="dialog"===ev&&(0,n.jsx)(u.l,{onClose:eG,returnFocusRef:eT,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${eq.text}`,renderFooter:()=>(0,n.jsx)(u.l.Footer,{children:eW}),children:eH}),V[93]=eH,V[94]=ev,V[95]=eq.text,V[96]=eW,V[97]=M):M=V[97],V[98]!==C||V[99]!==B||V[100]!==M?(q=(0,n.jsxs)(n.Fragment,{children:[C,R,B,M]}),V[98]=C,V[99]=B,V[100]=M,V[101]=q):q=V[101],q}function is(e){let t,i,a,s=(0,l.c)(6);s[0]!==e?({pendingReviewIds:t,...i}=e,s[0]=e,s[1]=t,s[2]=i):(t=s[1],i=s[2]);let r=function(e){let t,i,n,a,s,r,o,d,c,m=(0,l.c)(9),u=(0,j.BI)(e),h=(0,j.HZ)();e:{let i;if(!e||0===e.length||!u){let e;m[0]===Symbol.for("react.memo_cache_sentinel")?(e={pendingPreviews:[],threadsWithoutContext:[]},m[0]=e):e=m[0],t=e;break e}if(m[1]!==h||m[2]!==u){let e=[],t=[];for(let i of u){let{diffSubject:n,hasContext:l,threadPreviewComments:a}=function(e,t){let i=e.subject,n=!0;if(e.positioning){let l=t[e.positioning.path],a=[];if(l&&!e.isOutdated){let t=l.diffLines.findIndex(t=>e.positioning?.endDiffSide==="RIGHT"&&t.right===e.positioning?.endLine||e.positioning?.endDiffSide==="LEFT"&&t.left===e.positioning?.endLine);if(-1===t)n=!1;else{let i=Math.max(0,t-5);e.positioning?.startLine&&e.positioning?.startDiffSide&&(e.positioning.startLine!==e.positioning.endLine||e.positioning.startDiffSide!==e.positioning.endDiffSide)&&(i=l.diffLines.findIndex(t=>e.positioning?.startDiffSide==="RIGHT"&&t.right===e.positioning?.startLine||e.positioning?.startDiffSide==="LEFT"&&t.left===e.positioning?.startLine));for(let e=t;e>=i;e--){let t=l.diffLines[e];if(t&&(a.unshift(t),"HUNK"===t.type))break}}i={...e.subject,diffLines:a}}}else n=!1;return{diffSubject:i,hasContext:n,threadPreviewComments:e.commentsData?.comments.slice(1).reduce((e,t)=>(t.author&&e.push({author:{avatarUrl:t.author.avatarUrl,login:t.author.login}}),e),[])||[]}}(i,h);for(let s of(l||t.push(Number(i.id)),(i.commentsData?.comments??[]).filter(tZ)))e.push({threadId:i.id,commentId:s.databaseId?.toString()||"",path:i.positioning?.path||"",threadPreviewComments:a,firstComment:i.commentsData?.comments[0]||void 0,isResolved:i.isResolved,line:i.line,subjectType:i.subjectType,subject:n,commentsData:i.commentsData,isOutdated:i.isOutdated})}i={pendingPreviews:e,threadsWithoutContext:t},m[1]=h,m[2]=u,m[3]=i}else i=m[3];t=i}let{pendingPreviews:f,threadsWithoutContext:p}=t,g=(o=(0,l.c)(10),d=(0,eu.e)(em.uT.threadPreviewPositioning),o[0]!==p?(n=p.join(","),o[0]=p,o[1]=n):n=o[1],c=`${d}?thread_ids=${n}`,o[2]!==c?(a=[em.uT.threadPreviewPositioning,c],o[2]=c,o[3]=a):a=o[3],o[4]!==p.length||o[5]!==c?(s=async()=>{if(!p.length)return{};let e=await (0,ew.QJ)(c);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},o[4]=p.length,o[5]=c,o[6]=s):s=o[6],o[7]!==a||o[8]!==s?(r={queryKey:a,queryFn:s,staleTime:1/0},o[7]=a,o[8]=s,o[9]=r):r=o[9],(0,eb.I)(r)).data;t:{let e;if(0===p.length||!g){i=f;break t}if(m[4]!==f||m[5]!==g){let t;m[7]!==g?(t=e=>{let t=g[Number(e.threadId)];return t?{...e,path:t.path,subject:t}:e},m[7]=g,m[8]=t):t=m[8],e=f.map(t),m[4]=f,m[5]=g,m[6]=e}else e=m[6];i=e}return i}(t);return s[3]!==r||s[4]!==i?(a=(0,n.jsx)(id,{...i,commentsList:r}),s[3]=r,s[4]=i,s[5]=a):a=s[5],a}ia.displayName="ReviewMenuButton",is.displayName="ReviewMenuContent";let ir=e=>{let t,i,a,s,r,o,d=(0,l.c)(12);d[0]!==e?({ref:s,initialValue:t,onChange:i,...a}=e,d[0]=e,d[1]=t,d[2]=i,d[3]=a,d[4]=s):(t=d[1],i=d[2],a=d[3],s=d[4]);let[c,m]=(0,p.useState)(t);d[5]!==i?(r=e=>{m(e),i(e)},d[5]=i,d[6]=r):r=d[6];let u=r;return d[7]!==u||d[8]!==a||d[9]!==s||d[10]!==c?(o=(0,n.jsx)(tR.S,{...a,value:c,onChange:u,ref:s}),d[7]=u,d[8]=a,d[9]=s,d[10]=c,d[11]=o):o=d[11],o};function io(e){let t,i,a,s,r,o,d,c,m,u=(0,l.c)(28),{errorMessage:h,handleReviewCancel:f,handleCloseReviewDialog:p,handleReviewSubmit:g,hasPendingReviews:x,submitDisabled:v,reviewMenuButtonDisplayState:_,reviewSubmissionState:b}=e,w="canceling"===b,y="submitting"===b;u[0]!==h?(t=h&&(0,n.jsxs)(e1.A,{className:"ReviewMenuButton-module__ErrorMessage__f9tE8",variant:"danger",children:[(0,n.jsx)(E.StopIcon,{className:"mr-2"}),h]}),u[0]=h,u[1]=t):t=u[1],u[2]!==f||u[3]!==x||u[4]!==w||u[5]!==y||u[6]!==_.text?(i=x?(0,n.jsx)(er.Q,{disabled:w||y,loading:w,onClick:f,tabIndex:0,variant:"danger",children:(0,n.jsxs)(tU.B,{direction:"horizontal",align:"center",children:["Discard ",_.text]})}):(0,n.jsx)("div",{}),u[2]=f,u[3]=x,u[4]=w,u[5]=y,u[6]=_.text,u[7]=i):i=u[7];let j=w||y;u[8]!==p||u[9]!==j?(a=(0,n.jsx)(er.Q,{onClick:p,disabled:j,children:"Cancel"}),u[8]=p,u[9]=j,u[10]=a):a=u[10];let S=v||y;return u[11]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(t0.U,{keys:"Mod+enter"}),u[11]=s):s=u[11],u[12]!==_.text?(r=(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",_.text]}),u[12]=_.text,u[13]=r):r=u[13],u[14]!==g||u[15]!==y||u[16]!==S||u[17]!==r?(o=(0,n.jsx)(er.Q,{disabled:S,variant:"primary",onClick:g,loading:y,className:"ReviewMenuButton-module__SubmitReviewButton__GHLIc",trailingVisual:s,children:r}),u[14]=g,u[15]=y,u[16]=S,u[17]=r,u[18]=o):o=u[18],u[19]!==a||u[20]!==o?(d=(0,n.jsxs)("div",{className:"d-flex flex-row gap-2",children:[a,o]}),u[19]=a,u[20]=o,u[21]=d):d=u[21],u[22]!==i||u[23]!==d?(c=(0,n.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[i,d]}),u[22]=i,u[23]=d,u[24]=c):c=u[24],u[25]!==t||u[26]!==c?(m=(0,n.jsxs)(n.Fragment,{children:[t,c]}),u[25]=t,u[26]=c,u[27]=m):m=u[27],m}function id(e){let t,i,a,s,r,o,d=(0,l.c)(23),{initialReviewBody:c,isPROpen:m,onReviewBodyChange:u,reviewEvent:h,viewerAllowedNonCommentReviewTypes:f,viewerCanWriteToRepo:g,viewerHasViolatedPushPolicy:x,viewerIsAuthor:v,viewerIsCopilotAttributed:_,commentsList:b,handleNavigateToDiffComment:w,handleReviewSubmit:y,handleReviewEventChange:j}=e,S=(0,p.useRef)(null);return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=window.setTimeout(()=>S.current?.focus());return()=>{window.clearTimeout(e)}},i=[],d[0]=t,d[1]=i):(t=d[0],i=d[1]),(0,p.useEffect)(t,i),d[2]!==y||d[3]!==c||d[4]!==u?(a=(0,n.jsx)(ir,{ref:S,label:"Add review comment",placeholder:"Leave a comment",className:"ReviewMenuButton-module__CommentBoxContainer__Xu0xN",initialValue:c,onChange:u,onPrimaryAction:y}),d[2]=y,d[3]=c,d[4]=u,d[5]=a):a=d[5],d[6]!==j||d[7]!==y||d[8]!==m||d[9]!==h||d[10]!==f||d[11]!==g||d[12]!==x||d[13]!==v||d[14]!==_?(s=(0,n.jsx)(t5,{isPROpen:m,reviewEvent:h,viewerAllowedNonCommentReviewTypes:f,viewerCanWriteToRepo:g,viewerHasViolatedPushPolicy:x,viewerIsAuthor:v,viewerIsCopilotAttributed:_,handleReviewEventChange:j,handleReviewSubmit:y}),d[6]=j,d[7]=y,d[8]=m,d[9]=h,d[10]=f,d[11]=g,d[12]=x,d[13]=v,d[14]=_,d[15]=s):s=d[15],d[16]!==b||d[17]!==w?(r=(0,n.jsx)(ie,{totalPendingComments:b.length,commentsList:b,handleNavigateToDiffComment:w}),d[16]=b,d[17]=w,d[18]=r):r=d[18],d[19]!==a||d[20]!==s||d[21]!==r?(o=(0,n.jsxs)(n.Fragment,{children:[a,s,r]}),d[19]=a,d[20]=s,d[21]=r,d[22]=o):o=d[22],o}ir.displayName="ControlledCommentBox",io.displayName="ReviewMenuFooterComponent",id.displayName="SharedReviewMenuContent";var ic=i(40125),im=i(81297),iu=i(3433);function ih(e){let t,i,a,s=(0,l.c)(4),{aliveChannel:r}=e,[o,d]=(0,p.useState)(!1),{markComparisonOutdated:c}=(0,j.yo)();s[0]!==c?(t=()=>{c(),d(!0)},s[0]=c,s[1]=t):t=s[1];let m=t;return(s[2]===Symbol.for("react.memo_cache_sentinel")?(i={git_updated:!0},s[2]=i):i=s[2],(0,im.G)(r,m,i),o)?(s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(ip,{}),s[3]=a):a=s[3],a):null}function ip(){let e,t,i,a=(0,l.c)(7),s=(0,iu.zy)(),[r,o]=(0,p.useState)(!1),c=(0,d.u)("prx_robust_small_screen_support");a[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{o(!0)},a[0]=e):e=a[0];let m=e;return a[1]!==c?(t=c&&{"data-refresh-button-visible":!0},a[1]=c,a[2]=t):t=a[2],a[3]!==r||a[4]!==s.pathname||a[5]!==t?(i=(0,n.jsx)(er.Q,{as:iu.N_,to:s.pathname,variant:"invisible",className:"RefreshButton-module__refresh__6fkOw",leadingVisual:E.SyncIcon,size:"small",onClick:m,loading:r,preventScrollReset:!0,...t,children:"Refresh"}),a[3]=r,a[4]=s.pathname,a[5]=t,a[6]=i):i=a[6],i}ih.displayName="RefreshButton",ip.displayName="DataRouterRefreshButton";var ig=i(44937),ix=i(35148),iv=i(65239),i_=i(4986);function ib(e){let t,i,a,s,r,o,d,c,m,u,h,f,g,x,_,b,w,y,j,S,N,C,R,T,I,E=(0,l.c)(86),{ref:D,items:L,onMultiSelect:O,onSingleSelect:A,onApply:P,onCancel:F,buttonProps:k,anchorLabel:$,variant:B,title:M,dialogProps:q,open:V,onOpenChange:G}=e,z=void 0===B?"overlay":B,U=(0,p.useRef)(null),[H,W]=(0,p.useState)(!1),[Q,K]=(0,p.useState)(),Y=void 0!==V,J=Y?V:H;E[0]!==Y||E[1]!==G?(t=e=>{Y||W(e),G?.(e)},E[0]=Y,E[1]=G,E[2]=t):t=E[2];let X=t;E[3]!==X?(i=()=>({open:()=>X(!0)}),E[3]=X,E[4]=i):i=E[4],(0,p.useImperativeHandle)(D,i),E[5]!==L?(a=L.reduce(iC,{single:[],multiple:[]}),E[5]=L,E[6]=a):a=E[6];let Z=a;E[7]!==Z?(s=()=>Z,E[7]=Z,E[8]=s):s=E[8];let[ee,et]=(0,p.useState)(s);E[9]!==ee?.multiple||E[10]!==ee?.single?(r=e=>{et({single:ee?.single.map(t=>t.id===e.id?{...t,selected:!t.selected}:t.selected?{...t,selected:!1}:t)||[],multiple:ee?.multiple||[]})},E[9]=ee?.multiple,E[10]=ee?.single,E[11]=r):r=E[11];let ei=r;E[12]!==ee?.multiple||E[13]!==ee?.single?(o=e=>{let t=ee?.multiple.map(t=>t.id===e.id?{...t,selected:!t.selected}:t)||[];et({single:ee?.single||[],multiple:t})},E[12]=ee?.multiple,E[13]=ee?.single,E[14]=o):o=E[14];let en=o;E[15]!==ee?.multiple||E[16]!==O||E[17]!==Z?.multiple?(d=O?Z?.multiple.filter(iS).length:ee?.multiple.filter(iN).length||0,E[15]=ee?.multiple,E[16]=O,E[17]=Z?.multiple,E[18]=d):d=E[18];let el=d;E[19]!==Q?.multiple?(c=Q?.multiple.filter(ij).length||0,E[19]=Q?.multiple,E[20]=c):c=E[20];let ea=c,es=el&&0!==ea?`${ea} commit${ea>1?"s":""} selected`:"Select commits";E[21]!==ee||E[22]!==P||E[23]!==X?(m=()=>{K(ee),X(!1),P&&P(ee?.multiple.filter(iy)||[])},E[21]=ee,E[22]=P,E[23]=X,E[24]=m):m=E[24];let eo=m;E[25]!==F||E[26]!==Z?(u=()=>{et(Z),K(Z),F?.()},E[25]=F,E[26]=Z,E[27]=u):u=E[27];let ed=u;E[28]!==J||E[29]!==X?(h=()=>X(!J),E[28]=J,E[29]=X,E[30]=h):h=E[30];let ec=$||es;E[31]!==k||E[32]!==h||E[33]!==ec?(f=(0,n.jsx)(er.Q,{ref:U,onClick:h,...k,children:ec}),E[31]=k,E[32]=h,E[33]=ec,E[34]=f):f=E[34],E[35]!==ee?.single||E[36]!==Q?.multiple||E[37]!==Z||E[38]!==X?(g=()=>{et({single:ee?.single||[],multiple:Q?.multiple||Z.multiple}),X(!1)},E[35]=ee?.single,E[36]=Q?.multiple,E[37]=Z,E[38]=X,E[39]=g):g=E[39],E[40]===Symbol.for("react.memo_cache_sentinel")?(x={focusOutBehavior:"wrap",focusableElementFilter:iw},E[40]=x):x=E[40],E[41]!==ed||E[42]!==X?(_=()=>{ed(),X(!1)},E[41]=ed,E[42]=X,E[43]=_):_=E[43],E[44]!==ee?.single||E[45]!==A||E[46]!==Z?(b=A?Z.single:ee?.single||[],E[44]=ee?.single,E[45]=A,E[46]=Z,E[47]=b):b=E[47],E[48]!==ei||E[49]!==A||E[50]!==X||E[51]!==z?(w=e=>{A?A(e):ei(e),"modal"!==z&&X(!1)},E[48]=ei,E[49]=A,E[50]=X,E[51]=z,E[52]=w):w=E[52],E[53]!==b||E[54]!==w?(y=(0,n.jsx)(iR,{selectionVariant:"single",items:b,onSelect:w,showGroupHeading:!1}),E[53]=b,E[54]=w,E[55]=y):y=E[55],E[56]!==ee?.multiple||E[57]!==O||E[58]!==Z?(j=O?Z.multiple:ee?.multiple||[],E[56]=ee?.multiple,E[57]=O,E[58]=Z,E[59]=j):j=E[59];let em=O??en;return E[60]!==j||E[61]!==em?(S=(0,n.jsx)(iR,{selectionVariant:"multiple",items:j,onSelect:em}),E[60]=j,E[61]=em,E[62]=S):S=E[62],E[63]!==y||E[64]!==S?(N=(0,n.jsx)("div",{className:"CommitSelector-module__CommitSelectorContainer__wyDem",children:(0,n.jsxs)(v.l,{role:"listbox",selectionVariant:"single","aria-label":"Selection",children:[y,S]})}),E[63]=y,E[64]=S,E[65]=N):N=E[65],E[66]!==ed||E[67]!==el||E[68]!==eo||E[69]!==z?(C=el&&"modal"!==z?(0,n.jsx)(i_.G9,{footerButtons:[{content:"Apply",onClick:eo,action:"save"},{content:"Clear",onClick:ed,action:"cancel"}]}):null,E[66]=ed,E[67]=el,E[68]=eo,E[69]=z,E[70]=C):C=E[70],E[71]!==N||E[72]!==C?(R=(0,n.jsxs)("div",{className:"CommitSelector-module__CommitSelectorWrapper__Eddz8",children:[N,C]}),E[71]=N,E[72]=C,E[73]=R):R=E[73],E[74]!==q||E[75]!==J||E[76]!==eo||E[77]!==g||E[78]!==_||E[79]!==R||E[80]!==M||E[81]!==z?(T=(0,n.jsx)(i_.KA,{open:J,anchorRef:U,headingId:"select-label",onClose:g,variant:z,focusZoneSettings:x,title:M,dialogProps:q,selectSave:eo,selectCancel:_,children:R}),E[74]=q,E[75]=J,E[76]=eo,E[77]=g,E[78]=_,E[79]=R,E[80]=M,E[81]=z,E[82]=T):T=E[82],E[83]!==f||E[84]!==T?(I=(0,n.jsxs)(n.Fragment,{children:[f,T]}),E[83]=f,E[84]=T,E[85]=I):I=E[85],I}function iw(e){return"BUTTON"!==e.tagName}function iy(e){return e.selected}function ij(e){return e.selected}function iS(e){return e.selected}function iN(e){return e.selected}function iC(e,t){return"single"===t.selectionVariant?{...e,single:[...e.single,t]}:"multiple"===t.selectionVariant?{...e,multiple:[...e.multiple,t]}:e}function iR(e){let t,i=(0,l.c)(5),{items:a,onSelect:s,selectionVariant:r,showGroupHeading:o}=e,d=void 0===o||o;return i[0]!==a||i[1]!==s||i[2]!==r||i[3]!==d?(t=(0,n.jsx)(i_.LR,{selectionVariant:r,items:a,showGroupHeading:d,onSelect:s}),i[0]=a,i[1]=s,i[2]=r,i[3]=d,i[4]=t):t=i[4],t}function iT(e){let t,i,n=(0,l.c)(4),{baseOid:a,headOid:s}=(0,j.E4)(),{fullDiff:r}=(0,j.L3)(),{baseOid:o}=r;e:{if(!a){t=void 0;break e}if(a===o){t=e[0];break e}let i=e.findIndex(e=>e===a);if(i<0){t=void 0;break e}t=e[i+1]}let d=t;return n[0]!==s||n[1]!==d||n[2]!==a?(i=function({endOid:e,startOid:t,firstCommitInRange:i}){return i&&e&&i===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:"All commits"}({endOid:s,startOid:a,firstCommitInRange:d}),n[0]=s,n[1]=d,n[2]=a,n[3]=i):i=n[3],i}ib.displayName="CommitSelector",iR.displayName="CommitSelectorBody";var iI=i(39626);function iE(e){let t,i,a,s,r,d,m,u,h,f,g,x,v,_,b,w,y,S=(0,l.c)(75),{ownerLogin:N,repositoryName:C,pullRequestNumber:R,commits:T,lastReviewOid:I,variant:D,open:L,onOpenChange:O}=e,A=void 0===D?"default":D,{baseOid:P,headOid:F}=(0,j.E4)(),k=(0,j.ww)(),{fullDiff:$}=(0,j.L3)(),{baseOid:B}=$;S[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("verbose_commit_selector_announcements"),S[0]=t):t=S[0];let M=t,q=(0,p.useRef)(null),[V,G]=(0,p.useState)(!1),z=void 0!==L,U=z?L:V;S[1]!==z||S[2]!==O?(i=e=>{z||G(e),O?.(e)},S[1]=z,S[2]=O,S[3]=i):i=S[3];let H=i;S[4]!==T?(a=T.map(iD),S[4]=T,S[5]=a):a=S[5];let W=a,Q=iT(W);e:{let e,t;if(!P||!F){s=void 0;break e}let i=P?W.indexOf(P)+1:-1;S[6]!==W||S[7]!==F?(e=F?W.indexOf(F):-1,S[6]=W,S[7]=F,S[8]=e):e=S[8];let n=e;if(i<0||n<0){s=void 0;break e}S[9]!==n||S[10]!==i?(t={start:i,end:n},S[9]=n,S[10]=i,S[11]=t):t=S[11],s=t}let K=s;S[12]!==K?(r=()=>K,S[12]=K,S[13]=r):r=S[13];let[Y,J]=(0,p.useState)(r);t:{let e;if(!Y){let e;S[14]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,S[14]=e):e=S[14],d=e;break t}S[15]!==W||S[16]!==Y.end||S[17]!==Y.start?(e=new Set(W.slice(Y.start,Y.end+1)),S[15]=W,S[16]=Y.end,S[17]=Y.start,S[18]=e):e=S[18],d=e}let X=d;if(S[19]!==W||S[20]!==T||S[21]!==F||S[22]!==k||S[23]!==I||S[24]!==X||S[25]!==P){let e,t,i;m=[];let n=`${T.length} commit${1!==T.length?"s":""}`,l=!k;S[27]!==l||S[28]!==n?(e={id:"all-commits",label:"All commits",description:n,descriptionVariant:"block",selectionVariant:"single",selected:l},S[27]=l,S[28]=n,S[29]=e):e=S[29],m.push(e);let a=T[T.length-1]?.oid,s=!1,r=!1;if(I)if(a)if(I===a)t="No new commits since last review",s=!0;else{let e=W.indexOf(I),i=e>=0?W.length-e-1:T.length;t=`${i} commit${1!==i?"s":""}`,r=P===I&&F===a}else t="No commits available",s=!0;else t="No previous review found",s=!0;for(let[e,n]of(S[30]!==r||S[31]!==t||S[32]!==s?(i={id:"changes-since-review",label:"Changes since your last review",description:t,descriptionVariant:"block",selectionVariant:"single",selected:r,disabled:s},S[30]=r,S[31]=t,S[32]=s,S[33]=i):i=S[33],m.push(i),T.entries()))m.push({id:n.oid,label:n.messageHeadline,description:`${n.actorLogin} committed ${(0,iv.V)(new Date(n.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:X.has(n.oid),groupId:1,groupTitle:0===e?"Select a range of commits":void 0,trailingVisual:n.shortOid});S[19]=W,S[20]=T,S[21]=F,S[22]=k,S[23]=I,S[24]=X,S[25]=P,S[26]=m}else m=S[26];let Z=m;S[34]!==N||S[35]!==R||S[36]!==C?(u=e=>{let t;if("unfiltered"===e.type)t=(0,ix.tvs)({owner:N,repo:C,number:R});else if("range"===e.type){let i=e.fromPRBase?"BASE":e.baseOid;t=(0,ix.zLJ)({owner:N,repo:C,number:R,base:i,head:e.endOid})}else t=(0,ix.zLJ)({owner:N,repo:C,number:R,head:e.oid});window.location.href=t},S[34]=N,S[35]=R,S[36]=C,S[37]=u):u=S[37];let ee=u;S[38]!==B||S[39]!==T||S[40]!==I||S[41]!==ee?(h=e=>{if("all-commits"===e.id)ee({type:"unfiltered"});else if("changes-since-review"===e.id&&I){let e=T[T.length-1]?.oid;e&&ee({type:"range",fromPRBase:I===B,baseOid:I,endOid:e})}},S[38]=B,S[39]=T,S[40]=I,S[41]=ee,S[42]=h):h=S[42];let et=h;S[43]!==W||S[44]!==X||S[45]!==Y?(f=e=>{let t,i=W.indexOf(e.id),n=X.has(e.id)?"removed":"added";if(Y){if(Y.start!==Y.end||"removed"!==n){let{newStartIndex:e,newEndIndex:l}=function(e,t,i,n){let l,a;return"added"===n?(l=Math.min(e,t),a=Math.max(e,i)):e===t?(l=t+1,a=i):(l=t,a=e-1),{newStartIndex:l,newEndIndex:a}}(i,Y.start,Y.end,n);t={start:e,end:l}}}else t="added"===n?{start:i,end:i}:void 0;if(t){if(void 0!==t.start&&t.start===t.end){let e=t.start+1,i=W[t.start];if(i){let t=(0,iI.F)(i),n=M?`Commit ${t} selected`:`Commit ${e} selected`;(0,tg.i)(n)}}else if(void 0!==t.start&&void 0!==t.end){let e=t.start+1,i=t.end+1,n=W[t.start],l=W[t.end];if(n&&l){let t=(0,iI.F)(n),a=(0,iI.F)(l),s=M?`Commits ${t} to ${a} selected`:`Commits ${e} to ${i} selected`;(0,tg.i)(s)}}}else(0,tg.i)("No commits selected");J(t)},S[43]=W,S[44]=X,S[45]=Y,S[46]=f):f=S[46];let ei=f;S[47]!==B||S[48]!==W||S[49]!==K?.end||S[50]!==K?.start||S[51]!==ee||S[52]!==Y?(g=()=>{let e,t;Y&&(Y.start!==K?.start||Y.end!==K?.end)&&((Y.start>0||Y.end<W.length-1||1===W.length)&&(e=Y.start>0?W[Y.start-1]:B,t=W[Y.end]),e&&t?Y.start===Y.end?ee({type:"single",oid:t}):ee({type:"range",fromPRBase:e===B,baseOid:e,endOid:t}):ee({type:"unfiltered"}))},S[47]=B,S[48]=W,S[49]=K?.end,S[50]=K?.start,S[51]=ee,S[52]=Y,S[53]=g):g=S[53],K?.start,K?.end;let en=g;S[54]!==K?(x=()=>{J(K)},S[54]=K,S[55]=x):x=S[55];let el=x;S[56]!==H?(v=(0,n.jsx)(c.ak,{commands:{"pull-request-files-changed:open-commits-list":()=>{H(!0)}}}),S[56]=H,S[57]=v):v=S[57];let ea="condensed"===A?void 0:E.VersionsIcon,es="condensed"===A?"invisible":"default";return S[58]!==ea||S[59]!==es?(_={id:"changes-selector-button",size:"small",leadingVisual:ea,variant:es,trailingAction:E.TriangleDownIcon},S[58]=ea,S[59]=es,S[60]=_):_=S[60],S[61]===Symbol.for("react.memo_cache_sentinel")?(b={height:"large"},S[61]=b):b=S[61],S[62]!==Q||S[63]!==Z||S[64]!==U||S[65]!==en||S[66]!==el||S[67]!==ei||S[68]!==et||S[69]!==H||S[70]!==_?(w=(0,n.jsx)(ib,{buttonProps:_,anchorLabel:Q,ref:q,dialogProps:b,items:Z,onSingleSelect:et,onMultiSelect:ei,onApply:en,onCancel:el,variant:"modal",title:"Select commits to view",open:U,onOpenChange:H}),S[62]=Q,S[63]=Z,S[64]=U,S[65]=en,S[66]=el,S[67]=ei,S[68]=et,S[69]=H,S[70]=_,S[71]=w):w=S[71],S[72]!==v||S[73]!==w?(y=(0,n.jsxs)(n.Fragment,{children:[v,w]}),S[72]=v,S[73]=w,S[74]=y):y=S[74],y}function iD(e){return e.oid}iE.displayName="ChangesSelector";var iL=i(43495),iO=i(3421),iA=i(32416),iP=i(1307);let iF="PullRequestFilesToolbar-module__is-stuck__jSrl_",ik="PullRequestFilesToolbar-module__show-when-stuck__UjE3N",i$="PullRequestFilesToolbar-module__pr-title-details__a8FVw",iB="PullRequestFilesToolbar-module__hide-commit-selector-on-small__yRsK0",iM="PullRequestFilesToolbar-module__file-controls__Tgb8F",iq="PullRequestFilesToolbar-module__file-controls-navigation__oXmoY",iV="PullRequestFilesToolbar-module__file-controls-divider__zkpAr",iG="PullRequestFilesToolbar-module__stickyHeaderActivationThreshold__nWqbQ";var iz=i(68980),iU=i(21937),iH=i(30943),iW=i(47819),iQ=i(92163);function iK(){let e,t,i,n=(0,l.c)(9),a=(0,j.yg)(),s=(0,j.qX)(),r=iY;n[0]!==a||n[1]!==s?(e=()=>{if(a.length>0){let e,t=s(),i=t?a.indexOf(t):-1;e=i<=0?a.length-1:i-1;let n=a[e];n&&r(n)}},n[0]=a,n[1]=s,n[2]=e):e=n[2];let o=e;n[3]!==a||n[4]!==s?(t=()=>{if(a.length>0){let e,t=s(),i=t?a.indexOf(t):-1;e=i>=a.length-1||i<0?0:i+1;let n=a[e];n&&r(n)}},n[3]=a,n[4]=s,n[5]=t):t=n[5];let d=t;return n[6]!==d||n[7]!==o?(i={navigateToPrevious:o,navigateToNext:d},n[6]=d,n[7]=o,n[8]=i):i=n[8],i}function iY(e){(0,iQ.pk)(`diff-${e}`),(0,w.kd)(window.location.href)}var iJ=i(83369),iX=i(5591);let iZ=i(33447).q.SingleFileMode;function i0(e){let t,i,a,s,r,o,d,c,m=(0,l.c)(12),{userNotices:u}=e,h=(0,iX.Bk)(iZ,u),g=(0,j.j5)(),[x,v]=(0,p.useState)(!0),{dismissNotice:_}=(0,iX.Wo)(iZ,u);m[0]!==_?(t=()=>{_(),v(!1)},m[0]=_,m[1]=t):t=m[1];let b=t;return!g||h?null:(m[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,f.$)("d-flex flex-column gap-2","SingleFileModeOnboardingPopover-module__PopoverContent__v5Jvf"),a=(0,n.jsx)(X.A,{as:"h3",variant:"small",className:"SingleFileModeOnboardingPopover-module__Heading__hX_8K",children:"You're in single-file mode"}),s=(0,n.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),m[2]=i,m[3]=a,m[4]=s):(i=m[2],a=m[3],s=m[4]),m[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("strong",{children:"Previous"}),m[5]=r):r=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsxs)("p",{children:["Use the ",r," and ",(0,n.jsx)("strong",{children:"Next"})," buttons to move between files."]}),m[6]=o):o=m[6],m[7]!==b?(d=(0,n.jsxs)(iJ.A.Content,{className:i,children:[a,s,o,(0,n.jsx)("div",{className:"d-flex flex-items-center",children:(0,n.jsx)(er.Q,{onClick:b,children:"OK, got it"})})]}),m[7]=b,m[8]=d):d=m[8],m[9]!==x||m[10]!==d?(c=(0,n.jsx)(iJ.A,{className:"SingleFileModeOnboardingPopover-module__PopoverContainer__ojLxg",open:x,children:d}),m[9]=x,m[10]=d,m[11]=c):c=m[11],c)}i0.displayName="SingleFileModeOnboardingPopover";var i1=i(27093);function i2(e){let t,i,a,s,r,o=(0,l.c)(12),{userNotices:d}=e,c=(0,i1.zw)(),{navigateToPrevious:m,navigateToNext:u}=iK();return o[0]!==m?(t=(0,n.jsx)(ei.K,{icon:E.ChevronUpIcon,"aria-label":c?"Previous file (K)":"Previous file",size:"small",onClick:m,"data-hotkey":"k"}),o[0]=m,o[1]=t):t=o[1],o[2]!==u?(i=(0,n.jsx)(ei.K,{icon:E.ChevronDownIcon,"aria-label":c?"Next file (J)":"Next file",size:"small",onClick:u,"data-hotkey":"j"}),o[2]=u,o[3]=i):i=o[3],o[4]!==t||o[5]!==i?(a=(0,n.jsxs)(iW.A,{children:[t,i]}),o[4]=t,o[5]=i,o[6]=a):a=o[6],o[7]!==d?(s=(0,n.jsx)(i0,{userNotices:d}),o[7]=d,o[8]=s):s=o[8],o[9]!==a||o[10]!==s?(r=(0,n.jsxs)("div",{className:"position-relative",children:[a,s]}),o[9]=a,o[10]=s,o[11]=r):r=o[11],r}i2.displayName="ReviewNavigationButtonGroup";function i3(e){let t,i,a,s,r,o,c,m,u,h,g,x,_,b,w,y,S,N,C,R,T,I=(0,l.c)(57),{pageLimits:D,pullRequest:L,hideWhitespace:O,onUpdateWhitespace:A,additionalPreferences:P,showCommitSelector:F,commits:k}=e,$=(0,d.u)("prx_robust_small_screen_support");I[0]!==k?(t=k.map(i4),I[0]=k,I[1]=t):t=I[1];let B=iT(t),[M,q]=(0,p.useState)(!1),[V,G]=(0,p.useState)(!1),[z,U]=(0,p.useState)(!1),[H,W]=(0,p.useState)(!1),Q=(0,p.useRef)(null),K=(0,j.wI)(),Y=(0,j.Qb)(),J=(0,j.M3)(),{sendPullRequestAnalyticsEvent:X}=(0,ee.q)(),Z=K.length;I[2]!==X?(i=()=>{X("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eV(),q(!0),U(!1)},I[2]=X,I[3]=i):i=I[3];let et=i;I[4]!==X?(a=()=>{X("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eV(),G(!0),U(!1)},I[4]=X,I[5]=a):a=I[5];let en=a;return I[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(eU.W.Anchor,{children:(0,n.jsx)(ei.K,{ref:Q,icon:E.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),I[6]=s):s=I[6],I[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.CommentDiscussionIcon,{})}),I[7]=r):r=I[7],I[8]!==Y?(o=Y>0&&(0,n.jsx)(v.l.TrailingVisual,{children:Y}),I[8]=Y,I[9]=o):o=I[9],I[10]!==et||I[11]!==o?(c=(0,n.jsxs)(v.l.Item,{onSelect:et,children:[r,"Comments",o]}),I[10]=et,I[11]=o,I[12]=c):c=I[12],I[13]!==B||I[14]!==$||I[15]!==F?(m=$?(0,n.jsxs)(v.l.Item,{onSelect:()=>F(),className:(0,f.$)("ToolbarMoreMenu-module__hide-on-desktop__Gv48M","ToolbarMoreMenu-module__show-on-mobile__DX3B0"),children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.VersionsIcon,{})}),B]}):null,I[13]=B,I[14]=$,I[15]=F,I[16]=m):m=I[16],I[17]!==en||I[18]!==Z?(u=Z>0&&(0,n.jsxs)(v.l.Item,{onSelect:en,children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.AlertIcon,{})}),"Alerts",(0,n.jsx)(v.l.TrailingVisual,{children:Z})]}),I[17]=en,I[18]=Z,I[19]=u):u=I[19],I[20]!==c||I[21]!==m||I[22]!==u?(h=(0,n.jsxs)(v.l.Group,{children:[c,m,u]}),I[20]=c,I[21]=m,I[22]=u,I[23]=h):h=I[23],I[24]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)(v.l.Divider,{}),I[24]=g):g=I[24],I[25]===Symbol.for("react.memo_cache_sentinel")?(x=(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.GearIcon,{})}),I[25]=x):x=I[25],I[26]===Symbol.for("react.memo_cache_sentinel")?(_=(0,n.jsx)(eU.W.Anchor,{children:(0,n.jsxs)(v.l.Item,{children:[x,"Settings",(0,n.jsx)(v.l.TrailingVisual,{children:(0,n.jsx)(E.ChevronRightIcon,{})})]})}),I[26]=_):_=I[26],I[27]!==P||I[28]!==O||I[29]!==A?(b=(0,n.jsx)(eU.W.Overlay,{side:"outside-bottom",align:"end",children:(0,n.jsx)(v.l,{children:(0,n.jsx)(ic.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:A,defaultHideWhitespace:O,additionalPreferences:P})})}),I[27]=P,I[28]=O,I[29]=A,I[30]=b):b=I[30],I[31]!==H||I[32]!==b?(w=(0,n.jsx)(v.l.Group,{children:(0,n.jsxs)(eU.W,{open:H,onOpenChange:W,children:[_,b]})}),I[31]=H,I[32]=b,I[33]=w):w=I[33],I[34]!==h||I[35]!==w?(y=(0,n.jsx)(eU.W.Overlay,{align:"end",children:(0,n.jsxs)(v.l,{children:[h,g,w]})}),I[34]=h,I[35]=w,I[36]=y):y=I[36],I[37]!==z||I[38]!==y?(S=(0,n.jsxs)(eU.W,{open:z,onOpenChange:U,children:[s,y]}),I[37]=z,I[38]=y,I[39]=S):S=I[39],I[40]===Symbol.for("react.memo_cache_sentinel")?(N=()=>q(!1),I[40]=N):N=I[40],I[41]!==M||I[42]!==Y||I[43]!==J||I[44]!==D||I[45]!==L.author.login||I[46]!==L.pathName?(C=(0,n.jsx)(tP,{diffCommentCount:Y,isOpen:M,issueCommentsCount:J,pageLimits:D,pathName:L.pathName,pullRequestAuthorLogin:L.author.login,toggleSidesheetRef:Q,onClose:N}),I[41]=M,I[42]=Y,I[43]=J,I[44]=D,I[45]=L.author.login,I[46]=L.pathName,I[47]=C):C=I[47],I[48]!==V||I[49]!==K||I[50]!==D||I[51]!==Z?(R=Z>0&&(0,n.jsx)(tV,{annotations:K,isOpen:V,pageLimits:D,returnFocusRef:Q,onClose:()=>G(!1)}),I[48]=V,I[49]=K,I[50]=D,I[51]=Z,I[52]=R):R=I[52],I[53]!==S||I[54]!==C||I[55]!==R?(T=(0,n.jsxs)(n.Fragment,{children:[S,C,R]}),I[53]=S,I[54]=C,I[55]=R,I[56]=T):T=I[56],T}function i4(e){return e.oid}function i5(e){let t,i,a,s,r=(0,l.c)(9),{changeGroupsPreferenceAvailable:o,showChangeGroups:d,onShowChangeGroupsChange:c}=e,{sendPullRequestAnalyticsEvent:m}=(0,ee.q)();if(!o)return;r[0]!==c||r[1]!==m||r[2]!==d?(t=()=>{let e=!d;m(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),c(e)},r[0]=c,r[1]=m,r[2]=d,r[3]=t):t=r[3];let u=t;return r[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(v.l.Divider,{}),r[4]=i):i=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(v.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"}),r[5]=a):a=r[5],r[6]!==u||r[7]!==d?(s=(0,n.jsxs)(n.Fragment,{children:[i,(0,n.jsx)(v.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,n.jsxs)(v.l.Item,{selected:d,onSelect:u,children:["Show changes by group",a]})})]}),r[6]=u,r[7]=d,r[8]=s):s=r[8],s}i3.displayName="ToolbarMoreMenu",i5.displayName="ChangeGroupsPreferences";var i6=i(10143);function i7(e){let t=new Map;if(!e)return t;for(let[i,n]of Object.entries(e))for(let e of Object.values(n))for(let n of e?.threads??[])for(let e of n.commentsData?.comments??[])void 0!==e.databaseId&&null!==e.databaseId&&t.set(e.databaseId,{comment:e,path:i,thread:n});return t}var i8=i(59080),i9=i(46348);function ne(e){let t={id:e.commentDatabaseId};return null!=e.suggestionIndex&&(t.suggestionIndex=e.suggestionIndex),t}var nt=i(47427);function ni(e){let t,i,a,s,r=(0,l.c)(10),{bodyHtml:o,isLoading:d,onClose:c}=e,m=(0,p.useRef)(null),h=(0,p.useRef)(null);r[0]!==o?(t=o.includes("No description provided."),r[0]=o,r[1]=t):t=r[1];let f=t;return r[2]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen",regular:"right",wide:"right"},r[2]=i):i=r[2],r[3]!==o||r[4]!==f||r[5]!==d?(a=d?(0,n.jsx)("div",{className:"d-flex flex-justify-center",children:(0,n.jsx)(Z.A,{})}):(0,n.jsx)(nt.A,{verifiedHTML:o,className:f?"fgColor-muted":void 0}),r[3]=o,r[4]=f,r[5]=d,r[6]=a):a=r[6],r[7]!==c||r[8]!==a?(s=(0,n.jsx)(u.l,{title:"Overview",initialFocusRef:m,position:i,returnFocusRef:h,onClose:c,children:a}),r[7]=c,r[8]=a,r[9]=s):s=r[9],s}function nn(){let e,t=(0,l.c)(2),i=(0,eu.e)(em.uT.description);return t[0]!==i?(e={queryKey:[em.uT.description,i],queryFn:async()=>{let e=await (0,ew.QJ)(i);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},staleTime:1/0},t[0]=i,t[1]=e):e=t[1],(0,eb.I)(e)}function nl(e){let t,i,a,s,r=(0,l.c)(10),{aliveChannel:o}=e,[d,c]=(0,p.useState)(!1),m=(0,p.useRef)(null),{sendPullRequestAnalyticsEvent:u}=(0,ee.q)(),{data:h,isLoading:f}=nn();!function(e){let t,i=(0,l.c)(1),{refetch:n}=nn();i[0]===Symbol.for("react.memo_cache_sentinel")?(t={body_updated:!0},i[0]=t):t=i[0],(0,im.og)(e,n,t)}(o);let g=h?.bodyHtml||'<p class="text-italic">No description provided.</p>';return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(ei.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:E.InfoIcon,size:"small",variant:"invisible"}),r[0]=t):t=r[0],r[1]!==u?(i=(0,n.jsx)(ei.K,{ref:m,"aria-label":"Open overview side panel",icon:E.InfoIcon,size:"small",onClick:()=>{u("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),eV(),c(!0)}}),r[1]=u,r[2]=i):i=r[2],r[3]!==g||r[4]!==f||r[5]!==d?(a=d&&(0,n.jsx)(ni,{bodyHtml:g,isLoading:f,onClose:()=>c(!1)}),r[3]=g,r[4]=f,r[5]=d,r[6]=a):a=r[6],r[7]!==i||r[8]!==a?(s=(0,n.jsx)("div",{className:"d-flex flex-items-center",children:(0,n.jsxs)(J.t,{boundaryName:"OpenOverviewPanelButton",fallback:t,children:[i,a]})}),r[7]=i,r[8]=a,r[9]=s):s=r[9],s}function na(e){let t,i,a,s,r,o,d,c,m,u,h,f,p=(0,l.c)(26);p[0]!==e?({aliveChannel:t,repository:o,pullRequest:a,bannersData:i,urls:d,user:c,userNotices:m,pageTitle:s,...r}=e,p[0]=e,p[1]=t,p[2]=i,p[3]=a,p[4]=s,p[5]=r,p[6]=o,p[7]=d,p[8]=c,p[9]=m):(t=p[1],i=p[2],a=p[3],s=p[4],r=p[5],o=p[6],d=p[7],c=p[8],m=p[9]);let{data:g}=(0,iU.W)(),{pullRequest:x}=g;p[10]!==t||p[11]!==i||p[12]!==a||p[13]!==s||p[14]!==o||p[15]!==d||p[16]!==c?(u={aliveChannel:t,repository:o,pullRequest:a,bannersData:i,urls:d,user:c,pageTitle:s},p[10]=t,p[11]=i,p[12]=a,p[13]=s,p[14]=o,p[15]=d,p[16]=c,p[17]=u):u=p[17],(0,iU.W)(u),(0,iH.F)(t),p[18]!==a||p[19]!==x?(h={...a,...x},p[18]=a,p[19]=x,p[20]=h):h=p[20];let v=h;return p[21]!==r||p[22]!==o||p[23]!==v||p[24]!==m?(f=(0,n.jsx)(ns,{repository:o,pullRequest:v,userNotices:m,...r}),p[21]=r,p[22]=o,p[23]=v,p[24]=m,p[25]=f):f=p[25],f}function ns(e){let t,i,a,s,r,c,m,u,h,g,x,v,b,w,y,S,N,C,R,T,I,E,L,O,P,F,k,$,B,M,q,V,G,z,U,H,W,Q,K,Y,J,X,Z,ee,et=(0,l.c)(157),{changeGroupsPreferenceAvailable:ei,commits:en,currentUserLogin:el,fileFilter:ea,isFileTreeExpanded:es,lastReviewOid:eo,pageLimits:ed,pullRequest:ec,repository:ep,shouldShowViewedFilesCount:eg,totalFilesCount:ex,treeToggleElement:ev,userNotices:e_}=e,eb=(0,d.u)("batch_suggested_changes"),ey=(0,d.u)("prx_robust_small_screen_support"),{mutate:ej}=function(){let e,t,i,n=(0,l.c)(7),a=(0,j.Kp)(),{updateWhitespace:s}=(0,j.yo)();return n[0]!==a?(e=async e=>{let{hideWhitespace:t}=e,i=`${a}/page_data/${em.uT.updateWhitespacePreference}`,n=await (0,ef.q$)(i,{method:"POST",body:{w:+!!t}}),l=await (0,ef.hp)(n);return(0,ef.R)(n,l),l},n[0]=a,n[1]=e):e=n[1],n[2]!==s?(t=e=>{s(e.ignoreWhitespace)},n[2]=s,n[3]=t):t=n[3],n[4]!==e||n[5]!==t?(i={mutationFn:e,onSuccess:t},n[4]=e,n[5]=t,n[6]=i):i=n[6],(0,eh.n)(i)}(),{clearSuggestionBatch:eS,removeSuggestionFromBatch:eN}=(0,j.xJ)(),{mutate:eC}=function(e,t){let i,n,a,s=(0,l.c)(11),r=(0,eu.e)(em.uT.submitSuggestedChanges),o=(0,j.WK)(),d=(0,j.qL)(),{clearSuggestionBatch:c}=(0,j.xJ)();return s[0]!==r||s[1]!==d||s[2]!==o?(i=async e=>{let{currentOid:t,message:i}=e,n=function(e,t){if(!e||0===t.length)return[];let i=i7(e),n=[];for(let e of t){let t=i.get(e.commentDatabaseId);if(!t)continue;let{comment:l,path:a}=t,s=(0,i8.T)(l.body);!s||void 0===e.suggestionIndex||e.suggestionIndex<0||e.suggestionIndex>=s.length||n.push({threadId:String(e.commentDatabaseId),path:a,suggestion:s})}return n}(d,o.activeBatch);if(0===n.length)throw Error("No valid suggestions found in batch");let l=await (0,ew.Sr)(r,{method:"POST",headers:{Accept:"application/json"},body:{changes:n,currentOid:t,message:i}}),a=await (0,ef.hp)(l);return(0,ef.R)(l,a),a},s[0]=r,s[1]=d,s[2]=o,s[3]=i):i=s[3],s[4]!==c||s[5]!==t||s[6]!==e?(n=()=>{c(),(0,i9.hW)(e,t),A.cg?.location.reload()},s[4]=c,s[5]=t,s[6]=e,s[7]=n):n=s[7],s[8]!==i||s[9]!==n?(a={mutationFn:i,onSuccess:n},s[8]=i,s[9]=n,s[10]=a):a=s[10],(0,eh.n)(a)}(ec.pathName,ec.comparison.headOid),{mutate:eR}=function(e,t){let i,n,a,s,r=(0,l.c)(12);r[0]!==e?(i=(0,ix.vz6)({basePath:e}),r[0]=e,r[1]=i):i=r[1];let o=i,d=(0,j.WK)(),{clearSuggestionBatch:c}=(0,j.xJ)();return r[2]!==o||r[3]!==d?(n=async e=>{let{message:t}=e,i=d.activeBatch.map(ne);if(0===i.length)throw Error("No valid suggestions found in batch");let n=await (0,ew.Sr)(o,{method:"POST",headers:{Accept:"application/json"},body:{comments:i,message:t}}),l=await (0,ef.hp)(n);return(0,ef.R)(n,l),l},r[2]=o,r[3]=d,r[4]=n):n=r[4],r[5]!==c||r[6]!==t||r[7]!==e?(a=()=>{c(),(0,i9.hW)(e,t),A.cg?.location.reload()},r[5]=c,r[6]=t,r[7]=e,r[8]=a):a=r[8],r[9]!==n||r[10]!==a?(s={mutationFn:n,onSuccess:a},r[9]=n,r[10]=a,r[11]=s):s=r[11],(0,eh.n)(s)}(ec.pathName,ec.comparison.headOid),{mutate:eT}=function(){let e,t,i,n=(0,l.c)(8),a=(0,j.Kp)(),{updateChangeGroupPreference:s}=(0,j.wL)(),{updateDiffFilter:r}=(0,j.or)();return n[0]!==a?(e=async e=>{let{showChangeGroups:t}=e,i=`${a}/page_data/${em.uT.updateShowChangeGroupsPreference}`,n=await (0,ef.q$)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),l=await (0,ef.hp)(n);return(0,ef.R)(n,l),l},n[0]=a,n[1]=e):e=n[1],n[2]!==s||n[3]!==r?(t=e=>{let{showChangeGroups:t}=e;s(t),t||r({activeChangeGroupId:void 0})},n[2]=s,n[3]=r,n[4]=t):t=n[4],n[5]!==e||n[6]!==t?(i={mutationFn:e,onMutate:t},n[5]=e,n[6]=t,n[7]=i):i=n[7],(0,eh.n)(i)}(),eI=(0,j.WA)(),{hideWhitespace:eE,fullDiff:eD}=(0,j.L3)(),[eL,eO]=(0,p.useState)(!1),eA=eg||!es,[eP,eF]=(0,p.useState)(!1),ek=(0,j.j5)(),e$=(0,j.RH)(),eB=(0,j.WK)(),eM=(0,j.qL)(),[eV,eG]=(0,p.useState)(!1),ez=(0,j.Kp)(),eU=(0,j.L3)(),[eH,eW]=(0,p.useState)(!1),eQ=function(e,t){if(!e||0===t.length)return[];let i=i7(e),n=[];for(let e of t){let t=i.get(e.commentDatabaseId);t&&n.push({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:t.path,bodyHTML:t.comment.bodyHTML})}return n}(eM,eB.activeBatch),eK=eQ.length;et[0]!==ej?(t=e=>{ej({hideWhitespace:e})},et[0]=ej,et[1]=t):t=et[1];let eY=t;et[2]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{e[0]&&eO(!e[0].isIntersecting)},et[2]=i):i=et[2];let[eJ,eX]=(0,iO.B)(i);et[3]!==eU.fullDiff.headOid||et[4]!==ez||et[5]!==eN||et[6]!==eB.activeBatch?(a=e=>{eN(e),(0,i9.CE)(ez,eU.fullDiff.headOid,eB.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},et[3]=eU.fullDiff.headOid,et[4]=ez,et[5]=eN,et[6]=eB.activeBatch,et[7]=a):a=et[7];let eZ=a;et[8]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{eG(!0)},et[8]=s):s=et[8];let e0=s;et[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{eG(!1)},et[9]=r):r=et[9];let e1=r;et[10]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{eF(!0)},et[10]=c):c=et[10];let e2=c;et[11]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{eF(!1)},et[11]=m):m=et[11];let e3=m;et[12]!==eS||et[13]!==eU.fullDiff.headOid||et[14]!==e1||et[15]!==ez?(u=()=>{eS(),(0,i9.hW)(ez,eU.fullDiff.headOid),e1(),eF(!1)},et[12]=eS,et[13]=eU.fullDiff.headOid,et[14]=e1,et[15]=ez,et[16]=u):u=et[16];let e4=u;et[17]!==eC||et[18]!==eR||et[19]!==eD||et[20]!==e1?(h=(e,t,i)=>{let n=(0,o.G7)("copilot_code_review_batch_apply_suggestions"),l={onSuccess:()=>{e1(),i()},onError:e=>{t(e)}};n?eR({message:e},l):eC({message:e,currentOid:eD.headOid},l)},et[17]=eC,et[18]=eR,et[19]=eD,et[20]=e1,et[21]=h):h=et[21];let e5=h;et[22]!==eT?(g=e=>{eT({showChangeGroups:e})},et[22]=eT,et[23]=g):g=et[23];let e6=g,e7=eQ.map(nr);et[24]!==eJ||et[25]!==eX?(x=(0,n.jsx)(iA.X,{className:iG,onObserve:eJ,onUnobserve:eX}),et[24]=eJ,et[25]=eX,et[26]=x):x=et[26];let e8=eL&&iF;et[27]!==e8?(v=(0,f.$)(iL.A.stickyHeader,"PullRequestFilesToolbar-module__toolbar__ztHN6",e8),et[27]=e8,et[28]=v):v=et[28],et[29]===Symbol.for("react.memo_cache_sentinel")?(b=(0,n.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),et[29]=b):b=et[29],et[30]!==ev?(w=(0,n.jsx)("div",{children:ev}),et[30]=ev,et[31]=w):w=et[31],et[32]!==ec.state?(y=(0,n.jsx)("div",{className:ik,children:(0,n.jsx)(iP.u,{state:ec.state})}),et[32]=ec.state,et[33]=y):y=et[33];let e9=ey&&iB;et[34]!==e9?(S=(0,f.$)("PullRequestFilesToolbar-module__hide-when-stuck-large__Zcykn",e9),et[34]=e9,et[35]=S):S=et[35],et[36]!==en||et[37]!==eo||et[38]!==ec.number||et[39]!==ep.name||et[40]!==ep.ownerLogin?(N=(0,n.jsx)(iE,{commits:en,lastReviewOid:eo,ownerLogin:ep.ownerLogin,pullRequestNumber:ec.number,repositoryName:ep.name}),et[36]=en,et[37]=eo,et[38]=ec.number,et[39]=ep.name,et[40]=ep.ownerLogin,et[41]=N):N=et[41],et[42]!==S||et[43]!==N?(C=(0,n.jsx)("div",{className:S,children:N}),et[42]=S,et[43]=N,et[44]=C):C=et[44],et[45]===Symbol.for("react.memo_cache_sentinel")?(R=(0,f.$)(ik,"min-width-0"),T=(0,f.$)("d-flex mb-n1",i$),et[45]=R,et[46]=T):(R=et[45],T=et[46]);let te=ec.title;et[47]===Symbol.for("react.memo_cache_sentinel")?(I=(0,f.$)("f5 text-bold overflow-hidden no-wrap","PullRequestFilesToolbar-module__pr-sticky-title__GIttB"),et[47]=I):I=et[47],et[48]!==ec.title?(E=(0,n.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,n.jsx)("bdi",{className:I,children:ec.title})}),et[48]=ec.title,et[49]=E):E=et[49],et[50]!==ec.title||et[51]!==E?(L=(0,n.jsx)(D.m,{type:"label",direction:"s",text:te,children:E}),et[50]=ec.title,et[51]=E,et[52]=L):L=et[52],et[53]!==ec.number?(O=(0,n.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",ec.number]}),et[53]=ec.number,et[54]=O):O=et[54],et[55]!==L||et[56]!==O?(P=(0,n.jsxs)("div",{className:T,children:[L,O]}),et[55]=L,et[56]=O,et[57]=P):P=et[57];let tt=ey&&iB;et[58]!==tt?(F=(0,f.$)("f6 text-normal d-flex flex-items-center ml-n2",tt),et[58]=tt,et[59]=F):F=et[59],et[60]!==eH||et[61]!==en||et[62]!==eo||et[63]!==ec.number||et[64]!==ep.name||et[65]!==ep.ownerLogin?(k=(0,n.jsx)(iE,{commits:en,lastReviewOid:eo,ownerLogin:ep.ownerLogin,pullRequestNumber:ec.number,repositoryName:ep.name,variant:"condensed",open:eH,onOpenChange:eW}),et[60]=eH,et[61]=en,et[62]=eo,et[63]=ec.number,et[64]=ep.name,et[65]=ep.ownerLogin,et[66]=k):k=et[66],et[67]===Symbol.for("react.memo_cache_sentinel")?($=(0,f.$)("d-none d-lg-flex flex-items-center min-width-0",i$),et[67]=$):$=et[67],et[68]===Symbol.for("react.memo_cache_sentinel")?(B=(0,n.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),et[68]=B):B=et[68],et[69]!==ec.author||et[70]!==ec.baseBranch||et[71]!==ec.commitsCount||et[72]!==ec.headBranch||et[73]!==ec.headRepositoryName||et[74]!==ec.headRepositoryOwnerLogin||et[75]!==ec.id||et[76]!==ec.isInAdvisoryRepo||et[77]!==ec.mergedBy||et[78]!==ec.mergedByName||et[79]!==ec.number||et[80]!==ec.state||et[81]!==ep.id||et[82]!==ep.name||et[83]!==ep.ownerLogin?(M=(0,n.jsxs)("div",{className:$,children:[B,(0,n.jsx)(iz.O,{author:ec.author,baseBranch:ec.baseBranch,baseRepositoryOwnerLogin:ep.ownerLogin,baseRepositoryName:ep.name,commitsCount:ec.commitsCount,headBranch:ec.headBranch,headRepositoryOwnerLogin:ec.headRepositoryOwnerLogin,headRepositoryName:ec.headRepositoryName,isInAdvisoryRepo:ec.isInAdvisoryRepo,mergedBy:ec.mergedBy,mergedByName:ec.mergedByName,state:ec.state,pullRequestId:ec.id,pullRequestNumber:ec.number,repositoryId:ep.id})]}),et[69]=ec.author,et[70]=ec.baseBranch,et[71]=ec.commitsCount,et[72]=ec.headBranch,et[73]=ec.headRepositoryName,et[74]=ec.headRepositoryOwnerLogin,et[75]=ec.id,et[76]=ec.isInAdvisoryRepo,et[77]=ec.mergedBy,et[78]=ec.mergedByName,et[79]=ec.number,et[80]=ec.state,et[81]=ep.id,et[82]=ep.name,et[83]=ep.ownerLogin,et[84]=M):M=et[84],et[85]!==F||et[86]!==k||et[87]!==M?(q=(0,n.jsxs)("div",{className:F,children:[k,M]}),et[85]=F,et[86]=k,et[87]=M,et[88]=q):q=et[88],et[89]!==P||et[90]!==q?(V=(0,n.jsxs)(tU.B,{direction:"vertical",gap:"none",className:R,children:[P,q]}),et[89]=P,et[90]=q,et[91]=V):V=et[91],et[92]!==w||et[93]!==y||et[94]!==C||et[95]!==V?(G=(0,n.jsxs)(tU.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[w,y,C,V]}),et[92]=w,et[93]=y,et[94]=C,et[95]=V,et[96]=G):G=et[96],et[97]!==ec.aliveChannel?(z=(0,n.jsx)(ih,{aliveChannel:ec.aliveChannel}),et[97]=ec.aliveChannel,et[98]=z):z=et[98],et[99]!==eg||et[100]!==ex?(U=eg&&(0,n.jsx)(eq,{totalFilesCount:ex}),et[99]=eg,et[100]=ex,et[101]=U):U=et[101];let ti=!es&&ea;return et[102]!==ek||et[103]!==ex||et[104]!==e_?(H=ek&&ex>1&&(0,n.jsx)("div",{className:iq,children:(0,n.jsx)(i2,{userNotices:e_})}),et[102]=ek,et[103]=ex,et[104]=e_,et[105]=H):H=et[105],et[106]!==U||et[107]!==ti||et[108]!==H?(W=(0,n.jsxs)("div",{className:iM,children:[U,ti,H]}),et[106]=U,et[107]=ti,et[108]=H,et[109]=W):W=et[109],et[110]!==eA?(Q=eA&&(0,n.jsx)("div",{className:iV,"data-testid":"file-controls-divider"}),et[110]=eA,et[111]=Q):Q=et[111],et[112]!==eb||et[113]!==ei||et[114]!==en||et[115]!==el||et[116]!==e0||et[117]!==e2||et[118]!==eE||et[119]!==es||et[120]!==e$||et[121]!==e6||et[122]!==eY||et[123]!==ed||et[124]!==ec||et[125]!==ep||et[126]!==eI||et[127]!==eK||et[128]!==e_?(K=e$&&eb?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(er.Q,{variant:"danger",size:"small",onClick:e2,children:"Discard batch"}),(0,n.jsxs)(er.Q,{variant:"primary",size:"small",onClick:e0,children:["Commit suggestions ",(0,n.jsx)(_.A,{className:"ml-1 color-fg-inherit",children:eK})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nl,{aliveChannel:ec.aliveChannel}),(0,n.jsx)("div",{className:"d-none d-sm-flex",children:(0,n.jsx)(t$,{pageLimits:ed,pullRequest:ec,isFileTreeExpanded:es})}),(0,n.jsx)(tz,{className:"d-none d-sm-flex",pageLimits:ed,isFileTreeExpanded:es}),el&&(0,n.jsx)(ia,{currentUserLogin:el,pullRequest:ec,repository:ep}),(0,n.jsx)("div",{className:"d-none d-sm-flex",children:(0,n.jsx)(ic.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:eY,defaultHideWhitespace:eE,small:!0,userNotices:e_,additionalPreferences:(0,n.jsx)(i5,{changeGroupsPreferenceAvailable:ei,showChangeGroups:eI,onShowChangeGroupsChange:e6})})}),(0,n.jsx)("div",{className:"d-flex d-sm-none",children:(0,n.jsx)(i3,{pageLimits:ed,pullRequest:ec,hideWhitespace:eE,onUpdateWhitespace:eY,showCommitSelector:()=>eW(!0),commits:en,additionalPreferences:(0,n.jsx)(i5,{changeGroupsPreferenceAvailable:ei,showChangeGroups:eI,onShowChangeGroupsChange:e6})})})]}),et[112]=eb,et[113]=ei,et[114]=en,et[115]=el,et[116]=e0,et[117]=e2,et[118]=eE,et[119]=es,et[120]=e$,et[121]=e6,et[122]=eY,et[123]=ed,et[124]=ec,et[125]=ep,et[126]=eI,et[127]=eK,et[128]=e_,et[129]=K):K=et[129],et[130]!==z||et[131]!==W||et[132]!==Q||et[133]!==K?(Y=(0,n.jsxs)(tU.B,{direction:"horizontal",align:"center",children:[z,W,Q,K]}),et[130]=z,et[131]=W,et[132]=Q,et[133]=K,et[134]=Y):Y=et[134],et[135]!==v||et[136]!==G||et[137]!==Y?(J=(0,n.jsxs)(tU.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:v,children:[b,G,Y]}),et[135]=v,et[136]=G,et[137]=Y,et[138]=J):J=et[138],et[139]!==e5||et[140]!==e1||et[141]!==e4||et[142]!==eZ||et[143]!==eV||et[144]!==eB.activeBatch.length||et[145]!==e7?(X=eV&&e7.length>0&&(0,n.jsx)(i6.$,{authorLogins:[],batchSize:eB.activeBatch.length,onClose:e1,onCommit:e5,defaultCommitMessage:"Apply suggestions from code review",suggestions:e7,onRemoveSuggestion:eZ,onDiscardBatch:e4}),et[139]=e5,et[140]=e1,et[141]=e4,et[142]=eZ,et[143]=eV,et[144]=eB.activeBatch.length,et[145]=e7,et[146]=X):X=et[146],et[147]!==e4||et[148]!==e3||et[149]!==eP||et[150]!==eK?(Z=(0,n.jsx)(ig.G,{isOpen:eP,onConfirm:e4,onCancel:e3,suggestionsCount:eK}),et[147]=e4,et[148]=e3,et[149]=eP,et[150]=eK,et[151]=Z):Z=et[151],et[152]!==x||et[153]!==J||et[154]!==X||et[155]!==Z?(ee=(0,n.jsxs)(n.Fragment,{children:[x,J,X,Z]}),et[152]=x,et[153]=J,et[154]=X,et[155]=Z,et[156]=ee):ee=et[156],ee}function nr(e){return{commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}}ni.displayName="OverviewSidePanel",nl.displayName="OpenOverviewSidePanelButton",na.displayName="LivePullRequestFilesToolbar",ns.displayName="PullRequestFilesToolbar";let no="DiffComparisonViewer-module__WideExpanded__Oilcd";var nd=i(67712),nc=i(23148),nm=i(96479);function nu(e){let t,i,a,s,r,o,d,c,m,u,h,g,x,v,_=(0,l.c)(36),{fileFilter:b,isFileTreeExpanded:w,shouldShowViewedFilesCount:y,totalFilesCount:S,treeToggleElement:N,userNotices:C}=e;_[0]===Symbol.for("react.memo_cache_sentinel")?(t=["line-spacing"],_[0]=t):t=_[0];let R=t,[T,I]=(0,p.useState)(!1),E=(0,j.j5)(),D=y||!w;_[1]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{e[0]&&I(!e[0].isIntersecting)},_[1]=i):i=_[1];let[L,O]=(0,iO.B)(i);_[2]!==L||_[3]!==O?(a=(0,n.jsx)(iA.X,{className:iG,onObserve:L,onUnobserve:O}),_[2]=L,_[3]=O,_[4]=a):a=_[4];let A=T&&iF;_[5]!==A?(s=(0,f.$)(iL.A.stickyHeader,"PullRequestFilesToolbar-module__simple-toolbar__3d9E8",A),_[5]=A,_[6]=s):s=_[6],_[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),_[7]=r):r=_[7],_[8]!==N?(o=(0,n.jsx)(tU.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,n.jsx)("div",{children:N})}),_[8]=N,_[9]=o):o=_[9],_[10]!==y||_[11]!==S?(d=y&&(0,n.jsx)(eq,{totalFilesCount:S}),_[10]=y,_[11]=S,_[12]=d):d=_[12];let P=!w&&b;return _[13]!==E||_[14]!==S||_[15]!==C?(c=E&&S>1&&(0,n.jsx)("div",{className:iq,children:(0,n.jsx)(i2,{userNotices:C})}),_[13]=E,_[14]=S,_[15]=C,_[16]=c):c=_[16],_[17]!==c||_[18]!==d||_[19]!==P?(m=(0,n.jsxs)("div",{className:iM,children:[d,P,c]}),_[17]=c,_[18]=d,_[19]=P,_[20]=m):m=_[20],_[21]!==D?(u=D&&(0,n.jsx)("div",{className:iV,"data-testid":"file-controls-divider"}),_[21]=D,_[22]=u):u=_[22],_[23]!==C?(h=(0,n.jsx)(ic.G,{invisible:!1,small:!0,enabledDiffViewSettings:R,userNotices:C}),_[23]=C,_[24]=h):h=_[24],_[25]!==m||_[26]!==u||_[27]!==h?(g=(0,n.jsxs)(tU.B,{direction:"horizontal",align:"center",children:[m,u,h]}),_[25]=m,_[26]=u,_[27]=h,_[28]=g):g=_[28],_[29]!==g||_[30]!==s||_[31]!==o?(x=(0,n.jsxs)(tU.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:s,children:[r,o,g]}),_[29]=g,_[30]=s,_[31]=o,_[32]=x):x=_[32],_[33]!==x||_[34]!==a?(v=(0,n.jsxs)(n.Fragment,{children:[a,x]}),_[33]=x,_[34]=a,_[35]=v):v=_[35],v}nu.displayName="BasicDiffComparisonViewToolbar";var nh=i(30490),nf=i(33304),np=i(99589),ng=i(1629);let nx="diff-comparison-viewer-container";function nv(e){return{...e,compactMode:"none"}}function n_(e){return{...e,wideMode:"expanded"}}var nb=i(14391);function nw(e){let t,i,a,s=(0,l.c)(4),{lines:r}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:t,children:(0,n.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,n.jsx)(nb.O,{height:"sm",variant:"rounded",width:"random"})})}),s[1]=i):i=s[1],s[2]!==r?(a=(0,n.jsxs)("div",{className:"border borderColor-muted rounded",children:[i,(0,n.jsx)("div",{className:"d-flex flex-column gap-2 pr-p-3",children:Array.from({length:r||5}).map(ny)})]}),s[2]=r,s[3]=a):a=s[3],a}function ny(e,t){return(0,n.jsx)(nb.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`)}nw.displayName="EntireDiffLoadingSkeleton";var nj=i(17818);function nS(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,n.jsx)(tx.E,{border:!1,spacious:!0,children:(0,n.jsx)(tx.E.Heading,{children:"No files matched your search"})})}),t[0]=e):e=t[0],e}nS.displayName="FilesChangedFilterBlankSlate";var nN=i(4735),nC=i(21999),nR=i(35322);function nT(e){let t,i,a,s,r=(0,l.c)(17),{pullRequestBasePath:o,className:d,diffPath:c,viewerLogin:m}=e,u=(0,p.useId)();r[0]!==o||r[1]!==c?(t={basePath:o,diffPath:c},r[0]=o,r[1]=c,r[2]=t):t=r[2];let{data:h}=(0,y.o5)(t);if(!h)return null;let{isOwnedByViewer:f,owners:g,ruleLineNumber:x,ruleUrl:v}=h;if(!(f||g.length>0))return null;r[3]!==f||r[4]!==g||r[5]!==x||r[6]!==m?(i=nI(f,g,x,m),r[3]=f,r[4]=g,r[5]=x,r[6]=m,r[7]=i):i=r[7];let _=i;return r[8]!==d||r[9]!==f||r[10]!==v||r[11]!==u?(a=v?(0,n.jsx)(L.A,{"aria-labelledby":u,href:v,className:d,muted:!f,children:(0,n.jsx)(E.ShieldLockIcon,{})}):(0,n.jsx)(E.ShieldLockIcon,{className:d}),r[8]=d,r[9]=f,r[10]=v,r[11]=u,r[12]=a):a=r[12],r[13]!==a||r[14]!==_||r[15]!==u?(s=(0,n.jsx)(D.m,{id:u,"aria-label":_,text:_,children:a}),r[13]=a,r[14]=_,r[15]=u,r[16]=s):s=r[16],s}function nI(e,t,i,n){let l="Owned by ",a=t;return e&&(l+="you",n&&(a=t.filter(e=>e!==`@${n}`)),a.length>0&&(l+=" along with ")),l+=a.join(", "),i&&(l+=` (from CODEOWNERS line ${i})`),l}nT.displayName="CodeownersBadge";var nE=i(45214),nD=i(25312);let nL="BlobActionsMenu-module__hiddenIcon__F71AB";function nO(e){let t,i,a,s,r,o,d,c,m,u,h,f,p,g=(0,l.c)(46),{oid:x,path:_,repo:b,branchName:w,isViewable:y,isDeleteable:j,isEditable:S,shouldShowEditOptions:N,copilotDiffChatProps:C,returnToPullRequestPath:R,onCommentOnFile:T,onCopyPath:I,onExpandLines:D,areLinesExpanded:L,richDiffToggle:O,codeownersText:A,codeownersUrl:P}=e,F=void 0===j||j,k=void 0===S||S,$=void 0===N||N;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(eU.W.Anchor,{children:(0,n.jsx)(ei.K,{icon:E.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),g[0]=t):t=g[0],g[1]!==O?(i=O?.richDiff?.canToggleRichDiff&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.l.Item,{className:nD.A["hide-on-medium-up"],onSelect:O.onToggle,children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)("span",{className:O.isRichDiff?nL:void 0,children:(0,n.jsx)(E.CheckIcon,{})})}),"Source diff"]}),(0,n.jsxs)(v.l.Item,{className:nD.A["hide-on-medium-up"],onSelect:O.onToggle,children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)("span",{className:O.isRichDiff?void 0:nL,children:(0,n.jsx)(E.CheckIcon,{})})}),"Rich diff"]}),(0,n.jsx)(v.l.Divider,{className:nD.A["hide-on-medium-up"]})]}),g[1]=O,g[2]=i):i=g[2],g[3]!==C?(a=C&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nE.$,{...C}),(0,n.jsx)(v.l.Divider,{})]}),g[3]=C,g[4]=a):a=g[4],g[5]!==T?(s=T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.l.Item,{className:nD.A["hide-on-desktop"],onSelect:T,children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.CommentIcon,{})}),"Comment on this file"]}),(0,n.jsx)(v.l.Divider,{className:nD.A["hide-on-desktop"]})]}),g[5]=T,g[6]=s):s=g[6],g[7]!==I?(r=I&&(0,n.jsxs)(v.l.Item,{className:nD.A["hide-on-desktop"],onSelect:I,children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.CopyIcon,{})}),"Copy file name"]}),g[7]=I,g[8]=r):r=g[8],g[9]!==L||g[10]!==D?(o=D&&(0,n.jsxs)(v.l.Item,{className:nD.A["hide-on-desktop"],onSelect:D,children:[(0,n.jsx)(v.l.LeadingVisual,{children:L?(0,n.jsx)(E.FoldIcon,{}):(0,n.jsx)(E.UnfoldIcon,{})}),(0,n.jsx)("span",{children:L?"Collapse non-diff lines":"Expand all lines"})]}),g[9]=L,g[10]=D,g[11]=o):o=g[11],g[12]!==I||g[13]!==D?(d=(I||D)&&(0,n.jsx)(v.l.Divider,{className:nD.A["hide-on-desktop"]}),g[12]=I,g[13]=D,g[14]=d):d=g[14],g[15]!==x||g[16]!==_||g[17]!==b.name||g[18]!==b.ownerLogin?(c=(0,ix.nD_)({repo:b.name,owner:b.ownerLogin,filePath:_,commitish:x}),g[15]=x,g[16]=_,g[17]=b.name,g[18]=b.ownerLogin,g[19]=c):c=g[19];let B=void 0===y||y?void 0:"Action unavailable";return g[20]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.EyeIcon,{})}),g[20]=m):m=g[20],g[21]!==c||g[22]!==B?(u=(0,n.jsxs)(v.l.LinkItem,{href:c,inactiveText:B,children:[m,"View file"]}),g[21]=c,g[22]=B,g[23]=u):u=g[23],g[24]!==w||g[25]!==F||g[26]!==k||g[27]!==_||g[28]!==b.name||g[29]!==b.ownerLogin||g[30]!==R||g[31]!==$?(h=w&&$&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.l.LinkItem,{href:(0,ix.Nyd)({repo:b.name,owner:b.ownerLogin,filePath:_,commitish:w,returnToPrPath:R}),inactiveText:k?void 0:"Action unavailable",children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.PencilIcon,{})}),"Edit file"]}),(0,n.jsxs)(v.l.LinkItem,{variant:"danger",href:(0,ix.Y65)({repo:b.name,owner:b.ownerLogin,filePath:_,commitish:w}),inactiveText:F?void 0:"Action unavailable",children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.TrashIcon,{})}),"Delete file"]})]}),g[24]=w,g[25]=F,g[26]=k,g[27]=_,g[28]=b.name,g[29]=b.ownerLogin,g[30]=R,g[31]=$,g[32]=h):h=g[32],g[33]!==A||g[34]!==P?(f=A&&P&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.l.Divider,{className:nD.A["hide-on-desktop"]}),(0,n.jsxs)(v.l.LinkItem,{className:nD.A["hide-on-desktop"],href:P,children:[(0,n.jsx)(v.l.LeadingVisual,{children:(0,n.jsx)(E.ShieldLockIcon,{})}),A]})]}),g[33]=A,g[34]=P,g[35]=f):f=g[35],g[36]!==o||g[37]!==d||g[38]!==u||g[39]!==h||g[40]!==f||g[41]!==i||g[42]!==a||g[43]!==s||g[44]!==r?(p=(0,n.jsxs)(eU.W,{children:[t,(0,n.jsx)(eU.W.Overlay,{children:(0,n.jsxs)(v.l,{children:[i,a,s,r,o,d,u,h,f]})})]}),g[36]=o,g[37]=d,g[38]=u,g[39]=h,g[40]=f,g[41]=i,g[42]=a,g[43]=s,g[44]=r,g[45]=p):p=g[45],p}nO.displayName="BlobActionsMenu";function nA(e){let t,i,a,s,r,o,d,c=(0,l.c)(27),{basePath:m,inactive:u,inactiveTooltip:h,path:p,setIsCollapsed:g}=e,x=void 0!==u&&u,v=(0,j.Mv)(p);c[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:nF,onError:nP},c[0]=t):t=c[0];let{mutate:_}=function(e,t){let i,n,a,s,r=(0,l.c)(10),{onSuccess:o,onError:d}=t,c=`${e}/file_review`;return r[0]!==c?(i=async e=>{let{viewedStatus:t,path:i}=e,n=await (0,ew.Sr)(`${c}`,{method:t?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:i,viewed:t?"viewed":void 0,_method:t?void 0:"delete"}}),l=await n.json();if(n.ok)return l;throw Error(l.error||"Unknown error occurred",{cause:n.status})},r[0]=c,r[1]=i):i=r[1],r[2]!==o?(n=()=>{o()},r[2]=o,r[3]=n):n=r[3],r[4]!==d?(a=e=>{d(e)},r[4]=d,r[5]=a):a=r[5],r[6]!==i||r[7]!==n||r[8]!==a?(s={mutationFn:i,onSuccess:n,onError:a},r[6]=i,r[7]=n,r[8]=a,r[9]=s):s=r[9],(0,eh.n)(s)}(m,t),{setDiffViewed:b}=(0,j.Ud)(),w=(0,j.j5)(),{navigateToNext:y}=iK();c[1]!==x||c[2]!==w||c[3]!==v||c[4]!==y||c[5]!==p||c[6]!==b||c[7]!==g||c[8]!==_?(i=()=>{x||(_({viewedStatus:!v,path:p}),b(p,!v),w?y():g(!v))},c[1]=x,c[2]=w,c[3]=v,c[4]=y,c[5]=p,c[6]=b,c[7]=g,c[8]=_,c[9]=i):i=c[9];let S=i;c[10]!==v?(a=v?(0,n.jsx)(E.CheckboxFillIcon,{className:"color-fg-accent"}):(0,n.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),c[10]=v,c[11]=a):a=c[11];let N=a,C=v?"Viewed":"Not Viewed";c[12]!==N?(s=()=>N,c[12]=N,c[13]=s):s=c[13];let R=v&&"MarkAsViewedButton-module__viewed__k8dzo";c[14]!==R?(r=(0,f.$)(R,"MarkAsViewedButton-module__iconOnly__kEP4e"),c[14]=R,c[15]=r):r=c[15],c[16]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)("span",{className:nD.A["hide-on-mobile"],children:"Viewed"}),c[16]=o):o=c[16],c[17]!==S||c[18]!==x||c[19]!==v||c[20]!==C||c[21]!==s||c[22]!==r?(d=(0,n.jsx)(er.Q,{"aria-pressed":v,"aria-label":C,inactive:x,size:"small",variant:"default",leadingVisual:s,className:r,onClick:S,children:o}),c[17]=S,c[18]=x,c[19]=v,c[20]=C,c[21]=s,c[22]=r,c[23]=d):d=c[23];let T=d;if(!x||!h)return T;{let e;return c[24]!==T||c[25]!==h?(e=(0,n.jsx)(D.m,{text:h,children:T}),c[24]=T,c[25]=h,c[26]=e):e=c[26],e}}function nP(){}function nF(){}nA.displayName="MarkAsViewedButton";var nk=i(3654);async function n$({basePath:e,fullDiff:t,effectiveRange:i,path:n,signal:l}){let a=new URLSearchParams;a.append("path",n),i.baseOid===t.baseOid?a.append("range",i.headOid):a.append("range",`${i.baseOid}..${i.headOid}`);let s=`${e}/page_data/${em.uT.richDiff}?${a.toString()}`;try{let e=await (0,ew.Sr)(s,{signal:l});if(l?.aborted)return;let t=await (0,ef.hp)(e);return(0,ef.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var nB=i(61309);function nM(e,t){if(e.type!==t.type)return!1;let i="CONTEXT"===e.type||"ADDITION"===e.type,n="DELETION"===e.type;return i&&e.right===t.line||n&&e.left===t.line}function nq({diffSummary:e,commentPreference:t,lineSpacingPreference:i,isCollapsed:n,threadSizeInfoMap:l,isSplitView:a=!1}){let s=i===r.Ud.Compact?20:25;if(n)return 42;if(e?.linesChanged&&e.linesChanged>400)return 175;if(e?.changeType==="DELETED"||e?.changeType==="REMOVED")return 177;let o=e?Math.max(1,Math.ceil(e.linesChanged/5)):1,d=e?.changeType==="MODIFIED"?6*o*s:0,c=0,m=0;if(t===r.sI.Visible){let t=0;for(let i of Object.values(e?.markersMap||{})){for(let e of i.threads){if(!l){c+=500;continue}let t=l.get(e.id);if(t?.isCollapsed){c+=34;continue}let i=t?.replyCount??0,n=1+i;t?.estimatedLines?c+=32+32*n+48+48+24*t.estimatedLines+6*Math.max(0,n-1)+(32*n+16):(c+=272,i>0&&(c+=128*i,c+=6*i))}t+=i.annotations.length}m=t*(l?144:300)}let u=e?.linesChanged??1;e?.changeType==="ADDED"&&(u+=1);let h=s*u;return a&&(h=Math.ceil(.6*h)),42+h+c+m+d}function nV({diffManuallyExpanded:e,headBranchName:t,headRepoName:i,headRepoOwner:a,diffLines:s,path:r,isSelected:o=!1,reviewed:d,...c}){let m=(0,j.Kp)(),u=(0,j.JA)(),{fetchContextLines:h}=(0,j.QV)(),g=(0,j.L3)(),x=g.hideWhitespace?"1":"0",v=(0,j.RB)(),_=(0,j.lF)(),b=(0,j.ce)(),S=function(e){let t,i,n,a=(0,l.c)(11),{basePath:s,path:r}=e,o=(0,j.L3)();a[0]!==s||a[1]!==o||a[2]!==r?(t=function({basePath:e,effectiveRange:t,path:i}){return[em.uT.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${i}`]}({basePath:s,path:r,...o}),a[0]=s,a[1]=o,a[2]=r,a[3]=t):t=a[3];let d=t;a[4]!==s||a[5]!==o||a[6]!==r?(i={path:r,basePath:s,...o,signal:void 0},a[4]=s,a[5]=o,a[6]=r,a[7]=i):i=a[7];let c=i;return a[8]!==c||a[9]!==d?(n={fetcher:n$,key:d,args:c},a[8]=c,a[9]=d,a[10]=n):n=a[10],n}({basePath:m,path:r}),N=(0,p.useRef)(null),C=(0,p.useRef)(null),{helpUrl:R}=(0,nk.X)(),T=(0,j.kN)(r),{updateAllFilesCollapsedStatus:I,updateFileCollapsedStatus:D}=(0,j.JR)(),L=(0,j.GR)(),[O,P]=(0,p.useState)(!1),[F,k]=(0,p.useState)(c.richDiff?.defaultToRichDiff??!1),$=(0,j.Fm)(r),B=(0,p.useMemo)(()=>nq({diffSummary:$,commentPreference:_,lineSpacingPreference:b,isCollapsed:T}),[_,b,$,T]),M=(0,j.ne)(r),q=(0,y.dG)({basePath:m}),V=(0,y.hG)({diffPath:r,codeownersData:q?.data}),G=(0,p.useMemo)(()=>M?M.FILE?.threads??[]:[],[M]),z=(0,p.useMemo)(()=>u?function(e,t,i){let n=[],l=t.hunkPositions[i];if(!l)return n;let a=0,s=l[0];if(!s)return n;let r=!1;for(let t of e)if(r){if(n.push(t),nM(t,s.endLine)&&(r=!1,!(s=l[++a])))break}else nM(t,s.startLine)&&(r=!0,n.push(s.headerLine),n.push(t));return n}(s,u,r):s,[u,r,s]),U=(0,p.useCallback)(()=>{D(r,!1)},[r,D]),H=(0,p.useRef)(!0),W=(0,p.useCallback)(()=>{let e=L();e&&T&&M&&Object.values(M).some(t=>t.threads.some(t=>String(t.id)===String(e))||t.annotations.some(t=>String(t.id)===String(e)))&&U()},[T,U,L,M]),Q=(0,p.useCallback)(()=>{(0,w.K3)(),W()},[W]),K=(0,p.useCallback)(()=>{(0,iQ.o9)()===c.pathDigest&&T&&U()},[c.pathDigest,U,T]),Y=(0,p.useCallback)(()=>{W(),K(),H.current=!1},[W,K]);(0,p.useEffect)(()=>{Y()},[]),(0,p.useEffect)(()=>{if(!o){H.current=!0;return}H.current&&(K(),H.current=!1)},[K,o]),(0,p.useEffect)(()=>(A.cg?.addEventListener("hashchange",Y),()=>{A.cg?.removeEventListener("hashchange",Y)}),[Y]);let J=(0,p.useCallback)((e,t,i)=>{if(i&&i.altKey)I(e);else{if(D(t,e),!e)return;A.cg?.requestAnimationFrame(()=>{let e=N.current?.getBoundingClientRect();!e||e.top<60&&A.cg?.scrollTo({top:e.top+A.cg.scrollY-60})})}},[I,D]),X=(0,p.useRef)((0,nB.B)({diffSummary:$})),[Z,ee]=(0,p.useState)(!1),et=(0,p.useCallback)(async e=>{Q(),X.current.push(e),h({contextLineRanges:X.current,path:r,w:x})},[Q,h,r,x]),en=(0,p.useCallback)(async()=>{await h({contextLineRanges:[],path:r})},[h,r]),el=(0,p.useMemo)(()=>{if(c.isBinary||c.isSubmodule||c.isTooBig||(0,nN.dK)({linesChanged:c.linesChanged,newTreeEntry:c.newTreeEntry,oldTreeEntry:c.oldTreeEntry,status:c.status,truncatedReason:c.truncatedReason}))return!1;if(Z)return!0;if(0===z.length)return!1;if((z[1]?.blobLineNumber||0)>1)return!0;let e=z.length,t=z[e-1]?.blobLineNumber||0,i=c.newTreeEntry?.lineCount||0;return!!(t<i)||!!(e-1<i)},[c.isBinary,c.isSubmodule,c.isTooBig,c.linesChanged,c.newTreeEntry,c.oldTreeEntry,c.status,c.truncatedReason,z,Z]),ea=(0,p.useCallback)(async()=>{let e,t;X.current=[],Z||X.current.push({start:1,end:Math.max(c.oldTreeEntry?.lineCount??0,c.newTreeEntry?.lineCount??0)});let i=document.activeElement;await h({contextLineRanges:X.current,path:r,w:x}),ee(!Z),i&&(e=null,t=null,i&&(i.hasAttribute("data-grid-cell-id")&&(e=i.getAttribute("data-grid-cell-id")),i.hasAttribute("data-file-path")&&(t=i.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},[Z,c.oldTreeEntry?.lineCount,c.newTreeEntry?.lineCount,h,r,x]),es=(0,p.useCallback)(()=>k(!F),[F]),er=(0,p.useMemo)(()=>c.richDiff?.canToggleRichDiff?{richDiff:c.richDiff,isRichDiff:F,onToggle:es}:void 0,[c.richDiff,F,es]),eo=(0,p.useMemo)(()=>V&&(V.isOwnedByViewer||V.owners.length>0)?nI(V.isOwnedByViewer,V.owners,void 0,v.login):void 0,[V,v.login]),ed=V?.ruleUrl,ec=v.canComment?()=>P(!0):void 0,eu=(0,p.useCallback)(()=>navigator.clipboard?.writeText(r),[r]),eh=el?ea:void 0,ef=(0,p.useMemo)(()=>({richDiff:c.richDiff,showRichDiff:F,onToggleRichDiff:k,queryConfig:S}),[c.richDiff,F,S]),ep=(0,p.useMemo)(()=>{let e=new Set([]);return u&&e.add(nR.YR.diffStats).add(nR.YR.expandLines),g.fullDiff.headOid!==g.effectiveRange.headOid&&e.add(nR.YR.markAsViewed),e},[u,g.effectiveRange.headOid,g.fullDiff.headOid]),{disabledFeatures:eg,disabledReasons:ex}=(0,p.useMemo)(()=>{let e=new Set([]),t=new Map;return u&&(e.add(nR.YR.markAsViewed),t.set(nR.YR.markAsViewed,"This file can only be marked as viewed on the \u201CAll files\u201D page")),{disabledFeatures:e,disabledReasons:t}},[u]);return(0,n.jsx)(nC.oO,{loadDiff:en,...c,currentUser:v,addFileCommentButtonRef:C,diffManuallyExpanded:e,estimatedDiffHeight:B,fileComments:G,hiddenFeatures:ep,isAddingFileComment:O,isSelected:o,leftSideContent:(0,n.jsx)(nT,{className:(0,f.$)("px-1 flex-items-center flex-order-2 flex-sm-order-1",nD.A["hide-on-mobile"]),diffPath:r,pullRequestBasePath:m,viewerLogin:v.login}),rightSideContent:(0,n.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[!ep.has(nR.YR.markAsViewed)&&(0,n.jsx)(nA,{path:r,basePath:m,inactive:eg.has(nR.YR.markAsViewed)||!!u,inactiveTooltip:ex.get(nR.YR.markAsViewed),setIsCollapsed:e=>J(e,r)}),v.canComment&&(0,n.jsx)(ei.K,{ref:C,icon:E.CommentIcon,"aria-label":"Comment on this file","aria-expanded":O,variant:"invisible",size:"small",onClick:e=>{T&&J(!1,r),P(!0),e.stopPropagation()},className:nD.A["hide-on-mobile"]}),(0,n.jsx)(nO,{oid:"REMOVED"===c.status&&c.oldCommitOid?c.oldCommitOid:c.newCommitOid||"",path:r,repo:{name:i||c.repository.name,ownerLogin:a||c.repository.ownerLogin},isViewable:!c.isSubmodule,isDeleteable:!c.isSubmodule,isEditable:!c.isSubmodule,shouldShowEditOptions:v.shouldDisplayEditOptions,branchName:t,returnToPullRequestPath:m,onCommentOnFile:ec,onCopyPath:eu,onExpandLines:eh,areLinesExpanded:Z,richDiffToggle:er,codeownersText:eo,codeownersUrl:ed})]}),canExpandOrCollapseLines:el,expandAllContextLines:ea,hasExpandedAllRanges:Z,addInjectedContextLines:et,onToggleCollapse:(e,t)=>J(t,r,e),path:r,ref:N,setIsAddingFileComment:P,collapsed:T,helpUrl:R,linesAdded:$?.linesAdded||c.linesAdded||0,linesChanged:$?.linesChanged||c.linesChanged||0,linesDeleted:$?.linesDeleted||c.linesDeleted||0,diffLines:z,richDiffState:ef})}nV.displayName="PullRequestDiff";var nG=i(35044),nz=i(67662);let nU=(0,p.memo)(function(e){let t,i,a,r,o,d,c,m,u=(0,l.c)(15),{ariaLabel:h,testId:f,id:p,approximateLineCount:g,approximateDiffHeight:x,maximumSkeletonHeight:v}=e,{data:_}=(0,s.ID)(),b=_?.lineSpacing==="compact"?20:25,w=x??b*(void 0===g?5:g),y=v?Math.min(w,v):w;return u[0]!==f?(t=(0,nG.G)(f),u[0]=f,u[1]=t):t=u[1],u[2]!==y?(i={minHeight:y},u[2]=y,u[3]=i):i=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(nb.O,{height:"sm",variant:"rounded",width:"random"}),r=(0,n.jsx)(nb.O,{height:"sm",variant:"rounded",width:"random"}),o=(0,n.jsx)(nb.O,{height:"sm",variant:"rounded",width:"random"}),d=(0,n.jsx)(nb.O,{height:"sm",variant:"rounded",width:"random"}),u[4]=a,u[5]=r,u[6]=o,u[7]=d):(a=u[4],r=u[5],o=u[6],d=u[7]),u[8]!==i?(c=(0,n.jsx)("div",{className:"border borderColor-muted",children:(0,n.jsxs)("div",{className:"d-flex flex-column gap-2 pr-p-3",style:i,children:[a,r,o,d]})}),u[8]=i,u[9]=c):c=u[9],u[10]!==h||u[11]!==p||u[12]!==t||u[13]!==c?(m=(0,n.jsx)("div",{className:nz.A.diffTargetable,role:"region","aria-label":h,...t,id:p,children:c}),u[10]=h,u[11]=p,u[12]=t,u[13]=c,u[14]=m):m=u[14],m});nU.displayName="DiffEntryLoadingSkeleton";let nH=(0,p.memo)(function(e){let t,i,a,s,r=(0,l.c)(13),{progressiveDiffEntry:o,approximateLineCount:d}=e,c=void 0===d?5:d,{loadPriority:m}=(0,j.pV)();r[0]!==m||r[1]!==o.pathDigest?(t=e=>{e[0]?.isIntersecting&&m(o.pathDigest)},r[0]=m,r[1]=o.pathDigest,r[2]=t):t=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(i={rootMargin:"-150px"},r[3]=i):i=r[3];let[u,h]=(0,iO.B)(t,i),f=`Loading ${o.path}`,p=`lazy-load-${o.path}`,g=`diff-${o.pathDigest}`;return r[4]!==c||r[5]!==f||r[6]!==p||r[7]!==g?(a=(0,n.jsx)(nU,{ariaLabel:f,testId:p,id:g,approximateLineCount:c}),r[4]=c,r[5]=f,r[6]=p,r[7]=g,r[8]=a):a=r[8],r[9]!==u||r[10]!==a||r[11]!==h?(s=(0,n.jsx)(iA.X,{onObserve:u,onUnobserve:h,children:a}),r[9]=u,r[10]=a,r[11]=h,r[12]=s):s=r[12],s});nH.displayName="LazyDiffEntryLoadingSkeleton";let nW=(0,p.memo)(function(e){let t,i=(0,l.c)(9),{linesAdded:a,linesChanged:s,linesDeleted:r,newTreeEntry:o,oldTreeEntry:d,path:c,pathDigest:m,status:u}=e;return i[0]!==a||i[1]!==s||i[2]!==r||i[3]!==o||i[4]!==d||i[5]!==c||i[6]!==m||i[7]!==u?(t=(0,n.jsx)(nC.Ao,{linesAdded:a,linesChanged:s,linesDeleted:r,newTreeEntry:o,oldTreeEntry:d,path:c,pathDigest:m,status:u}),i[0]=a,i[1]=s,i[2]=r,i[3]=o,i[4]=d,i[5]=c,i[6]=m,i[7]=u,i[8]=t):t=i[8],t});nW.displayName="PullRequestDiffEntryErrorFallback";var nQ=i(67515),nK=i(71313);let nY=(0,p.memo)(nJ);function nJ(e){let t,i,a,s,r,o=(0,l.c)(59),{diffManuallyExpanded:d,headBranchName:c,headRepoName:m,headRepoOwner:u,onScrollToAndFocusEntry:h,pathDigest:g,pullRequestGlobalRelayId:x,repository:v,testRenderFn:_}=e,b=(0,j.Py)(g),w=(0,j.if)(g),y=(0,j.jT)(w?.path),S=(0,j.Fm)(w?.path),N=(0,j.j5)();_&&_();let C=(0,p.useRef)(!1);if(o[0]!==b||o[1]!==h||o[2]!==w?(t=()=>{if(C.current||!w)return;let e=A.fV.hash??"",t=(0,iQ.pd)(e)??"";if((t=t.replace("diff-","").replace("#",""))!==w.pathDigest&&(C.current=!0),!b||w.isLoaded){if(b){let e=A.cg?.location.hash.substring(1)??"";if(!(0,iQ.yI)(e)||w.isLoaded){let e=A.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;h(w.pathDigest)}}C.current=!0}},i=[b,h,w],o[0]=b,o[1]=h,o[2]=w,o[3]=t,o[4]=i):(t=o[3],i=o[4]),(0,p.useEffect)(t,i),!w)return null;if(!w.isLoaded){let e,t,i,l,a=S?.linesChanged??5;(S?.changeType==="REMOVED"||S?.changeType==="DELETED")&&(a=5);let s=`diff-${w.pathDigest}`;o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,f.$)(nz.A.diffTargetable,nz.A.diff),o[5]=e):e=o[5];let r=`${w.pathDigest}_${w.path}`,d=`#diff-${w.pathDigest}`,c=S?.linesAdded??0,m=S?.linesChanged??0,u=S?.linesDeleted??0;return o[6]!==N||o[7]!==w.path||o[8]!==d||o[9]!==c||o[10]!==m||o[11]!==u?(t=(0,n.jsx)("div",{className:nz.A.diffHeaderWrapper,children:(0,n.jsx)(nQ.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:d,canToggleRichDiff:!1,linesAdded:c,linesChanged:m,linesDeleted:u,newPath:w.path,patchStatus:"",path:w.path,onToggleExpandAllLines:nK.l,onToggleFileCollapsed:nK.l,onToggleDiffDisplay:nK.l,isInSingleFileMode:N})}),o[6]=N,o[7]=w.path,o[8]=d,o[9]=c,o[10]=m,o[11]=u,o[12]=t):t=o[12],o[13]!==a||o[14]!==w?(i=(0,n.jsx)(nH,{progressiveDiffEntry:w,approximateLineCount:a}),o[13]=a,o[14]=w,o[15]=i):i=o[15],o[16]!==b||o[17]!==t||o[18]!==i||o[19]!==s||o[20]!==r?(l=(0,n.jsxs)("div",{role:"region",id:s,className:e,"data-targeted":b,children:[t,i]},r),o[16]=b,o[17]=t,o[18]=i,o[19]=s,o[20]=r,o[21]=l):l=o[21],l}if(!y){let e;return o[22]!==w.path||o[23]!==w.pathDigest?(e=(0,n.jsx)(nW,{linesAdded:0,linesChanged:0,linesDeleted:0,path:w.path,pathDigest:w.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),o[22]=w.path,o[23]=w.pathDigest,o[24]=e):e=o[24],e}o[25]!==y?(a=(0,n.jsx)(nW,{...y}),o[25]=y,o[26]=a):a=o[26];let R=y.reviewed??!1;return o[27]!==y.diffLines||o[28]!==y.diffSize||o[29]!==y.helpUrl||o[30]!==y.isBinary||o[31]!==y.isSubmodule||o[32]!==y.isTooBig||o[33]!==y.linesAdded||o[34]!==y.linesChanged||o[35]!==y.linesDeleted||o[36]!==y.newCommitOid||o[37]!==y.newTreeEntry||o[38]!==y.objectId||o[39]!==y.oldCommitOid||o[40]!==y.oldTreeEntry||o[41]!==y.path||o[42]!==y.pathDigest||o[43]!==y.richDiff||o[44]!==y.status||o[45]!==y.submodule||o[46]!==y.truncatedReason||o[47]!==d||o[48]!==c||o[49]!==m||o[50]!==u||o[51]!==b||o[52]!==x||o[53]!==v||o[54]!==R?(s=(0,n.jsx)(nV,{changeType:y.status,diffLines:y.diffLines,diffManuallyExpanded:d,diffSize:y.diffSize,headBranchName:c,headRepoName:m,headRepoOwner:u,helpUrl:y.helpUrl,isBinary:y.isBinary,isSelected:b,isSubmodule:y.isSubmodule,isTooBig:y.isTooBig,linesAdded:y.linesAdded,linesChanged:y.linesChanged,linesDeleted:y.linesDeleted,newCommitOid:y.newCommitOid,newTreeEntry:y.newTreeEntry,objectId:y.objectId,oldCommitOid:y.oldCommitOid,oldTreeEntry:y.oldTreeEntry,path:y.path,pathDigest:y.pathDigest,pullRequestGlobalRelayId:x,repository:v,reviewed:R,richDiff:y.richDiff,status:y.status,submodule:y.submodule,truncatedReason:y.truncatedReason}),o[27]=y.diffLines,o[28]=y.diffSize,o[29]=y.helpUrl,o[30]=y.isBinary,o[31]=y.isSubmodule,o[32]=y.isTooBig,o[33]=y.linesAdded,o[34]=y.linesChanged,o[35]=y.linesDeleted,o[36]=y.newCommitOid,o[37]=y.newTreeEntry,o[38]=y.objectId,o[39]=y.oldCommitOid,o[40]=y.oldTreeEntry,o[41]=y.path,o[42]=y.pathDigest,o[43]=y.richDiff,o[44]=y.status,o[45]=y.submodule,o[46]=y.truncatedReason,o[47]=d,o[48]=c,o[49]=m,o[50]=u,o[51]=b,o[52]=x,o[53]=v,o[54]=R,o[55]=s):s=o[55],o[56]!==a||o[57]!==s?(r=(0,n.jsx)(J.t,{boundaryName:"ProgressivePullRequestDiffEntry",fallback:a,children:s}),o[56]=a,o[57]=s,o[58]=r):r=o[58],r}function nX(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,n.jsxs)(tx.E,{border:!1,spacious:!0,children:[(0,n.jsx)(tx.E.Heading,{children:"No changes to show"}),(0,n.jsx)(tx.E.Description,{children:"This commit does not include any file changes"})]})}),t[0]=e):e=t[0],e}nY.displayName="ProgressivePullRequestDiffEntry",nJ.displayName="ProgressivePullRequestDiffEntryUnmemoized",nX.displayName="EmptyPullRequestBlankSlate";let nZ="PullRequestDiffsAnimation-module__image__QGO_1";var n0=i(58899);let n1=i.p+"mona-hifive-first-frame-58169f519261f77f.png",n2=i.p+"mona-hifive-reduced-motion-9b520254f7177e5d.png",n3=i.p+"mona-hifive-loop-once-454eda737f401d20.gif",n4=()=>{let e,t,i,a,s,r,o,d,c=(0,l.c)(12),m=(0,n0.j)(),u=(0,p.useRef)(null),h=(0,p.useRef)(null);c[0]!==m?(e=e=>{e?(e=>{let t;if(m)return;let i=new IntersectionObserver((e,i)=>{for(let n of e)n.isIntersecting&&(t=setTimeout(()=>{n.target.style.display="none",u.current&&(u.current.style.opacity="1"),i.unobserve(n.target)},1e3))},{threshold:1});return h.current=i,i.observe(e),()=>{i.disconnect(),t&&clearTimeout(t)}})(e):h.current&&(h.current.disconnect(),h.current=null)},c[0]=m,c[1]=e):e=c[1];let g=e;return c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("img",{src:n3,alt:"GIF of two octocats high fiving each other",className:(0,f.$)(nZ,"PullRequestDiffsAnimation-module__animatedImage__WVc05"),ref:u}),c[2]=t):t=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,f.$)(nZ,"PullRequestDiffsAnimation-module__firstFrameImage___zKPt"),c[3]=i):i=c[3],c[4]!==g?(a=(0,n.jsx)("img",{src:n1,alt:"Two octocats",className:i,ref:g}),c[4]=g,c[5]=a):a=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("img",{src:n2,alt:"Two octocats high fiving each other",className:(0,f.$)(nZ,"PullRequestDiffsAnimation-module__reducedMotionImage__yLrW_")}),c[6]=s):s=c[6],c[7]!==a?(r=(0,n.jsxs)("div",{className:"PullRequestDiffsAnimation-module__imageContainer__JAgFR",children:[t,a,s]}),c[7]=a,c[8]=r):r=c[8],c[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"}),c[9]=o):o=c[9],c[10]!==r?(d=(0,n.jsxs)("div",{className:"PullRequestDiffsAnimation-module__wrapper__RIPWW",children:[r,o]}),c[10]=r,c[11]=d):d=c[11],d};n4.displayName="PullRequestDiffsAnimationComponent";let n5=(0,p.memo)(n4);n5.displayName="PullRequestDiffsAnimation";let n6="diff-";function n7(){let e,t,i,n,a,s,r=(0,l.c)(6),o=(0,p.useRef)(!0);r[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,r[0]=e):e=r[0];let d=(0,p.useRef)(e);r[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=d.current;return()=>{e.clear()}},i=[],r[1]=t,r[2]=i):(t=r[1],i=r[2]),(0,p.useEffect)(t,i),r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>d.current,r[3]=n):n=r[3];let c=n;r[4]===Symbol.for("react.memo_cache_sentinel")?(a=(e,t)=>{var i,n;let{focusPathName:l}=void 0===t?{}:t,a=c().get(e);if(!a)return;let s=a,r=a.querySelector("button");l&&(r=a.querySelector("a"));let d="string"==typeof(n=i=A.cg?.location.hash.substring(1)??"")&&n.startsWith(n6)?i.slice(n6.length):"";if((0,iQ.yI)(d)){let e=d.split("-")[0],t=a.querySelector(`[data-line-anchor=diff-${e}]`);t&&(r=s=t)}else o.current||(s=null);if(s){let e=A.cg?.scrollY??0,t=s.getBoundingClientRect().top+e-57-60;A.cg?.scrollTo({top:t,left:0})}r&&r.focus(),o.current=!1},r[4]=a):a=r[4];let m=a;return r[5]===Symbol.for("react.memo_cache_sentinel")?(s={onScrollToAndFocusEntry:m,getTargetableEntriesMap:c},r[5]=s):s=r[5],s}let n8=(0,p.memo)(n9);function n9(e){let t,i,a,s,r,o,d,c=(0,l.c)(35),{headBranchName:m,headRepoName:u,headRepoOwner:h,onSetFilterState:f,pullRequestGlobalRelayId:g,repository:x,showPullRequestGroups:v}=e,[_]=(0,p.useState)(!1),b=(0,p.useRef)(null),w=(0,j.yg)(),y=(0,j.JA)(),{startQueue:S}=(0,j.pV)();c[0]!==S?(t=()=>{S({autoLoadAllDiffs:!0})},i=[S],c[0]=S,c[1]=t,c[2]=i):(t=c[1],i=c[2]),(0,p.useEffect)(t,i);let{onScrollToAndFocusEntry:N,getTargetableEntriesMap:C}=n7(),R=(0,j.qg)(),T=w.length>=15;if(0===R){let e;return c[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(nX,{}),c[3]=e):e=c[3],e}if(0===w.length){let e;return c[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(nS,{}),c[4]=e):e=c[4],e}if(c[5]!==y||c[6]!==f||c[7]!==v?(a=v&&y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,n.jsx)("span",{className:"fgColor-accent",children:(0,n.jsx)(L.A,{href:"",onClick:e=>{e.preventDefault(),f({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,n.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",y.name]}),y.description?.trim()?(0,n.jsx)("p",{children:y.description}):null]}):null,c[5]=y,c[6]=f,c[7]=v,c[8]=a):a=c[8],c[9]!==w||c[10]!==_||c[11]!==C||c[12]!==m||c[13]!==u||c[14]!==h||c[15]!==N||c[16]!==g||c[17]!==x){let e;c[19]!==_||c[20]!==C||c[21]!==m||c[22]!==u||c[23]!==h||c[24]!==N||c[25]!==g||c[26]!==x?(e=e=>(0,n.jsx)("div",{ref:t=>{let i=C();return t?i.set(e,t):i.delete(e),()=>{i.delete(e)}},children:(0,n.jsx)(nY,{diffManuallyExpanded:_,headBranchName:m,headRepoName:u,headRepoOwner:h,pullRequestGlobalRelayId:g,onScrollToAndFocusEntry:N,pathDigest:e,repository:x})},e),c[19]=_,c[20]=C,c[21]=m,c[22]=u,c[23]=h,c[24]=N,c[25]=g,c[26]=x,c[27]=e):e=c[27],s=w.map(e),c[9]=w,c[10]=_,c[11]=C,c[12]=m,c[13]=u,c[14]=h,c[15]=N,c[16]=g,c[17]=x,c[18]=s}else s=c[18];return c[28]!==T?(r=T&&(0,n.jsx)(n5,{}),c[28]=T,c[29]=r):r=c[29],c[30]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(nj.nq,{}),c[30]=o):o=c[30],c[31]!==a||c[32]!==s||c[33]!==r?(d=(0,n.jsxs)("div",{ref:b,"data-hpc":!0,"data-testid":"progressive-diffs-list",className:"d-flex flex-column gap-3",children:[a,s,r,o]}),c[31]=a,c[32]=s,c[33]=r,c[34]=d):d=c[34],d}n8.displayName="PullRequestDiffsList",n9.displayName="PullRequestDiffsListUnmemoized";let le=(0,p.memo)(function(e){let t,i,n,a=(0,l.c)(12),{virtualizer:s,virtualItems:r,pathDigestToIndex:o,diffEntryDigests:d,getProgressiveDiffEntry:c,loadManyPriority:m}=e,u=(0,j.m9)(),h=(0,p.useRef)(null);a[0]!==c||a[1]!==u?(t=!!u&&c(u)?.isLoaded===!0,a[0]=c,a[1]=u,a[2]=t):t=a[2];let f=t;return a[3]!==d||a[4]!==m||a[5]!==o||a[6]!==u||a[7]!==f||a[8]!==r||a[9]!==s?(i=()=>{if(!u){h.current=null;return}if(h.current===u)return;let e=o.get(u);if(void 0===e)return;if(!f)return void m([d[e-2],d[e-1],d[e]].filter(lt));let t=r.find(t=>t.index===e);if(t&&t.start>=(s.scrollOffset??0)-t.size&&t.start<=(s.scrollOffset??0)+(s.scrollRect?.height??0)){h.current=u;return}requestAnimationFrame(()=>{s.scrollToIndex(e,{align:"start"})}),h.current=u},n=[u,o,s,r,f,m,d],a[3]=d,a[4]=m,a[5]=o,a[6]=u,a[7]=f,a[8]=r,a[9]=s,a[10]=i,a[11]=n):(i=a[10],n=a[11]),(0,p.useEffect)(i,n),null});function lt(e){return void 0!==e}le.displayName="ScrollToSelectedDiff";var li=i(36895),ln=i(51220);let ll="PullRequestVirtualizedDiffRow-module__virtualizedDiffRow__LvCLz",la="u">typeof navigator&&/firefox/i.test(navigator.userAgent),ls=(0,p.memo)(function(e){let t,i,a,s,r=(0,l.c)(69),{virtualRow:o,virtualizedDiffEntry:d,diffEntry:c,diffSummary:m,scrollMargin:u,measureElement:h,headBranchName:f,headRepoName:p,headRepoOwner:g,pullRequestGlobalRelayId:x,repository:v,virtualWindowHeight:_,isOptimizedMeasurementEnabled:b}=e,w=(0,j.Py)(c?.pathDigest),y=(0,j.lF)(),S=(0,j.ce)(),N=(0,j.kN)(d?.path??""),C=!d?.isLoaded||!c;if(!d)return null;let R=o.start-u;r[0]===Symbol.for("react.memo_cache_sentinel")?(t=la,r[0]=t):t=r[0];let T=t;r[1]!==R?(i=T?{top:`${R}px`}:{transform:`translateY(${R}px)`},r[1]=R,r[2]=i):i=r[2];let I=i,E=T?0:-R;if(C){let e,t,i,l,a,s;r[3]!==y||r[4]!==m||r[5]!==N||r[6]!==S?(e=nq({diffSummary:m,commentPreference:y,lineSpacingPreference:S,isCollapsed:N}),r[3]=y,r[4]=m,r[5]=N,r[6]=S,r[7]=e):e=r[7];let c=e,u=b?void 0:h,f=`${E}px`;r[8]!==f?(t={"--header-sticky-offset":f},r[8]=f,r[9]=t):t=r[9];let p=`#diff-${d.pathDigest}`,g=m?.linesAdded??0,x=m?.linesChanged??0,v=m?.linesDeleted??0,w=m?.changeType??"";r[10]!==v||r[11]!==w||r[12]!==p||r[13]!==g||r[14]!==x||r[15]!==d.path?(i=(0,n.jsx)(nQ.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:p,canToggleRichDiff:!1,linesAdded:g,linesChanged:x,linesDeleted:v,newPath:d.path,patchStatus:w,path:d.path,onToggleExpandAllLines:nK.l,onToggleFileCollapsed:nK.l,onToggleDiffDisplay:nK.l,isInSingleFileMode:!1}),r[10]=v,r[11]=w,r[12]=p,r[13]=g,r[14]=x,r[15]=d.path,r[16]=i):i=r[16],r[17]!==i||r[18]!==t?(l=(0,n.jsx)("div",{className:nz.A.diffHeaderWrapper,style:t,children:i}),r[17]=i,r[18]=t,r[19]=l):l=r[19];let j=`Loading ${d.path}`,C=`lazy-load-${d.path}`,R=`diff-${d.pathDigest}`,T=_?.8*_:void 0;return r[20]!==c||r[21]!==j||r[22]!==C||r[23]!==R||r[24]!==T?(a=(0,n.jsx)(nU,{ariaLabel:j,testId:C,id:R,approximateDiffHeight:c,maximumSkeletonHeight:T}),r[20]=c,r[21]=j,r[22]=C,r[23]=R,r[24]=T,r[25]=a):a=r[25],r[26]!==c||r[27]!==l||r[28]!==a||r[29]!==u||r[30]!==o.index||r[31]!==I||r[32]!==d.pathDigest?(s=(0,n.jsxs)("div",{style:I,className:ll,ref:u,"data-index":o.index,"data-path-digest":d.pathDigest,"data-estimated-height":c,children:[l,a]}),r[26]=c,r[27]=l,r[28]=a,r[29]=u,r[30]=o.index,r[31]=I,r[32]=d.pathDigest,r[33]=s):s=r[33],s}let D=c.reviewed??!1;return r[34]!==f||r[35]!==p||r[36]!==g||r[37]!==E||r[38]!==w||r[39]!==c.diffLines||r[40]!==c.diffSize||r[41]!==c.helpUrl||r[42]!==c.isBinary||r[43]!==c.isSubmodule||r[44]!==c.isTooBig||r[45]!==c.linesAdded||r[46]!==c.linesChanged||r[47]!==c.linesDeleted||r[48]!==c.newCommitOid||r[49]!==c.newTreeEntry||r[50]!==c.objectId||r[51]!==c.oldCommitOid||r[52]!==c.oldTreeEntry||r[53]!==c.path||r[54]!==c.pathDigest||r[55]!==c.richDiff||r[56]!==c.status||r[57]!==c.submodule||r[58]!==c.truncatedReason||r[59]!==x||r[60]!==v||r[61]!==D?(a=(0,n.jsx)(nV,{changeType:c.status,diffLines:c.diffLines,diffManuallyExpanded:!1,diffSize:c.diffSize,headerStickyOffset:E,headBranchName:f,headRepoName:p,headRepoOwner:g,helpUrl:c.helpUrl,isBinary:c.isBinary,isSelected:w,isSubmodule:c.isSubmodule,isTooBig:c.isTooBig,linesAdded:c.linesAdded,linesChanged:c.linesChanged,linesDeleted:c.linesDeleted,newCommitOid:c.newCommitOid,newTreeEntry:c.newTreeEntry,objectId:c.objectId,oldCommitOid:c.oldCommitOid,oldTreeEntry:c.oldTreeEntry,path:c.path,pathDigest:c.pathDigest,pullRequestGlobalRelayId:x,repository:v,reviewed:D,richDiff:c.richDiff,status:c.status,submodule:c.submodule,truncatedReason:c.truncatedReason}),r[34]=f,r[35]=p,r[36]=g,r[37]=E,r[38]=w,r[39]=c.diffLines,r[40]=c.diffSize,r[41]=c.helpUrl,r[42]=c.isBinary,r[43]=c.isSubmodule,r[44]=c.isTooBig,r[45]=c.linesAdded,r[46]=c.linesChanged,r[47]=c.linesDeleted,r[48]=c.newCommitOid,r[49]=c.newTreeEntry,r[50]=c.objectId,r[51]=c.oldCommitOid,r[52]=c.oldTreeEntry,r[53]=c.path,r[54]=c.pathDigest,r[55]=c.richDiff,r[56]=c.status,r[57]=c.submodule,r[58]=c.truncatedReason,r[59]=x,r[60]=v,r[61]=D,r[62]=a):a=r[62],r[63]!==c.pathDigest||r[64]!==h||r[65]!==a||r[66]!==o.index||r[67]!==I?(s=(0,n.jsx)("div",{style:I,className:ll,ref:h,"data-index":o.index,"data-path-digest":c.pathDigest,children:a}),r[63]=c.pathDigest,r[64]=h,r[65]=a,r[66]=o.index,r[67]=I,r[68]=s):s=r[68],s});ls.displayName="MemoizedVirtualizedDiffRow";function lr({headBranchName:e,headRepoName:t,headRepoOwner:i,onSetFilterState:l,pullRequestGlobalRelayId:a,repository:s,showPullRequestGroups:r}){let d=(0,j.lF)(),c=(0,j.ce)(),m=(0,j.zJ)(),u=(0,p.useRef)(null),[h,f]=(0,p.useState)(0),g=(0,j.yg)(),x=(0,j.gg)(),v=(0,j.JA)(),{startQueue:_,loadManyPriority:b}=(0,j.pV)(),w=(0,j.qg)(),y=(0,j.l0)(),S=(0,j.HZ)(),N=(0,j.xQ)(),C=g.length,R=(0,j.y)(),T=(0,o.G7)("pull_request_files_debug_virtualization"),I=(0,o.G7)("pull_request_files_accurate_size_estimates"),E=(0,o.G7)("pull_request_virtualization_preload_diffs");(0,p.useEffect)(()=>{_()},[_]);let D=(0,p.useCallback)(e=>{let t=g[e];if(!t)return 0;let i=x(t);return i?nq({diffSummary:y[i.path??""],commentPreference:d,lineSpacingPreference:c,isCollapsed:R(i.path??""),threadSizeInfoMap:I?N:void 0,isSplitView:I&&"split"===m}):0},[x,g,y,R,d,c,I,N,m]),O=(0,p.useCallback)(e=>g[e]??e,[g]);(0,p.useEffect)(()=>{u.current&&f(u.current.offsetTop)},[]);let A=(0,p.useMemo)(()=>S&&Object.keys(S).length===w?5:0,[S,w]),P=(0,p.useMemo)(()=>{let e=new Map;for(let t=0;t<g.length;t++){let i=g[t];i&&e.set(i,t)}return e},[g]),F=(0,p.useCallback)(e=>{let t=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),i=t?P.get(t)??-1:-1;if(i<0)return(0,li.vp)(e);let n=new Set((0,li.vp)(e));return n.add(i),Array.from(n).sort((e,t)=>e-t)},[P]),k=(0,ln.XW)({count:g.length,estimateSize:D,getItemKey:O,overscan:A,scrollPaddingStart:70,scrollMargin:h,gap:16,rangeExtractor:F,debug:T,onChange(e){e.shouldAdjustScrollPositionOnItemSizeChange=(e,t,i)=>!1}}),$=k.getVirtualItems();return((0,p.useEffect)(()=>{if(E){if(0===$.length)return;let e=$[0]?.index??0,t=$[$.length-1]?.index??0,i=Math.max(0,e-5),n=Math.min(g.length,t+5+1);b(g.slice(i,n).filter(e=>void 0!==e))}else b($.map(e=>e.key))},[E,b,$,g]),0===w)?(0,n.jsx)(nX,{}):0===g.length?(0,n.jsx)(nS,{}):(0,n.jsxs)("div",{ref:u,"data-hpc":!0,"data-testid":"virtualized-diffs-list",className:"d-flex flex-column gap-3",children:[r&&v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,n.jsx)("span",{className:"fgColor-accent",children:(0,n.jsx)(L.A,{href:"",onClick:e=>{e.preventDefault(),l({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,n.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",v.name]}),v.description?.trim()?(0,n.jsx)("p",{children:v.description}):null]}):null,(0,n.jsx)("div",{className:"PullRequestVirtualizedDiffsList-module__virtualized-diff-row__fZopz",style:{height:`${k.getTotalSize()}px`},children:$.map(l=>{let r=g[l.index];if(!r)return null;let o=x(r);return(0,n.jsx)(ls,{virtualRow:l,virtualizedDiffEntry:o,diffEntry:S[o?.path??""],diffSummary:y[o?.path??""],scrollMargin:k.options.scrollMargin,measureElement:k.measureElement,headBranchName:e,headRepoName:t,headRepoOwner:i,pullRequestGlobalRelayId:a,repository:s,virtualWindowHeight:k.scrollRect?.height},l.key)})}),C>=15&&(0,n.jsx)(n5,{}),(0,n.jsx)(le,{virtualizer:k,virtualItems:$,pathDigestToIndex:P,diffEntryDigests:g,getProgressiveDiffEntry:x,loadManyPriority:b}),(0,n.jsx)(nj.nq,{})]})}lr.displayName="PullRequestVirtualizedDiffsList";var lo=i(81472),ld=i(17510),lc=i(8077),lm=i(92564),lu=i(32222);function lh(e){let t,i,a,s,r,o,d,m,u,h,f,p,g,x,v,_,w,y,j,S,N,C,R,T,I=(0,l.c)(79),{commit:D,pullRequest:O,commits:A,repository:P}=e;I[0]!==A?(t=void 0===A?[]:A,I[0]=A,I[1]=t):t=I[1];let F=t,{helpUrl:k}=(0,nk.X)();e:{let e,t,n;if(0===F.length){let e;I[2]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},I[2]=e):e=I[2],i=e;break e}let l=D.oid,a=F.findIndex(e=>e.oid===l);if(-1===a){let e;I[3]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},I[3]=e):e=I[3],i=e;break e}let s=a>0?F[a-1]:null,r=a<F.length-1?F[a+1]:null,o=O?.number||0;if(I[4]!==r||I[5]!==s||I[6]!==P.name||I[7]!==P.ownerLogin||I[8]!==o){let i={owner:P.ownerLogin,repo:P.name,number:o};e=s?(0,ix.zLJ)({...i,head:s.oid}):null,t=r?(0,ix.zLJ)({...i,head:r.oid}):null,I[4]=r,I[5]=s,I[6]=P.name,I[7]=P.ownerLogin,I[8]=o,I[9]=e,I[10]=t}else e=I[9],t=I[10];let d=t;I[11]!==d||I[12]!==e?(n={prevCommitUrl:e,nextCommitUrl:d,canNavigate:!0},I[11]=d,I[12]=e,I[13]=n):n=I[13],i=n}let{prevCommitUrl:$,nextCommitUrl:B,canNavigate:M}=i,q=(0,b.Z)(),V=D.oid;I[14]!==V||I[15]!==P.name||I[16]!==P.ownerLogin?(a=(0,ix.$Qz)({owner:P.ownerLogin,repo:P.name,commitish:V}),I[14]=V,I[15]=P.name,I[16]=P.ownerLogin,I[17]=a):a=I[17];let G=(0,lm.I)(`${a}/deferred_commit_data`);return I[18]!==D.shortMessageMarkdown?(s=(0,n.jsx)(X.A,{as:"h2",children:(0,n.jsx)(ti.JR,{html:D.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"})}),I[18]=D.shortMessageMarkdown,I[19]=s):s=I[19],I[20]!==D.bodyMessageHtml?(r=D.bodyMessageHtml&&(0,n.jsx)(ti.JR,{html:D.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"}),I[20]=D.bodyMessageHtml,I[21]=r):r=I[21],I[22]!==s||I[23]!==r?(o=(0,n.jsxs)("div",{className:"flex-1",children:[s,r]}),I[22]=s,I[23]=r,I[24]=o):o=I[24],I[25]!==M||I[26]!==B||I[27]!==$?(d=M&&(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsxs)(iW.A,{children:[(0,n.jsx)(er.Q,{as:lu.N,"aria-label":$?"Previous commit":"No previous commit",to:$??"",inactive:!$,size:"small",leadingVisual:E.ChevronLeftIcon,children:"Prev"}),(0,n.jsx)(er.Q,{as:lu.N,"aria-label":B?"Next commit":"No next commit",to:B??"",inactive:!B,size:"small",trailingVisual:E.ChevronRightIcon,children:"Next"})]})}),I[25]=M,I[26]=B,I[27]=$,I[28]=d):d=I[28],I[29]!==V||I[30]!==P?(m=(0,ix.IO9)({repo:P,action:"tree",commitish:V}),I[29]=V,I[30]=P,I[31]=m):m=I[31],I[32]!==m?(u=(0,n.jsx)(er.Q,{as:L.A,href:m,leadingVisual:E.FileCodeIcon,size:"small",children:"Browse files"}),I[32]=m,I[33]=u):u=I[33],I[34]!==u||I[35]!==d?(h=(0,n.jsxs)("div",{className:"d-flex flex-self-start gap-2 width-full flex-justify-between pr-mt-3",children:[d,u]}),I[34]=u,I[35]=d,I[36]=h):h=I[36],I[37]!==h||I[38]!==o?(f=(0,n.jsxs)("div",{className:"d-flex flex-column flex-justify-between border-bottom pr-p-3 bgColor-inset",children:[o,h]}),I[37]=h,I[38]=o,I[39]=f):f=I[39],I[40]===Symbol.for("react.memo_cache_sentinel")?(p={fontColor:"fg.default"},I[40]=p):p=I[40],I[41]!==D.oid||I[42]!==G||I[43]!==k||I[44]!==P?(g=(0,n.jsx)(lc.C,{deferredData:G,oid:D.oid,repo:P,helpUrl:k}),I[41]=D.oid,I[42]=G,I[43]=k,I[44]=P,I[45]=g):g=I[45],I[46]!==D||I[47]!==P||I[48]!==g?(x=(0,n.jsx)(lo.j,{commit:D,repo:P,settings:p,textVariant:"muted",children:g}),I[46]=D,I[47]=P,I[48]=g,I[49]=x):x=I[49],I[50]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsx)("span",{className:"color-fg-muted",children:"commit"}),I[50]=v):v=I[50],I[51]!==V||I[52]!==P.name||I[53]!==P.ownerLogin?(_=(0,ix.$Qz)({owner:P.ownerLogin,repo:P.name,commitish:V}),I[51]=V,I[52]=P.name,I[53]=P.ownerLogin,I[54]=_):_=I[54],I[55]!==V?(w=(0,iI.F)(V),I[55]=V,I[56]=w):w=I[56],I[57]!==w?(y=(0,n.jsx)("code",{children:w}),I[57]=w,I[58]=y):y=I[58],I[59]!==_||I[60]!==y?(j=(0,n.jsx)(L.A,{href:_,className:"Link--primary",children:y}),I[59]=_,I[60]=y,I[61]=j):j=I[61],I[62]!==V?(S=(0,n.jsx)(ld.w,{sha:V,direction:"sw"}),I[62]=V,I[63]=S):S=I[63],I[64]!==j||I[65]!==S?(N=(0,n.jsxs)("div",{className:"d-flex flex-items-center gap-2 text-mono",children:[v,j,S]}),I[64]=j,I[65]=S,I[66]=N):N=I[66],I[67]!==x||I[68]!==N?(C=(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-between pr-px-3 py-2 f5",children:[x,N]}),I[67]=x,I[68]=N,I[69]=C):C=I[69],I[70]!==M||I[71]!==q||I[72]!==B||I[73]!==$?(R=M&&(0,n.jsx)(c.ak,{commands:{"pull-request-files-changed:go-to-previous-commit":()=>$&&q($),"pull-request-files-changed:go-to-next-commit":()=>B&&q(B)}}),I[70]=M,I[71]=q,I[72]=B,I[73]=$,I[74]=R):R=I[74],I[75]!==f||I[76]!==C||I[77]!==R?(T=(0,n.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden pr-mb-3",children:[f,C,R]}),I[75]=f,I[76]=C,I[77]=R,I[78]=T):T=I[78],T}lh.displayName="PullRequestCommitHeader";let lf=(0,p.memo)(function(e){let t,i,a,s,r,o,d=(0,l.c)(60),{diffEntryPathDigest:c,diffManuallyExpanded:m,filteredDiffSummaries:u,headBranchName:h,headRepoName:g,headRepoOwner:x,pullRequestGlobalRelayId:v,repository:_,onScrollToAndFocusEntry:b}=e,w=(0,j.m9)()||c,y=(0,j.if)(w),S=(0,j.Fm)(y?.path||""),N=y?.path||"",C=(0,j.jT)(N),R=(0,j.j5)(),T=(0,p.useRef)(!1);d[0]!==b||d[1]!==y?.isLoaded||d[2]!==w?(t=()=>{!T.current&&y?.isLoaded&&(b(w,{focusPathName:!0}),T.current=!0)},d[0]=b,d[1]=y?.isLoaded,d[2]=w,d[3]=t):t=d[3];let I=y?.isLoaded;if(d[4]!==b||d[5]!==w||d[6]!==I?(i=[b,I,w],d[4]=b,d[5]=w,d[6]=I,d[7]=i):i=d[7],(0,p.useEffect)(t,i),!u.some(e=>e.path===N)){let e;return d[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(nS,{}),d[8]=e):e=d[8],e}if(y&&!y.isLoaded){let e,t,i,l,a=`diff-${N}`;d[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,f.$)(nz.A.diffTargetable,nz.A.diff),d[9]=e):e=d[9];let s=`${w}_${N}`,r=`#diff-${w}`,o=S?.linesAdded??0,c=S?.linesChanged??0,m=S?.linesDeleted??0;return d[10]!==N||d[11]!==R||d[12]!==m||d[13]!==r||d[14]!==o||d[15]!==c?(t=(0,n.jsx)("div",{className:nz.A.diffHeaderWrapper,children:(0,n.jsx)(nQ.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:r,canToggleRichDiff:!1,linesAdded:o,linesChanged:c,linesDeleted:m,newPath:N,patchStatus:"",path:N,onToggleExpandAllLines:nK.l,onToggleFileCollapsed:nK.l,onToggleDiffDisplay:nK.l,isInSingleFileMode:R})}),d[10]=N,d[11]=R,d[12]=m,d[13]=r,d[14]=o,d[15]=c,d[16]=t):t=d[16],d[17]!==y?(i=(0,n.jsx)(nH,{progressiveDiffEntry:y,approximateLineCount:5}),d[17]=y,d[18]=i):i=d[18],d[19]!==t||d[20]!==i||d[21]!==a||d[22]!==s?(l=(0,n.jsxs)("div",{role:"region",id:a,className:e,"data-targeted":!1,"data-hpc":!0,children:[t,i]},s),d[19]=t,d[20]=i,d[21]=a,d[22]=s,d[23]=l):l=d[23],l}if(!C){let e;return d[24]!==N||d[25]!==c?(e=(0,n.jsx)(nW,{linesAdded:0,linesChanged:0,linesDeleted:0,path:N,pathDigest:c,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),d[24]=N,d[25]=c,d[26]=e):e=d[26],e}d[27]!==C?(a=(0,n.jsx)(nW,{...C}),d[27]=C,d[28]=a):a=d[28];let E=C.reviewed??!1;return d[29]!==C.diffLines||d[30]!==C.diffSize||d[31]!==C.helpUrl||d[32]!==C.isBinary||d[33]!==C.isTooBig||d[34]!==C.linesAdded||d[35]!==C.linesChanged||d[36]!==C.linesDeleted||d[37]!==C.newCommitOid||d[38]!==C.newTreeEntry||d[39]!==C.objectId||d[40]!==C.oldCommitOid||d[41]!==C.oldTreeEntry||d[42]!==C.path||d[43]!==C.pathDigest||d[44]!==C.richDiff||d[45]!==C.status||d[46]!==C.submodule||d[47]!==C.truncatedReason||d[48]!==m||d[49]!==h||d[50]!==g||d[51]!==x||d[52]!==v||d[53]!==_||d[54]!==E?(s=(0,n.jsx)(nV,{changeType:C.status,diffLines:C.diffLines,diffManuallyExpanded:m,diffSize:C.diffSize,headBranchName:h,headRepoName:g,headRepoOwner:x,helpUrl:C.helpUrl,isBinary:C.isBinary,isSelected:!1,isTooBig:C.isTooBig,linesAdded:C.linesAdded,linesChanged:C.linesChanged,linesDeleted:C.linesDeleted,newCommitOid:C.newCommitOid,newTreeEntry:C.newTreeEntry,objectId:C.objectId,oldCommitOid:C.oldCommitOid,oldTreeEntry:C.oldTreeEntry,path:C.path,pathDigest:C.pathDigest,pullRequestGlobalRelayId:v,repository:_,reviewed:E,richDiff:C.richDiff,status:C.status,submodule:C.submodule,truncatedReason:C.truncatedReason}),d[29]=C.diffLines,d[30]=C.diffSize,d[31]=C.helpUrl,d[32]=C.isBinary,d[33]=C.isTooBig,d[34]=C.linesAdded,d[35]=C.linesChanged,d[36]=C.linesDeleted,d[37]=C.newCommitOid,d[38]=C.newTreeEntry,d[39]=C.objectId,d[40]=C.oldCommitOid,d[41]=C.oldTreeEntry,d[42]=C.path,d[43]=C.pathDigest,d[44]=C.richDiff,d[45]=C.status,d[46]=C.submodule,d[47]=C.truncatedReason,d[48]=m,d[49]=h,d[50]=g,d[51]=x,d[52]=v,d[53]=_,d[54]=E,d[55]=s):s=d[55],d[56]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(nj.nq,{}),d[56]=r):r=d[56],d[57]!==a||d[58]!==s?(o=(0,n.jsxs)(J.t,{boundaryName:"SingleFileModePullRequestDiffEntry",fallback:a,children:[s,r]}),d[57]=a,d[58]=s,d[59]=o):o=d[59],o});lf.displayName="SingleFileModePullRequestDiffEntry";let lp=(0,p.memo)(function(e){let t,i,a,s,r,o,d,c,m,u,h=(0,l.c)(32),{filteredDiffSummaries:f,headBranchName:g,headRepoName:x,headRepoOwner:v,pullRequestGlobalRelayId:_,repository:b}=e,y=(0,j.HZ)();h[0]!==y?(t=Object.values(y??{}).filter(lg),h[0]=y,h[1]=t):t=h[1];let S=t[0],N=(0,j.m9)(),{onScrollToAndFocusEntry:C,getTargetableEntriesMap:R}=n7(),T=(0,j.qg)(),I=(0,j.uh)()[0],{loadPriority:E,startQueue:D}=(0,j.pV)();h[2]!==D?(i=()=>{D()},a=[D],h[2]=D,h[3]=i,h[4]=a):(i=h[3],a=h[4]),(0,p.useEffect)(i,a),h[5]!==E||h[6]!==N?(s=()=>{E(N)},r=[E,N],h[5]=E,h[6]=N,h[7]=s,h[8]=r):(s=h[7],r=h[8]),(0,p.useEffect)(s,r),h[9]!==I||h[10]!==N?(o=()=>{!N&&I?.pathDigest&&(0,w.Zu)(`diff-${I.pathDigest}`)},h[9]=I,h[10]=N,h[11]=o):o=h[11];let L=I?.pathDigest;if(h[12]!==N||h[13]!==L?(d=[L,N],h[12]=N,h[13]=L,h[14]=d):d=h[14],(0,p.useEffect)(o,d),0===T){let e;return h[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(nX,{}),h[15]=e):e=h[15],e}if(0===f.length){let e;return h[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(nS,{}),h[16]=e):e=h[16],e}let O=N||S?.pathDigest||I?.pathDigest;return O?(h[17]!==R||h[18]!==O?(c=e=>{let t=R();e?t.set(O,e):t.delete(O)},h[17]=R,h[18]=O,h[19]=c):c=h[19],h[20]!==f||h[21]!==g||h[22]!==x||h[23]!==v||h[24]!==C||h[25]!==O||h[26]!==_||h[27]!==b?(m=(0,n.jsx)(lf,{diffEntryPathDigest:O,diffManuallyExpanded:!1,filteredDiffSummaries:f,headBranchName:g,headRepoName:x,headRepoOwner:v,pullRequestGlobalRelayId:_,repository:b,onScrollToAndFocusEntry:C}),h[20]=f,h[21]=g,h[22]=x,h[23]=v,h[24]=C,h[25]=O,h[26]=_,h[27]=b,h[28]=m):m=h[28],h[29]!==m||h[30]!==c?(u=(0,n.jsx)("div",{ref:c,children:m}),h[29]=m,h[30]=c,h[31]=u):u=h[31],u):null});function lg(e){return null!==e}lp.displayName="SingleFileModeDiffEntryNavigator";var lx=i(51454);let lv="diff-tree-pane-width";function l_(e){let t,i,a=(0,l.c)(19),{repository:s,urls:r,isDiffVirtualizationEnabled:d,isInSingleFileMode:c}=e;if(!d&&!c)return null;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("pull_request_files_virtualization"),a[0]=t):t=a[0];let m=t,u=c&&m&&!d;a[1]!==s?(i=async function(){let e=new FormData;e.append("feature_name","pull_request_files_virtualization"),await (0,ew.DI)((0,ix.ZD8)({repo:s}),{body:e,method:"POST"})},a[1]=s,a[2]=i):i=a[2];let h=i;if(d){let e,t=`${r.changes}?mode=single`;return a[3]!==h||a[4]!==t?(e=(0,n.jsx)(eF.l,{title:"This page has been optimized for large pull requests.",hideTitle:!0,variant:"info",description:"This page has been optimized for large pull requests. Some browser features (like Find on Page or Select All) may not work as expected.",className:"pr-mb-3",primaryAction:(0,n.jsx)(er.Q,{variant:"invisible",as:"a",href:t,rel:"noopener noreferrer",onClick:h,className:"fgColor-accent",children:"Switch to single file mode"})}),a[3]=h,a[4]=t,a[5]=e):e=a[5],e}if(c){let e,t,i,l;a[6]!==h||a[7]!==u||a[8]!==r?(e=u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"To view all files in a single page, "}),(0,n.jsx)(L.A,{inline:!0,href:`${r.changes}?mode=virtualization`,onClick:h,rel:"noreferrer",children:"try a new experimental mode"}),"."]}),a[6]=h,a[7]=u,a[8]=r,a[9]=e):e=a[9],a[10]!==e?(t=(0,n.jsxs)(n.Fragment,{children:["Due to the size of this pull request, only one file can be shown at a time."," ",e]}),a[10]=e,a[11]=t):t=a[11];let s=t;return a[12]!==h||a[13]!==u||a[14]!==r?(i=!u&&(0,n.jsx)(er.Q,{variant:"invisible",as:"a",href:`${r.files}?new_files_changed=false`,rel:"noopener noreferrer",onClick:h,className:"fgColor-accent",target:"_blank",children:"View in the classic experience"}),a[12]=h,a[13]=u,a[14]=r,a[15]=i):i=a[15],a[16]!==s||a[17]!==i?(l=(0,n.jsx)(eF.l,{title:"Single file mode",description:s,hideTitle:!0,variant:"info",className:"pr-mb-3",primaryAction:i}),a[16]=s,a[17]=i,a[18]=l):l=a[18],l}}function lb(e){let t,i,a,s,r=(0,l.c)(22),{basePath:d,baseSha:c,forceUnifiedView:m,headSha:u,initialData:h,treeCollapsedByDefault:f,treeEnableInlineCompactMode:p,userCanComment:g,useChangeGroups:x,useInlineComments:v,useEditOptions:_,useFileTree:b,useAdvancedToolbar:w,useBasicToolbar:y}=e,j=x??!1,S=v??!1,N=_??!1,C=b??!1,R=w??!1,T=y??!1,I=g??!0,E=m??!1,D=f??!1,L=p??!1;r[0]!==j||r[1]!==L||r[2]!==S||r[3]!==N||r[4]!==C||r[5]!==R||r[6]!==T||r[7]!==I||r[8]!==E||r[9]!==D?(t={useChangeGroups:j,useInlineComments:S,useEditOptions:N,useFileTree:C,useAdvancedToolbar:R,useBasicToolbar:T,userCanComment:I,forceUnifiedView:E,treeCollapsedByDefault:D,treeEnableInlineCompactMode:L},r[0]=j,r[1]=L,r[2]=S,r[3]=N,r[4]=C,r[5]=R,r[6]=T,r[7]=I,r[8]=E,r[9]=D,r[10]=t):t=r[10];let O=t,A=h?h.pullRequest.comparison.headOid:u,P=h?h.pullRequest.comparison.baseOid:c;if(!A)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let F=!h;r[11]!==d||r[12]!==P||r[13]!==A||r[14]!==F?(i={basePath:d,headSha:A,baseSha:P,shouldFetch:F},r[11]=d,r[12]=P,r[13]=A,r[14]=F,r[15]=i):i=r[15];let{data:k,isLoading:$}=function(e){let t,i,n,a,s,r,o=(0,l.c)(17),{basePath:d,headSha:c,baseSha:m,shouldFetch:u}=e;if(o[0]!==d||o[1]!==m||o[2]!==c){let e=new URLSearchParams;m===c?e.append("range",c??""):m&&c?e.append("range",`${m}..${c}`):c&&e.append("range",c),t=d,i=em.uT.baseComparisonInfo,n=e.toString(),o[0]=d,o[1]=m,o[2]=c,o[3]=t,o[4]=i,o[5]=n}else t=o[3],i=o[4],n=o[5];let h=`${t}/page_data/${i}?${n}`,f=m??"base-sha-not-provided";o[6]!==d||o[7]!==c||o[8]!==f?(a=function({basePath:e,selectedRange:t}){return[em.uT.baseComparisonInfo,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}({basePath:d,selectedRange:{baseOid:f,headOid:c}}),o[6]=d,o[7]=c,o[8]=f,o[9]=a):a=o[9];let p=a;return o[10]!==h||o[11]!==c?(s=async()=>{if(!c)return;let e=await (0,ew.QJ)(h);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},o[10]=h,o[11]=c,o[12]=s):s=o[12],o[13]!==p||o[14]!==u||o[15]!==s?(r={queryKey:p,queryFn:s,staleTime:1/0,enabled:u},o[13]=p,o[14]=u,o[15]=s,o[16]=r):r=o[16],(0,eb.I)(r)}(i),B=h??k;r[16]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.G7)("pull_request_files_virtualization_without_min_threshold"),r[16]=a):a=r[16];let M=(a||B?.virtualizeDiffEntries)??!1;return r[17]!==O||r[18]!==B||r[19]!==$||r[20]!==M?(s=(0,n.jsx)(n.Fragment,{children:B&&!$?(0,n.jsx)(nm.Kg,{basePageDataUrl:B.pullRequest.pathName,children:(0,n.jsx)(lx.n,{initData:{diffVersion:"v2",virtualizationEnabled:M},children:(0,n.jsx)(nd.v,{initData:B,configOpts:O,children:(0,n.jsx)(lw,{...B,configOpts:O})})})}):(0,n.jsxs)("div",{className:"width-full",children:[(0,n.jsx)("div",{className:"DiffComparisonViewer-module__SkeletonWrapper__d4EHy",children:(0,n.jsx)("div",{className:"DiffComparisonViewer-module__SkeletonIconWrapper__DCaGh",children:(0,n.jsx)(nb.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,n.jsxs)("div",{className:"d-flex flex-column gap-3 pr-p-3",children:[(0,n.jsx)(nw,{lines:4}),(0,n.jsx)(nw,{lines:8}),(0,n.jsx)(nw,{lines:5})]})]})}),r[17]=O,r[18]=B,r[19]=$,r[20]=M,r[21]=s):s=r[21],s}function lw(e){var t,i;let g,x,v,_,b,w,N,C,R,T,I,E,D,L,O,P,F,k,$,B,M,q,V,G,z,U,H,W,Q,K,Y,J,X,Z,ee,et,ei,en,el,ea=(0,l.c)(124),{codeowners:es,commit:er,commits:eo,configOpts:ed,diffSummaries:ec,fileFilter:ep,pullRequest:eg,repository:ex,pageLimits:ev,urls:e_,user:eb,userNotices:ew,isSingleFileMode:ej,virtualizeDiffEntries:eS}=e;(0,m.L)(!0),function(){let e,t,i=(0,l.c)(3),{handleHashUpdate:n}=(0,j.Lh)();i[0]!==n?(e=()=>{let e=()=>{n()};return n(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},t=[n],i[0]=n,i[1]=e,i[2]=t):(e=i[1],t=i[2]),(0,p.useEffect)(e,t)}();let eN=(i=eb,x=(0,l.c)(5),v=(0,s.C0)(i.viewSettings.splitPreference),_=(0,s.Qn)(i.viewSettings.hideWhitespace),x[0]!==i.viewSettings.commentsPreference||x[1]!==i.viewSettings.lineSpacing||x[2]!==v||x[3]!==_?(g={hideWhitespace:_,splitPreference:v,lineSpacing:i.viewSettings.lineSpacing,commentsPreference:i.viewSettings.commentsPreference},x[0]=i.viewSettings.commentsPreference,x[1]=i.viewSettings.lineSpacing,x[2]=v,x[3]=_,x[4]=g):g=x[4],g);ea[0]===Symbol.for("react.memo_cache_sentinel")?(b=(0,o.G7)("pull_request_files_virtualization_without_min_threshold"),ea[0]=b):b=ea[0];let eC=b;ea[1]===Symbol.for("react.memo_cache_sentinel")?(w={onSuccess:lj,onError:ly},ea[1]=w):w=ea[1];let{mutate:eR}=(0,a.U)(w),{data:eT}=(0,s.ID)(eN);ea[2]!==eT?.commentsPreference||ea[3]!==eR?(N=()=>{eR({commentsPreference:eT?.commentsPreference===r.sI.Visible?r.sI.Collapsed:r.sI.Visible})},ea[2]=eT?.commentsPreference,ea[3]=eR,ea[4]=N):N=ea[4],eT?.commentsPreference;let eI=N,{updateCommentsPreference:eL}=(0,j.CQ)();ea[5]!==eT?.commentsPreference||ea[6]!==eL?(C=()=>{eL(eT?.commentsPreference??r.sI.Visible)},ea[5]=eT?.commentsPreference,ea[6]=eL,ea[7]=C):C=ea[7];let eO=eT?.commentsPreference;ea[8]!==eO||ea[9]!==eL?(R=[eO,eL],ea[8]=eO,ea[9]=eL,ea[10]=R):R=ea[10],(0,p.useEffect)(C,R);let eA=(0,d.u)("pull_request_file_tree_width_persistence");ea[11]!==ed.useFileTree||ea[12]!==eA||ea[13]!==eg.number||ea[14]!==ex.name||ea[15]!==ex.ownerLogin?(T=eA&&ed.useFileTree&&ex.ownerLogin&&ex.name&&eg.number?{owner:ex.ownerLogin,repo:ex.name,pullNumber:eg.number}:void 0,ea[11]=ed.useFileTree,ea[12]=eA,ea[13]=eg.number,ea[14]=ex.name,ea[15]=ex.ownerLogin,ea[16]=T):T=ea[16];let eP=T;t=eA&&ed.useFileTree?eb.fileTreeWidth:void 0,en=(0,l.c)(8),el=(0,p.useRef)(t??296),en[0]!==t?(X=()=>{void 0!==t&&(el.current=t)},Z=[t],en[0]=t,en[1]=X,en[2]=Z):(X=en[1],Z=en[2]),(0,p.useEffect)(X,Z),en[3]!==t?(ee=()=>{if("u">typeof window&&void 0!==t)try{localStorage.setItem(lv,String(t))}catch{}},en[3]=t,en[4]=ee):ee=en[4],(0,p.useState)(ee),en[5]!==eP?(et=()=>{if(!eP)return;let e=localStorage.setItem.bind(localStorage);return localStorage.setItem=(t,i)=>{if(e(t,i),t!==lv)return;let n=parseInt(i,10);isNaN(n)||n<=0||n!==el.current&&(el.current=n,(0,ng.c)(n,eP))},()=>{localStorage.setItem=e}},ei=[eP],en[5]=eP,en[6]=et,en[7]=ei):(et=en[6],ei=en[7]),(0,p.useEffect)(et,ei);let eF=eb.currentUserLogin||"";ea[17]!==eF?(I={login:eF},ea[17]=eF,ea[18]=I):I=ea[18];let{splitPagePaneHidden:ek,treeViewState:eB,treeToggleElement:eM,collapseMobileTree:eq,expandTree:eV}=function(e,t,i,a){let s,r,o,d,c,m,u,h,f,g,x,v,_=(0,l.c)(39),{isServer:b}=(0,np.V)(),w=(0,p.useRef)(null),y=(0,p.useRef)(null),j=t?"expanded":"collapsed";_[0]!==j?(s={wideMode:j,compactMode:"none"},_[0]=j,_[1]=s):s=_[1];let[S,N]=(0,p.useState)(s);_[2]!==a?(r=()=>{N(n_),(0,ng.B)(!0,a),requestAnimationFrame(()=>w.current?.focus())},_[2]=a,_[3]=r):r=_[3];let C=r;_[4]!==a?(o=()=>{N({wideMode:"collapsed",compactMode:"none"}),(0,ng.B)(!1,a),requestAnimationFrame(()=>w.current?.focus())},_[4]=a,_[5]=o):o=_[5];let R=o;_[6]!==i?(d=()=>{let e="overlay";if(i){let t=window.innerWidth;(0,nf.nn)(t)>nf.Gy.large&&(e="inline")}N(t=>({...t,compactMode:e})),requestAnimationFrame(()=>y.current?.focus())},_[6]=i,_[7]=d):d=_[7];let T=d;_[8]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{N(nv),requestAnimationFrame(()=>y.current?.focus())},_[8]=c):c=_[8];let I=c;_[9]!==T||_[10]!==C||_[11]!==S.compactMode||_[12]!==S.wideMode?(m=()=>{let e=!1,t=document.getElementById(nx);if(t){let i=t.getBoundingClientRect().width;e=0===i&&A.cg?A.cg.innerWidth>=1012:i>=1012}else A.cg&&(e=A.cg.innerWidth>=1012);e?"collapsed"===S.wideMode&&C():"none"===S.compactMode&&T()},_[9]=T,_[10]=C,_[11]=S.compactMode,_[12]=S.wideMode,_[13]=m):m=_[13];let E=m,D="expanded"===S.wideMode,L="expanded"===S.wideMode?"Collapse file tree":"Expand file tree";_[14]!==R||_[15]!==C||_[16]!==S.wideMode?(u=()=>{"expanded"===S.wideMode?R():C()},_[14]=R,_[15]=C,_[16]=S.wideMode,_[17]=u):u=_[17],_[18]!==e||_[19]!==D||_[20]!==L||_[21]!==u?(h=(0,n.jsx)(nh.L,{expanded:D,alignment:"left",ariaLabel:L,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:w,className:"DiffComparisonViewer-module__RegularTreeToggle__fSFG6",onToggleExpanded:u,size:"small"}),_[18]=e,_[19]=D,_[20]=L,_[21]=u,_[22]=h):h=_[22];let O=h,P="none"!==S.compactMode,F="none"!==S.compactMode?"Collapse file tree":"Expand file tree";_[23]!==T||_[24]!==S.compactMode?(f=()=>{"none"!==S.compactMode?I():T()},_[23]=T,_[24]=S.compactMode,_[25]=f):f=_[25],_[26]!==e||_[27]!==P||_[28]!==F||_[29]!==f?(g=(0,n.jsx)(nh.L,{expanded:P,alignment:"left",ariaLabel:F,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:y,className:"DiffComparisonViewer-module__MobileTreeToggle__wwbbS",onToggleExpanded:f,size:"small"}),_[26]=e,_[27]=P,_[28]=F,_[29]=f,_[30]=g):g=_[30];let k=g;_[31]!==k||_[32]!==O?(x=(0,n.jsxs)(n.Fragment,{children:[k,O]}),_[31]=k,_[32]=O,_[33]=x):x=_[33];let $=x,B=b&&!t;return _[34]!==E||_[35]!==B||_[36]!==$||_[37]!==S?(v={splitPagePaneHidden:B,treeViewState:S,collapseMobileTree:I,expandTree:E,treeToggleElement:$},_[34]=E,_[35]=B,_[36]=$,_[37]=S,_[38]=v):v=_[38],v}(eE,eb.isFileTreeExpanded&&!ed.treeCollapsedByDefault,ed.treeEnableInlineCompactMode,I);ea[19]!==es||ea[20]!==eg.pathName?(E={basePath:eg.pathName},es&&(E.initialData=es),ea[19]=es,ea[20]=eg.pathName,ea[21]=E):E=ea[21];let{data:eG}=(0,y.dG)(E),{setCodeowners:ez}=(0,j.wh)();ea[22]!==eG||ea[23]!==ez?(D=()=>{ez(eG)},L=[eG,ez],ea[22]=eG,ea[23]=ez,ea[24]=D,ea[25]=L):(D=ea[24],L=ea[25]),(0,p.useEffect)(D,L);let eU=(0,j.qg)(),{isServer:eH}=(0,np.V)(),eW=eC||eS,eQ=(0,j.I8)(),{updateDiffFilter:eK}=(0,j.or)();ea[26]!==ep.initialState||ea[27]!==eK?(O=()=>{eK({...ep.initialState,unselectedFileExtensions:new Set(ep.initialState.unselectedFileExtensions)})},P=[eK,ep.initialState],ea[26]=ep.initialState,ea[27]=eK,ea[28]=O,ea[29]=P):(O=ea[28],P=ea[29]),(0,p.useEffect)(O,P);let eY=(0,j.mU)();(0,j.nE)(),ea[30]!==eK?(F=e=>{eK(e,!0)},ea[30]=eK,ea[31]=F):F=ea[31];let eJ=F;ea[32]!==eq||ea[33]!==eB.compactMode?(k=()=>{"none"!==eB.compactMode&&eq()},ea[32]=eq,ea[33]=eB.compactMode,ea[34]=k):k=ea[34];let eX=k,eZ=(0,p.useRef)(null),e0="expanded"!==eB.wideMode?"small":"medium";ea[35]!==eQ||ea[36]!==ep.menuOptions||ea[37]!==eJ||ea[38]!==eg.pathName||ea[39]!==e0||ea[40]!==eb.currentUserLogin?($=(0,n.jsx)(S,{ref:eZ,basePath:eg.pathName,fileFilterMenuOptions:ep.menuOptions,fileFilterState:eQ,setFileFilterState:eJ,viewerLogin:eb.currentUserLogin,filterSize:e0}),ea[35]=eQ,ea[36]=ep.menuOptions,ea[37]=eJ,ea[38]=eg.pathName,ea[39]=e0,ea[40]=eb.currentUserLogin,ea[41]=$):$=ea[41];let e1=$,e2=(0,j.gt)(),e3=ec.length>0,e4=ed.useChangeGroups&&e2&&e3;ea[42]!==e4?(B={changeGroupsEnabled:e4},ea[42]=e4,ea[43]=B):B=ea[43],function(e){let t,i,n,a=(0,l.c)(11),{changeGroupsEnabled:s}=e,r=(0,j.gt)(),o=(0,j.iY)(),c=!!(o&&o.length>0),m=(0,d.u)("generate_groups_on_files_view"),{mutate:u}=function(){let e,t,i,n=(0,l.c)(7),a=(0,eu.e)(em.uT.generateChangeGroups),{updateChangeGroupGeneration:s}=(0,j.wL)();return n[0]!==a?(e=async()=>{let e=await (0,ef.q$)(a,{method:"POST"}),t=await (0,ef.hp)(e);return(0,ef.R)(e,t),t},n[0]=a,n[1]=e):e=n[1],n[2]!==s?(t=e=>{s(e)},n[2]=s,n[3]=t):t=n[3],n[4]!==e||n[5]!==t?(i={mutationFn:e,onSuccess:t},n[4]=e,n[5]=t,n[6]=i):i=n[6],(0,eh.n)(i)}(),h=(0,j.Fl)();a[0]!==h?(t=h&&(function(e){switch(e){case"ABANDONED":case"FAILED":case"SKIPPED":return!0;default:return!1}}(h.state)||!ey(h.state)),a[0]=h,a[1]=t):t=a[1];let f=t,g=(0,j.ww)(),x=(0,p.useRef)(!1);a[2]!==r||a[3]!==s||a[4]!==u||a[5]!==c||a[6]!==g||a[7]!==f||a[8]!==m?(i=()=>{x.current||!m||!s||!r||c||g||f||(u(),x.current=!0)},n=[r,m,u,c,f,g,s],a[2]=r,a[3]=s,a[4]=u,a[5]=c,a[6]=g,a[7]=f,a[8]=m,a[9]=i,a[10]=n):(i=a[9],n=a[10]),(0,p.useEffect)(i,n)}(B);let{aliveChannel:e5,bannersData:e6,pageTitle:e7}=function(){let e,t=(0,l.c)(10),i=(0,nc.B)()??{};if(i&&"header"in i)return i.header;let{aliveChannel:n,pullRequest:a,bannersData:s,repository:r,urls:o,user:d,pageTitle:c,stack:m,mergeStatusButtonData:u}=i;return t[0]!==n||t[1]!==s||t[2]!==u||t[3]!==c||t[4]!==a||t[5]!==r||t[6]!==m||t[7]!==o||t[8]!==d?(e={aliveChannel:n,pullRequest:a,bannersData:s,repository:r,urls:o,user:d,pageTitle:c,stack:m,mergeStatusButtonData:u},t[0]=n,t[1]=s,t[2]=u,t[3]=c,t[4]=a,t[5]=r,t[6]=m,t[7]=o,t[8]=d,t[9]=e):e=t[9],e}();ea[44]!==eV?(M=()=>{eV(),window.requestAnimationFrame(()=>{eZ.current?.focus()})},ea[44]=eV,ea[45]=M):M=ea[45];let e8=M;ea[46]!==e8||ea[47]!==eI?(q=(0,n.jsx)(c.ak,{commands:{"pull-request-files-changed:collapse-expand-comments":eI,"pull-request-files-changed:focus-file-tree-filter":e8}}),ea[46]=e8,ea[47]=eI,ea[48]=q):q=ea[48],ea[49]!==e1||ea[50]!==e5||ea[51]!==e4||ea[52]!==e6||ea[53]!==eq||ea[54]!==eo||ea[55]!==ed.useAdvancedToolbar||ea[56]!==ed.useBasicToolbar||ea[57]!==eU||ea[58]!==eY||ea[59]!==eX||ea[60]!==eJ||ea[61]!==ev||ea[62]!==e7||ea[63]!==eg||ea[64]!==ex||ea[65]!==eM||ea[66]!==eB.compactMode||ea[67]!==eB.wideMode||ea[68]!==e_||ea[69]!==eb||ea[70]!==ew?(V=ed.useAdvancedToolbar||ed.useBasicToolbar?(0,n.jsxs)(n.Fragment,{children:[ed.useAdvancedToolbar&&(0,n.jsx)(na,{changeGroupsPreferenceAvailable:e4,commits:eo,currentUserLogin:eb.currentUserLogin,fileFilter:e1,isFileTreeExpanded:"expanded"===eB.wideMode,lastReviewOid:eb.lastReviewOid,pageLimits:ev,pullRequest:eg,repository:ex,shouldShowViewedFilesCount:eb.shouldShowViewedFilesCount,totalFilesCount:eU,treeToggleElement:eM,bannersData:e6,urls:e_,user:eb,userNotices:ew,aliveChannel:e5,pageTitle:e7}),ed.useBasicToolbar&&(0,n.jsx)(nu,{fileFilter:e1,isFileTreeExpanded:"expanded"===eB.wideMode,shouldShowViewedFilesCount:eb.shouldShowViewedFilesCount,totalFilesCount:eU,treeToggleElement:eM,userNotices:ew}),"overlay"===eB.compactMode&&(0,n.jsx)(u.l,{onClose:()=>eq(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,n.jsx)(eD,{allowPullRequestGroups:e4,fileFilter:e1,filteredDiffs:eY,onFileSelected:eX,onSetFilterState:eJ})})]}):null,ea[49]=e1,ea[50]=e5,ea[51]=e4,ea[52]=e6,ea[53]=eq,ea[54]=eo,ea[55]=ed.useAdvancedToolbar,ea[56]=ed.useBasicToolbar,ea[57]=eU,ea[58]=eY,ea[59]=eX,ea[60]=eJ,ea[61]=ev,ea[62]=e7,ea[63]=eg,ea[64]=ex,ea[65]=eM,ea[66]=eB.compactMode,ea[67]=eB.wideMode,ea[68]=e_,ea[69]=eb,ea[70]=ew,ea[71]=V):V=ea[71],ea[72]!==e1||ea[73]!==e4||ea[74]!==ed.useBasicToolbar||ea[75]!==ed.useFileTree||ea[76]!==eY||ea[77]!==eX||ea[78]!==eJ||ea[79]!==eA||ea[80]!==ek||ea[81]!==eB.compactMode||ea[82]!==eB.wideMode||ea[83]!==eb.fileTreeWidth?(G=ed.useFileTree?(0,n.jsx)(h.O7.Pane,{position:"start",sticky:!0,offsetHeader:ed.useBasicToolbar?"50px":"60px","aria-label":"File tree",width:{min:"256px",default:`${eA&&eb.fileTreeWidth?eb.fileTreeWidth:296}px`,max:"700px"},padding:"none",className:(0,f.$)("DiffComparisonViewer-module__Pane__qt0lk",ek&&"DiffComparisonViewer-module__HiddenPane__GXkzX","expanded"===eB.wideMode&&no,"collapsed"===eB.wideMode&&"DiffComparisonViewer-module__WideCollapsed__gwl74","none"===eB.compactMode&&"DiffComparisonViewer-module__CompactHidden__O9P2K","overlay"===eB.compactMode&&"DiffComparisonViewer-module__CompactOverlay__FQ2m7","inline"===eB.compactMode&&"DiffComparisonViewer-module__CompactInline__cMCtO","DiffComparisonViewer-module__PaneOverflowVisible__hPL5H"),divider:{regular:"inline"===eB.compactMode?"none":"line",narrow:"none"},widthStorageKey:lv,resizable:"inline"!==eB.compactMode,children:(0,n.jsx)(eD,{allowPullRequestGroups:e4,className:(0,f.$)("PullRequestFileTree-module__sidebar__PJ8nx","DiffComparisonViewer-module__PaneContain__zbswe"),fileFilter:e1,filteredDiffs:eY,onFileSelected:eX,onSetFilterState:eJ})}):null,ea[72]=e1,ea[73]=e4,ea[74]=ed.useBasicToolbar,ea[75]=ed.useFileTree,ea[76]=eY,ea[77]=eX,ea[78]=eJ,ea[79]=eA,ea[80]=ek,ea[81]=eB.compactMode,ea[82]=eB.wideMode,ea[83]=eb.fileTreeWidth,ea[84]=G):G=ea[84];let e9="inline"===eB.compactMode;ea[85]!==e9?(z={narrow:!1,regular:e9},ea[85]=e9,ea[86]=z):z=ea[86];let te="expanded"===eB.wideMode&&no;return ea[87]!==te?(U=(0,f.$)("DiffComparisonViewer-module__Content__DYd2m",te,"DiffComparisonViewer-module__NarrowScreenContent__s_87n"),ea[87]=te,ea[88]=U):U=ea[88],ea[89]!==er||ea[90]!==eo||ea[91]!==eg||ea[92]!==ex?(H=er&&(0,n.jsx)(lh,{commit:er,pullRequest:eg,commits:eo,repository:ex}),ea[89]=er,ea[90]=eo,ea[91]=eg,ea[92]=ex,ea[93]=H):H=ea[93],ea[94]!==eW||ea[95]!==ej||ea[96]!==ex||ea[97]!==e_?(W=(0,n.jsx)(l_,{isDiffVirtualizationEnabled:eW,isInSingleFileMode:ej,repository:ex,urls:e_}),ea[94]=eW,ea[95]=ej,ea[96]=ex,ea[97]=e_,ea[98]=W):W=ea[98],ea[99]!==ev?(Q=(0,n.jsx)(e$,{pageLimits:ev}),ea[99]=ev,ea[100]=Q):Q=ea[100],ea[101]!==eY||ea[102]!==eJ||ea[103]!==eW||ea[104]!==eH||ea[105]!==ej||ea[106]!==eg.globalRelayId||ea[107]!==eg.headBranch||ea[108]!==eg.headRepositoryName||ea[109]!==eg.headRepositoryOwnerLogin||ea[110]!==ex?(K=eW&&!eH?(0,n.jsx)(lr,{headBranchName:eg.headBranch,headRepoName:eg.headRepositoryName,headRepoOwner:eg.headRepositoryOwnerLogin,onSetFilterState:eJ,pullRequestGlobalRelayId:eg.globalRelayId,repository:ex,showPullRequestGroups:!0}):(0,n.jsx)(n.Fragment,{children:ej?(0,n.jsx)(lp,{filteredDiffSummaries:eY,headBranchName:eg.headBranch,headRepoName:eg.headRepositoryName,headRepoOwner:eg.headRepositoryOwnerLogin,pullRequestGlobalRelayId:eg.globalRelayId,repository:ex}):(0,n.jsx)(n8,{headBranchName:eg.headBranch,headRepoName:eg.headRepositoryName,headRepoOwner:eg.headRepositoryOwnerLogin,onSetFilterState:eJ,pullRequestGlobalRelayId:eg.globalRelayId,repository:ex,showPullRequestGroups:!0})}),ea[101]=eY,ea[102]=eJ,ea[103]=eW,ea[104]=eH,ea[105]=ej,ea[106]=eg.globalRelayId,ea[107]=eg.headBranch,ea[108]=eg.headRepositoryName,ea[109]=eg.headRepositoryOwnerLogin,ea[110]=ex,ea[111]=K):K=ea[111],ea[112]!==z||ea[113]!==U||ea[114]!==H||ea[115]!==W||ea[116]!==Q||ea[117]!==K?(Y=(0,n.jsxs)(h.O7.Content,{as:"div",width:"full",hidden:z,padding:"none",className:U,children:[H,W,Q,K]}),ea[112]=z,ea[113]=U,ea[114]=H,ea[115]=W,ea[116]=Q,ea[117]=K,ea[118]=Y):Y=ea[118],ea[119]!==q||ea[120]!==V||ea[121]!==G||ea[122]!==Y?(J=(0,n.jsxs)(n.Fragment,{children:[q,V,G,Y]}),ea[119]=q,ea[120]=V,ea[121]=G,ea[122]=Y,ea[123]=J):J=ea[123],J}function ly(){}function lj(){}function lS(e){let t,i,a,s=(0,l.c)(7);return s[0]!==e.className?(t=(0,f.$)("DiffComparisonViewer-module__Container__YGBgR",e.className),s[0]=e.className,s[1]=t):t=s[1],s[2]!==e.children?(i=(0,n.jsx)(h.O7,{children:e.children}),s[2]=e.children,s[3]=i):i=s[3],s[4]!==t||s[5]!==i?(a=(0,n.jsx)("div",{id:nx,className:t,children:i}),s[4]=t,s[5]=i,s[6]=a):a=s[6],a}l_.displayName="LargeDiffOptimizationsBanner",lb.displayName="BaseDiffComparisonViewer",lw.displayName="InternalDiffComparisonViewer",lS.displayName="Container";let lN=Object.assign({},{Container:lS,Header:h.O7.Header,Viewer:lb})},68980(e,t,i){i.d(t,{O:()=>G});var n=i(74848),l=i(96540),a=i(36758),s=i(35148),r=i(63448),o=i(33774),d=i(7478),c=i(83223),m=i(56149),u=i(21373),h=i(62935),f=i(49305),p=i(87913),g=i(3654),x=i(34256),v=i(97665),_=i(64118),b=i(16522),w=i(9607),y=i(41626),j=i(98153),S=i(58388),N=i(94747);async function C(e){let t=await e.json();if(t.error)throw Error(t.error);let i=await (await (0,w.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(i.orchestration.error_message)throw Error(i.orchestration.error_message)}function R(e,t,i){return i&&i!==t?`${t}:${e}`:e}var T=i(21937),I=i(69525),E=i(14995),D=i(61824),L=i(5095),O=i(44640);let A="PullRequestBranchName-module__truncateBranch__cQb3D";function P(e){let t=(0,b.c)(12),{branchText:i,repositoryOwner:l,repositoryName:a,branch:r}=e;if(a&&l){let e,o,d;t[0]!==r||t[1]!==a||t[2]!==l?(e=(0,s.WJ9)({owner:l,repo:a,branch:r}),t[0]=r,t[1]=a,t[2]=l,t[3]=e):e=t[3];let c=e,m=`${l}/${a}:${r}`;return t[4]!==i||t[5]!==c?(o=(0,n.jsx)(L.A,{href:c,className:A,children:i}),t[4]=i,t[5]=c,t[6]=o):o=t[6],t[7]!==m||t[8]!==o?(d=(0,n.jsx)(O.m,{text:m,children:o}),t[7]=m,t[8]=o,t[9]=d):d=t[9],d}{let e;return t[10]!==i?(e=(0,n.jsx)(L.A,{as:"span",className:A,title:"This repository has been deleted",children:i}),t[10]=i,t[11]=e):e=t[11],e}}P.displayName="PullRequestBranchName";var F=i(32694),k=i(66818),$=i(38621),B=i(27161);function M(e){let t,i,l,a,s=(0,b.c)(6);return s[0]!==e?({state:i,...t}=e,s[0]=e,s[1]=t,s[2]=i):(t=s[1],i=s[2]),l=i===_.Q.Queued?B.I.IN_MERGE_QUEUE:B.I[i],s[3]!==l||s[4]!==t?(a=(0,n.jsx)(l,{...t}),s[3]=l,s[4]=t,s[5]=a):a=s[5],a}M.displayName="StateIcon";var q=i(64855);function V(e){let t,i,a,r,o,d,c,m,h,f,p,g,x,v=(0,b.c)(38),{pullRequestNumber:_,stack:w}=e,y=(0,q.u)("pull_request_stacks"),[j,S]=(0,l.useState)(!1);if(!y||!w)return null;let{baseBranch:N,repositoryOwnerLogin:C,repositoryName:T,position:I,size:E,pulls:D}=w;v[0]!==N||v[1]!==C?(t=R(N,C,C),v[0]=N,v[1]=C,v[2]=t):t=v[2];let O=t;if(v[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>S(!0),a=()=>S(!1),v[3]=i,v[4]=a):(i=v[3],a=v[4]),v[5]!==I||v[6]!==E?(r=e=>(0,n.jsxs)(u.Q,{className:"d-inline",variant:"link",leadingVisual:$.StackIcon,"aria-label":`Navigate pull request stack, position ${I} of ${E}`,...e,children:[I,"/",E]}),v[5]=I,v[6]=E,v[7]=r):r=v[7],v[8]!==_||v[9]!==D){let e;v[11]!==_?(e=e=>(0,n.jsxs)(F.c.Item,{href:e.url,"aria-current":e.number===_?"page":void 0,children:[(0,n.jsx)(M,{state:e.state})," ",e.title," ",(0,n.jsxs)("span",{className:"fgColor-muted",children:["#",e.number]})]},e.number),v[11]=_,v[12]=e):e=v[12],o=D.map(e),v[8]=_,v[9]=D,v[10]=o}else o=v[10];return v[13]!==N||v[14]!==T||v[15]!==C?(d=(0,s.WJ9)({owner:C,repo:T,branch:N}),v[13]=N,v[14]=T,v[15]=C,v[16]=d):d=v[16],v[17]!==O?(c=(0,n.jsx)(L.A,{as:"span",children:O}),v[17]=O,v[18]=c):c=v[18],v[19]!==d||v[20]!==c?(m=(0,n.jsx)(F.c.Item,{href:d,children:c}),v[19]=d,v[20]=c,v[21]=m):m=v[21],v[22]!==o||v[23]!==m?(h=(0,n.jsxs)(F.c,{className:"m-1",children:[o,m]}),v[22]=o,v[23]=m,v[24]=h):h=v[24],v[25]!==j||v[26]!==r||v[27]!==h?(f=(0,n.jsx)(k.T,{open:j,onOpen:i,onClose:a,renderAnchor:r,children:h}),v[25]=j,v[26]=r,v[27]=h,v[28]=f):f=v[28],v[29]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)($.ArrowRightIcon,{verticalAlign:"middle",size:16}),v[29]=p):p=v[29],v[30]!==N||v[31]!==O||v[32]!==T||v[33]!==C?(g=(0,n.jsx)(P,{branch:N,branchText:O,repositoryName:T,repositoryOwner:C}),v[30]=N,v[31]=O,v[32]=T,v[33]=C,v[34]=g):g=v[34],v[35]!==f||v[36]!==g?(x=(0,n.jsxs)("div",{className:"fgColor-muted d-flex flex-items-center",children:[f,p," ",g]}),v[35]=f,v[36]=g,v[37]=x):x=v[37],x}function G({author:e,baseBranch:t,baseRepositoryDefaultBranch:i="",baseRepositoryName:w="",baseRepositoryOwnerLogin:L="",canChangeBase:O=!1,commitsCount:A,headBranch:F,headRepositoryOwnerLogin:k="",headRepositoryName:$="",isInAdvisoryRepo:B,isEditing:M=!1,mergedBy:q,mergedByName:G,mergedTime:z,pullRequestId:U,pullRequestNumber:H,repositoryId:W,setIsEditing:Q,state:K,stack:Y}){var J,X,Z;let ee,et,ei,en,el=(0,r.yY)(),ea=(0,v.jE)(),{refListCacheKey:es}=(0,g.X)(),[er,eo]=(0,l.useState)(!1),[ed,ec]=(0,l.useState)(!1),[em,eu]=(0,l.useState)(""),[eh,ef]=(0,l.useState)(""),ep=(0,T.f)(),eg=(0,D.NP)(),{mutate:ex}=(ei=(0,b.c)(2),en=(0,j.e)(y.uT.changeBase),ei[0]!==en?(et={mutationFn:e=>{let{newBaseBranch:t}=e,i=btoa(t);return(0,S.Sr)(en,{method:"PATCH",body:{new_base_binary:i}})},onSuccess:C},ei[0]=en,ei[1]=et):et=ei[1],(0,N.n)(et)),ev=e=>{ec(!1),eu(e)},e_=ed?()=>(0,n.jsx)(d.A,{size:"small"}):null,eb=R(t,L,k),ew=function(e,t,i,n,l){if(!t)return"unknown repository";let a=!!t&&t!==e,s=l&&!!i;switch(!0){case a&&s:return`${t}/${i}:${n}`;case a:return`${t}:${n}`;case s:return`${i}:${n}`;default:return n}}(L,k,$,F,B),ey=K===_.Q.Merged?q?{login:q,displayName:G}:null:e,ej=(J=K,X=A,Z=ey?.login,ee=`${X} ${X>1?"commits":"commit"}`,J!==_.Q.Merged?`wants to merge ${ee} into`:Z?`merged ${ee} into`:`${ee} merged into`);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"fgColor-muted d-flex flex-items-center overflow-hidden PullRequestHeaderSummary-module__summaryContainer__dA7dP",children:[ey?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{inline:!0,className:"fgColor-muted text-bold",...el("user",{login:ey.login}),href:`/${ey.login}`,children:(0,n.jsx)(o.v,{login:ey.login,profileName:ey.displayName,isAgent:!1})})," "]}):null,ej,O&&M?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.PI,{cacheKey:es,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:i,hideShowAll:!0,owner:L,repo:w,types:["branch"],onSelectItem:e=>{eo(!0),ef(e)}}),(0,n.jsx)(m.ZL,{children:(0,n.jsxs)(f.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:er,onDismiss:()=>{eo(!1),ef(""),eu("")},children:[(0,n.jsx)(f.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,n.jsxs)("div",{className:"pr-p-3",children:[(0,n.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),em&&(0,n.jsx)(x.v,{className:"mt-2",variant:"critical",children:em}),(0,n.jsx)("span",{className:"sr-only","aria-live":"polite",children:ed?"Base branch update in progress.":""}),(0,n.jsx)(u.Q,{alignContent:"center","aria-disabled":ed?"true":void 0,block:!0,className:"pr-mt-3",disabled:ed,leadingVisual:e_,onClick:()=>{ec(!0),ex({newBaseBranch:eh},{onError:e=>ev(e.message),onSuccess:async()=>{try{await Promise.all([ea.refetchQueries({queryKey:ep},{throwOnError:!0}),ea.refetchQueries({queryKey:eg},{throwOnError:!0})]),ec(!1),Q?.(!1),eo(!1)}catch{ev("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:ed?null:"Change base"})]})]})})]}):(0,n.jsx)(P,{branch:t,branchText:eb,repositoryName:w,repositoryOwner:L}),(0,n.jsx)("span",{children:"from "}),(0,n.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,n.jsx)(P,{branch:F,branchText:ew,repositoryName:$,repositoryOwner:k}),(0,n.jsx)(a.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:k?ew:F})]}),K===_.Q.Merged&&(0,n.jsx)(h.A,{datetime:z}),K===_.Q.Open&&!(0,E.kA)()&&(0,n.jsx)(I.i,{processingIndicatorUrl:(0,s.CZ9)({owner:L,repo:w,number:H}),repositoryId:W,pullRequestId:U})]}),(0,n.jsx)(V,{pullRequestNumber:H,stack:Y})]})}V.displayName="StackState",G.displayName="PullRequestHeaderSummary"},1307(e,t,i){i.d(t,{u:()=>o});var n=i(74848),l=i(16522),a=i(79335),s=i(34164),r=i(64118);function o(e){let t,i,o=(0,l.c)(6),{className:d,state:c}=e,m=r.a[c];o[0]!==d?(t=(0,s.$)("flex-self-start",d),o[0]=d,o[1]=t):t=o[1];let u=m.status;return o[2]!==m.description||o[3]!==t||o[4]!==u?(i=(0,n.jsx)(a.A,{className:t,status:u,children:m.description}),o[2]=m.description,o[3]=t,o[4]=u,o[5]=i):i=o[5],i}o.displayName="PullRequestStateLabel"},30943(e,t,i){i.d(t,{F:()=>s});var n=i(16522),l=i(81297),a=i(21937);function s(e){let t,i=(0,n.c)(1),{refetch:s}=(0,a.W)();i[0]===Symbol.for("react.memo_cache_sentinel")?(t={git_updated:!0,title_updated:!0},i[0]=t):t=i[0],(0,l.og)(e,s,t)}},42473(e,t,i){i.d(t,{q:()=>a});var n=i(16522),l=i(16135);function a(){let e,t,i=(0,n.c)(4),{sendAnalyticsEvent:a}=(0,l.s)();i[0]!==a?(e=(e,t,i)=>{a(e,t,void 0===i?{}:i)},i[0]=a,i[1]=e):e=i[1];let s=e;return i[2]!==s?(t={sendPullRequestAnalyticsEvent:s},i[2]=s,i[3]=t):t=i[3],t}},81297(e,t,i){i.d(t,{G:()=>o,og:()=>r});var n=i(16522),l=i(9234),a=i(70170),s=i(1827);function r(e,t,i,n){o(e,t,i,n)}function o(e,t,i,r){let o,d,c,m=(0,n.c)(9),u=(0,s.A)();m[0]!==t||m[1]!==u?(o=()=>{u()&&t()},m[0]=t,m[1]=u,m[2]=o):o=m[2];let h=r??2e3;m[3]!==o||m[4]!==h?(d=(0,a.n)(o,h),m[3]=o,m[4]=h,m[5]=d):d=m[5];let f=d;m[6]!==f||m[7]!==i?(c=e=>{if(i&&e.event_updates)for(let[t,n]of Object.entries(i))!!e.event_updates[t]==!!n&&window.setTimeout(f,e.wait||0);else window.setTimeout(f,e.wait||0)},m[6]=f,m[7]=i,m[8]=c):c=m[8];let p=c;(0,l.x)(e,p)}},5591(e,t,i){i.d(t,{Bk:()=>r,Wo:()=>o});var n=i(16522),l=i(94007),a=i(35148),s=i(58388);function r(e,t){let i,l=(0,n.c)(5),a=(t??[]).filter(e=>!e.dismissed);if(l[0]!==a||l[1]!==e){let t;l[3]!==e?(t=t=>t.name===e,l[3]=e,l[4]=t):t=l[4],i=a.filter(t),l[0]=a,l[1]=e,l[2]=i}else i=l[2];return 0===i.length}function o(e,t){let i,o,d=(0,n.c)(5),c=r(e,t);d[0]!==c||d[1]!==e?(i=()=>{(0,l.M3)()&&!c&&(0,s.DI)((0,a.VB1)({noticeName:e}),{method:"POST"})},d[0]=c,d[1]=e,d[2]=i):i=d[2];let m=i;return d[3]!==m?(o={dismissNotice:m},d[3]=m,d[4]=o):o=d[4],o}},21937(e,t,i){i.d(t,{W:()=>c,f:()=>d});var n=i(16522),l=i(65510),a=i(41626),s=i(98153),r=i(58388),o=i(96479);function d(){let e,t=(0,n.c)(2),{basePageDataUrl:i}=(0,o.Yu)(),l=`basePageDataURL:${i}`;return t[0]!==l?(e=[a.uT.header,l],t[0]=l,t[1]=e):e=t[1],e}function c(e){let t,i,o=(0,n.c)(6),c=(0,s.e)(a.uT.header),m=d();return o[0]!==c?(t=async()=>{let e=await (0,r.QJ)(c);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},o[0]=c,o[1]=t):t=o[1],o[2]!==e||o[3]!==m||o[4]!==t?(i={queryKey:m,queryFn:t,initialData:e,staleTime:1/0},o[2]=e,o[3]=m,o[4]=t,o[5]=i):i=o[5],(0,l.U)(i)}},33447(e,t,i){i.d(t,{q:()=>n});let n={SingleFileMode:"single_file_mode",CompactDiffLines:"compact_diff_lines",FilesChangedOptOut:"files_changed_opt_out"}},61824(e,t,i){i.d(t,{Bz:()=>a,NP:()=>s});var n=i(17523),l=i(21012);i(46836);let a=n.G.createQueryRouteConfig("pullRequestsCommitsRoute",{path:"/:owner/:repo/pull/:pr_number/commits",queries:[(0,l.Y)()]});function s(){return a.queries.mainQuery.makeQueryKey()}},64118(e,t,i){i.d(t,{Q:()=>n,a:()=>l});let n={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT"},l={[n.Open]:{description:"Open",status:"pullOpened"},[n.Closed]:{description:"Closed",status:"pullClosed"},[n.Queued]:{description:"Queued",status:"pullQueued"},[n.Merged]:{description:"Merged",status:"pullMerged"},[n.Draft]:{description:"Draft",status:"draft"}}}}]);
//# sourceMappingURL=96121-bf03bd5d075b9f80-3a5794a032ea2bf2.js.map