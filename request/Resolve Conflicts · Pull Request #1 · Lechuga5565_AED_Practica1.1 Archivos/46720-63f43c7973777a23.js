performance.mark("js-parse-end:46720-63f43c7973777a23.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["46720"],{47427(e,t,s){s.d(t,{A:()=>U});var n=s(74848),i=s(7478),l=s(96540),a=s(29207),r=s(40961),o=s(64062);let d="TaskListItems-module__task-list-item__h6l0P";var c=s(16522),m=s(85965),u=s(47829),h=s(1791);let k=e=>"string"==typeof e?.taskBox&&e?.text?.match(/[^\s\\]/)!==null,g=({container:e,nestedItems:t,globalIndex:s,markdownIndex:n,items:i,itemsData:l,nested:a=!1,lists:r,parentIsChecklist:o,hasDifferentListTypes:d})=>(i.map((i,c)=>{let m=Array.from(i.querySelectorAll(":scope > ul > li:not(.base-task-list-item), :scope > ol > li:not(.base-task-list-item)"))??[],u=Array.from(i.querySelectorAll(":scope > ul > li.task-list-item, :scope > ol > li.task-list-item"))??[],h=(Array.from(i.querySelectorAll("ul > li.task-list-item, ol > li.task-list-item, li.task-list-item"))??[]).length,k=[];h>0&&t.set(s.toString(),h);let _=i.classList.contains("task-list-item")?function(e,t){let s=t.parentElement?.closest(".contains-task-list");if(!s)throw Error("Could not find the item's parent list");let n=t?Array.from(s.children).indexOf(t):-1;return[e.indexOf(s),n]}(r,i):void 0,{title:f,content:p}=function(e){let t="",s="";for(let i of e.childNodes){var n;if("INPUT"===(n=i).nodeName||"UL"===n.nodeName||"OL"===n.nodeName||"#comment"===i.nodeName)continue;let e=i.textContent||"";if("#text"===i.nodeName){t+=e,s+=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");continue}if("CODE"===i.nodeName){t+=`\`${e}\``,s+=i.outerHTML;continue}t+=e,s+=i.outerHTML}return{title:t.trim(),content:s}}(i);l.push({id:s.toString(),index:c,title:f,content:p,checked:i.querySelector(".task-list-item-checkbox")?.checked===!0,position:_,container:i.parentElement,nested:a,children:k,markdownIndex:i.classList.contains("task-list-item")?n+=1:-1,isBullet:i.parentElement?.tagName==="UL"&&!i.classList.contains("task-list-item"),isNumbered:i.parentElement?.tagName==="OL"&&!i.classList.contains("task-list-item"),parentIsChecklist:o,hasNestedItems:h>0,hasDifferentListTypes:d});let x=m.length>0&&g({container:e,nestedItems:t,globalIndex:s+1,markdownIndex:n,items:m,itemsData:k,nested:!0,lists:r,parentIsChecklist:i.classList.contains("task-list-item"),hasDifferentListTypes:u.length>0&&m.length!==u.length});s=x?x.globalIndex:s+1,n=x?x.markdownIndex:n}),{globalIndex:s,markdownIndex:n}),_=async({markdownValue:e,markdownIndex:t,onChange:s})=>{let n=e.split(/\r?\n/),i=null,l=!1;for(let e=0,a=0;e<n.length;e++){let r=n[e];if(r.trim().startsWith("\x3c!--")&&(l=!0),l){r.trim().endsWith("--\x3e")&&(l=!1);continue}if(i){if(x(r,i)){i=null;continue}}else i=p(r);if(i)continue;let o=(0,h.VB)(r);if(k(o)){if(a===t){let t=(0,h.a1)(f(o));n.splice(e,1,t);let i=n.join("\n");return await s(i)}a++}}},f=e=>({...e,taskBox:"[ ]"===e.taskBox?"[x]":"[ ]"}),p=e=>{let t=e.match(/^ {0,3}(`{3,}|~{3,})[^`]*$/);return t?t[1]:null},x=(e,t)=>RegExp(`^ {0,3}${t}${t[0]}* *$`).test(e);var I=s(26108),L=s(67323),b=s(18990),T=s(38621);let v=e=>{let t,s,i,a,r,d,m,u,h,k,g,_,f,p,x,v,y,N,w,j,C,S,$=(0,c.c)(61);$[0]!==e?({totalItems:g,onConvertToIssue:m,onConvertToSubIssue:u,item:d,allowIssueConversion:s,allowSubIssueConversion:a,disabled:r,setIsConverting:k,allowReordering:i,...h}=e,$[0]=e,$[1]=s,$[2]=i,$[3]=a,$[4]=r,$[5]=d,$[6]=m,$[7]=u,$[8]=h,$[9]=k,$[10]=g):(s=$[1],i=$[2],a=$[3],r=$[4],d=$[5],m=$[6],u=$[7],h=$[8],k=$[9],g=$[10]);let{title:A,index:D,id:M}=d,{moveToPosition:E}=(0,o.gY)(),[B,O]=(0,l.useState)(!1),V=`task-list-menu-item-${M}`;$[11]!==D||$[12]!==V?(_=e=>{if(e){let e=Array.from(document.querySelectorAll('[id^="task-list-menu-item-"]'));if(e.length>0){let t=e[Math.min(D,e.length-1)];t?.focus()}}else{let e=document.getElementById(V);e&&e.focus()}},$[11]=D,$[12]=V,$[13]=_):_=$[13];let q=_;$[14]!==D||$[15]!==E?(f=e=>{let{moveAction:t,e:s}=e;switch(s.preventDefault(),s.stopPropagation(),O(!1),t){case"up":E(D,D-1,!0);break;case"down":E(D,D+1,!1)}},$[14]=D,$[15]=E,$[16]=f):f=$[16];let P=f;$[17]!==q||$[18]!==P||$[19]!==d||$[20]!==m||$[21]!==u||$[22]!==k?(p=e=>{let{e:t,move:s,convertToIssue:n,convertToSubIssue:i}=e;t.preventDefault(),t.stopPropagation(),"Enter"===t.code&&s&&P({moveAction:s,e:t}),"Enter"===t.code&&n&&(O(!1),m?.(d,k,()=>{q(!1)})),"Enter"===t.code&&i&&(O(!1),u?.(d,k,()=>{q(!0)})),"Escape"===t.code&&O(!1)},$[17]=q,$[18]=P,$[19]=d,$[20]=m,$[21]=u,$[22]=k,$[23]=p):p=$[23];let R=p,H=h["data-testid"];return $[24]!==A?(t=A,x=`Open ${t} task options`,$[24]=A,$[25]=x):x=$[25],$[26]!==r||$[27]!==H||$[28]!==x?(v=(0,n.jsx)(I.K,{"data-testid":H,icon:T.KebabHorizontalIcon,variant:"invisible","aria-label":x,disabled:r,className:"TaskListMenu-module__TaskListMenuTriggerButton__zzTV4"}),$[26]=r,$[27]=H,$[28]=x,$[29]=v):v=$[29],$[30]!==V||$[31]!==v?(y=(0,n.jsx)(L.W.Anchor,{id:V,children:v}),$[30]=V,$[31]=v,$[32]=y):y=$[32],$[33]!==i||$[34]!==R||$[35]!==P||$[36]!==D||$[37]!==g?(N=i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b.l.Item,{onClick:e=>P({moveAction:"up",e:e}),onKeyDown:e=>R({e:e,move:"up"}),disabled:0===D,children:[(0,n.jsx)(b.l.LeadingVisual,{children:(0,n.jsx)(T.ChevronUpIcon,{})}),"Move up"]}),(0,n.jsxs)(b.l.Item,{onClick:e=>P({moveAction:"down",e:e}),onKeyDown:e=>R({e:e,move:"down"}),disabled:D===g-1,children:[(0,n.jsx)(b.l.LeadingVisual,{children:(0,n.jsx)(T.ChevronDownIcon,{})}),"Move down"]})]}),$[33]=i,$[34]=R,$[35]=P,$[36]=D,$[37]=g,$[38]=N):N=$[38],$[39]!==s||$[40]!==R||$[41]!==d||$[42]!==m||$[43]!==h||$[44]!==k?(w=s&&m&&(0,n.jsxs)(b.l.Item,{onClick:()=>m?.(d,k),onKeyDown:e=>R({e:e,convertToIssue:!0}),"data-testid":h["data-testid"]&&`${h["data-testid"]}-convert`,children:[(0,n.jsx)(b.l.LeadingVisual,{children:(0,n.jsx)(T.IssueOpenedIcon,{})}),"Convert to issue"]}),$[39]=s,$[40]=R,$[41]=d,$[42]=m,$[43]=h,$[44]=k,$[45]=w):w=$[45],$[46]!==a||$[47]!==R||$[48]!==d||$[49]!==u||$[50]!==h||$[51]!==k?(j=a&&u&&(0,n.jsxs)(b.l.Item,{onClick:()=>u?.(d,k),onKeyDown:e=>R({e:e,convertToSubIssue:!0}),"data-testid":h["data-testid"]&&`${h["data-testid"]}-convert-sub-issue`,children:[(0,n.jsx)(b.l.LeadingVisual,{children:(0,n.jsx)(T.IssueTracksIcon,{})}),"Convert to sub-issue"]}),$[46]=a,$[47]=R,$[48]=d,$[49]=u,$[50]=h,$[51]=k,$[52]=j):j=$[52],$[53]!==j||$[54]!==N||$[55]!==w?(C=(0,n.jsx)(L.W.Overlay,{children:(0,n.jsxs)(b.l,{children:[N,w,j]})}),$[53]=j,$[54]=N,$[55]=w,$[56]=C):C=$[56],$[57]!==B||$[58]!==C||$[59]!==y?(S=(0,n.jsxs)(L.W,{open:B,onOpenChange:O,children:[y,C]}),$[57]=B,$[58]=C,$[59]=y,$[60]=S):S=$[60],S};v.displayName="TaskListMenu";let y={ADD_TAGS:["math-renderer"],ADD_ATTR:["style","data-run-id","data-catalyst","class"]},N=/\/issues\/\d*\d/,w=(e,t)=>{let s=document.createElement("div");s.innerHTML=e;let n=s.querySelectorAll("span.reference");if(0===n.length)return!0;if(t||n.length>1)return!1;let i=n[0];return i.remove(),""===s.innerHTML.trim()&&!!N.test(i.innerHTML)};function j(e){let t,s,a,r,d,h,k,g,f,p,x,I,L,b,T,N,j,C,S,$,A,D=(0,c.c)(71),{markdownValue:M,onChange:E,onConvertToIssue:B,onConvertToSubIssue:O,nested:V,position:q,item:P,totalItems:R,disabled:H,hideActions:U,itemIdToFocus:F,setitemIdToFocus:K,toggledItem:z,setToggledItem:W}=e,Y=void 0!==V&&V,G=void 0===q?1:q,[Z,Q]=(0,l.useState)(P.checked),[X,J]=(0,l.useState)(!1),[ee,et]=(0,l.useState)(!1);D[0]!==H||D[1]!==F||D[2]!==K?(t=()=>{F&&!H&&(function(e){let t=document.getElementById(`task-list-menu-item-${e}`);t&&t.focus()}(F),K?.(null))},s=[F,H,K],D[0]=H,D[1]=F,D[2]=K,D[3]=t,D[4]=s):(t=D[3],s=D[4]),(0,l.useEffect)(t,s),D[5]!==H||D[6]!==W||D[7]!==z?(a=()=>{z&&!H&&W(null)},r=[z,H,W],D[5]=H,D[6]=W,D[7]=z,D[8]=a,D[9]=r):(a=D[8],r=D[9]),(0,l.useEffect)(a,r),D[10]!==P.checked||D[11]!==P.id||D[12]!==P.markdownIndex||D[13]!==E||D[14]!==W?(d=e=>{Q(!P.checked),W(P.id),_({markdownValue:e,markdownIndex:P.markdownIndex,onChange:E})},D[10]=P.checked,D[11]=P.id,D[12]=P.markdownIndex,D[13]=E,D[14]=W,D[15]=d):d=D[15];let es=d,en=!Y&&!P.hasDifferentListTypes||Y&&G<2&&!P.parentIsChecklist&&!P.hasDifferentListTypes;D[16]!==P.content?(h=w(P.content,!0),D[16]=P.content,D[17]=h):h=D[17],D[18]!==P.content?(k=w(P.content,!1),D[18]=P.content,D[19]=k):k=D[19],D[20]!==h||D[21]!==k?(g=[h,k],D[20]=h,D[21]=k,D[22]=g):g=D[22];let[ei,el]=g,ea=`tasklist-item-${G}-${P.markdownIndex}`,er=!Y||B&&O?"TaskListItem-module__task-list-item__nf0LI":"TaskListItem-module__no-convert-task-list-item___jOpC";er+=` ${Y&&R>0?"contains-task-list":""}`,er+=H?" TaskListItem-module__disabled__oIAG1":"",D[23]===Symbol.for("react.memo_cache_sentinel")?(f=()=>J(!0),p=()=>J(!1),D[23]=f,D[24]=p):(f=D[23],p=D[24]),D[25]!==en||D[26]!==H||D[27]!==X?(x=en&&!H&&(0,n.jsx)(o.BS.DragTrigger,{className:`TaskListItem-module__drag-handle-icon__k5QVp ${X?"TaskListItem-module__show-trigger__Un1oz":""}`,style:{width:"20px",height:"28px"}}),D[25]=en,D[26]=H,D[27]=X,D[28]=x):x=D[28],D[29]!==x?(I=(0,n.jsx)("div",{className:"TaskListItem-module__drag-drop-container__sq_g1",children:x}),D[29]=x,D[30]=I):I=D[30];let eo=`checkbox-item-${P.id}`,ed=P.id===z;D[31]!==M||D[32]!==es?(L=e=>{e.preventDefault(),e.stopPropagation(),es(M)},D[31]=M,D[32]=es,D[33]=L):L=D[33];let ec=`${P.title} checklist item`;return D[34]!==Z||D[35]!==H||D[36]!==ed||D[37]!==L||D[38]!==ec?(b=(0,n.jsx)(m.A,{autoFocus:ed,checked:Z,disabled:H,onChange:L,"aria-label":ec,className:"TaskListItem-module__taskStatusCheckbox__bnw_T"}),D[34]=Z,D[35]=H,D[36]=ed,D[37]=L,D[38]=ec,D[39]=b):b=D[39],D[40]!==P.content?(T=(0,n.jsx)(u.JU,{html:P.content,className:"TaskListItem-module__task-list-html__wqNZG",domPurifyConfig:y}),D[40]=P.content,D[41]=T):T=D[41],D[42]!==eo||D[43]!==b||D[44]!==T?(N=(0,n.jsxs)("div",{className:"TaskListItem-module__checkbox-items__v4LMp",id:eo,children:[b,T]}),D[42]=eo,D[43]=b,D[44]=T,D[45]=N):N=D[45],D[46]!==I||D[47]!==N?(j=(0,n.jsxs)("div",{className:"TaskListItem-module__left-aligned-content__Pwb_R",children:[I,N]}),D[46]=I,D[47]=N,D[48]=j):j=D[48],D[49]!==ee?(C=ee&&(0,n.jsx)(i.A,{size:"small"}),D[49]=ee,D[50]=C):C=D[50],D[51]!==en||D[52]!==ei||D[53]!==el||D[54]!==H||D[55]!==U||D[56]!==ee||D[57]!==P||D[58]!==B||D[59]!==O||D[60]!==ea||D[61]!==R?(S=!U&&en&&P.position&&!ee&&(0,n.jsx)(v,{"data-testid":`${ea}-menu`,onConvertToIssue:B,onConvertToSubIssue:O,totalItems:R,item:P,disabled:H,allowIssueConversion:ei,allowSubIssueConversion:el,setIsConverting:et,allowReordering:en}),D[51]=en,D[52]=ei,D[53]=el,D[54]=H,D[55]=U,D[56]=ee,D[57]=P,D[58]=B,D[59]=O,D[60]=ea,D[61]=R,D[62]=S):S=D[62],D[63]!==C||D[64]!==S?($=(0,n.jsxs)("div",{className:"TaskListItem-module__TaskListItemActionsContainer__YAHNS",children:[C,S]}),D[63]=C,D[64]=S,D[65]=$):$=D[65],D[66]!==j||D[67]!==$||D[68]!==ea||D[69]!==er?(A=(0,n.jsxs)("div",{className:er,onMouseEnter:f,onMouseLeave:p,"data-testid":ea,children:[j,$]}),D[66]=j,D[67]=$,D[68]=ea,D[69]=er,D[70]=A):A=D[70],A}j.displayName="TaskListItem";function C(e){let t,s=(0,c.c)(3),{item:i,position:l}=e,a=`tasklist-item-${l}-${i.markdownIndex}`;return s[0]!==i.content||s[1]!==a?(t=(0,n.jsx)(u.Pk,{html:i.content,as:"div","data-testid":a,className:"ListItem-module__ListItemContent__F3VZe"}),s[0]=i.content,s[1]=a,s[2]=t):t=s[2],t}C.displayName="ListItem";let S=(e,t)=>{let s,n=t.split(/\r?\n/),i=-1,l=-1,a=-1;for(let[t,r]of n.entries()){let n=(0,h.VB)(r),o=n?.leadingWhitespace.length;if(s&&(!r||void 0!==o&&o<=s.leadingWhitespace.length)){l=t>0?t-1:0;break}n&&k(n)&&++a===e&&(i=t,s=n)}return{startLineNumber:i,endLineNumber:l=-1===l?n.length-1:l}},$=({tasklists:e,markdownValue:t,externalOnChange:s,onConvertToIssue:i,onConvertToSubIssue:a,tasklistData:c,setTasklistData:m,disabled:u,viewerCanUpdate:h})=>{let[k,g]=(0,l.useState)(!1),[_,f]=(0,l.useState)(null),[p,x]=(0,l.useState)(null),I=(0,l.useCallback)(async({dragMetadata:e,dropMetadata:n,isBefore:i,items:l,container:a})=>{if(e.id===n?.id||u)return;g(!0);let r=l.find(t=>t.id===e.id)?.markdownIndex,o=l.find(e=>e.id===n.id)?.markdownIndex;if(void 0===r||void 0===o)return;let d=((e,t,s,n)=>{let{startLineNumber:i,endLineNumber:l}=S(s,e),{startLineNumber:a,endLineNumber:r}=S(n,e),o=e.split(/\r?\n/),d=l-i+1,c=[...o].splice(i,d);return t?(o.splice(i,d),o.splice(a,0,...c)):(o.splice(r+1,0,...c),o.splice(i,d)),o.join("\n")})(t,i,r,o);m(((e,t,s,n,i,l)=>{let a=new Map(n),r=e.findIndex(e=>e.id===t),o=e[r];if(!o)return a;let d=[...e];d.splice(r,1);let c=d.findIndex(e=>e.id===s);d.splice(i?c:c+1,0,o);let m=n.get(l);if(!m)return a;if(m===e)a.set(l,d);else{let t=s=>{for(let n of s)n.children===e?n.children=d:n.children&&t(n.children)};t(m),a.set(l,m)}return a})(l,e.id,n.id,c,i,a)),s&&(await s(d),g(!1),f(n.id))},[u,t,c,m,s]),L=(0,l.useCallback)(async e=>{s&&(g(!0),await s(e),g(!1))},[s]);function b(e,s,r,c,m,g){let T=!e.isBullet&&!e.isNumbered,v="OL"===r.tagName?"ol":"UL"===r.tagName?"ul":"div";return(0,n.jsxs)(l.Fragment,{children:[T&&(0,n.jsx)(j,{toggledItem:p,setToggledItem:x,markdownValue:t,onChange:L,onConvertToIssue:i,onConvertToSubIssue:a,nested:m,position:s,item:e,totalItems:c,disabled:u||k,hideActions:!h&&!k,setitemIdToFocus:f,itemIdToFocus:_}),!T&&(0,n.jsx)(C,{item:e,position:s}),e.children.length>0&&(0,n.jsx)(o.BS,{items:e.children,onDrop:t=>I({...t,items:e.children,container:r}),renderOverlay:(t,i)=>(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,className:d,isDragOverlay:!0,style:{marginLeft:"-30px"},children:b(t,s+1,r,e.children.length,!0,!0)},t.id),as:"div",children:(0,n.jsx)(v,{className:"base-list-item",style:{listStyleType:"none",marginLeft:T?"12px":"-28px"},children:e.children.map((t,i)=>{let l=A({child:t,position:s}),a=D({child:t,isDragOverlay:g}),d=M({child:t,isDragOverlay:g});return(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,className:`${l} ${a} ${d}`,as:E(e)?"li":"div",children:b(t,s+1,r,e.children.length,!0,g)},t.id)})})})]},e.index)}return(0,l.useMemo)(()=>(0,n.jsx)(n.Fragment,{children:e.map((e,t)=>{let s=c.get(e)||[],i=s.filter(e=>!e.isBullet&&!e.isNumbered),l="OL"===e.tagName?"ol":"UL"!==e.tagName||e.classList.contains("contains-task-list")&&i.length===s.length?"div":"ul";return s.length>0?(0,r.createPortal)((0,n.jsx)("li",{className:"base-task-list-item",style:{listStyle:"none",marginLeft:"-28px"},children:(0,n.jsx)(o.BS,{items:s,onDrop:t=>I({...t,items:s,container:e}),style:{marginTop:"1px"},renderOverlay:(t,i)=>(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,isDragOverlay:!0,children:b(t,0,e,s.length,!1,!0)},t.id),as:"div",children:(0,n.jsx)(l,{className:"base-list-item",style:{marginLeft:i.length!==s.length&&i.length?"5px":"0px"},children:s.map((t,i)=>(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,className:t.isBullet?"TaskListItems-module__bullet-task-item__mzN18":t.isNumbered?"TaskListItems-module__numbered-task-item__q97XR":d,as:E(t)?"li":"div",style:{marginLeft:t.isBullet||t.isNumbered||!t.hasDifferentListTypes?"0px":"-28px",marginRight:"-8px"},children:b(t,0,e,s.length,!1,!1)},t.id))})})}),e,t.toString()):null})}),[t,c,u])};$.displayName="TaskListItems";let A=({child:e,position:t})=>e.isNumbered?t+1<2?"TaskListItems-module__numbered-task-list__ck1gY":"TaskListItems-module__numbered-task-list-nested__b4mwL":e.isBullet?t+1<2?"TaskListItems-module__unordered-task-list__cX3kc":"TaskListItems-module__unordered-task-list-nested__kbk1D":d,D=({child:e,isDragOverlay:t})=>!e.isBullet&&!e.isNumbered&&(t?"TaskListItems-module__nested-overlay-list__NuQY8":e.parentIsChecklist||e.hasDifferentListTypes?"":d),M=({child:e,isDragOverlay:t})=>(e.isBullet||e.isNumbered)&&(t?"TaskListItems-module__overlay-task-list-child__N7M1i":""),E=e=>(e.isNumbered||e.isBullet)&&!e.hasDifferentListTypes||e.hasDifferentListTypes||e.children.length>0;var B=s(34164);let O=[];function V(){return new Map}function q(){return new Map}let P=function(e,t,s){let n,i,a,r=(0,c.c)(8);r[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],r[0]=n):n=r[0];let[o,d]=(0,l.useState)(n);return r[1]!==e||r[2]!==t?(i=()=>{let s=Array.from(e.current?.querySelectorAll(t)??O);d(e=>!function(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}(e,s)?s:e)},r[1]=e,r[2]=t,r[3]=i):i=r[3],r[4]!==e||r[5]!==t||r[6]!==s?(a=[s,e,t],r[4]=e,r[5]=t,r[6]=s,r[7]=a):a=r[7],(0,l.useLayoutEffect)(i,a),o};var R=s(57695);let H=/\b(href|src)\s*=\s*(['"])([^'"?]{1,2000})(\?(?:[^'"]{0,1000}?))token=([^&#"']{0,500})([^'"]{0,1000})\2/gi,U=({verifiedHTML:e,markdownValue:t="",onChange:s,onConvertToIssue:r,onConvertToSubIssue:o,onLinkClick:d,openLinksInNewTab:m=!1,loading:u=!1,disabled:h,viewerCanUpdate:k,className:_})=>{let f=(0,l.useRef)(null),p=P(f,".contains-task-list:not(.contains-task-list .contains-task-list)",e),x=(0,l.useRef)(""),I=(0,l.useMemo)(()=>{var t,s,n;let i;return t=x.current,s=e,n=function(e){let t,s={};H.lastIndex=0;let n=0;for(;null!==(t=H.exec(e))&&!(++n>1e3);){let e=t[3],n=t[4],i=t[5],l=t[6];e&&i&&(s[`${e}${n}token=TOKEN_PLACEHOLDER${l}`]=i)}return s}(t),H.lastIndex=0,i=0,s.replace(H,(e,t,s,l,a,r,o)=>{if(++i>1e3)return e;let d=`${l}${a}token=TOKEN_PLACEHOLDER${o}`;return n.hasOwnProperty(d)?`${t}=${s}${l}${a}token=${n[d]}${o}${s}`:e})},[e]);x.current=I;let{tasklistData:L,nestedItems:b,setTasklistData:T}=((e,t)=>{let s,n,i,a=(0,c.c)(7),[r,o]=(0,l.useState)(V),[d,m]=(0,l.useState)(q);return a[0]!==e||a[1]!==t?(s=()=>{if(!e)return;let s=function({container:e,tasklists:t}){let s=new Map,n=new Map,i=function(e,t="ul:not(.base-list-item), ol:not(.base-list-item)"){return Array.from(e.querySelectorAll(t)).filter(e=>!e.closest("tracking-block"))}(e),l=0,a=-1;for(let r of t){let t=Array.from(r.querySelectorAll(":scope > li:not(.base-task-list-item)")),o=r.querySelectorAll(":scope > li.task-list-item"),d=[],{globalIndex:c,markdownIndex:m}=g({container:e,nestedItems:n,globalIndex:l,markdownIndex:a,items:t,itemsData:d,nested:!1,lists:i,parentIsChecklist:r.classList.contains("task-list-item"),hasDifferentListTypes:o.length>0&&o.length!==t.length});for(let e of(l=c,a=m,s.set(r,d),t))e.remove()}return{newData:s,nestedItems:n}}({container:e,tasklists:t});o(s.newData),m(s.nestedItems)},n=[e,t],a[0]=e,a[1]=t,a[2]=s,a[3]=n):(s=a[2],n=a[3]),(0,l.useLayoutEffect)(s,n),a[4]!==d||a[5]!==r?(i={tasklistData:r,nestedItems:d,setTasklistData:o,setNestedItems:m},a[4]=d,a[5]=r,a[6]=i):i=a[6],i})(f.current,p);(0,R.O)({htmlContainerRef:f,onLinkClick:d,openLinksInNewTab:m});let v=(0,l.useMemo)(()=>{let e=["markdown-body","NewMarkdownViewer-module__safe-html-box__ZT1eD"];return _&&e.push(_),(0,n.jsx)(a.vb,{ref:f,className:(0,B.$)(e),html:I})},[_,I]);return u?(0,n.jsx)("div",{className:(0,B.$)("NewMarkdownViewer-module__spinner__L5zC6"),children:(0,n.jsx)(i.A,{"aria-label":"Loading markdown content..."})}):(0,n.jsxs)(n.Fragment,{children:[v,p.length>0&&(0,n.jsx)($,{tasklists:p,markdownValue:t,externalOnChange:s,onConvertToIssue:r,onConvertToSubIssue:o,tasklistData:L,setTasklistData:T,nestedItems:b,disabled:h||!s,viewerCanUpdate:k})]})};U.displayName="NewMarkdownViewer"}}]);
//# sourceMappingURL=46720-63f43c7973777a23-b334d8f8a9d56ba5.js.map