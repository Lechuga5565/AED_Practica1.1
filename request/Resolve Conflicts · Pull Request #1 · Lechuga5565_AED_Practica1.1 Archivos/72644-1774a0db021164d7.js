performance.mark("js-parse-end:72644-1774a0db021164d7.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["72644"],{87606(e,t,n){n.d(t,{b:()=>S});var a=n(74848),r=n(16522),l=n(67323),i=n(21373),o=n(18990),s=n(73077),c=n(38621),u=n(87532),d=n(33077),h=n(24043),m=n(31171),g=n(35592),p=n(88275);function y(e){let t,n,l,i=(0,r.c)(12),{topLevelAgents:s,customAgents:c,selectedAgent:u,onSelectAgent:d}=e;return i[0]!==d||i[1]!==u||i[2]!==s?(t=s.length>0&&(0,a.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(o.l.GroupHeading,{children:"Agents"}),s.map(e=>{let t=(0,p.sS)(e.slug),n=u?.typeName==="topLevel"&&u.topLevelAgentId===e.id,r=!u?.typeName&&t,l=n||r;return(0,a.jsxs)(o.l.Item,{disabled:!1,selected:l,onSelect:()=>d(l?{}:{typeName:"topLevel",topLevelAgentId:e.id,displayName:e.display_name,avatarUrl:e.avatar_url,login:e.slug,botGlobalRelayId:e.bot_global_relay_id}),children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(g.r,{src:e.avatar_url||"",size:16,square:!0})}),e.display_name]},e.id)})]}),i[0]=d,i[1]=u,i[2]=s,i[3]=t):t=i[3],i[4]!==c||i[5]!==d||i[6]!==u||i[7]!==s.length?(n=c.length>0&&(0,a.jsxs)(a.Fragment,{children:[s.length>0&&(0,a.jsx)(o.l.Divider,{}),(0,a.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(o.l.GroupHeading,{children:"Custom agents"}),c.map(e=>{let t=!!e.config_error&&e.config_error.length>0,n=u.subAgentSlug===e.name;return(0,a.jsx)(o.l.Item,{disabled:t,inactiveText:t?e.config_error:void 0,selected:n,onSelect:()=>d(n?{}:{typeName:"customSubAgent",subAgentSlug:e.name,displayName:e.display_name||e.name,login:e.name}),children:e.display_name||e.name},e.name)})]})]}),i[4]=c,i[5]=d,i[6]=u,i[7]=s.length,i[8]=n):n=i[8],i[9]!==t||i[10]!==n?(l=(0,a.jsxs)(a.Fragment,{children:[t,n]}),i[9]=t,i[10]=n,i[11]=l):l=i[11],l}y.displayName="AgentListItems";var f=n(5024),b=n(55783),v=n(34164),_=n(96540);function S(e){let t,n,s,S,I,A,j,N,C,L,k,T,O,P,B=(0,r.c)(53),{repo:R,branch:$,selectedAgent:E,onSelectAgent:F,iconOnly:G,disabled:D,buttonProps:q,insideDialog:W}=e,V=void 0===G||G,M=void 0!==D&&D,Q=void 0!==W&&W;B[0]!==R?(t={repo:R},B[0]=R,B[1]=t):t=B[1];let{data:H,isLoading:K}=function(e){let t,n,a=(0,r.c)(4),{repo:l}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.G7)("agent_session_retry_fetch_capi_on_401"),a[0]=t):t=a[0];let i=t;return a[1]!==l.nameOnly||a[2]!==l.owner?(n={queryKey:["custom-agents",l.owner,l.nameOnly],queryFn:async()=>{try{let e=await (0,u.I)({path:`/agents/swe/custom-agents/${l.owner}/${l.nameOnly}`,retryOn401:i});if(404===e.status)return[];return(await e.json()).agents}catch{return[]}}},a[1]=l.nameOnly,a[2]=l.owner,a[3]=n):n=a[3],(0,d.b)(n)}(t);B[2]!==H?(n=void 0===H?[]:H,B[2]=H,B[3]=n):n=B[3];let U=n,{data:z,isLoading:Y}=(0,m.n)(R.nameWithOwner);B[4]!==z?(s=void 0===z?[]:z,B[4]=z,B[5]=s):s=B[5];let J=s,X=R.isEmpty||!$||K||Y;B[6]!==U||B[7]!==J?(S=[...J,...U],B[6]=U,B[7]=J,B[8]=S):S=B[8];let Z=S;B[9]!==Z||B[10]!==X||B[11]!==F||B[12]!==E?(I=()=>{X||0===Z.length||!E?.typeName||("topLevel"===E.typeName?Z.some(e=>"id"in e&&e.id===E.topLevelAgentId):Z.some(e=>"name"in e&&e.name===E.subAgentSlug))||F({})},A=[X,Z,E,F],B[9]=Z,B[10]=X,B[11]=F,B[12]=E,B[13]=I,B[14]=A):(I=B[13],A=B[14]),(0,_.useEffect)(I,A);let ee=x,et=ee(E)?"Copilot":E,en="string"==typeof et?"Copilot"===et?"topLevel":"customSubAgent":et.typeName;if(B[15]!==en||B[16]!==Z||B[17]!==$||B[18]!==q||B[19]!==M||B[20]!==et||B[21]!==V||B[22]!==X||B[23]!==R||B[24]!==E){let e,t,n,r,o,s,u=Z.find(e=>"string"==typeof et?e.display_name===et:"topLevel"===en?"id"in e&&e.id===et.topLevelAgentId:"customSubAgent"===en?"name"in e&&e.name===et.subAgentSlug:void 0);e:{if("string"==typeof et){e=et;break e}if(!u){e=void 0;break e}e=u.display_name||("name"in u?u.name:void 0)}let d=e;if(B[29]!==$||B[30]!==R.nameOnly||B[31]!==R.owner){let e=new URLSearchParams({filename:".github/agents/my-agent.agent.md",value:"---\n# Fill in the fields below to create a basic custom agent for your repository.\n# The Copilot CLI can be used for local testing: https://gh.io/customagents/cli\n# To make this agent available, merge this file into the default repository branch.\n# For format details, see: https://gh.io/customagents/config\n\nname:\ndescription:\n---\n\n# My Agent\n\nDescribe what your agent does here..."});t=R.owner,n=R.nameOnly,r=$,o=e.toString(),B[29]=$,B[30]=R.nameOnly,B[31]=R.owner,B[32]=t,B[33]=n,B[34]=r,B[35]=o}else t=B[32],n=B[33],r=B[34],o=B[35];C=`/${t}/${n}/new/${r}?${o}`;t:{if(ee(E)){s=!0;break t}if("topLevel"===E.typeName&&u&&"slug"in u){s=(0,p.sS)(u.slug);break t}s=!1}let h=s,m=d||"None",y=d?`${"topLevel"===en?"Agent":"Custom agent"}: ${d}`:"Select an agent";N=l.W,j=l.W.Anchor,L=V?function({isLoading:e,isCopilotSelected:t,selectedAgentObj:n,agentType:r,ariaLabel:l,disabled:o,variant:s,className:u}){return e?(0,a.jsx)(i.Q,{"aria-label":"Loading agents",disabled:!0,variant:s,className:(0,v.$)("AgentSelector-module__avatarButtonSkeleton__yG_hD",u),children:(0,a.jsx)(f.f,{width:"32px",height:"32px","data-testid":"agent-selector-skeleton"})}):t?(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.CopilotIcon,"aria-label":l,selected:!1,disabled:o,variant:s,className:u}):n&&"object"==typeof n&&"customSubAgent"===r?(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:o,variant:s,className:u}):n&&"object"==typeof n&&"avatar_url"in n?(0,a.jsx)(i.Q,{"aria-label":l,disabled:o||e,variant:s,className:(0,v.$)("AgentSelector-module__avatarButton__WQpZD",u),children:(0,a.jsx)(g.r,{src:n.avatar_url,size:18,square:!0})}):(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:o,variant:s,className:u})}({isLoading:X,isCopilotSelected:h,selectedAgentObj:u,agentType:en,ariaLabel:y,disabled:M,variant:q?.variant,className:q?.className}):(0,a.jsx)(i.Q,{leadingVisual:d?c.FileCheckIcon:c.CopilotIcon,trailingAction:c.TriangleDownIcon,"aria-label":y,className:"AgentSelector-module__anchor__bShpn","data-selected":!!u,disabled:M||X,...q,children:m}),B[15]=en,B[16]=Z,B[17]=$,B[18]=q,B[19]=M,B[20]=et,B[21]=V,B[22]=X,B[23]=R,B[24]=E,B[25]=j,B[26]=N,B[27]=C,B[28]=L}else j=B[25],N=B[26],C=B[27],L=B[28];return B[36]!==j||B[37]!==L?(k=(0,a.jsx)(j,{children:L}),B[36]=j,B[37]=L,B[38]=k):k=B[38],B[39]!==Z.length||B[40]!==U||B[41]!==C||B[42]!==F||B[43]!==E||B[44]!==J?(T=0===Z.length?(0,a.jsx)(w,{newFileUrl:C}):(0,a.jsxs)(o.l,{children:[(0,a.jsx)(y,{topLevelAgents:J,customAgents:U,selectedAgent:E,onSelectAgent:F}),(0,a.jsx)(o.l.Divider,{}),(0,a.jsx)(o.l.Group,{selectionVariant:!1,children:(0,a.jsxs)(o.l.LinkItem,{href:C,target:"_blank",children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(c.PlusIcon,{})}),"Create a custom agent"]})})]}),B[39]=Z.length,B[40]=U,B[41]=C,B[42]=F,B[43]=E,B[44]=J,B[45]=T):T=B[45],B[46]!==Q||B[47]!==T?(O=(0,a.jsx)(l.W.Overlay,{width:"auto",overflow:"auto",displayInViewport:Q,children:T}),B[46]=Q,B[47]=T,B[48]=O):O=B[48],B[49]!==N||B[50]!==k||B[51]!==O?(P=(0,a.jsxs)(N,{children:[k,O]}),B[49]=N,B[50]=k,B[51]=O,B[52]=P):P=B[52],P}function x(e){return!e?.typeName}S.displayName="AgentSelector";let w=e=>{let t,n,l,i=(0,r.c)(4),{newFileUrl:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("h3",{className:"AgentSelector-module__emptyStateTitle__qtdHm",children:"This repository has no custom agents"}),n=(0,a.jsx)("p",{className:"AgentSelector-module__emptyStateDescription__OXhyH",children:"Custom agents are reusable instructions and tools in your repository."}),i[0]=t,i[1]=n):(t=i[0],n=i[1]),i[2]!==o?(l=(0,a.jsxs)("div",{className:"AgentSelector-module__emptyStateContainer__GU4px",children:[t,n,(0,a.jsx)(s.z,{href:o,children:"Create a custom agent"})]}),i[2]=o,i[3]=l):l=i[3],l};w.displayName="EmptyState"},31895(e,t,n){n.d(t,{Fn:()=>s,eS:()=>o});var a=n(74848),r=n(16522),l=n(96540);let i=(0,l.createContext)(void 0);function o(){let e=(0,l.use)(i);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function s(e){let t,n,o,s,u=(0,r.c)(7),{children:d}=e,[h,m]=(0,l.useState)(0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>m(c),n=()=>m(0),u[0]=t,u[1]=n):(t=u[0],n=u[1]),u[2]!==h?(o={numberOf401s:h,increment401s:t,reset401s:n},u[2]=h,u[3]=o):o=u[3];let g=o;return u[4]!==d||u[5]!==g?(s=(0,a.jsx)(i,{value:g,children:d}),u[4]=d,u[5]=g,u[6]=s):s=u[6],s}function c(e){return e+1}i.displayName="ConsecutiveCAPI401sContext",s.displayName="ConsecutiveCAPI401sProvider"},20407(e,t,n){n.d(t,{s:()=>i});var a=n(16522),r=n(96540),l=n(5916);function i(){let e,t,n,i=(0,a.c)(7),{value:o,setValue:s}=(0,l.Q)("AGENT_SESSIONS_LAST_SELECTED_AGENT");i[0]!==o?(e=()=>o??{},i[0]=o,i[1]=e):e=i[1];let[c,u]=(0,r.useState)(e);i[2]!==s?(t=e=>{u(e),s(e)},i[2]=s,i[3]=t):t=i[3];let d=t;return i[4]!==c||i[5]!==d?(n=[c,d],i[4]=c,i[5]=d,i[6]=n):n=i[6],n}},33077(e,t,n){n.d(t,{b:()=>s});var a=n(97286),r=n(87532),l=n(31895),i=n(18347),o=n(96540);function s(...e){let t=(0,a.I)(...e),{numberOf401s:n,increment401s:c,reset401s:u}=(0,l.eS)(),{isError:d,isLoading:h,error:m}=t,g=(0,o.useRef)(null);return(0,o.useEffect)(()=>{d&&m instanceof r.Y&&401===m.status?g.current!==m&&(n>=5?((0,i.fM)().tryRefreshToken(),g.current=m,u()):(g.current=m,c())):d||h||!(n>0)?d||(g.current=null):(g.current=null,u())},[d,h,m,c,u,n]),t}},5916(e,t,n){n.d(t,{Q:()=>l});var a=n(16522),r=n(69991);function l(e){let t,n,l,i,o,s=(0,a.c)(11);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.D)("localStorage"),s[0]=t):t=s[0];let c=t;s[1]!==e?(n=c.getItem(e)??void 0,s[1]=e,s[2]=n):n=s[2];let u=n;s[3]!==e?(l=t=>{c.setItem(e,t)},s[3]=e,s[4]=l):l=s[4];let d=l;s[5]!==e?(i=()=>{c.removeItem(e)},s[5]=e,s[6]=i):i=s[6];let h=i;return s[7]!==h||s[8]!==d||s[9]!==u?(o={value:u,setValue:d,removeItem:h},s[7]=h,s[8]=d,s[9]=u,s[10]=o):o=s[10],o}},31171(e,t,n){n.d(t,{n:()=>l});var a=n(58388),r=n(97286);function l(e){return(0,r.I)({enabled:!!e,queryKey:["top-level-agents",e],queryFn:async()=>{try{if(!e)return[];let t=await (0,a.lS)(`/copilot/agent-sessions/${e}/agents`);if(!t.ok)return[];return(await t.json()).agents||[]}catch{return[]}}})}},88275(e,t,n){function a(e){return"copilot-swe-agent"===e}function r(e,t){return!e.topLevelAgentId||a(t)||!!e.subAgentSlug}n.d(t,{CF:()=>r,sS:()=>a})},87532(e,t,n){n.d(t,{I:()=>u,Y:()=>c});var a=n(50467),r=n(18347),l=n(85461),i=n(94007),o=n(24043);function s(e){switch(e){case 0:return"Network error. Please check your connection and try again.";case 400:return"The request was invalid. Please verify your input and try again.";case 401:return"You don't have permission to perform this action. Please sign in and try again.";case 402:return"You've run out of Copilot premium quota.";case 403:return"This feature isn't available for this repository or organization.";case 404:return"The requested resource couldn't be found.";case 408:return"The request timed out. Please try again.";case 409:return"A conflict occurred. The resource may already exist.";case 422:return"The request was rejected. A repository rule may have blocked this action.";case 429:return"Too many requests. Please wait a moment and try again.";default:return"An unexpected error occurred. Please try again."}}class c extends Error{constructor(e,t){super(e),(0,a._)(this,"status",void 0),(0,a._)(this,"originalMessage",void 0),this.name="FetchCAPIError",this.status=t,this.originalMessage=e}}async function u({path:e,method:t="GET",streamingResponse:n=!1,additionalHeaders:a,body:l,retryOn401:s,copilotApiUrl:c}){let u=(0,r.fM)();return d({path:e,method:t,streamingResponse:n,additionalHeaders:a,body:l,basePath:c??(0,i._$)().copilotApiOverrideUrl??"https://api.githubcopilot.com",retryOn401:s??(0,o.G7)("mission_control_retry_on_401")},u)}async function d(e,t,n=0){let a=await t.getAuthToken();if(!a)throw Error("No token available");let r=await (0,l.p)({authToken:a,basePath:e.basePath,method:e.method,path:e.path,streamingResponse:e.streamingResponse,body:e.body,additionalHeaders:e.additionalHeaders});if(!r.ok){let a;if(e.retryOn401&&401===r.status&&n<1)return await t.tryRefreshToken()||t.removeLocalStorageAuthToken(),d(e,t,n+1);if(r.status>=500)a=s(r.status);else if(a="error"in r?r.error:s(r.status),"response"in r&&r.response)try{let e=await r.response.text();e&&e.trim()&&(a=e.trim())}catch{}throw new c(a,r.status)}return r}},18347(e,t,n){n.d(t,{fM:()=>l});var a=n(36431);let r=null;function l(){return r||(r=new i),r}class i extends a.JR{async validateAuthToken(e){return e.ssoChanged(this.ssoOrgIDs)||e.isExpired?this.fetchAuthToken():e}async tryRefreshToken(){if(this.isUnlicensed)return!1;try{return await this.fetchAuthToken(!0),!0}catch{return!1}}constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},55783(e,t,n){n.d(t,{L:()=>o});var a=n(74848),r=n(16522),l=n(26108),i=n(34164);let o=e=>{let t,n,o,s,c,u,d,h=(0,r.c)(14);if(h[0]!==e){let{ref:a,...r}=e;o=a;let{selected:d,icon:m,selectedIcon:g,...p}=r;t=(s=d)&&g?g:m,n=l.K,c=p,u=(0,i.$)("IconButtonSelector-module__anchor__CqN0z",p.className),h[0]=e,h[1]=t,h[2]=n,h[3]=o,h[4]=s,h[5]=c,h[6]=u}else t=h[1],n=h[2],o=h[3],s=h[4],c=h[5],u=h[6];return h[7]!==t||h[8]!==n||h[9]!==o||h[10]!==s||h[11]!==c||h[12]!==u?(d=(0,a.jsx)(n,{...c,className:u,icon:t,"data-selected":s,ref:o}),h[7]=t,h[8]=n,h[9]=o,h[10]=s,h[11]=c,h[12]=u,h[13]=d):d=h[13],d};o.displayName="IconButtonSelector",o.displayName="IconButtonSelector"},2045(e,t,n){n.d(t,{P:()=>v,s:()=>b});var a=n(74848),r=n(16522),l=n(87606),i=n(31895),o=n(87913),s=n(65554),c=n(58388),u=n(38621),d=n(5024),h=n(26108),m=n(96540),g=n(25891),p=n(3972),y=n(55783);let f="RepoBranchAgentSelector-module__invisibleSelectorButton__Paj_S",b=e=>{let t,n,c,b,S,x,w=(0,r.c)(30),{hideRepoSelector:I,initialRepoNWO:A,initialBranch:j,selectedRepo:N,selectedBranch:C,selectedAgent:L,onRepoSelect:k,onBranchSelect:T,onAgentSelect:O,agentSelectionEnabled:P,iconOnly:B}=e,R=void 0===P||P,$=void 0!==B&&B,E=(0,m.useRef)(!1);w[0]!==j||w[1]!==A||w[2]!==T||w[3]!==k||w[4]!==N?(t=e=>{let t;if(!N&&!E.current){if(A&&(t=e.find(e=>e.nameWithOwner===A))&&t.enabled){k(t),T(j||t.defaultBranch),E.current=!0;return}let n=p.Jt.getLastUsedRepository();if(n){let t=e.find(e=>e.nameWithOwner===`${n.ownerLogin}/${n.name}`);if(t&&t.enabled){k(t),T(t?.defaultBranch),E.current=!0;return}}let a=e.find(_);a?(k(a),T(a.defaultBranch),E.current=!0):t&&(k(t),T(j||t.defaultBranch),E.current=!0)}},w[0]=j,w[1]=A,w[2]=T,w[3]=k,w[4]=N,w[5]=t):t=w[5];let F=t;w[6]!==A?(n=(e,t)=>v(e,t,A),w[6]=A,w[7]=n):n=w[7];let G=n;return w[8]!==I||w[9]!==$||w[10]!==T||w[11]!==F||w[12]!==k||w[13]!==G||w[14]!==N?(c=!I&&(0,a.jsx)(s.P,{repositoryLoader:G,selectionVariant:"single",iconOnly:g.W.askModeDropdown&&$,responsiveStyle:g.W.askModeDropdown?"icon-on-mobile":"full",selectAllOption:!1,onSelect:e=>{e&&(k(e),T(e.defaultBranch))},currentSelection:N,width:"medium",additionalButtonProps:{"aria-label":`Repository: ${N?.nameWithOwner||"Select repository"}`,className:"RepoBranchAgentSelector-module__repoSelectorButton__SDsPA",variant:"invisible"},onLoad:F,loadingElement:(0,a.jsx)(d.f,{width:"150px",height:"32px"})}),w[8]=I,w[9]=$,w[10]=T,w[11]=F,w[12]=k,w[13]=G,w[14]=N,w[15]=c):c=w[15],w[16]!==T||w[17]!==C||w[18]!==N?(b=(0,a.jsx)(a.Fragment,{children:N?(0,a.jsx)(o.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:C??N.defaultBranch,defaultBranch:N.defaultBranch,owner:N.owner,repo:N.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:T,renderAnchor:e=>(0,a.jsx)(y.L,{...e,icon:u.GitBranchIcon,selectedIcon:u.GitBranchCheckIcon,selected:C!==N.defaultBranch,"aria-label":`Branch: ${C||"Select branch"}`,"aria-labelledby":void 0,variant:"invisible",className:f})}):(0,a.jsx)(h.K,{icon:u.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),w[16]=T,w[17]=C,w[18]=N,w[19]=b):b=w[19],w[20]!==R||w[21]!==O||w[22]!==L||w[23]!==C||w[24]!==N?(S=R&&(N?(0,a.jsx)(l.b,{repo:N,branch:C||N.defaultBranch,selectedAgent:L,onSelectAgent:e=>O(e),iconOnly:!0,buttonProps:{variant:"invisible",className:f}}):(0,a.jsx)(d.f,{width:"32px",height:"32px"})),w[20]=R,w[21]=O,w[22]=L,w[23]=C,w[24]=N,w[25]=S):S=w[25],w[26]!==c||w[27]!==b||w[28]!==S?(x=(0,a.jsx)(i.Fn,{children:(0,a.jsxs)("div",{className:"RepoBranchAgentSelector-module__container__CfLH3",children:[c,b,S]})}),w[26]=c,w[27]=b,w[28]=S,w[29]=x):x=w[29],x};async function v(e="",t,n){let a=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&a.searchParams.set("q",e.trim()),t&&a.searchParams.set("defaultOwner",t),n&&a.searchParams.set("includeInTopRepos",n);let r=await (0,c.lS)(a.href);if(r.ok){let{repositories:e}=await r.json();return e.map(e=>({id:e.id,graphQLId:e.graphQLId,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility,isEmpty:e.isEmpty}))}return[]}function _(e){return e.enabled}b.displayName="RepoBranchAgentPicker"},65554(e,t,n){n.d(t,{P:()=>h});var a=n(74848),r=n(96540),l=n(38621),i=n(9141),o=n(26108),s=n(21373),c=n(39775),u=n(83765);let d="ReposSelector-module__invisibleWithBorder__i5BXF";function h({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:h,selectAllOption:m,additionalButtonProps:g,buttonText:p="",width:y,truncateMaxWidth:f,height:b,fullscreenOnNarrow:v,defaultOwner:_,onLoad:S,loadingElement:x,liveSelection:w=!1,onOpen:I,onClose:A,responsiveStyle:j="full",iconOnly:N=!1,anchorSide:C,tooltipDirection:L}){let[k,T]=(0,r.useState)(""),[O,P]=(0,r.useState)([]),[B,R]=(0,r.useState)(!0),[$,E]=(0,r.useState)(!1),F=(0,r.useEffectEvent)(async e=>{try{let n=await t(e,_);P(n),S?.(n)}catch{}R(!1),E(!0)});(0,r.useEffect)(()=>{R(!0);let e=setTimeout(()=>{F(k)},200);return()=>clearTimeout(e)},[k]);let G=(0,r.useCallback)(e=>{"single"===h?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[h,n]),D=(0,r.useMemo)(()=>"multiple"===h?e||[]:e?[e]:[],[h,e]),q=(0,r.useCallback)(e=>{let t,n="medium"===y?35:"large"===y?60:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,a.jsx)(l.RepoLockedIcon,{size:16}):(0,a.jsx)(l.RepoIcon,{size:16})}},[y]),W=(0,r.useCallback)(e=>e.name,[]),V=(0,r.useMemo)(()=>{let e=[];return e.push(...O),m&&e.push({name:"$all$",_all:!0}),e},[O,m]),M=p,Q=l.RepoIcon;M||("multiple"===h?M=D.length>0?`${D.length} repositor${D.length>1?"ies":"y"}`:"Select repositories":D.length>0&&D[0]?(M=D[0].name,Q=D[0].private?l.RepoLockedIcon:l.RepoIcon):M=m?"All repositories":"Select a repository");let H=(0,i.tv)("icon-on-mobile"===j?{narrow:!0}:{narrow:!1},!1),K=N||H;return x&&B&&!e&&!$?x:(0,a.jsx)(u.O,{renderAnchor:({"aria-labelledby":e,...t})=>{let{"aria-label":n,...r}=t,i=g?.["aria-label"]??n??M;return K?(0,a.jsx)(o.K,{variant:"invisible",...e?{"aria-labelledby":e}:{"aria-label":i},icon:g?.leadingVisual||Q,...r,className:`${d}${D.length?" ReposSelector-module__selected__FxC9d":""}`,tooltipDirection:L}):(0,a.jsx)(s.Q,{variant:"icon-on-mobile"===j?"invisible":void 0,leadingVisual:Q,trailingAction:l.TriangleDownIcon,"aria-labelledby":e,...t,...g,className:`${g?.className}${"icon-on-mobile"===j?` ${d}`:""}`,children:(0,a.jsx)(c.A,{title:M,maxWidth:f??195,children:M})})},placeholderText:"Search",items:V,loading:B,groups:m?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:h,initialSelectedItems:D,onSelectionChange:G,onLiveSelectionChange:"multiple"===h&&w?G:void 0,filterItems:T,getItemKey:W,convertToItemProps:q,title:"Select a repository",width:y,height:b,responsiveOnNarrow:v,onOpen:I,onClose:A,anchorSide:C})}h.displayName="ReposSelector"}}]);
//# sourceMappingURL=72644-1774a0db021164d7-a1302c7d29c71740.js.map