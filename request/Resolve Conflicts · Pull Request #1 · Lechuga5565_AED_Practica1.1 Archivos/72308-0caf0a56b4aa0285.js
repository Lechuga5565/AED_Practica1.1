performance.mark("js-parse-end:72308-0caf0a56b4aa0285.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["72308"],{76713(e,t,n){n.d(t,{A:()=>r});let r={container:"HybridMarkdownEditor-module__container__o7k5a",modPressed:"HybridMarkdownEditor-module__modPressed__QA98z",isDraggedOver:"HybridMarkdownEditor-module__isDraggedOver__fLEcf",editorWrapper:"HybridMarkdownEditor-module__editorWrapper__qIueB",skeletonOverlay:"HybridMarkdownEditor-module__skeletonOverlay__KcRiU",generatingText:"HybridMarkdownEditor-module__generatingText__jrjSu"}},71413(e,t,n){n.d(t,{QM:()=>m,fU:()=>g,jw:()=>h,zL:()=>s});var r=n(24043),i=n(78143),o=n(58388),l=n(96540);let s=[".svg",".gif",".jpg",".jpeg",".png",".mov",".mp4",".webm"],a=[".pdf",".docx",".odt",".fodt",".pptx",".odp",".fodp",".xlsx",".ods",".fods",".xls",".csv",".odg",".fodg",".odf",".zip",".gz",".tgz",".patch",".txt",".log",".md",".json",".jsonc",".cpuprofile",".dmp"],d=[".debug",".rtf",".msg",".doc",".eml",".xlsm",".tsv",".py",".yaml",".yml",".css",".xml",".html",".htm",".js",".sql",".java",".c",".cpp",".ipynb",".sh",".php",".ts",".tsx",".cs",".pdb",".drawio",".copilotmd",".bmp",".tif",".tiff",".mp3",".wav"],c=[".webp"];async function u(e,t,n){let r=new FormData,{name:i,size:l,type:s}=e;return t&&r.append("repository_id",t),n&&(r.append("upload_container_type","project"),r.append("upload_container_id",n)),r.append("name",i),r.append("size",l.toString()),r.append("content_type",s),await (0,o.DI)("/upload/policies/assets",{body:r,method:"POST"})}async function f(e,t,n){let{upload_authenticity_token:r,upload_url:i,header:o,form:l,same_origin:s}=e,a=new FormData;for(let e in s&&a.append("authenticity_token",r),l)a.append(e,l[e]);return a.append("file",t),n?await (({url:e,formData:t,headers:n,onProgress:r})=>new Promise((i,o)=>{let l=new XMLHttpRequest;for(let[t,s]of(l.addEventListener("loadstart",()=>r(0)),l.upload.addEventListener("progress",e=>r(e.loaded)),l.addEventListener("loadend",()=>{if(0===l.status)return void o(TypeError("Network request failed"));try{i(new Response(l.response||void 0,{status:l.status,statusText:l.statusText,headers:(e=>{let t=new Headers;for(let n of e.trim().split(/\r?\n/)){if(!n)continue;let e=n.indexOf(":");if(-1===e)continue;let r=n.slice(0,e).trim(),i=n.slice(e+1).trim();r&&t.append(r,i)}return t})(l.getAllResponseHeaders()??"")}))}catch(e){o(e)}}),l.open("POST",e),l.responseType="text",Object.entries(n)))void 0!==s&&l.setRequestHeader(t,s);l.send(t)}))({url:i,formData:a,headers:o,onProgress:n}):await fetch(i,{headers:{...o},method:"post",body:a})}async function p(e,t){let n="string"==typeof e.asset_upload_url?e.asset_upload_url:null,r="string"==typeof e.asset_upload_authenticity_token?e.asset_upload_authenticity_token:null;if(n&&r){let e=new FormData;return e.append("authenticity_token",r),await fetch(n,{method:"PUT",body:e,credentials:"same-origin",headers:{Accept:"application/json",...(0,i.kt)()}})}return t}async function m(e,t,n,r){let i=await u(e,t,n);if(!i.ok)throw Error("Failed to obtain asset policy");let o=await i.json(),l=await f(o,e,r);if(!l.ok)throw Error("Failed to upload file to storage");let s=await p(o,l);if(!s.ok)throw Error("Failed to register file upload completion");let{href:a}=await s.json();if("string"!=typeof a)throw Error("Received invalid file URL");return r?.(e.size),{url:a,file:e}}function h(e){let t=[...s,...(0,r.G7)("webp_support")?c:[],...a,...(0,r.G7)("issues_expanded_file_types")?d:[]],n=[...s,...(0,r.G7)("webp_support")?c:[]];return e?t:n}function g(e,t){return(0,l.useCallback)(async(n,r)=>m(n,e,t,r),[e,t])}},75089(e,t,n){n.d(t,{y:()=>l});var r=n(58388),i=n(96540);async function o({text:e,issue:t,repository:n,project:i,subjectType:o,path:l,lineNumber:s,startCommitOid:a,endCommitOid:d,baseCommitOid:c,subject:u,startLineNumber:f}){let p=new FormData;p.append("text",e),p.append("issue",t),p.append("repository",n),p.append("project",i),l&&p.append("path",l),s&&p.append("line_number",s.toString()),a&&p.append("start_commit_oid",a),d&&p.append("end_commit_oid",d),c&&p.append("base_commit_oid",c),u&&p.append("subject",u.toString()),f&&p.append("start_line_number",f.toString()),o&&p.append("subject_type",o);let m=await (0,r.DI)("/preview",{body:p,method:"POST"});return m.ok?Promise.resolve(await m.text()):Promise.resolve("Markdown preview unavailable")}function l({subjectId:e,subjectType:t,subject:n,subjectRepoId:r,lineNumber:l,path:s,startCommitOid:a,startLineNumber:d,endCommitOid:c,baseCommitOid:u}){return(0,i.useCallback)(async i=>o({text:i,issue:e?.toString()??"",repository:r?.toString()??"",project:e?.toString()??"",subjectType:function(e){switch(e){case"issue":return"Issue";case"pull_request":return"PullRequest";case"project":return"Project";default:return}}(t),subject:n,lineNumber:l,path:s,startCommitOid:a,endCommitOid:c,baseCommitOid:u,startLineNumber:d}),[e,r,t,n,l,s,a,d,c,u])}},19489(e,t,n){n.d(t,{f:()=>d,x:()=>c});var r=n(74848),i=n(16522),o=n(38621),l=n(83223),s=n(14623),a=n(19551);let d="https://github-grid.enterprise.slack.com/archives/C08M545RDCN";function c(e){let t,n,c,u,f,p,m=(0,i.c)(8),{onChangeViewMode:h}=e;return m[0]!==h?(t=(0,r.jsx)(a.Y,{onChangeViewMode:h,selectedView:"hybrid"}),m[0]=h,m[1]=t):t=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(s.E.Visual,{children:(0,r.jsx)(o.AlertIcon,{size:"medium"})}),c=(0,r.jsx)(s.E.Heading,{children:"Something went wrong"}),m[2]=n,m[3]=c):(n=m[2],c=m[3]),m[4]===Symbol.for("react.memo_cache_sentinel")?(u={textAlign:"center",maxWidth:"700px"},m[4]=u):u=m[4],m[5]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsxs)(s.E,{children:[n,c,(0,r.jsxs)(s.E.Description,{style:u,children:["The hybrid Markdown editing experience is temporarily unavailable due to an unknown error. Please"," ",(0,r.jsx)(l.A,{inline:!0,href:d,children:"report this error"})," ","to the team along with browser console logs, if possible."]})]}),m[5]=f):f=m[5],m[6]!==t?(p=(0,r.jsxs)(r.Fragment,{children:[t,f]}),m[6]=t,m[7]=p):p=m[7],p}c.displayName="ErrorFallback"},97664(e,t,n){n.d(t,{f:()=>v});var r=n(74848),i=n(16522),o=n(24043),l=n(86280),s=n(96540),a=n(19489),d=n(76713),c=n(34164),u=n(65448),f=n(19551),p=n(54305);function m(e){let t,n,o,l,s=(0,i.c)(7),{value:a,placeholder:d}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(f.Y,{selectedView:"hybrid",children:(0,r.jsx)(p.M,{view:null,selectedNodes:[],fileUploadButton:(0,r.jsx)(u.g,{disabled:!0})})}),n=(0,c.$)("cm-editor","cm-content","SuspenseFallback-module__container__rgyZT"),s[0]=t,s[1]=n):(t=s[0],n=s[1]),s[2]!==d||s[3]!==a?(o=a||(0,r.jsx)("div",{className:"SuspenseFallback-module__placeholder__OKPvB",children:d}),s[2]=d,s[3]=a,s[4]=o):o=s[4],s[5]!==o?(l=(0,r.jsxs)(r.Fragment,{children:[t,(0,r.jsx)("div",{className:n,children:o})]}),s[5]=o,s[6]=l):l=s[6],l}m.displayName="SuspenseFallback";var h=n(35037),g=n(91432),_=n(67283);function y({icon:e,"aria-label":t,disabled:n,keybindingHint:i,onClick:o,telemetryId:l}){let{view:a}=(0,s.use)(_.P),d=(0,h.Ec)();return(0,r.jsx)(g.E.IconButton,{variant:"invisible",onMouseDown:e=>e.preventDefault(),disabled:!a||n,onClick:()=>{if(!a)return;a.hasFocus||a.focus();let e=o(a);d.trackToolbarInteraction({control:l??t??"unknown",action:l??t??"unknown",trigger:"toolbar",isActive:!1,keybinding:i,handled:e})},icon:e,"aria-label":t,keybindingHint:i})}y.displayName="CustomToolbarButton";let k=(0,s.lazy)(async()=>({default:(await Promise.all([n.e("83465"),n.e("12287"),n.e("14467"),n.e("37474"),n.e("3374"),n.e("48703")]).then(n.bind(n,68386))).CodeMirrorEditor}));function b(e){let t,n,c,u,f,p,g,_,y,b,v,x,w=(0,i.c)(26);return w[0]!==e?({onChangeViewMode:n,value:p,placeholder:c,ref:u,isGenerating:t,...f}=e,w[0]=e,w[1]=t,w[2]=n,w[3]=c,w[4]=u,w[5]=f,w[6]=p):(t=w[1],n=w[2],c=w[3],u=w[4],f=w[5],p=w[6]),w[7]!==n?(g=(0,r.jsx)(a.x,{onChangeViewMode:n}),w[7]=n,w[8]=g):g=w[8],w[9]===Symbol.for("react.memo_cache_sentinel")?(_={featureFlagEnabled:(0,o.G7)("markdown_experience_hybrid_editor")},w[9]=_):_=w[9],w[10]!==c||w[11]!==p?(y=(0,r.jsx)(m,{value:p,placeholder:c}),w[10]=c,w[11]=p,w[12]=y):y=w[12],w[13]!==t||w[14]!==n||w[15]!==c||w[16]!==u||w[17]!==f||w[18]!==p?(b=(0,r.jsx)(k,{ref:u,onChangeViewMode:n,value:p,placeholder:c,isGenerating:t,...f}),w[13]=t,w[14]=n,w[15]=c,w[16]=u,w[17]=f,w[18]=p,w[19]=b):b=w[19],w[20]!==y||w[21]!==b?(v=(0,r.jsx)(h.Ci,{options:_,children:(0,r.jsx)(s.Suspense,{fallback:y,children:b})}),w[20]=y,w[21]=b,w[22]=v):v=w[22],w[23]!==g||w[24]!==v?(x=(0,r.jsx)("div",{className:d.A.container,children:(0,r.jsx)(l.t,{fallback:g,children:v})}),w[23]=g,w[24]=v,w[25]=x):x=w[25],x}k.displayName="CodeMirrorEditor",b.displayName="HybridMarkdownEditorComponent";let v=Object.assign(b,{ToolbarButton:y})},23397(e,t,n){n.d(t,{WZ:()=>f,_4:()=>u,_n:()=>c,kH:()=>d});var r=n(31626),i=n(9725),o=n(30816),l=n(1509);let s=(e,t,n)=>(0,i.Uh)(e,t,n).find(e=>"heading"===e.type),a=e=>{let t=(0,l.wk)(e.state),n=e.state.doc.toString(),{from:i,to:o}=e.state.selection.main,a=r._.linesAtRange(t,n,i,o).map(e=>s(t,e.start,e.end));return a.some(e=>e&&"heading"===e.type)?a:null},d=e=>{let t=a(e),n=t?.filter(e=>!!e&&"heading"===e.type)??[];if(0===n.length||n.length!==t?.length)return;let r=n[0].depth;return n.every(e=>e.depth===r)?r:void 0},c=(e,t)=>{let n=a(e);return!(!n||"increase"===t&&n.every(e=>!e||6===e.depth)||"decrease"===t&&n.every(e=>!e||1===e.depth))},u=(e,t)=>{let n;e.hasFocus||e.focus();let a=(0,l.wk)(e.state),d=e.state.doc.toString(),c=e.state.selection.main,u=r._.linesAtRange(a,d,c.from,c.to),f=`${"#".repeat(t)} `,p=u.map(e=>s(a,e.start,e.end)),m=!(p.length>0&&p.every(e=>e?.depth===t)),h=[];for(let e of u){let t=s(a,e.start,e.end),r=null;if(t)for(let n of t.children??[]){if(!(0,o.z)(n)||"delimiter"!==n.type)continue;let t="atxHeadingSequence"===n.tokenType,i="setextHeadingLine"===n.tokenType;if(t||i){if(r=n,t)h.push({from:n.position.start.offset,to:n.position.end.offset+1});else{let t=e.next();t&&h.push({from:t.start,to:t.end})}break}}if(m){h.push({from:e.start,insert:f});let t=r&&(0,o.z)(r)&&(0,i.DV)(c.from,c.to,r.position.start.offset,r.position.end.offset,!0);c.empty&&(c.from===e.start||t)&&(n={anchor:e.start+f.length})}}return e.dispatch({changes:h,selection:n,userEvent:"input",scrollIntoView:!0}),!0},f=(e,t)=>{if(!e||!c(e,t))return!1;let n=(0,l.wk)(e.state),i=e.state.doc.toString(),{from:a,to:d}=e.state.selection.main,u=r._.linesAtRange(n,i,a,d),f=[];for(let e of u){let r,i=s(n,e.start,e.end);if(i)for(let n of(r="increase"===t?Math.min(6,i.depth+1):Math.max(1,i.depth-1),i.children??[])){if(!(0,o.z)(n)||"delimiter"!==n.type)continue;let t="atxHeadingSequence"===n.tokenType,i="setextHeadingLine"===n.tokenType;if(t||i){if(t)f.push({from:n.position.start.offset,to:n.position.end.offset,insert:"#".repeat(r)});else{let t=e.next();t&&(f.push({from:t.start,to:t.end}),f.push({from:e.start,insert:`${"#".repeat(r)} `}))}break}}}return 0!==f.length&&(e.dispatch({changes:f,userEvent:"input",scrollIntoView:!0}),!0)}},79792(e,t,n){n.d(t,{S:()=>i,t:()=>r});let r={strong:"**",emphasis:"_",inlineCode:"`",delete:"~"},i={"*":"*",_:"_",$:"$","~":"~","[":"]","(":")","`":"`"}},52799(e,t,n){n.d(t,{A:()=>o,u:()=>l});var r=n(77987),i=n(58120);let o=e=>{let t=e?.children?.some(e=>"delimiter"===e.type&&"labelMarker"===e.tokenType),n=e?.children?.some(e=>"delimiter"===e.type&&"resource"===e.tokenType);return t&&n},l=e=>{let t,n,l;e.hasFocus||e.focus();let s=e.state.selection.main,a=(0,i.rx)(e,"link");if(a&&o(a))return(0,i.JB)(e,a),!0;let{start:d,end:c}=(0,r.Jr)(e.state)?{start:s.from,end:s.to}:(0,r.cL)(e.state.doc.toString(),s.anchor);return a?(t="[](",n=")",l=d+1):(t="[",n="]()",l=c+3),e.dispatch({changes:[{from:d,insert:t},{from:c,insert:n}],selection:{anchor:l},userEvent:"input",scrollIntoView:!0}),!0}},58120(e,t,n){n.d(t,{Gr:()=>f,JB:()=>c,j9:()=>d,rx:()=>a,un:()=>u});var r=n(52704),i=n(30816),o=n(84985),l=n(77987),s=n(79792);let a=(e,t)=>(0,o.Ji)(e.state).findLast(e=>e.type===t),d=e=>e.children?e.children.filter(e=>"delimiter"===e.type):[],c=(e,t)=>{let n=d(t).filter(i.z);if(0===n.length)return;let r=n.map(e=>({from:e.position.start.offset,to:e.position.end.offset}));e.dispatch({changes:r,userEvent:"input",scrollIntoView:!0})},u=(e,t,n)=>{e.dispatch(e.state.changeByRange(e=>({changes:[{from:e.from,insert:t},{from:e.to,insert:n}],range:r.OF.range(e.from+t.length,e.to+t.length)})),{userEvent:"input",scrollIntoView:!0})},f=(e,t)=>{e.hasFocus||e.focus();let n=a(e,t);if(n)return c(e,n),!0;let r=s.t[t];if((0,l.Jr)(e.state))u(e,r,r);else{let t=(0,o.Ji)(e.state).find(e=>"text"===e.type);((e,t,n,r)=>{let o=e.state.selection.main.anchor,s=r?.value&&(0,i.z)(r),{text:a,offset:d}=s?{text:r.value,offset:o-r.position.start.offset}:{text:e.state.doc.toString(),offset:o},c=s?r.position.start.offset:0,{start:u,end:f}=(0,l.cL)(a,d);e.dispatch({changes:[{from:u+c,insert:t},{from:f+c,insert:n}],selection:{anchor:o+t.length},userEvent:"input",scrollIntoView:!0})})(e,r,r,t)}return!0}},33702(e,t,n){n.d(t,{dT:()=>d,hO:()=>a,mM:()=>s});var r=n(92822),i=n(9725),o=n(30816),l=n(1509);function s(e,t,n){let i=[];for(let l of e.children.slice(t+1))if("listItem"===l.type){let e=(0,r.xM)(l).listItemPrefix;if(!e||!(0,o.z)(e))continue;let t=null===n?(0,r.Ts)(e.raw):(0,r.LY)(n);i.push({from:e.position.start.offset,to:e.position.end.offset,insert:t}),n=t}return i}function a(e){return e.filter(e=>"listItem"===e.type&&(0,o.z)(e))}function d(e){if(1!==e.selection.ranges.length)return null;let t=e.selection.main.from,n=e.selection.main.to,r=(0,i.v5)((0,l.wk)(e),t,n),o=r.findLastIndex(e=>"list"===e.type),s=r[o];if(!s)return null;let d=a((0,i.aI)(s,t,n));if(0===d.length)return null;let c=r.slice(0,o),u=[];for(let e of c)if("listItem"===e.type){let t=u.at(-1);t&&(t.item=e)}else"list"===e.type&&u.push({list:e,item:void 0});return{list:s,selectedItems:d,parents:u}}},60738(e,t,n){n.d(t,{c:()=>c,i:()=>f});var r=n(52704),i=n(11968),o=n(1249),l=n(92822),s=n(31626),a=n(47135),d=n(1509);let c=r.YH.define(),u=r.$t.transactionFilter.of(e=>{let t=e.annotation(c);if(!e.isUserEvent("input")||!e.docChanged||e.changes.empty||"all"===t)return e;let n=(0,d.wk)(e.startState),u=e.startState.doc.toString(),f=[];e.changes.iterChanges((r,d,c,p,m)=>{let h=m.toString();if(!h.includes("\n"))return;let g=s._.atOffset(n,u,r),_=(0,o.KR)(g?.prefixesBefore(r)??[],t);if(!g||0===_.length)return;let y=(0,o.z0)(_);if(""===y)return;let k=(0,a.D)(h),b=(0,i.b)(h,0,h.length),v=g.lastPrefix?.tokenType==="listItemPrefix"||g.lastPrefix?.tokenType==="taskListCheck";for(let t=1;t<b.length;t++){let n=b[t];if(n){if(v&&(e.isUserEvent("input.paste")||e.isUserEvent("input.drop"))){let e=s._.atOffset(k,h,n.start),t=e?.prefixes??[],r=(0,l.zE)(c,[...g.prefixes],[...t]);if(r.length>0){f.push(...r);continue}}f.push({from:c+n.start,insert:y});continue}}});let p=r.VR.of(f,e.newDoc.length);return[e,{sequential:!0,changes:p,annotations:[c.of("all")],selection:e.newSelection.map(p,1)}]}),f=[d.YZ,u]},14550(e,t,n){n.d(t,{QF:()=>er,b5:()=>J,KB:()=>W,Jr:()=>K,oE:()=>Y,VA:()=>ee,kD:()=>Q,rk:()=>Z,SF:()=>q,gk:()=>z,bF:()=>U,xn:()=>G,Dc:()=>et,Kp:()=>H,lM:()=>V,o8:()=>X});var r=n(26632),i=n(31626),o=n(9725),l=n(30816),s=n(1509);let a=e=>e.map(e=>e.prefixes.filter(e=>"blockQuotePrefix"===e.tokenType));var d=n(52704),c=n(60738);let u=e=>{if(1!==e.state.selection.ranges.length||!e.state.selection.main.empty)return!1;let t=e.state.doc.toString(),n=e.state.selection.main.anchor,r=(0,s.wk)(e.state),o=i._.atOffset(r,t,n);if(!o?.isBlank)return!1;let l=o.lastPrefix;if(l?.tokenType!=="blockQuotePrefix"||!o.isOffsetAfterPrefixes(n))return!1;let a=l.position?.start.offset??o.start,u="",f=a;return o.previous()?.isBlank===!1&&(u+="\n",f+=1),o.next()?.isBlank===!1&&(u+="\n"),e.dispatch({changes:[{from:a,to:o.end,insert:u}],selection:d.OF.single(f),annotations:[c.c.of("escapeBlockquote")],userEvent:"input.type",scrollIntoView:!0}),!0},f=e=>{var t;if(1!==e.state.selection.ranges.length||!e.state.selection.main.empty)return!1;let n=e.state.doc.toString(),r=e.state.selection.main.anchor,a=(0,s.wk)(e.state),d=(0,o.NC)(a,r);if(d?.type!=="code")return!1;let c=i._.atOffset(a,n,r);if(!c||r!==c.end)return!1;let u=d.children?.find(e=>"delimiter"===e.type&&"codeFencedFence"===e.tokenType);if(!u||!(0,l.z)(u)||!c.contains(u.position.start.offset))return!1;let f=(t=u.raw,t.match(/^(`{3,}|~{3,})/)?.[1]??null);return!!f&&(e.dispatch({changes:[{from:r,insert:`

${f}`}],selection:{anchor:r+1},userEvent:"input.type",scrollIntoView:!0}),!0)};var p=n(77987);function m(e){let t=e.state.selection.main.anchor,n=(0,s.wk)(e.state),r=(0,o.NC)(n,t);return r?.type==="code"}let h=e=>{let{from:t}=(0,p.j6)(e.state);return!!m(e)&&((0,p.Jr)(e.state)?e.dispatch(e.state.changeByRange(e=>({changes:[{from:t,insert:"	"}],range:d.OF.range(e.from+1,e.to+1)})),{userEvent:"input.type",scrollIntoView:!0}):e.dispatch(e.state.replaceSelection("	")),!0)},g=e=>{let t=e.state.selection.main.anchor,n=e.state.doc.toString(),{from:r,to:i}=(0,p.j6)(e.state);if(m(e)){let o=n.slice(r,i);return o.startsWith("	")?(e.dispatch({changes:[{from:r,to:r+1,insert:""}],userEvent:"input.type",scrollIntoView:!0}),!0):!o.startsWith("    ")||(e.dispatch({changes:[{from:r,to:r+4,insert:""}],selection:d.OF.single(t-4),userEvent:"input.type",scrollIntoView:!0}),!0)}return!1};var _=n(23397),y=n(79792),k=n(58120),b=n(52799),v=n(55177),x=n(92822),w=n(33702);let I=e=>{if(1!==e.state.selection.ranges.length)return!1;let t=(0,s.wk)(e.state),n=e.state.doc.toString(),r=(0,w.dT)(e.state);if(!r)return!1;let o=r?.parents.at(-1),a=o&&(0,x.xM)(o.item).listItemPrefix?.raw,d=r.selectedItems.map(e=>i._.linesAtRange(t,n,e.position.start.offset,e.position.end.offset-1)),u=d.some(e=>e.some(e=>!e.isBlank)),f=new WeakSet,p=[];for(let[e,t]of r.selectedItems.entries())for(let[n,r]of(d[e]??[]).entries()){let e=0===n?r.prefixes.findLast(e=>"listItemPrefix"===e.tokenType):void 0,i=r.prefixes.findLast(e=>"listItemIndent"===e.tokenType),o=0===n?r.prefixes.find(e=>"taskListCheck"===e.tokenType):void 0,s=0===n&&(0,x.Wq)(r.content),d=r.prefixes.some(e=>"listItemIndent"===e.tokenType),c=0===n&&r.isBlank&&!d&&(void 0!==o||s);c&&f.add(t);let u=c&&o&&(0,l.z)(o)?o.position.end.offset:c&&s?r.contentStart+r.content.length:e?.position?.end.offset??i?.position?.end.offset??o?.position?.start.offset??r.contentStart,m={from:i?.position?.start.offset??e?.position?.start.offset??r.start,to:u,insert:a&&e?a=(0,x.LY)(a):""};p.push(m)}let m=r.list.children.indexOf(r.selectedItems.at(-1));m>-1&&p.push((0,w.mM)(r.list,m,null));let h=[];if(o){let e=o.list.children.indexOf(o.item);p.push((0,w.mM)(o.list,e,a??""))}else{for(let e of r.selectedItems){let{taskListPrefix:t}=(0,x.xM)(e);t&&(0,l.z)(t)&&!f.has(e)&&p.push({from:t.position.start.offset,to:t.position.end.offset})}if(u){let e=i._.atOffset(t,n,r.selectedItems[0].position.start.offset-1);e?.prefixes.some(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType)&&p.push({from:e.end,insert:"\n"});let o=i._.atOffset(t,n,r.selectedItems.at(-1).position.end.offset+1);o?.prefixes.some(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType)&&p.push({from:o.start,insert:"\n"}),h.push(c.c.of("escapeList"))}}return e.dispatch({scrollIntoView:!0,userEvent:"input",changes:p,annotations:h}),!0},j=e=>{if(1!==e.state.selection.ranges.length||!e.state.selection.main.empty)return!1;let t=e.state.doc.toString(),n=e.state.selection.main.anchor,r=(0,s.wk)(e.state),o=i._.atOffset(r,t,n);return!!o&&!!S(o,n)&&I(e)},S=(e,t)=>!!e.isBlank&&e.lastPrefix?.tokenType==="listItemPrefix"&&e.isOffsetAfterPrefixes(t);var T=n(1249);function E(e,t){if(0===t)return e.start;for(let n of e.prefixes)if("blockQuotePrefix"===n.tokenType&&0==--t)return n.position?.end.offset??e.start;return e.start}function C(e,t,n,r){let o=[],s=null;for(let a of(0,w.hO)(n.children))for(let[n,d]of i._.linesAtRange(e,t,a.position.start.offset,a.position.end.offset-1).entries())if(0===n){let e=d?.prefixes.find(e=>"listItemPrefix"===e.tokenType);if(!e||!(0,l.z)(e))continue;let t=s?(0,x.LY)(s):(0,x.el)(r);o.push({from:e.position.start.offset,to:e.position.end.offset,insert:t}),s=t}else{let e=d?.prefixes.find(e=>"listItemIndent"===e.tokenType);if(!e||!s||!(0,l.z)(e)||e.raw.length===s.length)continue;o.push({from:e.position.start.offset,to:e.position.end.offset,insert:(0,T.cz)(s)})}return o}let M=e=>(t,n)=>{let r,a=t.state,c=(0,s.wk)(a),u=a.doc.toString(),f=a.selection.main,p=f.from===f.to,m=p?i._.atOffset(c,u,f.from):null,h="keyboard"===n?"input.type":"input",g=Array.from((0,o.v5)(c,f.from,f.to,!0)).findLast(e=>"list"===e.type);if(g)if((g.ordered??!1)===e)return(e=>{let t=(0,s.wk)(e.state),n=e.state.doc.toString(),r=(0,w.dT)(e.state);if(!r)return!1;let o=r.parents.length,a=[];for(let e of(0,w.hO)(r.list.children))for(let r of i._.linesAtRange(t,n,e.position.start.offset,e.position.end.offset-1)){let e=function(e,t){for(let n of e.prefixes)if("listItemIndent"===n.tokenType||"listItemPrefix"===n.tokenType){if(0===t)return n;t--}}(r,o);e&&(0,l.z)(e)&&a.push({from:e.position.start.offset,to:e.position.end.offset})}return!!a.length&&(e.dispatch({changes:a,userEvent:"input",scrollIntoView:!0}),!0)})(t);else{let n=C(c,u,g,e);return t.dispatch({changes:n,scrollIntoView:!0,userEvent:h}),!0}let _=(0,o.aI)(c,f.from,f.to),y=0;for(;1===_.length&&"blockquote"===_[0].type;)_=(0,o.aI)(_[0],f.from,f.to),y++;let k=m?m.prefixes.filter(e=>"blockQuotePrefix"===e.tokenType).length:0;k>y&&(y=k);let b=null,v=[],I=[];for(let t of _){if("list"===t.type){v.push(...C(c,u,t,e));continue}let n=(0,l.z)(t)?i._.linesAtRange(c,u,t.position.start.offset,t.position.end.offset-1):[];n.length>0&&I.push({lines:n,nodeType:t.type})}0===I.length&&m&&I.push({lines:[m],nodeType:"paragraph"});let j=I.length;for(let[t,n]of I.entries()){let{lines:r,nodeType:i}=n;for(let[n,o]of r.entries()){let l=o.overlaps(f.from,f.to)||p&&(f.from===o.start||f.from===o.end);if(o.isBlank&&!l)continue;let s=E(o,y);if("paragraph"!==i||l){if(0===n||"paragraph"===i){let t=o.previous(),n=t&&t.isBlank;null!==b||!t||t.isBlank||o.isBlank||v.push({from:o.start-1,insert:"\n"});let r=null===b||n?(0,x.el)(e):(0,x.LY)(b),i={from:s,insert:r};v.push(i),b=r}else b&&v.push({from:s,insert:(0,T.cz)(b)});if(!o.isBlank&&t===j-1&&n===r.length-1){let e=o.next();e&&!e.isBlank&&v.push({from:o.end,insert:"\n"})}}}}if(0===v.length){let t=i._.atOffset(c,u,f.from);if(t&&p&&(f.from===t.start||f.from===t.end)){let n=t.prefixes.filter(e=>"blockQuotePrefix"===e.tokenType).length,i=E(t,y||n),o=t.previous(),l=o&&!o.isBlank?1:0;l&&v.push({from:t.start-1,insert:"\n"});let s=(0,x.el)(e);if(v.push({from:i,insert:s}),!r){let e=i+l+s.length;r=d.OF.single(e,e)}let a=t.next();a&&!a.isBlank&&v.push({from:t.end,insert:"\n"})}if(0===v.length)return!1}if(!r&&p&&v.length>0)try{let t=d.VR.of(v,u.length);if(m?.isBlank){let e=t.mapPos(f.from,1);r=d.OF.single(e)}else{let n=t.apply(d.EY.of(u.split("\n"))).toString(),i=(0,x.el)(e),o=Math.max(0,t.mapPos(f.from,-1)-i.length),l=n.indexOf(i,o);-1===l&&(l=n.indexOf(i));let s=n.indexOf(`
${i}`,Math.max(0,f.from-1));if(-1!==s&&(-1===l||s+1<l))l=s+1;else if(-1!==l&&"\n"!==n.charAt(l-1)){let e=n.indexOf(`
${i}`,Math.max(0,f.from-1));-1!==e&&(l=e+1)}let a=t.mapPos(f.from,1);if(l>=0&&a<l+i.length&&(a=l+i.length),l>=0){let e=n.indexOf(`
${i}`,Math.max(0,l-1));if(-1!==e){let t=e+1+i.length;a<t&&(a=t)}}let c=Math.min(a,n.length);r=d.OF.single(c,c)}}catch{}let S={changes:v,scrollIntoView:!0,userEvent:h};return r&&(S.selection=r),t.dispatch(S),!0},N=M(!1),L=M(!0),P=(0,x.DN)(!1),A=`- ${P}`;function O(e,t){let n=e.children.filter(e=>"listItem"===e.type);return n[n.indexOf(t)-1]}let B=e=>{if(1!==e.state.selection.ranges.length)return!1;let t=(0,s.wk)(e.state),n=e.state.doc.toString(),r=(0,w.dT)(e.state);if(!r)return!1;let o=function(e){let t=e.list,n=e.selectedItems,r=n[0]&&O(t,n[0]),i=[...e.parents];for(;!r;){let e=i.pop();if(!e)return null;t=e.list,n=[e.item],r=O(t,e.item)}return{list:t,items:n,previousSibling:r}}(r);if(!o||!o.items[0])return!0;let a=(0,x.xM)(o.previousSibling).listItemPrefix?.raw??"* ",d=" ".repeat(a.length),c=o.previousSibling.children?.findLast(e=>"list"===e.type)?.children?.findLast(e=>"listItem"===e.type),u=c?(0,x.LY)((0,x.xM)(c).listItemPrefix?.raw??"* "):(0,x.Ts)((0,x.xM)(o.items[0]).listItemPrefix?.raw??"* "),f=o.items.map(e=>{if(!(0,l.z)(e))return[];let r=-1;return i._.linesAtRange(t,n,e.position.start.offset,e.position.end.offset-1).map((e,t)=>{if(0===t){r=e.prefixes.findIndex(e=>"listItemPrefix"===e.tokenType);let t={from:e.prefixes[r]?.position?.start?.offset??e.start,to:e.prefixes[r]?.position?.end?.offset??e.contentStart,insert:`${d}${u}`};return u=(0,x.LY)(u),t}return{from:e.prefixes[r]?.position?.start?.offset??e.start,insert:d}})}),p=o.list.children.indexOf(o.items.at(-1));return f.push((0,w.mM)(o.list,p,a)),e.dispatch({scrollIntoView:!0,userEvent:"input",changes:f}),!0};var R=n(8433),F=n(84985);let $=e=>{let t=(0,w.dT)(e.state),n=t?.selectedItems[0];if(!n)return!1;let r=(0,p.JC)(e.state);if((0,F.Ji)(e.state).some(e=>"code"===e.type&&(null===r||(0,l.z)(e)&&(0,o.DV)(r,r,e.position.start.offset,e.position.end.offset)&&e.position.start.offset!==r&&(e.children?.filter(e=>"delimiter"===e.type&&"codeFencedFence"===e.tokenType).length===1||e.position.end.offset!==r))))return!1;let{listItemPrefix:i,taskListPrefix:s}=(0,x.xM)(n),a=s??i;if(a&&(0,l.z)(a)&&(0,R.h)(a).endOffset>e.state.selection.main.from)return!1;let d=i?.raw;if(!d)return!1;let u=(0,x.LY)(d);u.endsWith(" ")||(u+=" "),s&&(u+=(0,x.DN)(!1));let f=t.selectedItems.at(-1),m=t.list.ordered?(0,w.mM)(t.list,t.list.children.indexOf(f),u):[];return e.dispatch(e.state.replaceSelection(`
${u}`),{annotations:[c.c.of("escapeList")],userEvent:"input",scrollIntoView:!0,changes:m}),!0},D=e=>{let t=e.state.selection.main.anchor,n=(0,s.wk)(e.state),r=(0,o.NC)(n,t);return r?.type==="link"&&(window.open(r.url,"_blank","noopener,noreferrer"),!0)},z={key:"Mod-k",run:b.u},V={key:"Mod-b",run:e=>(0,k.Gr)(e,"strong")},H={key:"Mod-i",run:e=>(0,k.Gr)(e,"emphasis")},q={key:"Mod-e",run:e=>(0,k.Gr)(e,"inlineCode")},U={key:"Mod-Shift-.",run:e=>{let t,n;e.hasFocus||e.focus();let r=(0,s.wk)(e.state),d=e.state.doc.toString(),c=e.state.selection.main,u=i._.linesAtRange(r,d,c.from,c.to),f=a(u);if(t=0===f.length,n=f.some(e=>0===e.length),t||n){if(1===u.length&&u[0]?.isBlank)return e.dispatch({changes:[{from:c.from,insert:"> "}],selection:{anchor:c.from+2},userEvent:"input",scrollIntoView:!0}),!0;let t=[];for(let e of u)e.prefixes.some(e=>"blockQuotePrefix"===e.tokenType)||t.push({from:e.start,insert:"> "});e.dispatch({changes:t,userEvent:"input",scrollIntoView:!0})}else{let t=[...new Set(f.map(e=>e.length))].sort((e,t)=>e-t),n=(0,o.Uh)(r,c.from,c.to).find(e=>"blockquote"===e.type);if(!n||!(0,l.z)(n))return!0;let s=n.position.start.offset,u=n.position.end.offset,p=a(i._.linesAtRange(r,d,s,u)),m=[];for(let e of p){let n=!1,r=0;for(let i of t){if(e.length<i)continue;let t=e[i-1];t&&(0,l.z)(t)&&(n=e.length===i,r++,m.push({from:t.position.start.offset,to:t.position.end.offset}))}let i=e[e.length-1];i&&n&&r<e.length&&(0,l.z)(i)&&m.push({from:i.position.start.offset,insert:" "})}e.dispatch({changes:m,userEvent:"input",scrollIntoView:!0})}return!0}},W={key:"Mod-Shift-8",run:N},G={key:"Mod-Shift-7",run:L},K={key:"Mod-Alt-1",run:e=>(0,_._4)(e,1)},Y={key:"Mod-Alt-2",run:e=>(0,_._4)(e,2)},J={key:"Mod-Alt-3",run:e=>(0,_._4)(e,3)},Q={key:"Mod-Alt-4",run:e=>(0,_._4)(e,4)},Z={key:"Mod-Alt-5",run:e=>(0,_._4)(e,5)},X={key:"Mod-Alt-6",run:e=>(0,_._4)(e,6)},ee={key:"Mod-Shift-x",run:e=>(0,k.Gr)(e,"delete")},et={key:"Mod-Shift-l",run:e=>{e.hasFocus||e.focus();let t=e.state.selection.main,n=(0,s.wk)(e.state),r=e.state.doc.toString(),o=t.from,a=t.to,c=i._.linesAtRange(n,r,o,Math.max(a-1,o)),u=[];for(let t of c){let n=t.prefixes.find(e=>"taskListCheck"===e.tokenType);if(n&&(0,l.z)(n)){let e=n.position.start.offset,t=n.position.end.offset;" "===r.charAt(t)&&(t+=1),u.push({from:e,to:t});continue}let i=t.prefixes.findLast(e=>"listItemPrefix"===e.tokenType);if(i&&(0,l.z)(i)){let e=i.position.end.offset,n=r.slice(e,t.end).match(/^\[[ xX]\]\s*/);if(n){u.push({from:e,to:e+n[0].length});continue}u.push({from:e,to:e,insert:P});continue}let o=t.contentStart;e.state.doc.sliceString(o,o+A.length)!==A&&u.push({from:o,to:o,insert:A})}if(0===u.length)return!0;let f=d.VR.of(u,e.state.doc.length),p=t.anchor===t.head,m=t.anchor<=t.head,h=f.mapPos(t.anchor,p?1:m?-1:1),g=f.mapPos(t.head,p||m?1:-1);return e.dispatch({changes:u,selection:d.OF.single(h,g),userEvent:"input",scrollIntoView:!0}),!0}},en=Object.keys(y.S).map(e=>({key:e,run:t=>{if(t.state.selection.main.empty)return!1;if("`"===e||"~"===e)return((e,t)=>{let{doc:n,selection:r}=e.state,i=r.main,o=t.repeat(2),l=Math.max(0,i.from-2),a=n.sliceString(l,i.from),c=n.sliceString(i.to,i.to+2);if(i.from>=2&&a===o&&c===o){let r=n.sliceString(i.from,i.to),o=i.to+2,a=n.toString(),c=(0,s.wk)(e.state),u=(0,v.J)(c,a,l),f=(0,v.e)(a,o),p=`${t}
`,m=r.endsWith("\n")?t:`
${t}`,h=[];u&&h.push({from:l,insert:u}),h.push({from:i.from,insert:p}),h.push({from:i.to,insert:m}),f&&h.push({from:o,insert:f});let g=u.length+p.length;return e.dispatch(e.state.changeByRange(e=>({changes:h,range:d.OF.range(e.from+g,e.to+g)})),{userEvent:"input",scrollIntoView:!0}),!0}return(0,k.un)(e,t,t),!0})(t,e);let n=y.S[e];return(0,k.un)(t,e,n),!0}}));function er({primaryAction:e,trackKeyboardShortcut:t}){let n=[{binding:{key:"Enter",run:f},commandId:"close_code_block"},{binding:{key:"Enter",run:j},commandId:"dedent_list_if_blank_item"},{binding:{key:"Enter",run:$},commandId:"insert_new_list_item"},{binding:{key:"Enter",run:u},commandId:"split_blockquote_if_blank_line"},{binding:{key:"Alt-Enter",run:D},commandId:"visit_if_link"},{binding:{key:"Mod-Enter",run:e},commandId:"primary_action"},{binding:z,commandId:"format_link"},{binding:V,commandId:"format_bold"},{binding:H,commandId:"format_italic"},{binding:q,commandId:"format_inline_code"},{binding:ee,commandId:"format_strikethrough"},{binding:et,commandId:"format_task_list"},{binding:U,commandId:"format_blockquote"},{binding:W,commandId:"format_unordered_list"},{binding:G,commandId:"format_ordered_list"},{binding:K,commandId:"format_heading_1"},{binding:Y,commandId:"format_heading_2"},{binding:J,commandId:"format_heading_3"},{binding:Q,commandId:"format_heading_4"},{binding:Z,commandId:"format_heading_5"},{binding:X,commandId:"format_heading_6"},...en.map(e=>({binding:e,commandId:e.key?`wrap_with_${e.key.replace(/[^a-zA-Z0-9]+/g,"_").toLowerCase()}`:"wrap_with_delimiter"})),{binding:{key:"Tab",run:h},commandId:"indent_line_if_code_block"},{binding:{key:"Shift-Tab",run:g},commandId:"unindent_line_if_code_block"},{binding:{key:"Shift-Tab",run:I},commandId:"dedent_selected_list_items"},{binding:{key:"Tab",run:B},commandId:"indent_selected_list_items"},{binding:{key:"Mod-[",run:I},commandId:"dedent_selected_list_items_mod"},{binding:{key:"Mod-]",run:B},commandId:"indent_selected_list_items_mod"}].map(({binding:e,commandId:n})=>((e,n)=>{if(!e.run||!e.key)return e;let r=e.run,i=e.key;return{...e,run:e=>{let o=r(e);return t({commandId:n,shortcut:i,handled:o}),o}}})({...e},n));return r.w4.of(n)}},1509(e,t,n){n.d(t,{AT:()=>N,wk:()=>C,YZ:()=>E,ih:()=>M,ui:()=>L});var r=n(52704),i=n(26632),o=n(24148),l=n(32184),s=n(47970),a=n(82834),d=n(67920),c=n(67005),u=n(46786);function f(e){(0,s.YR)(e,"element",e=>{if((0,u.dz)(e,"code")||(0,u.dz)(e,"pre"))return e.properties={...e.properties,spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false"},a._Z})}let p="dataKey";var m=n(30816),h=n(43623),g=n(83865),_=n(9725);function y(e){if(!(0,u.dz)(e,"pre"))return!1;let t=e.children[0];return!!t&&t?.type==="element"&&"codeFencedFence"===t.properties[c.Lm]}var k=n(91664),b=n(63142),v=n(72569);let x=(0,n(36380).A)({},b.j,{allowComments:!0,ancestors:{li:["ol","ul"],dd:["dl"],dt:["dl"],summary:["details"],source:["audio","video","picture"],figcaption:["figure"]},tagNames:["video","picture","source","figure","figcaption"],attributes:{video:["controls","src","preload","playsinline","aria-label"],source:["src","srcset","type","media","sizes","height","width"]}},{attributes:{"*":[p]}},c.JZ,{attributes:{span:[["className",/^hljs-/]]}},k.jr,(e,t)=>Array.isArray(e)&&Array.isArray(t)?e.concat(t):void 0);x.tagNames&&(x.tagNames=x.tagNames.filter(e=>"input"!==e));var w=n(47135);function I(e){let t=e.doc.toString(),n=(0,w.D)(t),r=function(e,t,n=!0){let r,i,b,w,I=(0,l._)(e,{...c.vQ,allowDangerousHtml:!0});if((0,s.YR)(I,"element",e=>{let t=null;for(let n of e.children)if("element"===n.type){if(t&&function(e,t){if(e.tagName!==t.tagName)return!1;if(!e.properties&&!t.properties)return!0;if(!e.properties||!t.properties)return!1;let n=Object.keys(e.properties).filter(e=>e!==p);if(n.length!==Object.keys(t.properties).filter(e=>e!==p).length)return!1;for(let r of n)if(e.properties[r]!==t.properties[r])return!1;return!0}(n,t)){let e="number"==typeof t.properties?.[p]?t.properties[p]:-1;n.properties[p]=e+1}t=n}}),(0,s.YR)(I,"element",e=>{if(!y(e))return;let t=function(e){let t=e.children.find(e=>(0,u.dz)(e,"code"));if(!t||1!==t.children.length)return null;let n=t.children[0];return n?.type==="text"?n:null}(e);t&&(t.value=t.value.trimEnd())}),(0,g.A)({languages:h.l})(I,new d.T(t)),(0,s.YR)(I,"element",e=>{if(y(e)&&(0,m.z)(e)){let n=t.slice(e.position.start.offset,e.position.end.offset),r=`${n.slice(0,n.indexOf("\n")+1)}`,i=(0,_.On)(e.position.start,r),o=e.children.find(e=>(0,u.dz)(e,"code"));o&&function e(t,n){for(let r of n)if("text"===r.type)t=(0,_.On)(t,r.value);else if("element"===r.type){let n=e(t,r.children);r.position={start:{...t},end:{...n}},t=n}return t}(i,[o])}}),!n||(r=!1,(0,s.YR)(e,"html",()=>(r=!0,a.dc)),!r))return(0,k.vp)(I),f(I),I;let j=(0,o.l)(I,{tagfilter:!0,passThrough:["delimiter"],file:new d.T(t)});i=t.split("\n"),b={column:(i.at(-1)?.length??0)+1,line:i.length+1,offset:t.length},w=-1,(0,a.VG)(j,(e,t)=>{if(t.length<=w)return a.dc;w=t.length,"element"===e.type&&(0,m.z)(e)&&!(e.position.end.offset>=b.offset)&&(e.position.end={...b})},!0);let S=(0,v.a)(j,x);return(0,a.VG)(S,"element",(e,n)=>{let r;if("video"!==e.tagName||!Array.isArray(e.children))return;let i=n[n.length-1];if(!i||!Array.isArray(i.children))return;let o=i.children.indexOf(e);if(-1===o)return;let l="element"===i.type&&"p"===i.tagName,s=l?n[n.length-2]:void 0,a=s&&Array.isArray(s.children)?s:i;if(!Array.isArray(a.children))return;let d=a===i?o:a.children.indexOf(i);if(-1===d)return;let c=e.properties??(e.properties={});t&&e.position&&"number"==typeof e.position.start?.offset&&"number"==typeof e.position.end?.offset&&(r=t.slice(e.position.start.offset,e.position.end.offset));let u=c.controls;void 0===u?c.controls=!0:"false"===u?c.controls=!1:"true"===u&&(c.controls=!0),void 0===c.preload&&(c.preload="metadata");let f="playsinline",p=c[f];void 0===p&&Object.prototype.hasOwnProperty.call(c,"playsInline")&&(p=c[f="playsInline"]);let h=e=>{c.playsinline=e,c.playsInline=e},g="string"==typeof r&&/playsinline\s*=\s*['"]?false['"]?/i.test(r);"string"==typeof r&&/playsinline\s*=\s*['"]?true['"]?/i.test(r),void 0===p?h(!g&&!0):"false"===p||!1===p?h(!1):("true"===p||!0===p)&&h(!0);let _=[];for(let t of e.children)("text"!==t.type||""!==t.value.trim())&&("element"===t.type&&"properties"in t&&t.properties?.dataDelimiter==="htmlTag"||_.push(t));if(e.children=[],_.length>0){let t=_.filter(e=>(0,m.z)(e)).map(e=>({child:e,start:e.position.start})).reduce((e,t)=>e?t.start.offset<e.start.offset?t:e:t,void 0);e.position&&t&&(e.position={...e.position,end:{...t.start}}),a.children.splice(d+1,0,..._)}l&&s&&Array.isArray(s.children)&&s.children.splice(d,1,e)}),(0,k.vp)(S),f(S),S}(n,t);return{markdownTree:n,htmlTree:r}}let j=r.Pe.define(),S=i.Z9.define(e=>{let t=null;return{update:n=>{n.docChanged&&(t&&clearTimeout(t),t=setTimeout(()=>e.dispatch({effects:j.of(I(e.state))})))}}}),T=r.sU.define({create:I,update:(e,t)=>t.effects.find(e=>e.is(j))?.value??e,provide:()=>[S]}),E=T;function C(e){return e.field(T).markdownTree}function M(e){return e.field(T).htmlTree}function N(e){return e.effects.some(e=>e.is(j))}let L=N},84985(e,t,n){n.d(t,{Ji:()=>c,Kr:()=>l,aG:()=>d,gJ:()=>u});var r=n(52704),i=n(9725),o=n(1509);let l=[];function s(e){let t=(0,o.wk)(e),n=e.selection.main;return(0,i.v5)(t,n.from,n.to,!0)}let a=r.sU.define({create:s,update:(e,t)=>!t.startState.selection.eq(t.newSelection)||(0,o.AT)(t)?s(t.state):e,provide:()=>[o.YZ]}),d=a;function c(e){return e.field(a)}function u(e){if(!e.startState.selection.eq(e.newSelection)||(0,o.AT)(e))return!0;let t=e.startState.field(a),n=e.state.field(a);if(t.length!==n.length)return!0;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!0;return!1}},77987(e,t,n){function r(e){return 1===e.selection.ranges.length&&!e.selection.main.empty}function i(e){let t=e.selection.main.anchor,n=e.doc.toString(),r=n.slice(0,t).lastIndexOf("\n")+1,i=n.indexOf("\n",t);return -1===i&&(i=n.length),{from:r,to:i}}function o(e,t){let n=t,r=t,i=e=>/[^\w\d']/.test(e);for(;n>0&&e[n-1];){let t=e[n-1];if("'"===t){let t=e[n-2];if(!t||i(t)||/\s/.test(t))break}if(i(t))break;n--}for(;r<e.length&&e[r];){let t=e[r];if("'"===t){let t=e[r+1];if(!t||i(t)||/\s/.test(t))break}if(i(t))break;r++}return{start:n,end:r}}function l(e){return 1===e.selection.ranges.length&&e.selection.main.empty?e.selection.main.anchor:null}n.d(t,{IC:()=>s,JC:()=>l,Jr:()=>r,cL:()=>o,j6:()=>i});let s=(e,t)=>{try{let n=e.domAtPos(t);if(n?.node)try{let e=document.createRange();e.setStart(n.node,n.offset),e.setEnd(n.node,n.offset);let t=e.getBoundingClientRect();if(0!==t.left||0!==t.right||0!==t.top||0!==t.bottom)return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}catch{}return e.coordsAtPos(t)??null}catch{return null}}},67005(e,t,n){n.d(t,{JZ:()=>m,Lm:()=>s,YF:()=>f,vQ:()=>p});var r=n(89027),i=n(32184),o=n(12702),l=n(30816);let s="dataDelimiter";function a(e){let t=[];for(let n of e.children??[])"delimiter"===n.type&&t.push(n);return t}let d={tableDelimiter:"td",tableDelimiterRow:"tr"};function c(e){let t={[s]:e.tokenType},n=e.children?.length?e.children.map(c):e.raw,i=(0,r.h)(d[e.tokenType]??"span",t,n);return(0,l.z)(e)&&(i.position={start:{...e.position.start},end:{...e.position.end}}),i}let u=(e,t)=>{let n=(0,i._)(t);if("element"===n.type){let e=a(t).map(c);n.children?.length?n.children=[...n.children,...e].sort(l.y):n.children=e}else if("text"===t.type)return[n,...a(t).map(c)];return n};function f(e){let t=e.properties?.[s];return"string"==typeof t?t:null}let p={handlers:{...Object.fromEntries(Array.from((0,o.XT)()("break","blankLine","code","definition","footnoteReference","image","imageReference","inlineCode","text","thematicBreak","yaml")).map(e=>[e,u])),delimiter:(e,t)=>c(t)}},m={attributes:{"*":[s]}}},91664(e,t,n){n.d(t,{Al:()=>o,jr:()=>s,vp:()=>l});var r=n(47970),i=n(46786);let o="dataVideoCandidate";function l(e){(0,r.YR)(e,"element",(e,t,n)=>{if(!n||"number"!=typeof t||!(0,i.dz)(e,"p"))return;let r=e.children.filter(e=>"element"===e.type||"text"===e.type&&""!==e.value.trim());if(1!==r.length)return;let l=r[0];l?.type==="element"&&(0,i.dz)(l,"a")&&(l.properties[o]=!0)})}let s={attributes:{"*":[o]}}},46786(e,t,n){n.d(t,{_z:()=>a,dz:()=>l,nT:()=>s,rf:()=>function e(t){return t.children.map(t=>"text"===t.type?t.value:"element"!==t.type||Object.hasOwn(t.properties??{},o.Lm)?"":e(t)).join("")}});var r=n(91775),i=n(63234),o=n(67005);function l(e,t){return"element"===e.type&&e.tagName===t}function s(e){if(!e)return{};let t={};for(let n of Object.getOwnPropertyNames(e)){let o=(0,r.I)(i.qy,n),l=e[n]?.toString();"string"==typeof l&&(t[o.attribute]=l)}return t}function a(e,t,n){if(e===t)return!0;if(e.type!==t.type)return!1;let r=n?.ignorePosition?(e,t)=>"position"===e?{}:t:void 0;return JSON.stringify(e,r)===JSON.stringify(t,r)}},11968(e,t,n){function r(e,t){return e.slice(0,t).lastIndexOf("\n")+1}function i(e,t){let n=e.indexOf("\n",t);return -1===n?e.length:n}function o(e,t){return t<0||t>e.length?null:{start:r(e,t),end:i(e,t)}}function l(e,t,n){let o=[],l=r(e,t);for(;l<=n;){let t=i(e,l);o.push({start:l,end:t}),l=t+1}return o}n.d(t,{W:()=>o,b:()=>l})},55177(e,t,n){n.d(t,{J:()=>i,e:()=>o});var r=n(31626);function i(e,t,n){let i=r._.atOffset(e,t,n);if(n!==i?.contentStart&&n!==i?.start)return"\n\n";let o=i?.previous();return!o||o?.isBlank?"":"\n"}function o(e,t,n=!1){return"\n"===e[t]?"\n"===e[t+1]?"":"\n":t>=e.length&&!n?"":"\n\n"}},1249(e,t,n){function r(e,t){switch(t){case"escapeBlockquote":return e.slice(0,e.findLastIndex(e=>"blockQuotePrefix"===e.tokenType));case"escapeList":return e.slice(0,e.findLastIndex(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType));case"all":return[];case void 0:return e}}function i(e){return" ".repeat(e.length)}function o(e){return e.map(e=>{switch(e.tokenType){case"listItemPrefix":return i(e.raw);case"taskListCheck":return"";default:return e.raw}}).join("")}n.d(t,{KR:()=>r,cz:()=>i,z0:()=>o})},8433(e,t,n){n.d(t,{h:()=>r});function r(e){let t=e.raw,n=t.search(/\S/),r=t.length-t.trimEnd().length;return{startOffset:e.position.start.offset+n,endOffset:e.position.end.offset-r}}},23556(e,t,n){n.d(t,{C:()=>c,T:()=>d});var r=n(47970),i=n(82834),o=n(30816);function l(e,t,n){e.children??(e.children=[]),e.children.splice(t,0,n),(0,o.z)(e)&&(0,o.z)(n)&&(n.position.start.offset<e.position.start.offset?Object.assign(e.position.start,n.position.start):n.position.end.offset>e.position.end.offset&&Object.assign(e.position.end,n.position.end))}function s(e,t,n=!1){let r=void 0!==e.children&&(t===e.children.length-1||-1===t),i=e.children?.splice(t,1)[0];if(n&&i&&(0,o.z)(e)&&(0,o.z)(i)){if(0===t){let t=e.children?.[0];t&&Object.assign(e.position.start,t.position?.start)}else if(r){let t=e.children?.at(-1);t&&Object.assign(e.position.end,t.position?.end)}}return i}var a=n(80722);let d=new Set(["listItemIndent","listItemPrefix","blockQuotePrefix","linePrefix","taskListCheck"]);function c(){return{transforms:[u]}}function u(e){(0,i.VG)(e,"list",(e,t)=>{let n=t.at(-1),r=(n?.children?.indexOf(e)??-1)+1;if(!n||0===r)return;let i=e.children.at(-1);for(;i?.type==="delimiter"&&"blockQuotePrefix"===i.tokenType;)!function(e,t=!1){s(e,-1,t)}(e,!0),l(n,r,i),i=e.children.at(-1)}),(0,r.YR)(e,e=>{let t=null;for(let[c,u]of function*(e){if(e.children)for(let t=e.children.length-1;t>=0;t--){let n=e.children[t];n&&(yield[t,n])}}(e)){var n,r,i;if("delimiter"===u.type&&d.has(u.tokenType)&&t&&(n=t,(0,o.z)(u)&&(0,o.z)(n)&&u.position.end.offset===n.position.start.offset)&&(r=t,!a.fD.has(r.type))){s(e,c),l(t,0,u);continue}if("listItem"===u.type)for(;t?.type==="delimiter"&&d.has(t.tokenType);)s(e,c+1),i=t,l(u,u.children?.length??0,i),t=e.children?.[c+1]??null;t=u}})}},92822(e,t,n){n.d(t,{DN:()=>m,Hg:()=>h,LY:()=>u,Ts:()=>f,WJ:()=>_,Wq:()=>g,el:()=>p,xM:()=>v,zE:()=>b,zJ:()=>c});var r=n(47970),i=n(82834),o=n(1249);let l={first:{prefix:"",digits:1,suffix:". "},parse(e){let t=e.match(/^(?<prefix>\s*)(?<digits>\d{1,9})(?<suffix>[.)]\s*)$/)?.groups;return t?{...t,digits:parseInt(t.digits,10)}:void 0},serialize:e=>`${e.prefix}${e.digits}${e.suffix}`,increment:e=>({...e,digits:Math.min(e.digits+1,0x3b9ac9ff)}),reset:e=>({...e,digits:1})},s={prefix:"[",value:"x",suffix:"] "},a={prefix:"[",value:" ",suffix:"] "},d=e=>e.match(/^(?<prefix>\[)(?<value>[ xX])(?<suffix>\]\s*)$/)?.groups;function c(e){return d(e)}function u(e){let t=l.parse(e);return t?l.serialize(l.increment(t)):e}function f(e){let t=l.parse(e);return t?l.serialize(l.reset(t)):e}function p(e){return e?l.serialize(l.first):"* "}function m(e){let t;return t=e?s:a,`${t.prefix}${t.value}${t.suffix}`}function h(e,t,n=""){let r=d(t),i=r?r.suffix.slice(1):"",o=0!==i.length||0!==n.length&&/\s/.test(n)?i:" ";return`[${e?"x":" "}]${o}`}function g(e){return void 0!==d(e)}function _(e){return d(e)?.value.toLowerCase()==="x"}function y(e,t){if(t<0)return 0;let n=e.find(e=>"linePrefix"===e.tokenType);return n?Math.floor(n.raw.length/2):e.slice(0,t).filter(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType).length}function k(e,t){return e.slice(t).find(e=>"taskListCheck"===e.tokenType)}function b(e,t,n){let r=n.findLast(e=>"listItemPrefix"===e.tokenType),i=n[0]?.position?.start.offset,l=n.at(-1)?.position?.end.offset;if(!r||void 0===i||void 0===l)return[];let s=function(e,t){let n=e.findLastIndex(e=>"listItemPrefix"===e.tokenType),r=t.findLastIndex(e=>"listItemPrefix"===e.tokenType),i=k(e,n),l=k(t,r),s=y(e,n);if(y(t,r)===s){let t=(0,o.z0)(e.slice(0,n))+e[n]?.raw;return i?t+(l?.raw??m(!1)):t}return t.map(e=>e.raw).join("")}(t,n);return s?[{from:e+i,to:e+l,insert:s}]:[]}function v(e){let t={};return(0,r.YR)(e,e=>t.listItemPrefix?("delimiter"===e.type&&"taskListCheck"===e.tokenType&&(t.taskListPrefix=e),i.dc):("delimiter"===e.type&&"listItemPrefix"===e.tokenType&&(t.listItemPrefix=e),"list"===e.type)?i._Z:void 0),t}},31626(e,t,n){n.d(t,{_:()=>g});var r=n(35750),i=n(18150),o=n(85242),l=n(50467),s=n(11968),a=n(9725),d=n(30816),c=n(8433),u=n(23556),f=n(92822),p=new WeakMap,m=new WeakMap,h=new WeakMap;class g{get prefixes(){return(0,o._)(this,h,(0,r._)(this,h)??(0,a.H5)((0,r._)(this,p),this.start,this.end).filter(e=>"delimiter"===e.type&&u.T.has(e.tokenType)))}get lastPrefix(){return this.prefixes.at(-1)}get contentStart(){return this.lastPrefix?.position?.end.offset??this.start}get content(){return(0,r._)(this,m).slice(this.contentStart,this.end)}get isBlank(){return(0,f.Wq)(this.content)||0===this.content.trim().length}previous(){return 0===this.start?null:g.atOffset((0,r._)(this,p),(0,r._)(this,m),this.start-1)}next(){return this.end>=(0,r._)(this,m).length?null:g.atOffset((0,r._)(this,p),(0,r._)(this,m),this.end+1)}overlaps(e,t){return e>=this.start&&e<this.end||t>this.start&&t<=this.end||e<=this.start&&t>=this.end}contains(e){return e>=this.start&&e<this.end}prefixesBefore(e){return this.prefixes.filter(t=>(0,d.z)(t)&&(0,c.h)(t).endOffset<=e)}isOffsetAfterPrefixes(e){return this.lastPrefix===this.prefixesBefore(e).at(-1)}static atOffset(e,t,n){let r=(0,s.W)(t,n);return r&&new g(e,t,r.start,r.end)}static linesAtRange(e,t,n,r){return(0,s.b)(t,n,r).map(({start:n,end:r})=>new g(e,t,n,r))}constructor(e,t,n,r){(0,l._)(this,"start",void 0),(0,l._)(this,"end",void 0),(0,i._)(this,p,{writable:!0,value:void 0}),(0,i._)(this,m,{writable:!0,value:void 0}),(0,i._)(this,h,{writable:!0,value:null}),(0,o._)(this,p,e),(0,o._)(this,m,t),this.start=n,this.end=r}}},80722(e,t,n){n.d(t,{Qd:()=>l,Sv:()=>o,fD:()=>i});var r=n(12702);let i=(0,r.XT)()("break","delete","emphasis","footnoteReference","html","image","imageReference","inlineCode","link","linkReference","strong","text","delimiter"),o=(0,r.XT)()("delete","emphasis","heading","link","linkReference","paragraph","strong","tableCell","root"),l=new Set(["delete","delimiter","emphasis","inlineCode","paragraph","strong","text","root"])},47135(e,t,n){n.d(t,{D:()=>x});var r=n(86350),i=n(13239),o=n(10104),l=n(9725),s=n(30816);function a(e){return{type:"blankLine",position:{start:e,end:e},data:{hProperties:{dataBlankLine:!0}}}}var d=n(23556);let c=["blockQuotePrefix","strongSequence","emphasisSequence","codeTextSequence","codeTextPadding","strikethroughSequence","thematicBreakSequence","codeFencedFence","atxHeadingSequence","whitespace","setextHeadingLine","labelMarker","labelImageMarker","resource","resourceDestination","linePrefix","listItemIndent","listItemPrefix","taskListCheck","tableCellDivider","tableDelimiterRow","tableDelimiter","autolinkMarker","hardBreakEscape","escapeMarker","characterReference"];function u(e){if(e.data.delimiterStack?.length)return e.data.delimiterStack.at(-1);let t=e.stack.at(-1);if(t?.type==="fragment"){let t=e.stack.at(-2);if(t&&"value"in t)return t}return t}let f=function(e){let t={type:"delimiter",tokenType:e.type,raw:this.sliceSerialize(e),position:{start:e.start,end:e.end}},n=u(this);if(n){var r;n.children??(n.children=[]),n.children.push(t),(r=this.data).delimiterStack??(r.delimiterStack=[]),this.data.delimiterStack.push(t)}return!1},p=function(e){let t=this.data.delimiterStack?.pop();if(t?.tokenType!==e.type)throw Error(`Expected open '${e.type}' delimiter on stack`);return this.data.lastExitedDelimiterToken=e,!1},m=function(e){let t=u(this),n=t?.children?.at(-1);return e.end.offset-e.start.offset==1&&n?.type==="delimiter"&&"listItemPrefix"===n.tokenType&&(0,s.z)(n)&&e.start.offset===n.position.end.offset?(n.position.end={...e.end},n.raw+=this.sliceSerialize(e)):f.call(this,e),!1},h=function(e){let t=u(this);return t?.type==="delimiter"&&"linePrefix"===t.tokenType&&p.call(this,e),!1},g=function(e){var t;let n=this.stack.at(-1);if(n?.type==="heading"&&!((t=n.children[1])&&"delimiter"===t.type&&"whitespace"===t.tokenType)){this.exit(e);let t=this.stack.at(-1);t.children.pop(),t.children.push({type:"paragraph",position:n.position,children:[]});return}return!1};var _=n(82834),y=n(71313),k=n(87070);function b(e){(0,_.VG)(e,"html",(e,t)=>{let n=t.at(-1),r=n.children.indexOf(e);n.children.splice(r,1,...(0,s.z)(e)?(function(e){let t=[],n=null;function r(e,r){if(!r)return;let i={column:r.endCol,line:r.endLine,offset:r.endOffset};if("text"===e&&n?.type==="text"){n.position.end=i;return}let o={type:e,position:{start:{column:r.startCol,line:r.startLine,offset:r.startOffset},end:i}};t.push(o),n=o}return new k._F({sourceCodeLocationInfo:!0},{onCharacter:({location:e})=>r("text",e),onWhitespaceCharacter:({location:e})=>r("text",e),onNullCharacter:({location:e})=>r("text",e),onStartTag:({location:e})=>r("startTag",e),onEndTag:({location:e})=>r("endTag",e),onDoctype:({location:e})=>r("doctype",e),onComment:({location:e})=>r("comment",e),onEof:y.l,onParseError:y.l}).write(e,!0),t})(e.value).flatMap(t=>{let n=e.value.slice(t.position.start.offset,t.position.end.offset),r={start:(0,l.z0)(e.position.start,t.position.start),end:(0,l.z0)(e.position.start,t.position.end)};switch(t.type){case"text":return[{type:"text",value:n,position:r}];case"endTag":return[{type:"delimiter",tokenType:"htmlTag",raw:n,position:r},{type:"html",value:n,position:r}];case"startTag":return[{type:"html",value:n,position:r},{type:"delimiter",tokenType:"htmlTag",raw:n,position:r}];case"comment":case"doctype":return[{type:"html",value:n,position:r}]}}):[])},!0)}let v={enabledExtensions:{delimiters:!0,containDelimiters:!0,splitHtml:!0,skipEmptyHeadings:!0,blankLines:!0}};function x(e,{enabledExtensions:t=v.enabledExtensions}=v){return(0,r.Y)(e,"utf-8",{extensions:[(0,o.T)()],mdastExtensions:[(0,i.C)(),t.delimiters?{enter:{...Object.fromEntries(c.map(e=>[e,f])),linePrefix:m},exit:{...Object.fromEntries(c.map(e=>[e,p])),linePrefix:h}}:[],t.containDelimiters?(0,d.C)():[],t.splitHtml?{transforms:[b]}:[],t.skipEmptyHeadings?{exit:{atxHeading:g}}:[],t.blankLines?{transforms:[t=>{let n=[],r={column:0,line:0,offset:-1};function i(e){n.push(e),r=e.position.end}for(let e of t.children)if((0,s.z)(e)){for(;r.offset+1<e.position.start.offset;)i(a((0,l.On)(r,"\n")));i(e)}for(;r.offset+1<e.length;)i(a((0,l.On)(r,"\n")));t.children=n}]}:[]]})}},9725(e,t,n){n.d(t,{DT:()=>l,DV:()=>d,H5:()=>u,NC:()=>f,On:()=>m,Uh:()=>s,aI:()=>a,v5:()=>c,z0:()=>p});var r=n(47970),i=n(82834),o=n(30816);function l(e,t,n,r){return e>=n&&e<=r||t>=n&&t<=r||e<=n&&t>=r}function s(e,t,n){let s=[];return(0,r.YR)(e,e=>{if((0,o.z)(e))if(!l(t,n,e.position.start.offset,e.position.end.offset))return i._Z;else s.push(e)}),s}function a(e,t,n){return e.children.filter(e=>(0,o.z)(e)&&l(t,n,e.position?.start.offset,e.position.end.offset))}function d(e,t,n,r,i){return i?e>=n&&t<=r:e>=n&&t<=r&&(e!==n||t!==r)}function c(e,t,n,l){let s=[];return(0,r.YR)(e,e=>{if((0,o.z)(e))if(!d(t,n,e.position.start.offset,e.position.end.offset,l))return i._Z;else s.push(e)}),s}function u(e,t,n){let s=[];return(0,r.YR)(e,e=>{if(!(0,o.z)(e))return;let r=e.position.start.offset,a=e.position.end.offset;if(!l(t,n,r,a))return i._Z;r>=t&&a<=n&&s.push(e)}),s}function f(e,t){let n;return(0,r.YR)(e,e=>{if((0,o.z)(e))if(!d(t,t,e.position.start.offset,e.position.end.offset)||"text"===e.type||"delimiter"===e.type)return i._Z;else n=e}),n}function p(e,t){return{column:e.column+t.column-1,line:e.line+t.line-1,offset:(e.offset??0)+(t.offset??0)}}function m(e,t){let n=t.split("\n"),r=n.at(-1);return{...e,line:e.line+n.length-1,column:1===n.length?e.column+t.length:r.length+1,offset:void 0!==e.offset?e.offset+t.length:void 0}}},30816(e,t,n){function r(e){return void 0!==e.position&&void 0!==e.position.start&&void 0!==e.position.end&&"number"==typeof e.position.start.offset&&"number"==typeof e.position.end.offset}function i(e,t){return r(e)&&r(t)?e.position.start.offset!==t.position.start.offset?e.position.start.offset-t.position.start.offset:e.position.end.offset-t.position.end.offset:0}n.d(t,{y:()=>i,z:()=>r})},35037(e,t,n){n.d(t,{Ci:()=>d,Ec:()=>a});var r=n(74848),i=n(16522),o=n(94583),l=n(96540);let s=(0,l.createContext)({trackViewSwitch:()=>{},trackToolbarInteraction:()=>{},trackKeyboardShortcut:()=>{},trackAutocompleteShown:()=>{},trackAutocompleteSelected:()=>{},trackFileUpload:()=>{}});function a(){return(0,l.use)(s)}function d(e){let t,n,l=(0,i.c)(5),{options:a,children:d}=e;l[0]!==a?(t=function({featureFlagEnabled:e,editorId:t,surface:n}){let r={feature_flag_markdown_experience_hybrid_editor:e};t&&(r.editor_id=t),n&&(r.surface=n);let i=(e,t)=>{let n={...r,...t};try{(0,o.BI)(e,n)}catch(e){if(e instanceof ReferenceError&&"string"==typeof e.message&&e.message.includes("telemetry"))return;throw e}},l=(e,t)=>{i(`hybrid_markdown_editor.${e}`,t)};return{trackViewSwitch:({from:e,to:t,trigger:n})=>{i("markdown_editor.select_view",{mode:t,from_mode:e??"unknown",trigger:n,did_change:!e||e!==t})},trackToolbarInteraction:({control:e,action:t,trigger:n,isActive:r,keybinding:i,handled:o})=>{l("toolbar_interaction",{control:e,action:t,trigger:n,is_active:r??null,keybinding:i,handled:o??null})},trackKeyboardShortcut:({commandId:e,shortcut:t,handled:n})=>{l("keyboard_shortcut",{command:e,shortcut:t,handled:n})},trackAutocompleteShown:({triggerChar:e,queryLength:t,suggestionState:n,suggestionCount:r})=>{l("autocomplete_shown",{trigger_char:e,query_length:t,suggestion_state:n,suggestion_count:r??null})},trackAutocompleteSelected:({triggerChar:e,insertedLength:t,multiStep:n,suggestionKind:r})=>{l("autocomplete_selected",{trigger_char:e,inserted_length:t,multi_step:n,suggestion_kind:r})},trackFileUpload:({phase:e,mimeType:t,sizeBytes:n,mediaKind:r,errorType:i})=>{l("file_upload",{phase:e,mime_type:t,size_bytes:n,media_kind:r??"other",error_type:i??null})}}}(a),l[0]=a,l[1]=t):t=l[1];let c=t;return l[2]!==d||l[3]!==c?(n=(0,r.jsx)(s,{value:c,children:d}),l[2]=d,l[3]=c,l[4]=n):n=l[4],n}s.displayName="HybridEditorTelemetryContext",d.displayName="HybridEditorTelemetryProvider"},65448(e,t,n){n.d(t,{g:()=>s});var r=n(74848),i=n(16522),o=n(38621),l=n(91432);function s(e){let t,n=(0,i.c)(2);return n[0]!==e?(t=(0,r.jsx)(l.E.IconButton,{onMouseDown:a,variant:"invisible",icon:o.PaperclipIcon,"aria-label":"Attachment",...e}),n[0]=e,n[1]=t):t=n[1],t}function a(e){return e.preventDefault()}s.displayName="FileUploadButton"},19551(e,t,n){n.d(t,{Y:()=>d});var r=n(74848),i=n(16522),o=n(24043),l=n(39641),s=n(4627),a=n(34164);function d(e){let t,n,d,c,u,f=(0,i.c)(16),{onChangeViewMode:p,selectedView:m,children:h,uploadInProgress:g}=e,_=void 0===m?"hybrid":m,y=void 0!==g&&g;if(f[0]!==p||f[1]!==_||f[2]!==y){let e;n=(0,o.G7)("markdown_experience_toolbar_redesign");let i=!p||y;f[6]!==p||f[7]!==_||f[8]!==i?(e=(0,r.jsx)(s.m,{selectedView:_,onViewSelect:p,disabled:i}),f[6]=p,f[7]=_,f[8]=i,f[9]=e):e=f[9],d=e,t=(0,a.$)("Header-module__header__N5rZg",n&&"Header-module__redesignEnabled__zwkEh"),f[0]=p,f[1]=_,f[2]=y,f[3]=t,f[4]=n,f[5]=d}else t=f[3],n=f[4],d=f[5];let k=!n&&d;f[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(l.Z,{className:"Header-module__previewLabel__fT9j4"}),f[10]=c):c=f[10];let b=n&&d;return f[11]!==h||f[12]!==t||f[13]!==k||f[14]!==b?(u=(0,r.jsxs)("div",{className:t,children:[k,h,c,b]}),f[11]=h,f[12]=t,f[13]=k,f[14]=b,f[15]=u):u=f[15],u}d.displayName="Header"},54305(e,t,n){n.d(t,{M:()=>N});var r=n(74848),i=n(16522),o=n(24043),l=n(38621),s=n(91432),a=n(34164),d=n(31626),c=n(9725),u=n(30816),f=n(1509),p=n(58120);let m="```\n",h=e=>{e.hasFocus||e.focus();let t=(0,f.wk)(e.state),n=e.state.doc.toString(),r=e.state.selection.main,{from:i,to:o}=r,l=(0,p.rx)(e,"code");if(l){if(!(0,u.z)(l)||"code"!==l.type)return!1;let t=(0,p.j9)(l).filter(u.z);if(0===t.length)return!1;let n=t.map((e,n)=>({from:n===t.length-1?e.position.start.offset-1:e.position.start.offset,to:0===n?e.position.end.offset+1:e.position.end.offset}));return e.dispatch({changes:n,userEvent:"input",scrollIntoView:!0}),!0}let s=[],a=[...(0,c.Uh)(t,i,o)].filter(e=>"code"===e.type).flatMap(e=>{let t=(0,p.j9)(e).filter(u.z);return t.map((e,n)=>({from:n===t.length-1?e.position.start.offset-1:e.position.start.offset,to:0===n?e.position.end.offset+1:e.position.end.offset}))}),h=a.at(0)?.from,g=a.at(-1)?.to;s.push(...a);let _=d._.linesAtRange(t,n,i,o),y=_[0]?.isOffsetAfterPrefixes(i)?_[0]?.contentStart:_[0]?.start,k=_.at(-1)?.end,b=void 0!==h&&void 0!==y?Math.min(y,h):y,v=void 0!==g&&void 0!==k?Math.max(k,g):k;if(void 0===b||void 0===v)return!1;s.push({from:b,insert:m},{from:v,insert:"\n```"});let x=r.empty&&d._.atOffset(t,n,r.from)?.isBlank;return e.dispatch({changes:s,selection:x?{anchor:b+m.length}:void 0,userEvent:"input",scrollIntoView:!0}),!0};var g=n(52799),_=n(33702),y=n(14550),k=n(92822),b=n(79076),v=n(96540),x=n(23397),w=n(35037),I=n(67283);function j(e){return e?.replaceAll("+","Plus")?.replaceAll("-","+")}let S=()=>{let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"Toolbar-module__menuLeadingVisualPlaceholder__cu5ja"}),t[0]=e):e=t[0],e};S.displayName="CheckIconPlaceholder";let T=()=>{let e=(0,w.Ec)(),{view:t,selectedNodes:n}=(0,v.use)(I.P),i=(0,v.useMemo)(()=>{if(t)return(0,x.kH)(t)},[n,t]),o=(0,v.useCallback)(e=>!!t&&(0,x._n)(t,e),[n,t]),a=(0,v.useCallback)(e=>{if(void 0!==i)return i===e?l.CheckIcon:S},[i]),d=(0,v.useCallback)(e=>{let t=j(e.key);if(t)return(({keys:e})=>function(){return(0,r.jsx)(b.U,{className:"Toolbar-module__menuKeybindingHint__JS8FT",keys:e})})({keys:t})},[]),c=(0,v.useCallback)((n,r)=>{if(!t)return;let o=i===n,l=(r.run||(()=>!1))(t,"toolbar");e.trackToolbarInteraction({control:`heading_${n}`,action:`heading_${n}`,trigger:"toolbar",isActive:o,keybinding:r.key,handled:l})},[e,t,i]),u=(0,v.useCallback)(n=>{if(!t)return;let r=!1;"increase"===n&&(r=(0,x.WZ)(t,"increase")),"decrease"===n&&(r=(0,x.WZ)(t,"decrease")),e.trackToolbarInteraction({control:`${n}_heading_level`,action:`${n}_heading_level`,trigger:"toolbar",isActive:!0,handled:r})},[e,t]);return(0,r.jsx)(s.E.Menu,{"aria-label":"Heading",icon:l.HeadingIcon,items:[{label:"Heading 1",onClick:()=>c(1,y.Jr),leadingVisual:a(1),trailingVisual:d(y.Jr)},{label:"Heading 2",onClick:()=>c(2,y.oE),leadingVisual:a(2),trailingVisual:d(y.oE)},{label:"Heading 3",onClick:()=>c(3,y.b5),leadingVisual:a(3),trailingVisual:d(y.b5)},{label:"Heading 4",onClick:()=>c(4,y.kD),leadingVisual:a(4),trailingVisual:d(y.kD)},{label:"Heading 5",onClick:()=>c(5,y.rk),leadingVisual:a(5),trailingVisual:d(y.rk)},{label:"Heading 6",onClick:()=>c(6,y.o8),leadingVisual:a(6),trailingVisual:d(y.o8)},{type:"divider"},{label:"Increase heading level",onClick:()=>u("increase"),disabled:!o("increase")},{label:"Decrease heading level",onClick:()=>u("decrease"),disabled:!o("decrease")}]})};T.displayName="HeadingMenu";let E=e=>{let t,n,o,l,a,d,c,u,f,p=(0,i.c)(26);p[0]!==e?({command:t,matchingNodeFilter:n,resolveIsPressed:l,telemetryId:a,...o}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=o,p[4]=l,p[5]=a):(t=p[1],n=p[2],o=p[3],l=p[4],a=p[5]);let{view:m,selectedNodes:h}=(0,v.use)(I.P);if(p[6]!==n||p[7]!==l||p[8]!==h){let e=h.some(n);d=l?.(h,e)??e,p[6]=n,p[7]=l,p[8]=h,p[9]=d}else d=p[9];let g=d,_=(0,w.Ec)(),y=o["aria-label"],k="function"!=typeof t,b=(k?t.run:t)??C,x=k?t.key:void 0;p[10]!==y||p[11]!==b||p[12]!==x||p[13]!==g||p[14]!==_||p[15]!==a||p[16]!==m?(c=()=>{if(!m)return;m.hasFocus||m.focus();let e=b(m,"toolbar");_.trackToolbarInteraction({control:a??y??"unknown",action:a??y??"unknown",trigger:"toolbar",isActive:g,keybinding:x,handled:e})},p[10]=y,p[11]=b,p[12]=x,p[13]=g,p[14]=_,p[15]=a,p[16]=m,p[17]=c):c=p[17];let S=c;p[18]!==x?(u=j(x),p[18]=x,p[19]=u):u=p[19];let T=!m;return p[20]!==g||p[21]!==o||p[22]!==S||p[23]!==u||p[24]!==T?(f=(0,r.jsx)(s.E.IconButton,{variant:"invisible",onMouseDown:M,keybindingHint:u,disabled:T,onClick:S,"aria-pressed":g,...o}),p[20]=g,p[21]=o,p[22]=S,p[23]=u,p[24]=T,p[25]=f):f=p[25],f};function C(){return!1}function M(e){return e.preventDefault()}E.displayName="ToolbarButton",E.displayName="MarkdownEditor.ToolbarButton";let N=e=>{let t,n,d,c,u,f,p,m,g,b,v,x,w,j,S,C,M,N,$,D,z,V,H,q,U,W,G,K,Y,J,Q,Z,X=(0,i.c)(83),{view:ee,fileUploadButton:et,selectedNodes:en,customButtons:er}=e;if(X[0]!==er||X[1]!==en||X[2]!==ee){let e,i,h,T,R,F,W=(0,o.G7)("markdown_experience_toolbar_redesign");X[28]===Symbol.for("react.memo_cache_sentinel")?(e=e=>(function(e){return"listItem"===e.type})(e)&&!!(0,k.xM)(e).taskListPrefix,X[28]=e):e=X[28];let G=e;X[29]===Symbol.for("react.memo_cache_sentinel")?(i=e=>"list"===e.type&&e.children.some(e=>G(e)),X[29]=i):i=X[29];let K=i;X[30]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{let t=e.list,n=new Set;for(let r of e.selectedItems)if(G(r)?n.add("task"):n.add(t.ordered?"ordered":"unordered"),n.size>1)return null;return n.values().next().value??null},X[30]=h):h=X[30];let Y=h;X[31]===Symbol.for("react.memo_cache_sentinel")?(T=e=>{for(let t=e.length-1;t>=0;t-=1){let n=e[t];if(!n||"listItem"!==n.type)continue;if(G(n))return"task";let r=(0,k.xM)(n).listItemPrefix?.raw??"";return/^\s*(?:\d+\.|\d+\))/u.test(r)?"ordered":"unordered"}return null},X[31]=T):T=X[31];let J=T,Q=ee?(0,_.dT)(ee.state):null,Z=e=>(t,n)=>{let r=J(t)??(Q?Y(Q):null);return!!n&&!!r&&r===e};N=(0,a.$)("Toolbar-module__container__vtz74",W&&"Toolbar-module__leftAligned__Tj6qC"),c=s.E,j="Formatting tools",S="Toolbar-module__actionBar__z29Us",M="none",d=I.P,X[32]!==en||X[33]!==ee?(f={view:ee,selectedNodes:en},X[32]=en,X[33]=ee,X[34]=f):f=X[34],p=er,X[35]!==er?(m=!!er&&(0,r.jsx)(s.E.Divider,{}),X[35]=er,X[36]=m):m=X[36],X[37]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(E,{"aria-label":"Bold",icon:l.BoldIcon,command:y.lM,telemetryId:"bold",matchingNodeFilter:L}),b=(0,r.jsx)(E,{"aria-label":"Italic",icon:l.ItalicIcon,command:y.Kp,telemetryId:"italic",matchingNodeFilter:P}),v=(0,r.jsx)(E,{"aria-label":"Link",icon:l.LinkIcon,command:y.gk,telemetryId:"link",matchingNodeFilter:A}),x=(0,r.jsx)(E,{"aria-label":"Code",icon:l.CodeIcon,command:y.SF,telemetryId:"inline_code",matchingNodeFilter:O}),w=(0,r.jsx)(E,{"aria-label":"Quote",icon:l.QuoteIcon,command:y.bF,telemetryId:"blockquote",matchingNodeFilter:B}),X[37]=g,X[38]=b,X[39]=v,X[40]=x,X[41]=w):(g=X[37],b=X[38],v=X[39],x=X[40],w=X[41]),n=s.E.Group,X[42]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)(s.E.Divider,{}),X[42]=H):H=X[42],X[43]===Symbol.for("react.memo_cache_sentinel")?(R=e=>"list"===e.type&&!e.ordered&&!K(e),X[43]=R):R=X[43],q=(0,r.jsx)(E,{"aria-label":"Unordered list",icon:l.ListUnorderedIcon,command:y.KB,telemetryId:"unordered_list",matchingNodeFilter:R,resolveIsPressed:Z("unordered")}),X[44]===Symbol.for("react.memo_cache_sentinel")?(F=e=>"list"===e.type&&!!e.ordered&&!K(e),X[44]=F):F=X[44],U=(0,r.jsx)(E,{"aria-label":"Ordered list",icon:l.ListOrderedIcon,command:y.xn,telemetryId:"ordered_list",matchingNodeFilter:F,resolveIsPressed:Z("ordered")}),t=E,u="Task list",C=l.TasklistIcon,$=y.Dc,D="task_list",X[45]===Symbol.for("react.memo_cache_sentinel")?(z=e=>G(e),X[45]=z):z=X[45],V=Z("task"),X[0]=er,X[1]=en,X[2]=ee,X[3]=t,X[4]=n,X[5]=d,X[6]=c,X[7]=u,X[8]=f,X[9]=p,X[10]=m,X[11]=g,X[12]=b,X[13]=v,X[14]=x,X[15]=w,X[16]=j,X[17]=S,X[18]=C,X[19]=M,X[20]=N,X[21]=$,X[22]=D,X[23]=z,X[24]=V,X[25]=H,X[26]=q,X[27]=U}else t=X[3],n=X[4],d=X[5],c=X[6],u=X[7],f=X[8],p=X[9],m=X[10],g=X[11],b=X[12],v=X[13],x=X[14],w=X[15],j=X[16],S=X[17],C=X[18],M=X[19],N=X[20],$=X[21],D=X[22],z=X[23],V=X[24],H=X[25],q=X[26],U=X[27];return X[46]!==t||X[47]!==u||X[48]!==C||X[49]!==$||X[50]!==D||X[51]!==z||X[52]!==V?(W=(0,r.jsx)(t,{"aria-label":u,icon:C,command:$,telemetryId:D,matchingNodeFilter:z,resolveIsPressed:V}),X[46]=t,X[47]=u,X[48]=C,X[49]=$,X[50]=D,X[51]=z,X[52]=V,X[53]=W):W=X[53],X[54]!==n||X[55]!==W||X[56]!==H||X[57]!==q||X[58]!==U?(G=(0,r.jsxs)(n,{children:[H,q,U,W]}),X[54]=n,X[55]=W,X[56]=H,X[57]=q,X[58]=U,X[59]=G):G=X[59],X[60]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)(s.E.Divider,{}),X[60]=K):K=X[60],X[61]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,r.jsxs)(s.E.Group,{children:[(0,r.jsx)(E,{"aria-label":"Code block",icon:l.CodeSquareIcon,command:h,telemetryId:"code_block",matchingNodeFilter:R}),(0,r.jsx)(T,{}),(0,r.jsx)(E,{"aria-label":"Strikethrough",icon:l.StrikethroughIcon,command:y.VA,telemetryId:"strikethrough",matchingNodeFilter:F})]}),X[61]=Y):Y=X[61],X[62]!==d||X[63]!==et||X[64]!==f||X[65]!==p||X[66]!==m||X[67]!==g||X[68]!==b||X[69]!==v||X[70]!==x||X[71]!==w||X[72]!==G?(J=(0,r.jsxs)(d,{value:f,children:[p,m,g,b,v,x,w,G,K,et,Y]}),X[62]=d,X[63]=et,X[64]=f,X[65]=p,X[66]=m,X[67]=g,X[68]=b,X[69]=v,X[70]=x,X[71]=w,X[72]=G,X[73]=J):J=X[73],X[74]!==c||X[75]!==j||X[76]!==S||X[77]!==M||X[78]!==J?(Q=(0,r.jsx)(c,{"aria-label":j,className:S,gap:M,children:J}),X[74]=c,X[75]=j,X[76]=S,X[77]=M,X[78]=J,X[79]=Q):Q=X[79],X[80]!==N||X[81]!==Q?(Z=(0,r.jsx)("div",{className:N,children:Q}),X[80]=N,X[81]=Q,X[82]=Z):Z=X[82],Z};function L(e){return"strong"===e.type}function P(e){return"emphasis"===e.type}function A(e){return"link"===e.type&&(0,g.A)(e)}function O(e){return"inlineCode"===e.type}function B(e){return"blockquote"===e.type}function R(e){return"code"===e.type}function F(e){return"delete"===e.type}N.displayName="Toolbar",N.displayName="HybridMarkdownEditor.Toolbar"},67283(e,t,n){n.d(t,{P:()=>r});let r=(0,n(96540).createContext)({view:null,selectedNodes:[]});r.displayName="ToolbarContext"},12702(e,t,n){function r(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}n.d(t,{XT:()=>i,c5:()=>r,gU:()=>l});let i=()=>(...e)=>new Set(e);function o(e){return e.endsWith("/")?e.slice(0,e.length-1):e}function l(e){try{let t=new URL(e);return o(t.href).trim()===o(e).trim()}catch{return!1}}},7282(e,t,n){n.d(t,{Sv:()=>o,pF:()=>l});var r=n(50467);class i{advance(e){this.pos+=e}readInt(e){let t=(()=>{switch(e){case 1:return this.dataview.getUint8(this.pos);case 2:return this.dataview.getUint16(this.pos);case 4:return this.dataview.getUint32(this.pos);default:throw Error("bytes parameter must be 1, 2 or 4")}})();return this.advance(e),t}readChar(){return this.readInt(1)}readShort(){return this.readInt(2)}readLong(){return this.readInt(4)}readString(e){let t=new Uint8Array(this.dataview.buffer,this.pos,e);return this.advance(e),new TextDecoder("ascii").decode(t)}scan(e){let t=[137,80,78,71,13,10,26,10];for(let e=0;e<t.length;e++)if(this.dataview.getUint8(this.pos+e)!==t[e])throw Error("Invalid PNG file: header signature mismatch");for(this.advance(8);this.pos<this.dataview.byteLength;){let t=this.readLong(),n=this.readString(4),r=this.pos+t+4;if(!1===e.call(this,n,t)||"IEND"===n)break;this.pos=r}}constructor(e){(0,r._)(this,"dataview",void 0),(0,r._)(this,"pos",void 0),this.dataview=new DataView(e),this.pos=0}}let o=144,l=async e=>{let t,n,r=await new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(r.error),r.readAsArrayBuffer(e)});return r?(t=new i(r),n={width:0,height:0,pixelsPerInch:72},t.scan(function(e){switch(e){case"IHDR":n.width=this.readLong(),n.height=this.readLong();break;case"pHYs":{let e=this.readLong(),t=this.readLong();return 1===this.readChar()&&(n.pixelsPerInch=Math.round((e+t)/2*.0254)),!1}case"IDAT":return!1}return!0}),n):null}},38776(e,t,n){n.d(t,{f:()=>i});var r=n(96540);let i=e=>{let[t,n]=(0,r.useState)(null),i=(0,r.useMemo)(()=>e.map(({trigger:e})=>e),[e]);return{triggers:i,suggestions:(0,r.useMemo)(()=>{if(!t)return null;for(let{trigger:n,suggestionsCalculator:r}of e)if(t.trigger.triggerChar===n.triggerChar)return r(t.query);return null},[t,e]),setSuggestionEvent:n,active:!!t}}},24666(e,t,n){n.d(t,{A:()=>a});var r=n(74848),i=n(16522),o=n(94709),l=n(34164);let s=e=>{let t,n,s,a,d,c,u,f,p,m,h,g,_,y=(0,i.c)(27);y[0]!==e?({children:t,disabled:s,required:d,visuallyHidden:f,sx:c,as:u,className:n,...a}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=s,y[4]=a,y[5]=d,y[6]=c,y[7]=u,y[8]=f):(t=y[1],n=y[2],s=y[3],a=y[4],d=y[5],c=y[6],u=y[7],f=y[8]);let k=void 0===u?"label":u,b=s?"fg.muted":"fg.default",v=s?"not-allowed":"pointer";return y[9]!==c||y[10]!==b||y[11]!==v?(p={color:b,cursor:v,...c},y[9]=c,y[10]=b,y[11]=v,y[12]=p):p=y[12],y[13]!==n||y[14]!==f?(m=f?(0,l.$)("sr-only",n):n,y[13]=n,y[14]=f,y[15]=m):m=y[15],y[16]!==m?(h=(0,l.$)(m,"InputLabel-module__Text__pL1lZ"),y[16]=m,y[17]=h):h=y[17],y[18]!==t||y[19]!==d?(g=d?(0,r.jsxs)("span",{className:"InputLabel-module__Box__KLaaz",children:[(0,r.jsx)("div",{className:"InputLabel-module__Box_1__gBFnM",children:t}),(0,r.jsx)("span",{children:"*"})]}):t,y[18]=t,y[19]=d,y[20]=g):g=y[20],y[21]!==a||y[22]!==k||y[23]!==p||y[24]!==h||y[25]!==g?(_=(0,r.jsx)(o.EY,{as:k,sx:p,className:h,...a,children:g}),y[21]=a,y[22]=k,y[23]=p,y[24]=h,y[25]=g,y[26]=_):_=y[26],_};s.displayName="InputLabel";let a=s},39641(e,t,n){n.d(t,{Z:()=>a});var r=n(74848),i=n(16522),o=n(4925),l=n(79759),s=n(13108);let a=e=>{let t,n,a,d=(0,i.c)(8),{children:c,feedbackUrl:u,className:f}=e,p=void 0===c?"Private preview":c;return d[0]!==p?(t=(0,r.jsx)(o.A,{variant:"secondary",children:p}),d[0]=p,d[1]=t):t=d[1],d[2]!==u?(n=u?(0,r.jsx)(l.A,{feedbackUrl:u}):void 0,d[2]=u,d[3]=n):n=d[3],d[4]!==f||d[5]!==t||d[6]!==n?(a=(0,r.jsx)(s.V,{className:f,label:t,link:n}),d[4]=f,d[5]=t,d[6]=n,d[7]=a):a=d[7],a};a.displayName="AlphaLabel"},79759(e,t,n){n.d(t,{A:()=>l});var r=n(74848),i=n(16522),o=n(83223);let l=e=>{let t,n=(0,i.c)(2),{feedbackUrl:l}=e;return n[0]!==l?(t=(0,r.jsx)(o.A,{className:"FeedbackLink-module__link__agJbw",href:l,inline:!0,children:"Give feedback"}),n[0]=l,n[1]=t):t=n[1],t};l.displayName="FeedbackLink"},13108(e,t,n){n.d(t,{V:()=>l});var r=n(74848),i=n(16522),o=n(46251);let l=e=>{let t,n=(0,i.c)(9),{label:l,link:s,className:a}=e;if(s){let e;return n[0]!==a||n[1]!==l||n[2]!==s?(e=(0,r.jsxs)(o.B,{direction:"horizontal",gap:"condensed",align:"baseline",className:a,children:[l," ",s]}),n[0]=a,n[1]=l,n[2]=s,n[3]=e):e=n[3],e}if(a){let e;return n[4]!==a||n[5]!==l?(e=(0,r.jsx)("span",{className:a,children:l}),n[4]=a,n[5]=l,n[6]=e):e=n[6],e}return n[7]!==l?(t=(0,r.jsx)(r.Fragment,{children:l}),n[7]=l,n[8]=t):t=n[8],t};l.displayName="LabelWithLink"},4627(e,t,n){n.d(t,{m:()=>g});var r=n(74848),i=n(16522),o=n(24043),l=n(38621),s=n(89823),a=n(34164);let d="segmented-control-module__segmentedControl__Lzsee",c="segmented-control-module__active__Ed6rO",u=e=>{let t,n,u,f,p,m,h,g,_,y,k,b,v,x=(0,i.c)(34),{selectedView:w,onViewSelect:I,onLoadPreview:j,disabled:S}=e;x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("markdown_experience_hybrid_editor"),x[0]=t):t=x[0];let T=t,E="edit"===w&&c;x[1]!==E?(n=(0,a.$)(d,E),x[1]=E,x[2]=n):n=x[2];let C="edit"===w;x[3]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(l.CodeIcon,{}),x[3]=u):u=x[3],x[4]!==I?(f=()=>I?.("edit"),x[4]=I,x[5]=f):f=x[5],x[6]!==S||x[7]!==n||x[8]!==C||x[9]!==f?(p=(0,r.jsx)(s.I.IconButton,{className:n,selected:C,value:"edit","aria-label":"Edit mode",disabled:S,icon:u,onClick:f}),x[6]=S,x[7]=n,x[8]=C,x[9]=f,x[10]=p):p=x[10];let M="preview"===w&&c;x[11]!==M?(m=(0,a.$)(d,M),x[11]=M,x[12]=m):m=x[12];let N="preview"===w;return x[13]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)(l.EyeIcon,{}),x[13]=h):h=x[13],x[14]!==I?(g=()=>I?.("preview"),x[14]=I,x[15]=g):g=x[15],x[16]!==j?(_=()=>j?.(),y=()=>j?.(),x[16]=j,x[17]=_,x[18]=y):(_=x[17],y=x[18]),x[19]!==S||x[20]!==N||x[21]!==g||x[22]!==_||x[23]!==y||x[24]!==m?(k=(0,r.jsx)(s.I.IconButton,{className:m,selected:N,value:"preview","aria-label":"Preview mode",disabled:S,icon:h,onClick:g,onMouseOver:_,onFocus:y}),x[19]=S,x[20]=N,x[21]=g,x[22]=_,x[23]=y,x[24]=m,x[25]=k):k=x[25],x[26]!==S||x[27]!==I||x[28]!==w?(b=T&&(0,r.jsx)(s.I.IconButton,{className:(0,a.$)(d,"hybrid"===w&&c),value:"hybrid",selected:"hybrid"===w,"aria-label":"Hybrid mode",disabled:S,icon:(0,r.jsx)(l.ComposeIcon,{}),onClick:()=>I?.("hybrid")}),x[26]=S,x[27]=I,x[28]=w,x[29]=b):b=x[29],x[30]!==k||x[31]!==b||x[32]!==p?(v=(0,r.jsx)("nav",{children:(0,r.jsxs)(s.I,{"aria-label":"View mode",children:[p,k,b]})}),x[30]=k,x[31]=b,x[32]=p,x[33]=v):v=x[33],v};u.displayName="SegmentedControlViewSwitch";var f=n(16969);let p="tab-nav-module__tabNavLink__UAgdT",m="tab-nav-module__active__RvwQ0",h=e=>{let t,n,l,s,d,c,u,h,g,_,y,k=(0,i.c)(32),{selectedView:b,onViewSelect:v,onLoadPreview:x,disabled:w}=e;k[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("markdown_experience_hybrid_editor"),k[0]=t):t=k[0];let I=t,j="edit"===b,S="edit"===b&&m;k[1]!==S?(n=(0,a.$)(p,S),k[1]=S,k[2]=n):n=k[2],k[3]!==v?(l=()=>v?.("edit"),k[3]=v,k[4]=l):l=k[4],k[5]!==w||k[6]!==j||k[7]!==n||k[8]!==l?(s=(0,r.jsx)(f.A.Link,{as:"button",selected:j,disabled:w,className:n,onClick:l,children:"Write"}),k[5]=w,k[6]=j,k[7]=n,k[8]=l,k[9]=s):s=k[9];let T="preview"===b,E="preview"===b&&m;return k[10]!==E?(d=(0,a.$)(p,E),k[10]=E,k[11]=d):d=k[11],k[12]!==v?(c=()=>v?.("preview"),k[12]=v,k[13]=c):c=k[13],k[14]!==x?(u=()=>x?.(),h=()=>x?.(),k[14]=x,k[15]=u,k[16]=h):(u=k[15],h=k[16]),k[17]!==w||k[18]!==c||k[19]!==u||k[20]!==h||k[21]!==T||k[22]!==d?(g=(0,r.jsx)(f.A.Link,{as:"button",selected:T,disabled:w,className:d,onClick:c,onMouseOver:u,onFocus:h,children:"Preview"}),k[17]=w,k[18]=c,k[19]=u,k[20]=h,k[21]=T,k[22]=d,k[23]=g):g=k[23],k[24]!==w||k[25]!==v||k[26]!==b?(_=I&&(0,r.jsx)(f.A.Link,{as:"button",selected:"hybrid"===b,disabled:w,className:(0,a.$)(p,"hybrid"===b&&m),onClick:()=>v?.("hybrid"),children:"Hybrid"}),k[24]=w,k[25]=v,k[26]=b,k[27]=_):_=k[27],k[28]!==g||k[29]!==_||k[30]!==s?(y=(0,r.jsx)("div",{className:"tab-nav-module__viewSwitch__dgik8",children:(0,r.jsxs)(f.A,{"aria-label":"View mode",children:[s,g,_]})}),k[28]=g,k[29]=_,k[30]=s,k[31]=y):y=k[31],y};h.displayName="TabNavViewSwitch";let g=e=>{let t,n=(0,i.c)(2);return n[0]!==e?(t=(0,o.G7)("markdown_experience_toolbar_redesign")?(0,r.jsx)(u,{...e}):(0,r.jsx)(h,{...e}),n[0]=e,n[1]=t):t=n[1],t};g.displayName="ViewSwitch"},51757(e,t,n){n.d(t,{F:()=>s});var r=n(74848),i=n(16522),o=n(41431),l=n(43715);let s=(0,n(96540).memo)(e=>{let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,r.jsx)(o.l,{hideTitle:!0,variant:"critical",layout:"compact",title:"Error",description:(0,r.jsx)(l.o,{children:s}),flush:!0,className:"ErrorBanner-module__errorBanner__MU0m1"}),n[0]=s,n[1]=t):t=n[1],t});s.displayName="ErrorBanner",s.displayName="MarkdownEditor.ErrorBanner"},48195(e,t,n){n.d(t,{n:()=>eS,v:()=>eb});var r=n(74848),i=n(16522),o=n(21373),l=n(96540);let s=(0,l.createContext)({disabled:!1,required:!1,formattingToolsRef:{current:null},uploadButtonProps:null,fileDraggedOver:!1,previewMode:!1});s.displayName="MarkdownEditorContext";let a=e=>{let t,n=(0,i.c)(2),{children:o}=e;return n[0]!==o?(t=(0,r.jsx)(r.Fragment,{children:o}),n[0]=o,n[1]=t):t=n[1],t};a.displayName="Actions",a.displayName="MarkdownEditor.Actions";let d=e=>{let t,n,a,d=(0,i.c)(7);d[0]!==e?({ref:n,...t}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]);let{disabled:c}=(0,l.use)(s);return d[3]!==c||d[4]!==t||d[5]!==n?(a=(0,r.jsx)(o.Q,{disabled:c,...t,ref:n}),d[3]=c,d[4]=t,d[5]=n,d[6]=a):a=d[6],a};d.displayName="ActionButton",d.displayName="MarkdownEditor.ActionButton";var c=n(51757),u=n(38621),f=n(57919);let p=e=>{let t,n,o,l,s,a,d=(0,i.c)(11),{children:c}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={footerButtons:h},d[0]=t):t=d[0];let[u,p]=(0,f.H)(c,t);return d[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(g,{}),d[1]=n):n=d[1],d[2]!==u.footerButtons?(o=u.footerButtons&&(0,r.jsx)("div",{className:"Footer-module__footerButtonWrapper__eCAAR",children:u.footerButtons}),d[2]=u.footerButtons,d[3]=o):o=d[3],d[4]!==o?(l=(0,r.jsxs)("div",{className:"Footer-module__footerWrapper__c_dJ5",children:[n,o]}),d[4]=o,d[5]=l):l=d[5],d[6]!==p?(s=(0,r.jsx)("div",{className:"Footer-module__childrenStyling__XjmP5",children:p}),d[6]=p,d[7]=s):s=d[7],d[8]!==l||d[9]!==s?(a=(0,r.jsxs)("div",{className:"Footer-module__footer__asFN1","data-testid":"markdown-editor-footer",children:[l,s]}),d[8]=l,d[9]=s,d[10]=a):a=d[10],a};p.displayName="CoreFooter";let m=e=>{let t,n=(0,i.c)(2),{children:o}=e;return n[0]!==o?(t=(0,r.jsx)(p,{children:o}),n[0]=o,n[1]=t):t=n[1],t};m.displayName="Footer",m.displayName="MarkdownEditor.Footer";let h=e=>{let t,n,a,d=(0,i.c)(7);d[0]!==e?({ref:n,...t}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]);let{disabled:c}=(0,l.use)(s);return d[3]!==c||d[4]!==t||d[5]!==n?(a=(0,r.jsx)(o.Q,{size:"small",disabled:c,...t,ref:n}),d[3]=c,d[4]=t,d[5]=n,d[6]=a):a=d[6],a};h.displayName="FooterButton",h.displayName="MarkdownEditor.FooterButton";let g=(0,l.memo)(()=>{let e,t=(0,i.c)(3),{uploadButtonProps:n,fileDraggedOver:o}=(0,l.use)(s);return t[0]!==o||t[1]!==n?(e=n?(0,r.jsx)(_,{fileDraggedOver:o,...n}):null,t[0]=o,t[1]=n,t[2]=e):e=t[2],e});g.displayName="MarkdownEditor.DefaultFooterButtons";let _=(0,l.memo)(e=>{let t,n,a,d,c,f=(0,i.c)(12);f[0]!==e?({fileDraggedOver:t,...n}=e,f[0]=e,f[1]=t,f[2]=n):(t=f[1],n=f[2]);let{disabled:p,fileUploadProgress:m}=(0,l.use)(s),h=m?.[0],g=m?.[1],_=!!g,k=1===g?"Uploading your file...":`Uploading your files... (${h}/${g})`,b=_?k:void 0;f[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("span",{className:"Footer-module__condensed__folfD",children:"Add Files"}),f[3]=a):a=f[3];let v=t?"Drop to add files":"Paste, drop, or click to add files";return f[4]!==v?(d=(0,r.jsx)("span",{className:"Footer-module__spacious__WjZMh",children:v}),f[4]=v,f[5]=d):d=f[5],f[6]!==p||f[7]!==_||f[8]!==n||f[9]!==b||f[10]!==d?(c=(0,r.jsxs)(o.Q,{variant:"invisible",loadingAnnouncement:b,leadingVisual:u.PaperclipIcon,loading:_,size:"small",className:"Footer-module__footerButton__Ed6Et",onMouseDown:y,disabled:p,...n,children:[a,d]}),f[6]=p,f[7]=_,f[8]=n,f[9]=b,f[10]=d,f[11]=c):c=f[11],c});function y(e){e.preventDefault()}_.displayName="MarkdownEditor.FileUploadButton";var k=n(24666);let b=e=>{let t,n,o=(0,i.c)(6);o[0]!==e?({...t}=e,o[0]=e,o[1]=t):t=o[1];let{disabled:a,required:d}=(0,l.use)(s);return o[2]!==a||o[3]!==t||o[4]!==d?(n=(0,r.jsx)(k.A,{as:"legend",disabled:a,required:d,className:"Label-module__inputLabel__A_BlL",...t}),o[2]=a,o[3]=t,o[4]=d,o[5]=n):n=o[5],n};b.displayName="MarkdownEditor.Label";let v=e=>{let t,n=(0,i.c)(2);return n[0]!==e?(t=(0,r.jsx)(b,{...e}),n[0]=e,n[1]=t):t=n[1],t};v.displayName="Label";var x=n(24043),w=n(97664),I=n(94583),j=n(4627),S=n(15924),T=n(71313),E=n(47935),C=n(34164);let M=e=>(0,I.BI)("markdown_editor.format",{tool:e}),N=({ref:e,forInputId:t})=>{(0,l.useEffect)(()=>{n.e("46740").then(n.bind(n,524))},[]);let i=(0,l.useRef)(null),o=(0,l.useRef)(null),s=(0,l.useRef)(null),a=(0,l.useRef)(null),d=(0,l.useRef)(null),c=(0,l.useRef)(null),u=(0,l.useRef)(null),f=(0,l.useRef)(null),p=(0,l.useRef)(null),m=(0,l.useRef)(null),h=(0,l.useRef)(null);return(0,l.useImperativeHandle)(e,()=>({header:()=>{i.current?.click(),M("header")},bold:()=>{o.current?.click(),M("bold")},italic:()=>{s.current?.click(),M("italic")},quote:()=>{a.current?.click(),M("quote")},code:()=>{d.current?.click(),M("code")},link:()=>{c.current?.click(),M("link")},unorderedList:()=>{u.current?.click(),M("unorderedList")},orderedList:()=>{f.current?.click(),M("orderedList")},taskList:()=>{p.current?.click(),M("taskList")},mention:()=>{m.current?.click(),M("mention")},reference:()=>{h.current?.click(),M("reference")}})),(0,r.jsxs)("markdown-toolbar",{for:t,style:{display:"none"},children:[(0,r.jsx)("md-header",{ref:i}),(0,r.jsx)("md-bold",{ref:o}),(0,r.jsx)("md-italic",{ref:s}),(0,r.jsx)("md-quote",{ref:a}),(0,r.jsx)("md-code",{ref:d}),(0,r.jsx)("md-link",{ref:c}),(0,r.jsx)("md-unordered-list",{ref:u}),(0,r.jsx)("md-ordered-list",{ref:f}),(0,r.jsx)("md-task-list",{ref:p}),(0,r.jsx)("md-mention",{ref:m}),(0,r.jsx)("md-ref",{ref:h})]})};N.displayName="FormattingTools",N.displayName="MarkdownEditor.FormattingTools";let L="MarkdownEditor-module__fullHeight__T1Qnv";n(90204);var P=n(71215),A=n(97376),O=n(38776),B=n(11211),R=n(21513),F=n(65820),$=n(86276),D=n(68692),z=n(19775),V=n(93100);let H=[],q=e=>{let t,n,o,s,a,d,c,u,f,p,m,h,g,_,y,k,b,v,x,w,j,S,T,E,M,N,L,q,U,W,G,K,Y,J,Q,Z,X,ee,et,en,er,ei=(0,i.c)(90);ei[0]!==e?({ref:a,value:T,onChange:k,onInput:b,disabled:n,placeholder:w,id:u,maxLength:h,onKeyDown:v,fullHeight:d,isDraggedOver:f,emojiSuggestions:o,emojiTone:s,mentionSuggestions:g,referenceSuggestions:S,labelledBy:p,minHeightLines:_,maxHeightLines:m,visible:E,monospace:y,pasteUrlsAsPlainText:x,className:t,generatingText:c,...j}=e,ei[0]=e,ei[1]=t,ei[2]=n,ei[3]=o,ei[4]=s,ei[5]=a,ei[6]=d,ei[7]=c,ei[8]=u,ei[9]=f,ei[10]=p,ei[11]=m,ei[12]=h,ei[13]=g,ei[14]=_,ei[15]=y,ei[16]=k,ei[17]=b,ei[18]=v,ei[19]=x,ei[20]=w,ei[21]=j,ei[22]=S,ei[23]=T,ei[24]=E):(t=ei[1],n=ei[2],o=ei[3],s=ei[4],a=ei[5],d=ei[6],c=ei[7],u=ei[8],f=ei[9],p=ei[10],m=ei[11],h=ei[12],g=ei[13],_=ei[14],y=ei[15],k=ei[16],b=ei[17],v=ei[18],x=ei[19],w=ei[20],j=ei[21],S=ei[22],T=ei[23],E=ei[24]),ei[25]!==s?(M={tone:s},ei[25]=s,ei[26]=M):M=ei[26];let eo=M,{trigger:el,calculateSuggestions:es}=(0,D.xf)(o??H,eo),{trigger:ea,calculateSuggestions:ed}=(0,z.P)(g??H),{trigger:ec,calculateSuggestions:eu}=(0,V.k)(S??H);ei[27]!==es||ei[28]!==el?(N={trigger:el,suggestionsCalculator:es},ei[27]=es,ei[28]=el,ei[29]=N):N=ei[29],ei[30]!==ed||ei[31]!==ea?(L={trigger:ea,suggestionsCalculator:ed},ei[30]=ed,ei[31]=ea,ei[32]=L):L=ei[32],ei[33]!==eu||ei[34]!==ec?(q={trigger:ec,suggestionsCalculator:eu},ei[33]=eu,ei[34]=ec,ei[35]=q):q=ei[35],ei[36]!==N||ei[37]!==L||ei[38]!==q?(U=[N,L,q],ei[36]=N,ei[37]=L,ei[38]=q,ei[39]=U):U=ei[39];let ef=U,{triggers:ep,suggestions:em,setSuggestionEvent:eh}=(0,O.f)(ef),eg=(0,l.useRef)(null);(0,R.T)(a,eg),ei[40]!==x?(W=()=>{let e=eg.current&&(0,P.B1)(eg.current,{defaultPlainTextPaste:{urlLinks:x}});return e?.unsubscribe},G=[x],ei[40]=x,ei[41]=W,ei[42]=G):(W=ei[41],G=ei[42]),(0,l.useEffect)(W,G);let e_=d||!E;ei[43]!==m||ei[44]!==_||ei[45]!==e_||ei[46]!==T?(K={disabled:e_,maxHeightLines:m,minHeightLines:_,elementRef:eg,value:T},ei[43]=m,ei[44]=_,ei[45]=e_,ei[46]=T,ei[47]=K):K=ei[47];let ey=(0,B.S)(K);ei[48]!==T?(Y=()=>{eg.current&&(eg.current.value=T)},ei[48]=T,ei[49]=Y):Y=ei[49],(0,l.useEffect)(Y),ei[50]!==eh||ei[51]!==em?(J=e=>{em||(0,I.BI)("markdown_editor.show_autocomplete_suggestions",{trigger:e.trigger.triggerChar}),eh(e)},ei[50]=eh,ei[51]=em,ei[52]=J):J=ei[52],ei[53]!==eh?(Q=()=>eh(null),ei[53]=eh,ei[54]=Q):Q=ei[54],ei[55]===Symbol.for("react.memo_cache_sentinel")?(Z={flex:"auto"},ei[55]=Z):Z=ei[55];let ek=p?void 0:"Markdown value",eb=!E&&"MarkdownInput-module__displayNone__oUOgp",ev=d&&"MarkdownInput-module__fullHeight__KfVmr",ex=y&&"MarkdownInput-module__monospace__aaio3",ew=f&&"MarkdownInput-module__isDraggedOver__cCoL3",eI=c&&"MarkdownInput-module__generatingText__ANoXn";return ei[56]!==t||ei[57]!==eb||ei[58]!==ev||ei[59]!==ex||ei[60]!==ew||ei[61]!==eI?(X=(0,C.$)(t,"MarkdownInput-module__textArea__BRDa8",eb,ev,ex,ew,eI),ei[56]=t,ei[57]=eb,ei[58]=ev,ei[59]=ex,ei[60]=ew,ei[61]=eI,ei[62]=X):X=ei[62],ei[63]!==n||ei[64]!==ey||ei[65]!==u||ei[66]!==p||ei[67]!==h||ei[68]!==_||ei[69]!==k||ei[70]!==b||ei[71]!==v||ei[72]!==w||ei[73]!==j||ei[74]!==ek||ei[75]!==X||ei[76]!==T?(ee=(0,r.jsx)(F.Ay,{id:u,ref:eg,placeholder:w,maxLength:h,onKeyDown:v,disabled:n,"aria-label":ek,"aria-labelledby":p,onChange:k,onInput:b,value:T,className:X,rows:_,style:ey,...j}),ei[63]=n,ei[64]=ey,ei[65]=u,ei[66]=p,ei[67]=h,ei[68]=_,ei[69]=k,ei[70]=b,ei[71]=v,ei[72]=w,ei[73]=j,ei[74]=ek,ei[75]=X,ei[76]=T,ei[77]=ee):ee=ei[77],ei[78]!==em||ei[79]!==J||ei[80]!==Q||ei[81]!==ee||ei[82]!==ep?(et=(0,r.jsx)(A.a,{triggers:ep,suggestions:em,onShowSuggestions:J,onHideSuggestions:Q,style:Z,tabInsertsSuggestions:!0,children:ee}),ei[78]=em,ei[79]=J,ei[80]=Q,ei[81]=ee,ei[82]=ep,ei[83]=et):et=ei[83],ei[84]!==c||ei[85]!==E?(en=c&&E&&(0,r.jsx)("div",{className:"MarkdownInput-module__skeletonOverlay__nvq3q",children:(0,r.jsx)($.r,{lines:5,"aria-label":"Generating text"})}),ei[84]=c,ei[85]=E,ei[86]=en):en=ei[86],ei[87]!==et||ei[88]!==en?(er=(0,r.jsxs)("div",{className:"MarkdownInput-module__inputWrapper__vOI3M",children:[et,en]}),ei[87]=et,ei[88]=en,ei[89]=er):er=ei[89],er};q.displayName="MarkdownInput",q.displayName="MarkdownInput";var U=n(70730),W=n(93607),G=n(26108);let K=(0,l.createContext)(null);K.displayName="SavedRepliesContext";let Y=()=>{let e,t,n,o,s,a,d=(0,i.c)(18),c=(0,l.use)(K),[u,f]=(0,l.useState)(!1),[p,m]=(0,l.useState)("");d[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>({openMenu:()=>{f(!0)}}),d[0]=e):e=d[0],(0,l.useImperativeHandle)(c?.ref,e),d[1]!==c?.savedReplies||d[2]!==p?(t=c?.savedReplies.filter(e=>{let{name:t}=e;return t.toLowerCase().includes(p.toLowerCase())}).map(J),d[1]=c?.savedReplies,d[2]=p,d[3]=t):t=d[3];let h=t;d[4]!==c?(n=e=>{f(!1);let t=c?.savedReplies.find(t=>{let{name:n}=t;return n===e?.text});t&&c?.onSelect(t)},d[4]=c,d[5]=n):n=d[5];let g=n;d[6]!==h||d[7]!==g?(o=e=>{let t=parseInt(e.key,10);h&&e.ctrlKey&&!Number.isNaN(t)&&t>=1&&t<=9&&(e.stopPropagation(),e.preventDefault(),g(h[t-1]))},d[6]=h,d[7]=g,d[8]=o):o=d[8];let _=o;d[9]!==c?(s=e=>{f(e),e?((0,I.BI)("markdown_editor.open_saved_replies"),c?.onOpen()):m("")},d[9]=c,d[10]=s):s=d[10];let y=s;return d[11]!==p||d[12]!==h||d[13]!==_||d[14]!==y||d[15]!==g||d[16]!==u?(a=h?(0,r.jsx)(W.X,{renderAnchor:Q,open:u,onOpenChange:y,items:h,filterValue:p,onFilterChange:m,placeholderText:"Search saved replies",selected:void 0,onSelectedChange:e=>{g(Array.isArray(e)?e[0]:e)},overlayProps:{width:"small",maxHeight:"small",anchorSide:"outside-right",onKeyDown:_},secondaryAction:(0,r.jsx)(W.X.SecondaryActionLink,{href:`${U.fV.origin}/settings/replies`,children:"Create new"})}):(0,r.jsx)(r.Fragment,{}),d[11]=p,d[12]=h,d[13]=_,d[14]=y,d[15]=g,d[16]=u,d[17]=a):a=d[17],a};function J(e,t){return{id:t,text:e.name,description:e.content,descriptionVariant:"block",trailingVisual:t<9?`Ctrl + ${t+1}`:void 0,className:"SavedReplies-module__SavedReplies__yokyN"}}function Q(e){return(0,r.jsx)(G.K,{...e,variant:"invisible",icon:u.ReplyIcon,"aria-label":"Saved replies"})}Y.displayName="SavedRepliesButton";var Z=n(91432);let X=e=>{let t,n,o,a=(0,i.c)(7);a[0]!==e?({ref:n,...t}=e,a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]);let{disabled:d}=(0,l.use)(s);return a[3]!==d||a[4]!==t||a[5]!==n?(o=(0,r.jsx)(Z.E.IconButton,{ref:n,variant:"invisible",disabled:d,onMouseDown:ee,...t,className:"ToolbarButton-module__iconButton__WwwAY"}),a[3]=d,a[4]=t,a[5]=n,a[6]=o):o=a[6],o};function ee(e){return e.preventDefault()}X.displayName="ToolbarButton",X.displayName="MarkdownEditor.ToolbarButton";let et=(0,l.memo)(()=>{let e,t,n,o,a,d,c,f,p,m,h,g,_,y,k,b,v=(0,i.c)(40),{formattingToolsRef:x}=(0,l.use)(s);return v[0]!==x?(e=(0,r.jsx)(X,{onClick:()=>x.current?.header(),icon:u.HeadingIcon,"aria-label":"Heading"}),v[0]=x,v[1]=e):e=v[1],v[2]!==x?(t=(0,r.jsx)(X,{onClick:()=>x.current?.bold(),icon:u.BoldIcon,"aria-label":"Bold"}),v[2]=x,v[3]=t):t=v[3],v[4]!==x?(n=(0,r.jsx)(X,{onClick:()=>x.current?.italic(),icon:u.ItalicIcon,"aria-label":"Italic"}),v[4]=x,v[5]=n):n=v[5],v[6]!==x?(o=(0,r.jsx)(X,{onClick:()=>x.current?.quote(),icon:u.QuoteIcon,"aria-label":"Quote"}),v[6]=x,v[7]=o):o=v[7],v[8]!==x?(a=(0,r.jsx)(X,{onClick:()=>x.current?.code(),icon:u.CodeIcon,"aria-label":"Code"}),v[8]=x,v[9]=a):a=v[9],v[10]!==x?(d=(0,r.jsx)(X,{onClick:()=>x.current?.link(),icon:u.LinkIcon,"aria-label":"Link"}),v[10]=x,v[11]=d):d=v[11],v[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(Z.E.Divider,{}),v[12]=c):c=v[12],v[13]!==x?(f=(0,r.jsx)(X,{onClick:()=>x.current?.unorderedList(),icon:u.ListUnorderedIcon,"aria-label":"Unordered list"}),v[13]=x,v[14]=f):f=v[14],v[15]!==x?(p=(0,r.jsx)(X,{onClick:()=>x.current?.orderedList(),icon:u.ListOrderedIcon,"aria-label":"Numbered list"}),v[15]=x,v[16]=p):p=v[16],v[17]!==x?(m=(0,r.jsx)(X,{onClick:()=>x.current?.taskList(),icon:u.TasklistIcon,"aria-label":"Task list"}),v[17]=x,v[18]=m):m=v[18],v[19]!==f||v[20]!==p||v[21]!==m?(h=(0,r.jsxs)(Z.E.Group,{children:[c,f,p,m]}),v[19]=f,v[20]=p,v[21]=m,v[22]=h):h=v[22],v[23]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(Z.E.Divider,{}),v[23]=g):g=v[23],v[24]!==x?(_=(0,r.jsx)(X,{onClick:()=>x.current?.mention(),icon:u.MentionIcon,"aria-label":"Mention"}),v[24]=x,v[25]=_):_=v[25],v[26]!==x?(y=(0,r.jsx)(X,{onClick:()=>x.current?.reference(),icon:u.CrossReferenceIcon,"aria-label":"Reference"}),v[26]=x,v[27]=y):y=v[27],v[28]!==_||v[29]!==y?(k=(0,r.jsxs)(Z.E.Group,{children:[g,_,y]}),v[28]=_,v[29]=y,v[30]=k):k=v[30],v[31]!==e||v[32]!==t||v[33]!==h||v[34]!==k||v[35]!==n||v[36]!==o||v[37]!==a||v[38]!==d?(b=(0,r.jsxs)(r.Fragment,{children:[e,t,n,o,a,d,h,k]}),v[31]=e,v[32]=t,v[33]=h,v[34]=k,v[35]=n,v[36]=o,v[37]=a,v[38]=d,v[39]=b):b=v[39],b});et.displayName="DefaultToolbarButtons",et.displayName="MarkdownEditor.DefaultToolbarButtons";let en=e=>{let t,n,o,l=(0,i.c)(5),{children:s}=e;return l[0]!==s?(t=(0,r.jsx)(Z.E,{"aria-label":"Formatting tools",className:"Toolbar-module__actionBar__fAYtR",gap:"none",children:s}),l[0]=s,l[1]=t):t=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(Y,{}),l[2]=n):n=l[2],l[3]!==t?(o=(0,r.jsxs)("div",{className:"Toolbar-module__toolbar__oK14P",children:[t,n]}),l[3]=t,l[4]=o):o=l[4],o};en.displayName="CoreToolbar";let er=e=>{let t,n=(0,i.c)(2),{children:o}=e;return n[0]!==o?(t=(0,r.jsx)(en,{children:o}),n[0]=o,n[1]=t):t=n[1],t};er.displayName="Toolbar",er.displayName="MarkdownEditor.Toolbar";var ei=n(14907);let eo=/^(?:\t| ? ?)(.*)/;var el=n(61405);function es(e){return e+1}var ea=n(1791);let ed="```suggestion",ec=RegExp(`${ed}(?:.*)
`,"i"),eu=RegExp("```(\n|$)");function ef(e,t,n=0){let r=t.substring(n,t.length),i=e.exec(r);return i?i.index+n:-1}var ep=n(12143),em=n(24535),eh=n(80179),eg=n(83223);let e_=e=>(0,ei.nf)(`Uploading "${e.name}"...`),ey=e=>{let t,n,o,l=(0,i.c)(6),{types:s}=e,a=s.size>1?"s":"";l[0]!==s?(t=[...s],l[0]=s,l[1]=t):t=l[1];let d=t.join(", ");return l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(eg.A,{inline:!0,href:"https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/attaching-files",children:"documentation"}),l[2]=n):n=l[2],l[3]!==a||l[4]!==d?(o=(0,r.jsxs)(r.Fragment,{children:["File type",a," ",d," not supported. See the"," ",n," ","for supported file types."]}),l[3]=a,l[4]=d,l[5]=o):o=l[5],o};ey.displayName="UnsupportedFilesErrorMessage";let ek=()=>{},eb=({emitChange:e,value:t,inputRef:n,disabled:i,onUploadFile:o,acceptedFileTypes:s,onFilesRejected:a})=>{let[d,c]=(0,l.useState)(void 0),u=(0,l.useRef)(!1);(0,l.useEffect)(()=>{if(d){u.current=!1;let e=setTimeout(()=>u.current=!0,1e3);return()=>clearTimeout(e)}},[d]),(0,l.useEffect)(()=>{u.current&&c(void 0)},[t]);let f=(0,ep.U)(e=>{let t=new Set(e.map(({name:e})=>{let t=e.split(".");return t.length>1?`.${t.at(-1)}`:""}).filter(e=>""!==e));t.size>0&&(c((0,r.jsx)(ey,{types:t})),a?.(e))}),[p,m]=(0,l.useState)(void 0),h=(0,ep.U)(()=>m(void 0)),g=(0,l.useCallback)(t=>{if(!n?.current)return;let r=function(e,t){if(0===t||"\n"===e[t-1]&&(1===t||"\n"===e[t-2]))return"";let n=e.lastIndexOf("\n",t-1);return/\S/.test(e.substring(n,t))?"\n\n":"\n"}(n.current.value,n.current.selectionStart),i=function(e,t){if(e.length===t||"\n"===e[t]&&(t===e.length-1||"\n"===e[t+1]))return"";let n=e.indexOf("\n",t);return/\S/.test(e.substring(t,n))?"\n\n":"\n"}(n.current.value,n.current.selectionEnd);e(`${r}${t.map(e_).join("\n")}${i}`)},[n,e]),_=(0,ep.U)(({file:t,url:r},i)=>{m(e=>e&&[e[0]+1,e[1]]),((t,r,i)=>{if(!n?.current)return;let o=e_(t),l=n.current.value.indexOf(o);-1!==l&&e(r?t.type.startsWith("video/")?r:t.type.startsWith("image/")&&!["image/bmp","image/tiff"].includes(t.type)?(0,ei.TG)(i||{width:0,height:0,ppi:1},r,"Image"):(0,ei.iQ)(t.name,r):(0,ei.nf)(`Failed to upload "${t.name}"`),[l,l+o.length])})(t,r,i)}),y=(0,l.useCallback)(e=>e.map(async e=>{let t={url:null,file:e},n=null;try{t=await o?.(e)??{file:e,url:null}}catch{t={file:e,url:null}}if(t.url)try{n=await (0,ei.pF)(e)}catch{n={width:0,height:0,ppi:1},(0,em.N7)("Failed to get image size from file",{message:"Failed to get image size from file",reactAppName:"markdown-editor"})}_(t,n)}),[o,_]),k=(0,l.useCallback)(async(e,t)=>{e.length>0&&(m([1,e.length]),g(e),await Promise.all(y(e)),h()),f(t)},[f,g,y,h]),b=(0,eh.wd)({acceptedFileTypes:s,multi:!0,onSelect:k});return i&&(b={clickTargetProps:{onClick:ek},dropTargetProps:{onDragEnter:ek,onDragLeave:ek,onDrop:ek,onDragOver:ek},pasteTargetProps:{onPaste:ek},isDraggedOver:!1}),o?{...b,errorMessage:d,uploadProgress:p}:null},ev=Symbol(),ex=[],ew=e=>{let t,n,o,a,d,u,p,m,h,g,_,y,k,b,v,w,M,P,A,O,B,R,F,$,D,z,V,H,U,W,G,Y,J,Q=(0,i.c)(139),{ref:Z,value:X,onInputFocus:ee,disabled:em,placeholder:eh,maxLength:eg,"aria-describedby":e_,labelledBy:ey,fullHeight:ek,onRenderPreview:ew,className:eI,onPrimaryAction:ej,viewMode:eS,onChangeViewMode:eT,minHeightLines:eE,maxHeightLines:eC,emojiSuggestions:eM,emojiTone:eN,mentionSuggestions:eL,referenceSuggestions:eP,monospace:eA,required:eO,name:eB,children:eR,savedReplies:eF,pasteUrlsAsPlainText:e$,teamHovercardsEnabled:eD,onSavedRepliesOpen:ez,banner:eV,containerRef:eH,onChange:eq,onUploadFile:eU,acceptedFileTypes:eW,onFilesRejected:eG,footer:eK,generatingText:eY}=e,eJ=void 0!==em&&em,eQ=void 0===eE?5:eE,eZ=void 0===eC?35:eC,eX=void 0!==eA&&eA,e0=void 0!==eO&&eO,e1=void 0!==e$&&e$,e2=void 0!==eD&&eD,e3=void 0===ez?T.l:ez;Q[0]===Symbol.for("react.memo_cache_sentinel")?(t={toolbar:er},Q[0]=t):t=Q[0];let[e4]=(0,f.H)(eR,t),e5=(0,l.useId)(),e7=(0,x.G7)("mardown_editor_use_on_input");Q[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.G7)("markdown_experience_hybrid_editor"),Q[1]=n):n=Q[1];let e6=n;Q[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,x.G7)("markdown_experience_toolbar_redesign"),Q[2]=o):o=Q[2];let e8=o,{inputRef:e9,inputKey:te,reset:tt,emitChange:tn,onInputChange:tr}=function(e){let t,n,r,o,s=(0,i.c)(11),a=(0,l.useRef)(null),[d,c]=(0,l.useState)(1);s[0]!==e?(t=t=>{e(t.target.value)},s[0]=e,s[1]=t):t=s[1];let u=t;s[2]!==e?(n=()=>{e(""),c(es)},s[2]=e,s[3]=n):n=s[3];let f=n;s[4]!==u?(r={inputRef:a,fallbackEventHandler:u},s[4]=u,s[5]=r):r=s[5];let p=(0,el.H)(r);return s[6]!==p||s[7]!==d||s[8]!==u||s[9]!==f?(o={inputRef:a,inputKey:d,onInputChange:u,reset:f,emitChange:p},s[6]=p,s[7]=d,s[8]=u,s[9]=f,s[10]=o):o=s[10],o}(eq),{html:ti,loadPreview:to,previewStale:tl}=function(e,t){let n,r,o,s,a=(0,i.c)(10),[d,c]=(0,l.useState)(null),u=(0,ep.U)(c),f=(0,l.useRef)(!0);a[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{f.current=!0},a[0]=n):n=a[0],a[1]!==e?(r=[e],a[1]=e,a[2]=r):r=a[2],(0,l.useEffect)(n,r),a[3]!==t||a[4]!==u||a[5]!==e?(o=async()=>{f.current&&(f.current=!1,u(null),u(await t(e)))},a[3]=t,a[4]=u,a[5]=e,a[6]=o):o=a[6];let p=o;return a[7]!==d||a[8]!==p?(s={html:d,setHtml:c,loadPreview:p,previewStale:f},a[7]=d,a[8]=p,a[9]=s):s=a[9],s}(X,ew);Q[3]!==to||Q[4]!==tl||Q[5]!==eS?(a=()=>{"preview"===eS&&tl.current&&to()},Q[3]=to,Q[4]=tl,Q[5]=eS,Q[6]=a):a=Q[6],(0,l.useEffect)(a);let[ts,ta]=(0,l.useState)(0);Q[7]!==e9||Q[8]!==eS?(d=()=>{let e=e9.current;if(!e||"edit"!==eS)return;ta(e.offsetHeight);let t=new ResizeObserver(e=>{let[t]=e;t&&ta(t.contentRect.height)});return t.observe(e),()=>t.disconnect()},u=[e9,eS],Q[7]=e9,Q[8]=eS,Q[9]=d,Q[10]=u):(d=Q[9],u=Q[10]),(0,l.useLayoutEffect)(d,u),Q[11]!==eH||Q[12]!==e9||Q[13]!==tt?(p=()=>({focus:e=>e9.current?.focus(e),moveCursorToEnd:()=>{if(e9.current){let e=e9.current.value.length;e9.current.setSelectionRange(e,e)}},scrollIntoView:e=>eH.current?.scrollIntoView(e),reset:()=>tt(),inputRef:e9,[ev]:void 0}),m=[eH,e9,tt],Q[11]=eH,Q[12]=e9,Q[13]=tt,Q[14]=p,Q[15]=m):(p=Q[14],m=Q[15]),(0,l.useImperativeHandle)(Z,p,m),Q[16]!==eG?(h=e=>{let t=[];for(let n of e){let e=n.name.includes(".")?`.${n.name.split(".").pop()}`:"no-extension";(0,I.BI)("markdown_editor.file_upload.rejected_file_type",{rejected_file_type:e,mime_type:n.type||"unknown"}),t.push(e)}eG?.(e,t)},Q[16]=eG,Q[17]=h):h=Q[17];let td=h;Q[18]!==eW||Q[19]!==eJ||Q[20]!==tn||Q[21]!==td||Q[22]!==e9||Q[23]!==eU||Q[24]!==X?(g={emitChange:tn,value:X,inputRef:e9,disabled:eJ,onUploadFile:eU,acceptedFileTypes:eW,onFilesRejected:td},Q[18]=eW,Q[19]=eJ,Q[20]=tn,Q[21]=td,Q[22]=e9,Q[23]=eU,Q[24]=X,Q[25]=g):g=Q[25];let tc=eb(g),tu=tc?.uploadProgress!==void 0;Q[26]!==tn?(_={emitChange:tn},Q[26]=tn,Q[27]=_):_=Q[27];let tf=(0,ea.KI)(_);Q[28]!==tn?(y={emitChange:tn},Q[28]=tn,Q[29]=y):y=Q[29];let tp=(e=>{let t,n,r=(0,i.c)(4),{emitChange:o}=e;r[0]!==o?(t=e=>{let t=e.currentTarget;if(e.defaultPrevented||"Tab"!==e.key||t.selectionEnd-t.selectionStart==0)return;e.preventDefault();let[n,r]=(0,ei.ty)(t),i=t.value.slice(n,r).split(/\r?\n/).map(t=>e.shiftKey?eo.exec(t)?.[1]??"":`  ${t}`).join("\n");o(i,[n,r],[n,n+i.length])},r[0]=o,r[1]=t):t=r[1];let l=t;return r[2]!==l?(n={onKeyDown:l},r[2]=l,r[3]=n):n=r[3],n})(y);Q[30]!==tn?(k={emitChange:tn},Q[30]=tn,Q[31]=k):k=Q[31];let tm=(e=>{let t,n,r=(0,i.c)(4),{emitChange:o}=e;r[0]!==o?(t=e=>{if("Enter"===e.key){let t=e.currentTarget,n=t.selectionStart;if(n!==t.selectionEnd)return;let{output:r,newCursorIndex:i}=function(e){var t;let n,r,i=e.selectionStart;if(!function(e,t){let n=[],r=0,i=-1;for(;(i=ef(ec,e,r))>-1;){let t=ef(eu,e,r=i+ed.length);if(-1===t)return!1;r=t+3,n.push([i,t])}return n.some(e=>t>e[0]&&t<e[1])}(e.value,i))return{output:"",newCursorIndex:0};let o=(t=e.value,n=t.slice(0,i).split("\n"),t.split("\n")[n.length-1]);if(null===o)return{output:"",newCursorIndex:0};let l=(r=/^(\s+)/.exec(o))&&r[0]||"",s=`
${l}`,a=i+s.length;return{output:s,newCursorIndex:a}}(t);""!==r&&(e.preventDefault(),o(r,[n,n],[i,i]))}},r[0]=o,r[1]=t):t=r[1];let l=t;return r[2]!==l?(n={onKeyDown:l},r[2]=l,r[3]=n):n=r[3],n})(k),th=(0,l.useRef)(null);Q[32]!==tn||Q[33]!==e3||Q[34]!==eF?(b=eF?{savedReplies:eF,onSelect:e=>{requestAnimationFrame(()=>tn(e.content))},onOpen:e3,ref:th}:null,Q[32]=tn,Q[33]=e3,Q[34]=eF,Q[35]=b):b=Q[35];let tg=b;Q[36]!==eJ||Q[37]!==tp||Q[38]!==tu||Q[39]!==tf||Q[40]!==eT||Q[41]!==ej||Q[42]!==tm?(v=e=>{let t=tk.current;if(!eJ)if(e.ctrlKey&&"."===e.key)th.current?.openMenu(),e.preventDefault(),e.stopPropagation();else if((0,ei.VL)(e)){if("Enter"!==e.key||tu)if("b"===e.key)t?.bold();else if("i"===e.key)t?.italic();else if(e.shiftKey&&"."===e.key)t?.quote();else if("e"===e.key)t?.code();else if("k"===e.key)t?.link();else if("8"===e.key)t?.unorderedList();else if(e.shiftKey&&"7"===e.key)t?.orderedList();else if(e.shiftKey&&["l","L"].includes(e.key))t?.taskList();else{if(!(e.shiftKey&&["p","P"].includes(e.key)))return;eT?.("preview")}else ej?.();e.preventDefault(),e.stopPropagation()}else tf.onKeyDown(e),tp.onKeyDown(e),tm.onKeyDown(e)},Q[36]=eJ,Q[37]=tp,Q[38]=tu,Q[39]=tf,Q[40]=eT,Q[41]=ej,Q[42]=tm,Q[43]=v):v=Q[43];let t_=(0,E._)(v),ty=(0,l.useRef)(eT);Q[44]!==eT?(w=()=>{ty.current=eT},Q[44]=eT,Q[45]=w):w=Q[45],(0,l.useEffect)(w),Q[46]!==e5||Q[47]!==e9||Q[48]!==eS?(M=()=>{if("preview"===eS){ex.push(e5);let e=e=>{!e.defaultPrevented&&ex.at(-1)===e5&&(0,ei.VL)(e)&&e.shiftKey&&"p"===e.key&&(ty.current?.("edit"),setTimeout(()=>e9.current?.focus()),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),ex=ex.filter(e=>e!==e5)}}},P=[eS,e5,e9],Q[46]=e5,Q[47]=e9,Q[48]=eS,Q[49]=M,Q[50]=P):(M=Q[49],P=Q[50]),(0,l.useEffect)(M,P);let tk=(0,l.useRef)(null);Q[51]!==eJ||Q[52]!==tc?.clickTargetProps||Q[53]!==tc?.errorMessage||Q[54]!==tc?.isDraggedOver||Q[55]!==tc?.uploadProgress||Q[56]!==e0||Q[57]!==eS?(tc?.isDraggedOver,tc?.uploadProgress,tc?.clickTargetProps,tc?.errorMessage,A={disabled:eJ,formattingToolsRef:tk,required:e0,fileDraggedOver:tc?.isDraggedOver??!1,fileUploadProgress:tc?.uploadProgress,uploadButtonProps:tc?.clickTargetProps??null,errorMessage:tc?.errorMessage,previewMode:"preview"===eS},Q[51]=eJ,Q[52]=tc?.clickTargetProps,Q[53]=tc?.errorMessage,Q[54]=tc?.isDraggedOver,Q[55]=tc?.uploadProgress,Q[56]=e0,Q[57]=eS,Q[58]=A):A=Q[58];let tb=A;Q[59]!==eT||Q[60]!==eS?(O=e=>{(0,I.BI)("markdown_editor.select_view",{mode:e,from_mode:eS,trigger:"view_switcher",did_change:eS!==e,feature_flag_markdown_experience_hybrid_editor:e6}),eT?.(e)},Q[59]=eT,Q[60]=eS,Q[61]=O):O=Q[61];let tv=O,tx=tc?.uploadProgress!==void 0;Q[62]!==to||Q[63]!==tv||Q[64]!==tx||Q[65]!==eS?(B=(0,r.jsx)(j.m,{selectedView:eS,onViewSelect:tv,disabled:tx,onLoadPreview:to}),Q[62]=to,Q[63]=tv,Q[64]=tx,Q[65]=eS,Q[66]=B):B=Q[66];let tw=B;Q[67]!==e5?(R=(0,r.jsx)(N,{ref:tk,forInputId:e5}),Q[67]=e5,Q[68]=R):R=Q[68];let tI="edit"===eS?"MarkdownEditor-module__inputWrapper__i5oSw":"MarkdownEditor-module__previewWrapper__fZJq2",tj=eJ&&"MarkdownEditor-module__disabled__SE09o",tS=ek&&L;Q[69]!==eI||Q[70]!==tI||Q[71]!==tj||Q[72]!==tS?(F=(0,C.$)(eI,tI,tj,tS),Q[69]=eI,Q[70]=tI,Q[71]=tj,Q[72]=tS,Q[73]=F):F=Q[73],Q[74]!==tw?($=!e8&&(0,r.jsx)("div",{className:"MarkdownEditor-module__viewSwitchWrapper__dWHx1",children:tw}),Q[74]=tw,Q[75]=$):$=Q[75],Q[76]!==e4||Q[77]!==eS?(D="edit"===eS?e4.toolbar??(0,r.jsx)(en,{children:(0,r.jsx)(et,{})}):(0,r.jsx)("div",{style:{flex:1}}),Q[76]=e4,Q[77]=eS,Q[78]=D):D=Q[78],Q[79]!==tg||Q[80]!==D?(z=(0,r.jsx)(K,{value:tg,children:D}),Q[79]=tg,Q[80]=D,Q[81]=z):z=Q[81],Q[82]!==tw?(V=e8&&(0,r.jsx)("div",{className:"MarkdownEditor-module__redesignedViewSwitchWrapper__ZaudR",children:tw}),Q[82]=tw,Q[83]=V):V=Q[83],Q[84]!==$||Q[85]!==z||Q[86]!==V?(H=(0,r.jsxs)("div",{className:"MarkdownEditor-module__header__h_RoA",children:[$,z,V]}),Q[84]=$,Q[85]=z,Q[86]=V,Q[87]=H):H=Q[87];let tT=e7?void 0:tr,tE=e7?tr:void 0,tC=tc?.isDraggedOver??!1,tM="edit"===eS,tN=tc?.pasteTargetProps,tL=tc?.dropTargetProps;return Q[88]!==e_||Q[89]!==eJ||Q[90]!==eM||Q[91]!==eN||Q[92]!==ek||Q[93]!==eY||Q[94]!==e5||Q[95]!==t_||Q[96]!==te||Q[97]!==e9||Q[98]!==ey||Q[99]!==eZ||Q[100]!==eg||Q[101]!==eL||Q[102]!==eQ||Q[103]!==eX||Q[104]!==eB||Q[105]!==ee||Q[106]!==e1||Q[107]!==eh||Q[108]!==eP||Q[109]!==e0||Q[110]!==tT||Q[111]!==tE||Q[112]!==tC||Q[113]!==tM||Q[114]!==tN||Q[115]!==tL||Q[116]!==X?(U=(0,r.jsx)(q,{value:X,onChange:tT,onInput:tE,onFocus:ee,emojiSuggestions:eM,emojiTone:eN,mentionSuggestions:eL,referenceSuggestions:eP,disabled:eJ,placeholder:eh,labelledBy:ey,"aria-describedby":e_,id:e5,maxLength:eg,ref:e9,fullHeight:ek,isDraggedOver:tC,minHeightLines:eQ,maxHeightLines:eZ,visible:tM,monospace:eX,required:e0,name:eB,pasteUrlsAsPlainText:e1,generatingText:eY,...t_,...tN,...tL},te),Q[88]=e_,Q[89]=eJ,Q[90]=eM,Q[91]=eN,Q[92]=ek,Q[93]=eY,Q[94]=e5,Q[95]=t_,Q[96]=te,Q[97]=e9,Q[98]=ey,Q[99]=eZ,Q[100]=eg,Q[101]=eL,Q[102]=eQ,Q[103]=eX,Q[104]=eB,Q[105]=ee,Q[106]=e1,Q[107]=eh,Q[108]=eP,Q[109]=e0,Q[110]=tT,Q[111]=tE,Q[112]=tC,Q[113]=tM,Q[114]=tN,Q[115]=tL,Q[116]=X,Q[117]=U):U=Q[117],Q[118]!==eV||Q[119]!==tc||Q[120]!==eS?(W="edit"===eS&&tc?.errorMessage?(0,r.jsx)(c.F,{children:tc.errorMessage}):eV,Q[118]=eV,Q[119]=tc,Q[120]=eS,Q[121]=W):W=Q[121],Q[122]!==ek||Q[123]!==ti||Q[124]!==ts||Q[125]!==e2||Q[126]!==eS?(G="preview"===eS&&(0,r.jsxs)("div",{"aria-live":"polite",tabIndex:-1,className:(0,C.$)("MarkdownEditor-module__previewViewerWrapper__M5C8O",ek&&L),style:{minHeight:ts},children:[(0,r.jsx)("h2",{className:"MarkdownEditor-module__previewHeader__CZcUw",children:"Rendered Markdown Preview"}),(0,r.jsx)(S.G,{verifiedHTML:ti||"Nothing to preview",loading:null===ti,teamHovercardsEnabled:e2,openLinksInNewTab:!0})]}),Q[122]=ek,Q[123]=ti,Q[124]=ts,Q[125]=e2,Q[126]=eS,Q[127]=G):G=Q[127],Q[128]!==F||Q[129]!==H||Q[130]!==U||Q[131]!==W||Q[132]!==G?(Y=(0,r.jsxs)("div",{className:F,children:[H,U,W,G]}),Q[128]=F,Q[129]=H,Q[130]=U,Q[131]=W,Q[132]=G,Q[133]=Y):Y=Q[133],Q[134]!==tb||Q[135]!==eK||Q[136]!==R||Q[137]!==Y?(J=(0,r.jsxs)(s,{value:tb,children:[R,Y,eK]}),Q[134]=tb,Q[135]=eK,Q[136]=R,Q[137]=Y,Q[138]=J):J=Q[138],J};ew.displayName="ClassicMarkdownEditor";let eI=({ref:e,hybridEditorProps:t,...n})=>{let{footer:i,banner:o,generatingText:a,...d}=n,c=(0,l.useMemo)(()=>({disabled:n.disabled??!1,required:n.required??!1,formattingToolsRef:{current:null},uploadButtonProps:null,fileDraggedOver:!1,previewMode:!1}),[n.disabled,n.required]),u=(0,l.useRef)(null);return(0,l.useImperativeHandle)(e,()=>({focus:()=>u.current?.focus(),moveCursorToEnd:()=>u.current?.moveCursorToEnd(),reset:()=>u.current?.reset(),scrollIntoView:e=>u.current?.scrollIntoView(e),get inputRef(){return u.current?.containerRef??{current:null}},[ev]:void 0})),(0,r.jsxs)(s,{value:c,children:[(0,r.jsx)(w.f,{ref:u,...d,...t,isGenerating:a,banner:o}),i]})};eI.displayName="HybridMarkdownEditorWithFooter";let ej=e=>{let t,n,o,s,d,c,u,h,g=(0,i.c)(21),{ref:_,...y}=e,{disabled:k,"aria-describedby":b,fullHeight:w,viewMode:j,onChangeViewMode:S,children:T}=y,E=void 0!==k&&k;g[0]===Symbol.for("react.memo_cache_sentinel")?(t={toolbar:er,actions:a,label:v,footer:m},g[0]=t):t=g[0];let[M,N]=(0,f.H)(T,t),[P,A]=(0,l.useState)("edit"),[O,B]=void 0===j?[P,A]:[j,S],R=(h=(0,x.G7)("markdown_experience_hybrid_editor"),"hybrid"===O&&h?"hybrid":"classic"),F=(0,l.useId)();g[1]!==M.actions||g[2]!==M.footer?(n=M.footer??(0,r.jsx)(p,{children:(0,l.isValidElement)(M.actions)&&M.actions.props.children}),g[1]=M.actions,g[2]=M.footer,g[3]=n):n=g[3];let $=n,D=b?`${F} ${b}`:F;g[4]!==$||g[5]!==D?(o={footer:$,"aria-describedby":D},g[4]=$,g[5]=D,g[6]=o):o=g[6];let z=o;(0,l.useEffect)(()=>(0,I.BI)("markdown_editor.mount",{editorType:R,feature_flag_markdown_experience_hybrid_editor:(0,x.G7)("markdown_experience_hybrid_editor")}),[R]);let V=(0,l.useRef)(null),H="hybrid"===R?(0,r.jsx)(eI,{...y,ref:_,onChangeViewMode:B,...z}):(0,r.jsx)(ew,{...y,viewMode:"hybrid"===O?"edit":O,onChangeViewMode:B,ref:_,containerRef:V,...z,children:M.toolbar}),q=(0,C.$)("MarkdownEditor-module__fieldSet__RU0NL",w&&L);g[7]!==N?(s=(0,r.jsx)("div",{className:"MarkdownEditor-module__hidden__dEmfv",children:N}),g[7]=N,g[8]=s):s=g[8];let U=`Markdown input: ${"hybrid"===O?"hybrid mode selected.":"preview"===O?" preview mode selected.":" edit mode selected."}`;return g[9]!==F||g[10]!==U?(d=(0,r.jsx)("span",{className:"sr-only",id:F,"aria-live":"polite",children:U}),g[9]=F,g[10]=U,g[11]=d):d=g[11],g[12]!==H||g[13]!==d?(c=(0,r.jsxs)("div",{ref:V,className:"MarkdownEditor-module__container__H4O8J",children:[d,H]}),g[12]=H,g[13]=d,g[14]=c):c=g[14],g[15]!==E||g[16]!==M.label||g[17]!==c||g[18]!==q||g[19]!==s?(u=(0,r.jsxs)("fieldset",{"aria-disabled":E,className:q,children:[s,M.label,c]}),g[15]=E,g[16]=M.label,g[17]=c,g[18]=q,g[19]=s,g[20]=u):u=g[20],u};ej.displayName="MarkdownEditor";let eS=Object.assign(ej,{Label:v,Toolbar:er,ToolbarButton:X,DefaultToolbarButtons:et,Footer:m,FooterButton:h,Actions:a,ActionButton:d,ErrorBanner:c.F,MarkdownEditorContext:s})},10912(e,t,n){n.d(t,{C:()=>i});var r=n(96247);let i=(e,t,n,i,o)=>l=>{if("loading"===e)return"loading";let s=l?e.map(e=>[t(l,e),e]).filter(([e])=>e>r.IP).sort(([e,t],[r,i])=>r===e?-n(i,t):r-e).slice(0,5).map(([,e])=>e):e.slice(0,5);return o&&s.sort(n),s.map(i)}},68692(e,t,n){n.d(t,{Ek:()=>d,Ph:()=>f,xf:()=>g});var r=n(74848),i=n(16522),o=n(90204),l=n(96247),s=n(18990),a=n(10912);function d(e){return"character"in e&&void 0!==e.character}let c=new Set(["+1","thumbsup","-1"]),u={triggerChar:":",keepTriggerCharOnCommit:!1},f=(e,t)=>void 0!==t?(0,r.jsx)("g-emoji",{alias:e.name,tone:t,"fallback-src":e.url,children:e.character}):e.character,p=e=>{let t,n,o,l=(0,i.c)(9),{emoji:a,tone:c}=e;return l[0]!==a||l[1]!==c?(t=d(a)?f(a,c):(0,r.jsx)("img",{src:a.url,alt:`${a.name} emoji`,height:"16",width:"16"}),l[0]=a,l[1]=c,l[2]=t):t=l[2],l[3]!==t?(n=(0,r.jsx)(s.l.LeadingVisual,{children:t}),l[3]=t,l[4]=n):n=l[4],l[5]!==a.name||l[6]!==e||l[7]!==n?(o=(0,r.jsxs)(s.l.Item,{...e,children:[n,a.name]}),l[5]=a.name,l[6]=e,l[7]=n,l[8]=o):o=l[8],o};p.displayName="RenderEmoji";let m=(e,t)=>{let n=t.name.toLowerCase(),r=e.toLowerCase(),i=0;return n.includes(r)&&(i+=5,n.startsWith(r)&&(i+=5)),0===i?l.IP:i},h=(e,t)=>{let n=e.name.toLowerCase(),r=t.name.toLowerCase();return c.has(n)&&!c.has(r)?-1:c.has(r)&&!c.has(n)?1:0},g=(e,t)=>{let n,r,l=(0,i.c)(5);if(t?.tone,l[0]!==e||l[1]!==t?.tone){let r;n=(0,a.C)(e,m,h,(r=t?.tone,e=>({value:d(e)?void 0!==r?(0,o.R3)(e.character,r):e.character:`:${e.name}:`,key:e.name,render:t=>p({...t,emoji:e,tone:r})})),!0),l[0]=e,l[1]=t?.tone,l[2]=n}else n=l[2];let s=n;return l[3]!==s?(r={calculateSuggestions:s,trigger:u},l[3]=s,l[4]=r):r=l[4],r}},19775(e,t,n){n.d(t,{P:()=>p});var r=n(74848),i=n(16522),o=n(96247),l=n(35592),s=n(18990),a=n(10912);let d={triggerChar:"@"},c=e=>({value:e.identifier,render:t=>(0,r.jsxs)(s.l.Item,{...t,children:[e.avatarUrl&&(0,r.jsx)(s.l.LeadingVisual,{children:(0,r.jsx)(l.r,{size:16,src:e.avatarUrl})}),(0,r.jsx)("span",{className:"use-mention-suggestions-module__identifierText__jkcWA",children:e.identifier})," ",(0,r.jsx)(s.l.Description,{truncate:!0,children:e.description})]})}),u=(e,t)=>{let n=Math.max((0,o.dt)(e,t.identifier),(0,o.dt)(e,t.description));return n===o.IP?n:n>0&&t.participant?o.M4:t.participant?n+o.Dx:n},f=(e,t)=>e.participant&&!t.participant?-1:t.participant&&!e.participant?1:e.identifier.localeCompare(t.identifier),p=e=>{let t,n,r=(0,i.c)(4);r[0]!==e?(t=(0,a.C)(e,u,f,c),r[0]=e,r[1]=t):t=r[1];let o=t;return r[2]!==o?(n={calculateSuggestions:o,trigger:d},r[2]=o,r[3]=n):n=r[3],n}},93100(e,t,n){n.d(t,{k:()=>p});var r=n(74848),i=n(16522),o=n(96247),l=n(47829),s=n(18990),a=n(10912);let d={triggerChar:"#",multiWord:!0},c=e=>({value:e.id,render:t=>(0,r.jsxs)(s.l.Item,{...t,children:[e.iconHtml&&(0,r.jsx)(s.l.LeadingVisual,{children:(0,r.jsx)(l.BC,{html:e.iconHtml})}),(0,r.jsx)("span",{className:"use-reference-suggestions-module__suggestionTitle__mdjWd",children:(0,r.jsx)(l.BC,{html:e.titleHtml})})," ",(0,r.jsxs)(s.l.Description,{truncate:!0,children:["#",e.id]})]})}),u=(e,t)=>(0,o.dt)(e,`${t.id} ${t.titleText}`),f=(e,t)=>0,p=e=>{let t,n,r=(0,i.c)(4);if(r[0]!==e){let n=(0,a.C)(e,u,f,c);t=e=>/^\d+\s/.test(e)?[]:n(e),r[0]=e,r[1]=t}else t=r[1];let o=t;return r[2]!==o?(n={calculateSuggestions:o,trigger:d},r[2]=o,r[3]=n):n=r[3],n}},1791(e,t,n){n.d(t,{KI:()=>d,VB:()=>s,a1:()=>a});var r=n(16522),i=n(14907);let o=/^(\s*(?:>\s*)*(?:[*-]\s{1,4})*)([*-]|(\d+)\.)(\s{1,4})(?:(\[[\sx]\])\s)?(.*)/i,l=e=>"number"==typeof e?.delimeter,s=e=>{let t=o.exec(e);if(!t)return null;let[,n="",r,i="",l,s=null,a]=t,d=Number.parseInt(i,10);return{leadingWhitespace:n,text:a,delimeter:Number.isNaN(d)?r:d,middleWhitespace:l,taskBox:s}},a=e=>"number"==typeof e.delimeter?`${e.leadingWhitespace}${e.delimeter}.${e.middleWhitespace}${e.taskBox?`${e.taskBox} `:""}${e.text}`:`${e.leadingWhitespace}${e.delimeter}${e.middleWhitespace}${e.taskBox||""} ${e.text}`,d=e=>{let t,n,o,a=(0,r.c)(7),{emitChange:d}=e;a[0]!==d?(t=(e,t)=>{let[n,r]=t||(0,i.ty)(e),o=s(e.value.slice(n,r));if(!l(o))return;let a=e.value.slice(r+1).split(/\r?\n/),u=[],f=o.delimeter;for(let e of a){let t=s(e);if(!l(t)||t.delimeter!==f)break;u.push(t),f++}if(0===u.length)return;let p=`
${u.map(c).join("\n")}`;d(p,[r,r+p.length+1],e.selectionStart)},a[0]=d,a[1]=t):t=a[1];let u=t;a[2]!==d||a[3]!==u?(n=e=>{if("Enter"===e.key&&!e.shiftKey&&!e.defaultPrevented){let t=e.currentTarget,[n,r]=(0,i.ty)(t),o=s(t.value.slice(n,t.selectionStart)+t.value.slice(t.selectionEnd,r));if(o)if(e.preventDefault(),t.selectionStart===n){let e=(({leadingWhitespace:e="",delimeter:t,taskBox:n})=>{let r="number"==typeof t?`${t}.`:t;return`${r}${e}${n?" [ ]":" "}
`})(o);null===e?d("",[n,t.selectionEnd]):(d(e),u(t,[n,n+e.length-1]))}else{let e=(({leadingWhitespace:e="",delimeter:t,taskBox:n,text:r})=>{if(!r)return null;let i="number"==typeof t?`${t+1}.`:t;return`
${e}${i}${n?" [ ]":""} `})(o);null===e?d("",[n,t.selectionEnd]):(d(e),u(t))}}},a[2]=d,a[3]=u,a[4]=n):n=a[4];let f=n;return a[5]!==f?(o={onKeyDown:f},a[5]=f,a[6]=o):o=a[6],o};function c(e){return a({...e,delimeter:e.delimeter+1})}},14907(e,t,n){n.d(t,{TG:()=>u,VL:()=>a,iQ:()=>s,nf:()=>l,pF:()=>d,ty:()=>o});var r=n(74631),i=n(7282);let o=e=>{let t=e.value.lastIndexOf("\n",e.selectionStart-1)+1,n=e.value.indexOf("\n",e.selectionEnd);return -1===n&&(n=e.value.length),[t,n]},l=e=>`<!-- ${e.replaceAll("--","\\-\\-")} -->`,s=(e,t)=>`[${e.replaceAll("[","\\[").replaceAll("]","\\]")}](${t.replaceAll("(","\\(").replaceAll(")","\\)")})`,a=e=>(0,r.U0)()?e.metaKey:e.ctrlKey,d=async e=>{let t=await (0,i.pF)(e);return t?{width:t.width,height:t.height,ppi:t.pixelsPerInch}:null},c=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),u=(e,t,n="Image")=>{let r=c(n),o=c(t);if(e.ppi===i.Sv){let t=Math.round(e.width/2),n=Math.round(e.height/2);return`<img width="${t}" height="${n}" alt="${r}" src="${o}" />`}return e&&e.width>0&&e.height>0?`<img width="${e.width}" height="${e.height}" alt="${r}" src="${o}" />`:`![${r}](${o})`}},15924(e,t,n){n.d(t,{G:()=>g});var r=n(74848),i=n(96540),o=n(21513),l=n(7478),s=n(29207),a=n(57695),d=n(1791),c=n(50463);let u=e=>{let t=e.match(/^ {0,3}(`{3,}|~{3,})[^`]*$/);return t?t[1]:null},f=(e,t)=>RegExp(`^ {0,3}${t}${t[0]}* *$`).test(e),p=e=>"string"==typeof e?.taskBox,m=e=>({...e,taskBox:"[ ]"===e.taskBox?"[x]":"[ ]"});var h=n(34164);function g({ref:e=null,verifiedHTML:t,loading:n=!1,markdownValue:g="",onChange:_,disabled:y=!1,onLinkClick:k,openLinksInNewTab:b=!1,teamHovercardsEnabled:v=!1,className:x}){let[w,I]=(0,i.useState)(null),j=(0,i.useRef)(null);(0,o.T)(e,j);let S=(0,i.useCallback)(e=>{j.current=e,I(e)},[]);return(({htmlContainer:e,markdownValue:t,onChange:n,disabled:r=!1,dependencies:o=[]})=>{let l=(0,i.useRef)(t);(0,c.A)(()=>{l.current=t},[t]);let s=(0,i.useCallback)(e=>()=>{let t=l.current.split(/\r?\n/),r=null;for(let i=0,o=0;i<t.length;i++){let s=t[i];if(r){if(f(s,r)){r=null;continue}}else r=u(s);if(r)continue;let a=(0,d.VB)(s);if(p(a)){if(o===e){let e=(0,d.a1)(m(a));t.splice(i,1,e);let r=t.join("\n");l.current=r,n(r);return}o++}}},[n]),[a,h]=(0,i.useState)([]);(0,i.useEffect)(()=>{h(Array.from(e?.querySelectorAll("input[type=checkbox].task-list-item-checkbox")??[]))},[e,...o]),(0,i.useEffect)(function(){let e=a.map(e=>{let t=e.disabled;return e.disabled=r,()=>{e.disabled=t}});return()=>{for(let t of e)t()}},[a,r]),(0,i.useEffect)(function(){let e=new AbortController;for(let[t,n]of a.entries()){let r=s(t);n.addEventListener("change",r,{signal:e.signal})}return()=>{e.abort()}},[a,s])})({onChange:(0,i.useCallback)(async e=>{try{await _?.(e)}catch{w&&(w.innerHTML=t)}},[_,w,t]),disabled:y||!_,htmlContainer:w??void 0,markdownValue:g,dependencies:[t]}),(0,a.O)({htmlContainer:w??void 0,onLinkClick:k,openLinksInNewTab:b}),(0,i.useMemo)(()=>n?(0,r.jsx)("div",{className:"MarkdownViewer-module__MarkdownViewerContainer__Bo4Rt",children:(0,r.jsx)(l.A,{"aria-label":"Loading content..."})}):(0,r.jsx)(s.vb,{ref:S,className:(0,h.$)("markdown-body",x),sx:x?{}:{fontSize:1,maxWidth:"100%","& > div > :last-child":{mb:0}},html:t,...v?{"data-team-hovercards-enabled":!0}:{}}),[x,n,v,t,S])}g.displayName="MarkdownViewer"},11211(e,t,n){n.d(t,{S:()=>o});var r=n(5847),i=n(96540);let o=({disabled:e,minHeightLines:t,maxHeightLines:n,elementRef:o,value:l})=>{let[s,a]=(0,i.useState)(void 0),[d]=(0,r.I)(()=>CSS.supports("field-sizing","content"),!0),c=(0,i.useCallback)(()=>{if(e)return;let t=o.current;if(!t||d||!l)return;let n=getComputedStyle(t);a(`calc(${t.scrollHeight}px - ${n.paddingTop} - ${n.paddingBottom})`)},[e,o,d,l]);return(0,i.useLayoutEffect)(c,[c]),(0,i.useEffect)(c,[]),{height:s,minHeight:t?`${t}lh`:void 0,maxHeight:n?`${n}lh`:void 0,boxSizing:"content-box",fieldSizing:"content",overflowWrap:"anywhere"}}},57695(e,t,n){n.d(t,{O:()=>o});var r=n(16522),i=n(96540);let o=e=>{let t,n,o=(0,r.c)(6),{htmlContainerRef:l,htmlContainer:s,onLinkClick:a,openLinksInNewTab:d}=e;o[0]!==s||o[1]!==l||o[2]!==a||o[3]!==d?(t=()=>{let e=l?.current||s;if(!e)return;let t=e=>{let t=e.target.closest("a");t&&(a?.(e),!e.defaultPrevented&&d&&t.href&&(window.open(t.href,"_blank","noopener noreferrer"),e.preventDefault()))};return e.addEventListener("click",t),()=>{e?.removeEventListener("click",t)}},n=[s,l,a,d],o[0]=s,o[1]=l,o[2]=a,o[3]=d,o[4]=t,o[5]=n):(t=o[4],n=o[5]),(0,i.useEffect)(t,n)}},12143(e,t,n){n.d(t,{U:()=>l,g:()=>o});var r=n(16522),i=n(96540);let o=Symbol("callbackCancelledResult"),l=(e,t)=>{let n,l,s,a,d,c=(0,r.c)(7),u=void 0!==t&&t,f=(0,i.useRef)(e);c[0]!==e?(n=()=>{f.current=e},l=[e],c[0]=e,c[1]=n,c[2]=l):(n=c[1],l=c[2]),(0,i.useLayoutEffect)(n,l);let p=(0,i.useRef)(!1);return c[3]!==u?(s=()=>(p.current=!0,()=>{u||(p.current=!1)}),a=[u],c[3]=u,c[4]=s,c[5]=a):(s=c[4],a=c[5]),(0,i.useEffect)(s,a),c[6]===Symbol.for("react.memo_cache_sentinel")?(d=(...e)=>p.current?f.current(...e):o,c[6]=d):d=c[6],d}},80179(e,t,n){n.d(t,{wd:()=>a});var r=n(16522),i=n(96540);let o=/^([^/]+)\/([^;]+)/,l=e=>{if(e.startsWith("."))return t=>t.name.toLowerCase().endsWith(e.toLowerCase());{let t=o.exec(e);if(null===t)return()=>!1;let[,n,r]=t;return e=>{let[,t,i]=o.exec(e.type)??[];return n?.toLowerCase()===t?.toLowerCase()&&("*"===r||r?.toLowerCase()===i?.toLowerCase())}}};function s(e){let t=(0,i.useMemo)(()=>e.acceptedFileTypes?.map(l),[e.acceptedFileTypes]),n=(0,i.useCallback)(e=>t?.some(t=>t(e))??!0,[t]);return(0,i.useCallback)(function(t){if(0===t.length)return!1;if(e.multi){let r=[],i=[];for(let e of t)n(e)?r.push(e):i.push(e);e.onSelect(r,i)}else{let r=t[0];r&&n(r)?e.onSelect(r,void 0):e.onSelect(void 0,r)}return!0},[n,e.multi,e.onSelect])}function a(e){var t;let n,o,l,a,u=(0,r.c)(5),f=function(e){let t,n,i=(0,r.c)(6),o=s(e),{multi:l,acceptedFileTypes:a}=e;i[0]!==a||i[1]!==l||i[2]!==o?(t=()=>{let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("multiple",l?"true":"false"),a&&e.setAttribute("accept",a.join(", ")),e.addEventListener("change",e=>{let t=e.target;t instanceof HTMLInputElement&&t.files&&o(t.files)},{once:!0}),e.click()},i[0]=a,i[1]=l,i[2]=o,i[3]=t):t=i[3];let d=t;return i[4]!==d?(n={onClick:d},i[4]=d,i[5]=n):n=i[5],n}(e),p=(t=e,o=(0,r.c)(2),l=s(t),o[0]!==l?(n={onPaste:e=>{l(e.clipboardData.files)&&e.preventDefault()}},o[0]=l,o[1]=n):n=o[1],n),[m,h]=function(e){let t,n,o,l,a,u=(0,r.c)(9),f=s(e),[p,m]=(0,i.useState)(!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>m(!1),u[0]=t):t=u[0];let h=t;u[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{d(e)&&(m(!0),e.stopPropagation(),e.preventDefault())},u[1]=n):n=u[1];let g=n;u[2]!==f?(o=e=>{f(e.dataTransfer.files)&&(e.preventDefault(),m(!1))},u[2]=f,u[3]=o):o=u[3];let _=o;u[4]!==_?(l={onDragEnter:g,onDragOver:c,onDragLeave:h,onDrop:_},u[4]=_,u[5]=l):l=u[5];let y=l;return u[6]!==y||u[7]!==p?(a=[p,y],u[6]=y,u[7]=p,u[8]=a):a=u[8],a}(e);return u[0]!==f||u[1]!==h||u[2]!==m||u[3]!==p?(a={clickTargetProps:f,pasteTargetProps:p,dropTargetProps:h,isDraggedOver:m},u[0]=f,u[1]=h,u[2]=m,u[3]=p,u[4]=a):a=u[4],a}let d=e=>e.dataTransfer.types.includes("Files")||Array.from(e.dataTransfer.items).some(e=>"file"===e.kind);function c(e){d(e)&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")}}}]);
//# sourceMappingURL=72308-0caf0a56b4aa0285-7efaf87ed4ecc851.js.map