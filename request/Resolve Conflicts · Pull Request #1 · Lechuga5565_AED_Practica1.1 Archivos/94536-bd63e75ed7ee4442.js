performance.mark("js-parse-end:94536-bd63e75ed7ee4442.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["94536"],{24824(e,t,i){i.d(t,{Z:()=>j});var l=i(74848),r=i(16522),s=i(86280),n=i(70730),a=i(96540),o=i(38621),d=i(26108),c=i(39081),u=i(64451),h=i(7624),f=i(85965),m=i(65820),b=i(21373);let p=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Comment is a duplicate of another comment",value:"DUPLICATE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],v=e=>{let t,i,s,n,o=(0,r.c)(16),{commentId:d,onClose:v,onSubmit:x,feedbackOptions:g,returnFocusRef:_}=e,N=void 0===g?p:g,[j,w]=(0,a.useState)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],o[0]=t):t=o[0];let[I,F]=(0,a.useState)(t),[O,k]=(0,a.useState)("");o[1]!==d||o[2]!==I||o[3]!==x||o[4]!==O?(i=e=>{e.preventDefault(),w(!0),I.length&&x({commentId:d,type:"NEGATIVE",feedbackChoice:I,textResponse:O})},o[1]=d,o[2]=I,o[3]=x,o[4]=O,o[5]=i):i=o[5];let C=i,S=(0,a.useId)(),y=j&&0===I.length;return o[6]!==N||o[7]!==C||o[8]!==y||o[9]!==O||o[10]!==S?(s=()=>(0,l.jsxs)("form",{onSubmit:C,children:[(0,l.jsxs)(c.l.Body,{children:[(0,l.jsx)("div",{className:"pr-mb-3",children:(0,l.jsxs)(u.A,{onChange:F,required:!0,children:[(0,l.jsx)(u.A.Label,{children:"Category"}),N.map(e=>(0,l.jsxs)(h.A,{id:`feedback_choice_${e.value}`,children:[(0,l.jsx)(f.A,{value:e.value,"aria-describedby":y?S:void 0}),(0,l.jsx)(h.A.Label,{children:e.label})]},e.value)),y&&(0,l.jsx)(u.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,l.jsxs)(h.A,{id:"text_response",children:[(0,l.jsx)(h.A.Label,{children:"How should we improve this response?"}),(0,l.jsx)(m.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:O,resize:"vertical",onChange:e=>k(e.currentTarget.value)})]})]}),(0,l.jsx)(c.l.Footer,{children:(0,l.jsx)(b.Q,{type:"submit",disabled:y,children:"Submit"})})]}),o[6]=N,o[7]=C,o[8]=y,o[9]=O,o[10]=S,o[11]=s):s=o[11],o[12]!==v||o[13]!==_||o[14]!==s?(n=(0,l.jsx)(c.l,{onClose:v,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:_,renderBody:s}),o[12]=v,o[13]=_,o[14]=s,o[15]=n):n=o[15],n};v.displayName="NegativeFeedbackForm";let x=e=>{let t,i,s=(0,r.c)(6),{onClick:n,commentId:a,disabled:c}=e;return s[0]!==a||s[1]!==n?(t=()=>n({type:"POSITIVE",commentId:a}),s[0]=a,s[1]=n,s[2]=t):t=s[2],s[3]!==c||s[4]!==t?(i=(0,l.jsx)(d.K,{size:"small",variant:"invisible",disabled:c,icon:o.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),s[3]=c,s[4]=t,s[5]=i):i=s[5],i};x.displayName="PositiveFeedbackButton";let g=e=>{let t,i,s,n,c,u=(0,r.c)(18),{onClick:h,commentId:f,disabled:m,feedbackOptions:b,showNegativeFeedbackModal:p}=e,x=void 0===p||p,[g,_]=(0,a.useState)(!1),N=(0,a.useRef)(null);u[0]!==h?(t=e=>{h(e),_(!1)},u[0]=h,u[1]=t):t=u[1];let j=t;u[2]!==f||u[3]!==h||u[4]!==x?(i=()=>{x?_(!0):h({type:"NEGATIVE",commentId:f})},u[2]=f,u[3]=h,u[4]=x,u[5]=i):i=u[5];let w=i;return u[6]!==f||u[7]!==g||u[8]!==b||u[9]!==j||u[10]!==x?(s=g&&x&&(0,l.jsx)(v,{onClose:()=>_(!1),onSubmit:j,commentId:f,feedbackOptions:b,returnFocusRef:N}),u[6]=f,u[7]=g,u[8]=b,u[9]=j,u[10]=x,u[11]=s):s=u[11],u[12]!==m||u[13]!==w?(n=(0,l.jsx)(d.K,{ref:N,size:"small",variant:"invisible",disabled:m,icon:o.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:w}),u[12]=m,u[13]=w,u[14]=n):n=u[14],u[15]!==s||u[16]!==n?(c=(0,l.jsxs)(l.Fragment,{children:[s,n]}),u[15]=s,u[16]=n,u[17]=c):c=u[17],c};g.displayName="NegativeFeedbackButton";var _=i(58388);let N=e=>{let t,i,s,o,d,c,u=(0,r.c)(21),{commentId:h,commentUrl:f,feedbackPath:m,feedbackOptions:b,additionalParameters:p,showNegativeFeedbackModal:v}=e,N=void 0===v||v,[j,w]=(0,a.useState)();e:{if(m){t=m;break e}if(f){let e;u[0]!==f?((e=new URL(f,n.fV.origin)).hash="",u[0]=f,u[1]=e):e=u[1],t=`${e}/code_review_feedback`;break e}throw Error("missing feedbackPath and commentUrl")}let I=t;u[2]!==p||u[3]!==I?(i={path:I,additionalParameters:p},u[2]=p,u[3]=I,u[4]=i):i=u[4];let F=(({path:e,additionalParameters:t})=>(0,a.useCallback)(({type:i,commentId:l,feedbackChoice:r,textResponse:s})=>{try{let n=new FormData;if(n.set("comment_id",l),n.set("feedback",i),t)for(let[e,i]of Object.entries(t))n.set(e,i);for(let e of r??[])n.append("feedback_choice[]",e);s&&n.set("text_response",s),(0,_.DI)(e,{method:"POST",body:n})}catch{}},[e,t]))(i);u[5]!==F?(s=e=>{w(e.type),F(e)},u[5]=F,u[6]=s):s=u[6];let O=s,k=`copilot-code-review-feedback-${h}`;return u[7]!==h||u[8]!==O||u[9]!==j?(o="NEGATIVE"!==j&&(0,l.jsx)(x,{disabled:!!j,commentId:h,onClick:O}),u[7]=h,u[8]=O,u[9]=j,u[10]=o):o=u[10],u[11]!==h||u[12]!==b||u[13]!==O||u[14]!==N||u[15]!==j?(d="POSITIVE"!==j&&(0,l.jsx)(g,{disabled:!!j,onClick:O,commentId:h,feedbackOptions:b,showNegativeFeedbackModal:N}),u[11]=h,u[12]=b,u[13]=O,u[14]=N,u[15]=j,u[16]=d):d=u[16],u[17]!==k||u[18]!==o||u[19]!==d?(c=(0,l.jsxs)("div",{"data-testid":k,className:"d-flex gap-1",children:[o,d]}),u[17]=k,u[18]=o,u[19]=d,u[20]=c):c=u[20],c};N.displayName="Feedback";let j=e=>{let t,i=(0,r.c)(2);return i[0]!==e?(t=(0,l.jsx)(s.t,{boundaryName:"CopilotCodeReviewFeedback",fallback:null,children:(0,l.jsx)(N,{...e})}),i[0]=e,i[1]=t):t=i[1],t};j.displayName="CopilotCodeReviewFeedback"},41757(e,t,i){i.d(t,{F7:()=>h,kF:()=>f});var l=i(74848),r=(i(16522),i(38621)),s=i(38750),n=i(67323),a=i(26108),o=(i(7478),i(18990)),d=i(7771),c=i(96540),u=i(34164);let h="No extension";function f({ref:e,filterSize:t="medium",filterText:i,onFilterTextChange:f,fileExtensions:m,unselectedFileExtensions:b,onFilterChange:p,onClearAllFilters:v,additionalFilterGroups:x,isFilteringActive:g}){m=m??{},b=b??new Set;let[_,N]=(0,c.useState)(i??""),j=(e,t)=>{p?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},w=Object.keys(m).filter(e=>e!==h).sort(),I=!!m[h];return(0,l.jsxs)("div",{id:"diff-file-tree-filter",className:"d-flex flex-nowrap gap-2",children:[(0,l.jsx)(s.A,{ref:e,block:!0,"aria-label":"Filter files\u2026",leadingVisual:r.SearchIcon,placeholder:"Filter files\u2026",size:t,className:(0,u.$)("small"===t&&"FileFilter-module__filterMaxHeight__Dwlbv"),value:_,onChange:e=>{N(e.target.value),f?.(e.target.value)}}),(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsxs)(n.W,{children:[(0,l.jsx)(n.W.Anchor,{children:(0,l.jsx)(a.K,{"aria-label":"Filter options",icon:r.FilterIcon,className:"flex-shrink-0",size:t})}),(0,l.jsx)(n.W.Overlay,{children:(0,l.jsxs)(o.l,{children:[(0,l.jsxs)(o.l.Group,{selectionVariant:"multiple",children:[(0,l.jsx)(o.l.GroupHeading,{children:"File extensions"}),w.map(e=>{let t=!b.has(e);return(0,l.jsxs)(o.l.Item,{selected:t,onSelect:()=>j(!t,e),children:[e,(0,l.jsx)(o.l.TrailingVisual,{children:(0,l.jsx)(d.A,{children:m[e]})})]},e)}),I&&(0,l.jsxs)(o.l.Item,{selected:!b.has(h),onSelect:()=>j(!!b.has(h),h),children:[h,(0,l.jsx)(o.l.TrailingVisual,{children:(0,l.jsx)(d.A,{children:m[h]})})]},h)]}),x,g&&v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.l.Divider,{}),(0,l.jsx)(o.l.Item,{onSelect:()=>{N(""),v?.()},children:(0,l.jsx)("span",{className:"FileFilter-module__clearFiltersText__VDuqu",children:"Clear filters"})})]})]})})]}),g&&(0,l.jsx)("span",{className:"FileFilter-module__filterIndicator__VAdlm"})]})]})}f.displayName="FileFilterShared"},97627(e,t,i){i.d(t,{QC:()=>m,s2:()=>b,wH:()=>a,xY:()=>f});var l=i(35750),r=i(18150),s=i(50467),n=i(41757);function a(e,t){return e.startsWith(t)&&e!==t?-1:t.startsWith(e)&&e!==t?1:e<t?-1:+(e>t)}function o(e,t){return a(e.name,t.name)}function d(e,t){return a(e.fileName,t.fileName)}class c{constructor(e,t){(0,s._)(this,"diff",void 0),(0,s._)(this,"filePath",void 0),(0,s._)(this,"fileName",void 0),(0,s._)(this,"directoryParts",void 0),(0,s._)(this,"sortOrder",void 0),this.diff=e,this.filePath=e.path;const i=this.filePath.split("/");this.fileName=i[i.length-1],this.directoryParts=i.slice(0,i.length-1),this.sortOrder=t}}var u=new WeakMap;class h{getOrCreateDirectory(e,t){let i=(0,l._)(this,u).get(e);if(!i){let r=this.path?`${this.path}/`:"";i=new h(e,`${r}${e}`,t),this.directories.push(i),(0,l._)(this,u).set(e,i)}return i}sort(){for(let e of(this.directories.sort(o),this.files.sort(d),this.directories))e.sort()}constructor(e,t,i){(0,s._)(this,"directories",[]),(0,s._)(this,"files",[]),(0,r._)(this,u,{writable:!0,value:new Map}),(0,s._)(this,"name",void 0),(0,s._)(this,"path",void 0),(0,s._)(this,"sortOrder",void 0),this.name=e,this.path=t,this.sortOrder=i}}function f(e){let t=new h("","",Number.MAX_SAFE_INTEGER);for(let i of e.map((e,t)=>new c(e,t))){let e=t;for(let t of i.directoryParts)(e=e.getOrCreateDirectory(t,i.sortOrder)).sortOrder=Math.min(e.sortOrder,i.sortOrder);e.files.push(i)}return function e(t){for(let i of t.directories)e(i);let i=t.directories.map(e=>e.sortOrder),l=t.files.map(e=>e.sortOrder);t.sortOrder=Math.min(t.sortOrder,...i,...l)}(t),t.sort(),t}function m(e){let t;t="string"==typeof e?e:e?.newPath||e?.oldPath;let i=t?.lastIndexOf(".");return t?!i||i<0?n.F7:`.${t.substring(i+1)}`:""}function b(e){let t={};return e.map(e=>{let i=m(e.path);void 0!==t[i]?t[i]+=1:t[i]=1}),t}},29604(e,t,i){i.d(t,{C0:()=>h,ID:()=>c,Qn:()=>f,aX:()=>o,bJ:()=>u,w$:()=>d});var l=i(16522),r=i(41626),s=i(97286),n=i(33751),a=i(84471);let o={splitPreference:"split",lineSpacing:"relaxed",commentsPreference:i(54395).sI.Visible};function d(){return[r.uT.diffViewUserSettings]}function c(e){let t,i,r,n=(0,l.c)(6);n[0]===Symbol.for("react.memo_cache_sentinel")?(t=d(),n[0]=t):t=n[0];let a=t;return n[1]!==e?(i=async()=>e||o,n[1]=e,n[2]=i):i=n[2],n[3]!==e||n[4]!==i?(r={queryKey:a,queryFn:i,initialData:e,staleTime:1/0},n[3]=e,n[4]=i,n[5]=r):r=n[5],(0,s.I)(r)}function u(e,t){let i=new URL(window.location.href,window.location.origin);if(t){let l=encodeURIComponent(t);i.searchParams.set(e,l)}else i.searchParams.delete(e);(0,a.bj)(i.toString())}function h(e){let t,i=(0,l.c)(2),r=e,[s]=(0,n.o)();i[0]!==s?(t=s.get("diff"),i[0]=s,i[1]=t):t=i[1];let a=t;return("split"===a||"unified"===a)&&(r=a),r}function f(e){let t=e,[i]=(0,n.o)(),l=i.get("w");return"1"===l?t=!0:"0"===l&&(t=!1),t}},54395(e,t,i){i.d(t,{Ud:()=>r,sI:()=>l});let l={Visible:"visible",Collapsed:"collapsed"},r={Compact:"compact",Relaxed:"relaxed"}},92163(e,t,i){i.d(t,{EW:()=>s,Gl:()=>b,ZD:()=>c,e3:()=>p,i8:()=>u,j$:()=>h,jU:()=>d,o9:()=>m,pd:()=>a,pk:()=>f,yI:()=>o});var l=i(84471),r=i(70730);function s(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let i=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=i&&6===i.length?i:null}function n(e,t){return`${"left"===t?"L":"R"}${e}`}function a(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function o(e){return!!(s(e)||s(`diff-${e}`))&&(e.includes("R")||e.includes("L"))}function d(e){if(!(a(e)||a(`diff-${e}`)))return;let t=e.replace("#","").replace("diff-","");return t.includes("-")&&(t=t.split("-")[0]??""),t.includes("L")&&(t=t.split("L")[0]??""),t.includes("R")&&(t=t.split("R")[0]??""),t}function c(e){let t=s(e);if(t){let e=t[1],i=t[2]?"L"===t[2]?"left":"right":void 0,l=t[3]?parseInt(t[3]):void 0;if(!e||!i||void 0===l)return;return{diffAnchor:e,startOrientation:i,startLineNumber:l,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??i,endLineNumber:(t[5]?parseInt(t[5]):void 0)??l,firstSelectedLineNumber:l,firstSelectedOrientation:i}}}function u(e){let t=h(e);(0,l.Zu)(t),(0,l.kd)(window.location.href)}function h(e){let t=n(e.startLineNumber,e.startOrientation),i=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=n(e.endLineNumber,e.endOrientation);i+=`-${t}`}return i}function f(e){let t=`#${e}`;if(t===window.location.hash)return;let i=window.location.href;(0,l.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:i}))}function m(){let e=s(r.fV.hash??"")??"";return(""===e?a(r.fV.hash??"")??"":e?.[0]??"").replace("#","").replace("diff-","")}function b(){let e,t;return e=(r.fV.hash??"").match(/^#?(r\d+)/),(t=e?.[1])?parseInt(t.slice(1)):void 0}function p(){let e,t;return e=(r.fV.hash??"").match(/^#annotation_(\d+)/),(t=e?.[1])?parseInt(t):void 0}}}]);
//# sourceMappingURL=94536-bd63e75ed7ee4442-57d0d93f304421a9.js.map