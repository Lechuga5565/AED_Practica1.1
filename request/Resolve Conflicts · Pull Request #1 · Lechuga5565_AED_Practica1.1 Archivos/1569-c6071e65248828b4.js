performance.mark("js-parse-end:1569-c6071e65248828b4.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["1569"],{60357(e,n,l){l.d(n,{P:()=>i});var a=l(74848),t=l(34164);function i({reason:e,icon:n,...l}){return(0,a.jsx)("div",{className:(0,t.$)("blankslate","ReadonlyCommentBox-module__ReadonlyCommentBoxContainer__DyUsE"),...l,children:(0,a.jsxs)("div",{className:"ReadonlyCommentBox-module__centeredContent__WhreX",children:[n&&(0,a.jsx)(n,{size:24}),(0,a.jsx)("div",{className:"readonly-comment-box-module__reason__DQJKT",children:e})]})})}i.displayName="ReadonlyCommentBox"},29832(e,n,l){l.d(n,{x:()=>m});var a=l(32539),t=l(27093),i=l(6393),r=l(79623),s=l(29681),d=l(96540),o=l(47596),u=l(27760),c=l(64231);function m({commentBoxRef:e,markdownComposerRef:n,onChange:l,onCancel:m,referenceId:y,insidePortal:g}){let[p,k,f]=(0,s.Fo)(u.t.localStorageKeys.issueNewComment("viewer",y),""),[_,h]=(0,d.useState)(p),F=(0,d.useMemo)(()=>(0,a.KG)(_),[_]),{anyItemPickerOpen:E}=(0,i.t)(),K=(0,d.useCallback)(e=>{h(e),k(e)},[k]),b=(0,d.useCallback)(e=>{K(e),l(),""===e&&m()},[K,m,l]);(0,d.useImperativeHandle)(n,()=>({appendText:e=>{b(`${_}

${e}`)},setText:e=>{b(e)},focus:()=>{e.current?.focus()}}),[b,_,e]);let C=(0,d.useMemo)(()=>(0,t.zw)(),[]),w=(0,d.useCallback)(n=>{if(!(!C||E())&&e&&e.current){n.preventDefault();let l=window.getSelection();if(l&&l.anchorNode){let e={anchorNode:l.anchorNode,range:l.getRangeAt(0)},n=l.anchorNode.parentElement,a=n?.closest((0,o.Sp)(o.mU.issueComment))??n?.closest((0,o.Sp)(o.mU.issueBody));if(a&&a instanceof HTMLDivElement){let n=(0,c.E)(a,e);K(`${n}`)}}e.current.scrollIntoView(),e.current.focus()}},[C,E,K,e]),v=(0,d.useCallback)(()=>{e.current?e.current.reset():h(""),f()},[e,f]);return(0,r._)(["r"],w,{triggerWhenInputElementHasFocus:!1,triggerWhenPortalIsActive:g}),{handleMarkdownBodyChanged:b,markdownValidationResult:F,markdownBody:_,resetMarkdownBody:v}}},87851(e,n,l){l.d(n,{i:()=>t});var a=l(49225);function t(e,n,l=null,i="issue"){return e?a.k.repoArchived:n?a.k.issueLockedToCollaborators:l||a.k.canNotComment(i)}},89922(e,n,l){l.d(n,{U:()=>s});var a=l(74848),t=l(35044),i=l(34164),r=l(5054);function s({children:e,style:n,className:l}){let{variant:s}=(0,r.e)();return(0,a.jsx)("div",{...(0,t.G)("list-view-item-description"),className:(0,i.$)("Description-module__container__hpqJz","compact"===s&&"Description-module__compact__MrdGt",l),style:n,children:e})}s.displayName="ListItemDescription"},66850(e,n,l){l.d(n,{Q:()=>d});var a=l(74848),t=l(35044),i=l(34164),r=l(5054),s=l(63936);function d({children:e}){let{variant:n}=(0,r.e)(),{alignment:l}=(0,s.m)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{...(0,t.G)("list-view-item-main-content"),className:"MainContent-module__container__uXXH2",children:(0,a.jsx)("div",{className:(0,i.$)("MainContent-module__inner__C80co","compact"===n&&"MainContent-module__compact__EISVO","center"===l&&"MainContent-module__centerAligned__u4ZOt"),children:e})})})}d.displayName="ListItemMainContent"},5423(e,n,l){l.d(n,{W:()=>ef});var a,t,i,r,s,d,o,u,c,m,y,g,p,k,f,_,h,F,E,K,b,C,w,v,S,x,R=l(74848);let D={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"MarkdownEditHistoryViewerQuery",selections:[{alias:null,args:t=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"includesCreatedEdit",storageKey:null},{alias:null,args:r=[{kind:"Literal",name:"first",value:100}],concreteType:"UserContentEditConnection",kind:"LinkedField",name:"userContentEdits",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"UserContentEditEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"node",plural:!1,selections:[d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[c={alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"userContentEdits(first:100)"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MarkdownEditHistoryViewerQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[y={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[i,{alias:null,args:r,concreteType:"UserContentEditConnection",kind:"LinkedField",name:"userContentEdits",plural:!1,selections:[s,{alias:null,args:null,concreteType:"UserContentEditEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"node",plural:!1,selections:[d,o,u,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[y,c,m,d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"userContentEdits(first:100)"}],type:"Comment",abstractKey:"__isComment"},d],storageKey:null}]},params:{id:"c6113eea560ba83b319c9b30fc5d4f7e",metadata:{},name:"MarkdownEditHistoryViewerQuery",operationKind:"query",text:null}};D.hash="58ea81646b217a25de6cfe147936e7f6";let N={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownEditHistoryViewer_comment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastEditedAt",storageKey:null}],type:"Comment",abstractKey:"__isComment"};N.hash="fcc1ee717c6a87a4ffdb4f4d9391d55c";var j=l(16522),A=l(35592),H=l(24723),L=l(14391),T=l(67323),V=l(18990),M=l(62935),I=l(4925),U=l(96540),B=l(18312),G=l(91941);let O=e=>{let n,l=(0,j.c)(2),{retry:a}=e;return l[0]!==a?(n=(0,R.jsx)(G.h,{message:"Couldn't load",retry:a,className:"CouldNotFindFallbackError-module__CouldNotFindFallbackErrorContainer__fOygj"}),l[0]=a,l[1]=n):n=l[1],n};O.displayName="CouldNotFindFallbackError";let Q={fragment:{argumentDefinitions:g=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"EditHistoryDialogQuery",selections:[{alias:null,args:p=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[k={alias:null,args:null,kind:"ScalarField",name:"diff",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"diffBefore",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[h={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"EditHistoryDialogHeaderFragment"}],type:"UserContentEdit",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:g,kind:"Operation",name:"EditHistoryDialogQuery",selections:[{alias:null,args:p,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[F={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[k,f,_,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[F,h,E={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[F,{alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},h,E],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstEdit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanDelete",storageKey:null}],type:"UserContentEdit",abstractKey:null},E],storageKey:null}]},params:{id:"95112ed4d46018d629c28241b711a389",metadata:{},name:"EditHistoryDialogQuery",operationKind:"query",text:null}};Q.hash="027faee365f58b6aa217941196bb5c80";var $=l(39081),q=l(11286);let z="EditHistoryDialog-module__mutedInfoText__qG8J1",P={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditHistoryDialogHeaderFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstEdit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanDelete",storageKey:null}],type:"UserContentEdit",abstractKey:null};P.hash="173b0fbf2e248d6057ccd670ace2eea7";var W=l(56144),Z=l(38621),J=l(44472),X=l(21373),Y=l(83223),ee=l(10095);let en={fragment:{argumentDefinitions:K=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"deleteUserContentEditMutation",selections:[{alias:null,args:b=[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteUserContentEditPayload",kind:"LinkedField",name:"deleteUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"userContentEdit",plural:!1,selections:[C={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[v={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null}],storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"diff",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:K,kind:"Operation",name:"deleteUserContentEditMutation",selections:[{alias:null,args:b,concreteType:"DeleteUserContentEditPayload",kind:"LinkedField",name:"deleteUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"userContentEdit",plural:!1,selections:[C,w,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},v,S,C],storageKey:null},x],storageKey:null}],storageKey:null}]},params:{id:"71452b9f40a7828ac05811d1ad4f821e",metadata:{},name:"deleteUserContentEditMutation",operationKind:"mutation",text:null}};en.hash="45e1f3e7d425560f65ef39e8c357794d";let el=e=>{let n,l,a,t,i,r=(0,j.c)(20),{queryRef:s,userContentEditId:d}=e;r[0]===Symbol.for("react.memo_cache_sentinel")?(n=P,r[0]=n):n=r[0];let o=(0,B.useFragment)(n,s),u=(0,B.useRelayEnvironment)(),c=(0,J.S)(),{addToast:m}=(0,W.Y6)();r[1]!==m||r[2]!==c||r[3]!==u||r[4]!==d?(l=async()=>{await c({title:q.k.confirmations.deleteEditHistoryTitle,content:q.k.confirmations.deleteEditHistoryContent,confirmButtonType:"danger",confirmButtonContent:q.k.confirmations.deleteEditHistoryConfirmButtonContent})&&function({environment:e,input:{id:n},onCompleted:l,onError:a}){(0,B.commitMutation)(e,{mutation:en,variables:{input:{id:n}},onCompleted:e=>{null===e.deleteUserContentEdit?a?.():l?.()},onError:e=>a?.(e)})}({environment:u,input:{id:d},onError:()=>{m({type:"error",message:"Failed to delete this revision"})}})},r[1]=m,r[2]=c,r[3]=u,r[4]=d,r[5]=l):l=r[5];let y=l,g=o.newest||o.deletedAt;return r[6]!==o.deletedAt||r[7]!==o.editedAt||r[8]!==o.editor||r[9]!==o.firstEdit||r[10]!==g?(a=o.editor&&(0,R.jsx)(ea,{login:o.editor.login,avatarUrl:o.editor.avatarUrl,time:o.editedAt,details:o.firstEdit?q.k.editHistory.created:q.k.editHistory.edited,trailingElement:g?(0,R.jsx)(I.A,{className:"EditHistoryDialogHeader-module__statusLabel__rUWoL",children:o.deletedAt?q.k.editHistory.deleted:q.k.editHistory.mostRecent}):void 0}),r[6]=o.deletedAt,r[7]=o.editedAt,r[8]=o.editor,r[9]=o.firstEdit,r[10]=g,r[11]=a):a=r[11],r[12]!==o.deletedAt||r[13]!==o.newest||r[14]!==o.viewerCanDelete||r[15]!==y?(t=o.viewerCanDelete&&!o.newest&&!o.deletedAt&&(0,R.jsxs)(X.Q,{variant:"danger",size:"small","aria-label":q.k.editHistory.deleteRevisionAriaLabel,onClick:y,className:"EditHistoryDialogHeader-module__deleteRevisionButton__TZuHW",children:[(0,R.jsx)(ee.A,{icon:Z.TrashIcon})," ","Delete revision"]}),r[12]=o.deletedAt,r[13]=o.newest,r[14]=o.viewerCanDelete,r[15]=y,r[16]=t):t=r[16],r[17]!==a||r[18]!==t?(i=(0,R.jsxs)("div",{className:"EditHistoryDialogHeader-module__EditHistoryDialogHeaderContainer__Rok7s",children:[a,t]}),r[17]=a,r[18]=t,r[19]=i):i=r[19],i};function ea(e){let n,l,a,t,i,r,s=(0,j.c)(20),{login:d,avatarUrl:o,details:u,time:c,className:m,trailingElement:y}=e,g=!!o&&!!d;return s[0]!==o||s[1]!==d||s[2]!==g?(n=g&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(A.r,{src:o,size:16,alt:`@${d}`,className:"EditHistoryDialogHeader-module__userAvatar__AKZr3"}),(0,R.jsx)(Y.A,{href:`/${d}`,className:"EditHistoryDialogHeader-module__usernameBold__AZaWu","aria-label":`View profile for @${d}`,children:d})]}),s[0]=o,s[1]=d,s[2]=g,s[3]=n):n=s[3],s[4]!==d||s[5]!==g?(l=!g&&(0,R.jsx)("span",{children:d??"ghost"}),s[4]=d,s[5]=g,s[6]=l):l=s[6],s[7]!==u?(a=(0,R.jsxs)("span",{children:[" ",u," "]}),s[7]=u,s[8]=a):a=s[8],s[9]!==c?(t=c&&(0,R.jsx)(M.A,{date:new Date(c)}),s[9]=c,s[10]=t):t=s[10],s[11]!==m||s[12]!==n||s[13]!==l||s[14]!==a||s[15]!==t?(i=(0,R.jsxs)("div",{className:m,children:[n,l,a,t]}),s[11]=m,s[12]=n,s[13]=l,s[14]=a,s[15]=t,s[16]=i):i=s[16],s[17]!==i||s[18]!==y?(r=(0,R.jsxs)("div",{className:"EditHistoryDialogHeader-module__actorDetailsWrapper__hf7dp",children:[i,y]}),s[17]=i,s[18]=y,s[19]=r):r=s[19],r}el.displayName="EditHistoryDialogHeader",ea.displayName="ActorOperationDetails";let et=(e,n)=>({groups:[{words:e??"",modification:n}],modification:n}),ei=e=>{switch(e){case"ADDED":return{open:"[+]",close:"[/+]"};case"REMOVED":return{open:"[-]",close:"[/-]"}}return{open:"",close:""}},er=e=>"ADDED"===e||"REMOVED"===e,es=e=>{let n,l,a,t,i,r=(0,j.c)(15),{groups:s,modification:d}=e;r[0]!==s?(n=s.map(eo).join(" "),r[0]=s,r[1]=n):n=r[1];let o=n;return r[2]!==s||r[3]!==d?(l="EDITED"===d&&s?.map(eu),r[2]=s,r[3]=d,r[4]=l):l=r[4],r[5]!==o||r[6]!==s.length||r[7]!==d?(a="EDITED"!==d&&s.length>0&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{className:"sr-only",children:ei(d).open}),(0,R.jsx)("span",{children:o}),(0,R.jsx)("span",{className:"sr-only",children:ei(d).close})]}),r[5]=o,r[6]=s.length,r[7]=d,r[8]=a):a=r[8],r[9]!==s.length?(t=0===s.length&&(0,R.jsx)("br",{}),r[9]=s.length,r[10]=t):t=r[10],r[11]!==l||r[12]!==a||r[13]!==t?(i=(0,R.jsxs)("span",{className:"GroupedTextDiffViewer-module__diffLine__BY9Cd",children:[l,a,t]}),r[11]=l,r[12]=a,r[13]=t,r[14]=i):i=r[14],i};es.displayName="LineDiffViewer";let ed=e=>{let n,l,a,t=(0,j.c)(7),{before:i,after:r}=e;return t[0]!==r||t[1]!==i?(n="GroupedTextDiffViewer-module__diffContainer__s109o",l=(function({before:e,after:n}){let l=e?e.split(/\r?\n/):[],a=n?n.split(/\r?\n/):[],t=[];for(let e=0;e<l.length||e<a.length;e++){let n=l[e],i=a[e];t.push(function(e,n){let l=e?e.split(/\s+/):[],a=n?n.split(/\s+/):[];if(0===l.length&&0===a.length||e===n)return et(e,"UNCHANGED");if(0===l.length)return et(n,"ADDED");if(0===a.length)return et(e,"REMOVED");let t=[],i={words:"",modification:"UNCHANGED"},r={words:"",modification:"ADDED"},s={words:"",modification:"REMOVED"};for(let e=0;e<l.length||e<a.length;e++){let n=l[e],d=a[e];n===d?(i.words=`${i.words}${0===i.words.length?"":" "}${n}`,""!==r.words&&(t.push(r),r={words:"",modification:"ADDED"}),""!==s.words&&(t.push(s),s={words:"",modification:"REMOVED"})):(""!==i.words&&(void 0!==n||void 0!==d)&&(t.push(i),i={words:"",modification:"UNCHANGED"}),void 0!==n&&(s.words=`${s.words}${0===s.words.length?"":" "}${n}`),void 0!==d&&(r.words=`${r.words}${0===r.words.length?"":" "}${d}`))}return""!==r.words&&t.push(r),""!==s.words&&t.push(s),""!==i.words&&t.push(i),{groups:t,modification:"EDITED"}}(n,i))}return{lines:t}})({before:i,after:r}).lines.map(ec),t[0]=r,t[1]=i,t[2]=n,t[3]=l):(n=t[2],l=t[3]),t[4]!==n||t[5]!==l?(a=(0,R.jsx)("div",{className:n,children:l}),t[4]=n,t[5]=l,t[6]=a):a=t[6],a};function eo(e){return e.words}function eu(e,n){return(0,R.jsxs)(R.Fragment,{children:[er(e.modification)&&(0,R.jsx)("span",{className:"sr-only",children:ei(e.modification).open}),(0,R.jsx)("span",{className:(e=>{switch(e){case"ADDED":return"GroupedTextDiffViewer-module__wordStylingAdded__hfNel";case"REMOVED":return"GroupedTextDiffViewer-module__wordStylingRemoved__bS3uE";case"UNCHANGED":return""}})(e.modification),children:`${0===n?"":" "}${e.words}`}),er(e.modification)&&(0,R.jsx)("span",{className:"sr-only",children:ei(e.modification).close})]},n-1)}function ec(e,n){return(0,R.jsx)("div",{className:(e=>{switch(e){case"ADDED":return"GroupedTextDiffViewer-module__borderStylingAdded__p24GB";case"REMOVED":return"GroupedTextDiffViewer-module__borderStylingRemoved__g7GTQ";case"EDITED":return"GroupedTextDiffViewer-module__borderStylingChanged__WFfzq";case"UNCHANGED":return""}})(e.modification),children:(0,R.jsx)(es,{...e})},n)}ed.displayName="GroupedTextDiffViewer";let em=e=>{let n,l,a=(0,j.c)(5),{userContentEditId:t,onClose:i}=e;return a[0]!==t?(n=()=>(0,R.jsx)(ey,{userContentEditId:t}),a[0]=t,a[1]=n):n=a[1],a[2]!==i||a[3]!==n?(l=(0,R.jsx)($.l,{renderBody:n,onClose:i,title:q.k.editHistory.viewingEditTitle,width:"xlarge",height:"auto",className:"EditHistoryDialog-module__EditHistoryDialogContainer__qUZtS"}),a[2]=i,a[3]=n,a[4]=l):l=a[4],l};em.displayName="EditHistoryDialog";let ey=e=>{let n,l,a,t,i,r,s=(0,j.c)(15),{userContentEditId:d}=e,[o,u]=(0,B.useQueryLoader)(Q);if(s[0]!==u||s[1]!==d?(n=()=>{u({id:d})},l=[u,d],s[0]=u,s[1]=d,s[2]=n,s[3]=l):(n=s[2],l=s[3]),(0,U.useEffect)(n,l),!o){let e;return s[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,R.jsx)(ep,{}),s[4]=e):e=s[4],e}return s[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,R.jsx)(ep,{}),s[5]=a):a=s[5],s[6]!==u||s[7]!==d?(t=()=>u({id:d},{fetchPolicy:"network-only"}),s[6]=u,s[7]=d,s[8]=t):t=s[8],s[9]!==o||s[10]!==d?(i=(0,R.jsx)(eg,{queryRef:o,userContentEditId:d}),s[9]=o,s[10]=d,s[11]=i):i=s[11],s[12]!==t||s[13]!==i?(r=(0,R.jsx)(U.Suspense,{fallback:a,children:(0,R.jsx)(H.A,{onRetry:t,fallback:ek,children:i})}),s[12]=t,s[13]=i,s[14]=r):r=s[14],r};ey.displayName="EditContent";let eg=e=>{let n,l,a,t,i,r,s=(0,j.c)(22),{queryRef:d,userContentEditId:o}=e,u=(0,B.usePreloadedQuery)(Q,d).node;if(!u){let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,R.jsx)(ep,{}),s[0]=e):e=s[0],e}let c=!u.diffBefore&&!u.diff;return s[1]!==u||s[2]!==o?(n=(0,R.jsx)(el,{queryRef:u,userContentEditId:o}),s[1]=u,s[2]=o,s[3]=n):n=s[3],s[4]!==u.deletedAt||s[5]!==u.diff||s[6]!==u.diffBefore||s[7]!==c?(l=!u.deletedAt&&!c&&(0,R.jsx)(ed,{before:u.diffBefore??void 0,after:u.diff??void 0}),s[4]=u.deletedAt,s[5]=u.diff,s[6]=u.diffBefore,s[7]=c,s[8]=l):l=s[8],s[9]!==u.deletedAt||s[10]!==c?(a=!u.deletedAt&&c&&(0,R.jsx)("span",{className:z,children:q.k.editHistory.emptyEdit}),s[9]=u.deletedAt,s[10]=c,s[11]=a):a=s[11],s[12]!==u.deletedAt||s[13]!==u.deletedBy?.login?(t=u.deletedAt&&(0,R.jsx)(ea,{login:u.deletedBy?.login,details:q.k.editHistory.deletedThisRevision,time:u.deletedAt,className:z}),s[12]=u.deletedAt,s[13]=u.deletedBy?.login,s[14]=t):t=s[14],s[15]!==l||s[16]!==a||s[17]!==t?(i=(0,R.jsxs)("div",{className:"EditHistoryDialog-module__contentViewerContainer__BJvxb",children:[l,a,t]}),s[15]=l,s[16]=a,s[17]=t,s[18]=i):i=s[18],s[19]!==n||s[20]!==i?(r=(0,R.jsxs)("div",{className:"EditHistoryDialog-module__editHistoryContentScrollable__OZdA7",children:[n,i]}),s[19]=n,s[20]=i,s[21]=r):r=s[21],r};function ep(){let e,n=(0,j.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,R.jsxs)("div",{className:"EditHistoryDialog-module__loadingSkeletonContainer__IRARr",children:[(0,R.jsx)(L.O,{variant:"rounded",height:"md",width:"100%"}),(0,R.jsx)(L.O,{variant:"rounded",height:"md",width:"100%"})]}),n[0]=e):e=n[0],e}function ek(e){return(0,R.jsx)(O,{retry:e})}eg.displayName="EditContentInternal",ep.displayName="EditContentLoading";function ef(e){let n,l,a,t,i,r=(0,j.c)(11),{editHistory:s}=e;r[0]===Symbol.for("react.memo_cache_sentinel")?(n=N,r[0]=n):n=r[0];let d=(0,B.useFragment)(n,s),[o,u]=(0,U.useState)(!1),[c,m]=(0,U.useState)("");return d&&d.viewerCanReadUserContentEdits&&d.lastEditedAt?(r[1]===Symbol.for("react.memo_cache_sentinel")?(l=(0,R.jsx)(T.W.Button,{variant:"invisible",size:"small","aria-label":q.k.editHistory.ariaLabel,className:"MarkdownEditHistoryViewer-module__editHistoryMenuButton__BMs0r",children:q.k.editHistory.openEditsButton}),r[1]=l):l=r[1],r[2]!==d.id||r[3]!==d.lastEditedAt?(a=(0,R.jsxs)(T.W,{children:[l,(0,R.jsx)(T.W.Overlay,{width:"auto",children:(0,R.jsx)(e_,{setIsEditHistoryDialogOpen:u,setSelectedId:m,editHistoryId:d.id,lastEditedAt:d.lastEditedAt})})]}),r[2]=d.id,r[3]=d.lastEditedAt,r[4]=a):a=r[4],r[5]!==o||r[6]!==c?(t=o&&(0,R.jsx)(em,{onClose:()=>u(!1),userContentEditId:c}),r[5]=o,r[6]=c,r[7]=t):t=r[7],r[8]!==a||r[9]!==t?(i=(0,R.jsxs)("div",{className:"MarkdownEditHistoryViewer-module__editHistoryContainer__u5gj3",children:[a,t]}),r[8]=a,r[9]=t,r[10]=i):i=r[10],i):null}ef.displayName="MarkdownEditHistoryViewer";let e_=e=>{let n,l,a,t,i,r,s,d,o,u=(0,j.c)(22);u[0]!==e?({editHistoryId:n,lastEditedAt:l,...a}=e,u[0]=e,u[1]=n,u[2]=l,u[3]=a):(n=u[1],l=u[2],a=u[3]);let[c,m]=(0,B.useQueryLoader)(D);if(u[4]!==n||u[5]!==m?(t=()=>{m({id:n},{fetchPolicy:"network-only"})},u[4]=n,u[5]=m,u[6]=t):t=u[6],u[7]!==n||u[8]!==l||u[9]!==m?(i=[n,m,l],u[7]=n,u[8]=l,u[9]=m,u[10]=i):i=u[10],(0,U.useEffect)(t,i),!c){let e;return u[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,R.jsx)(eF,{}),u[11]=e):e=u[11],e}return u[12]===Symbol.for("react.memo_cache_sentinel")?(r=(0,R.jsx)(eF,{}),u[12]=r):r=u[12],u[13]!==n||u[14]!==m?(s=()=>m({id:n},{fetchPolicy:"network-only"}),u[13]=n,u[14]=m,u[15]=s):s=u[15],u[16]!==a||u[17]!==c?(d=(0,R.jsx)(eh,{queryRef:c,...a}),u[16]=a,u[17]=c,u[18]=d):d=u[18],u[19]!==s||u[20]!==d?(o=(0,R.jsx)(U.Suspense,{fallback:r,children:(0,R.jsx)(H.A,{onRetry:s,fallback:eE,children:d})}),u[19]=s,u[20]=d,u[21]=o):o=u[21],o};e_.displayName="EditHistoryActionMenuContent";let eh=e=>{let n,l,a,t=(0,j.c)(12),{setIsEditHistoryDialogOpen:i,setSelectedId:r,queryRef:s}=e,d=(0,B.usePreloadedQuery)(D,s);if(!d.node?.userContentEdits){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,R.jsx)(eF,{}),t[0]=e):e=t[0],e}let o=d.node.userContentEdits.totalCount,u=`Edited ${o-1} time${o>2?"s":""}`;return t[1]!==u?(n=(0,R.jsx)(V.l.GroupHeading,{children:u}),t[1]=u,t[2]=n):n=t[2],t[3]!==d.node.includesCreatedEdit||t[4]!==d.node.userContentEdits.edges||t[5]!==i||t[6]!==r||t[7]!==o?(l=d.node.userContentEdits.edges?.map((e,n)=>{let l=e?.node;if(!l?.editor)return null;let a=d.node?.includesCreatedEdit&&n===o-1;return(0,R.jsxs)(V.l.Item,{onSelect:()=>{r(l.id),i(!0)},children:[(0,R.jsx)(V.l.LeadingVisual,{children:(0,R.jsx)(A.r,{src:l.editor.avatarUrl,size:16,alt:`@${l.editor.login}`,className:"MarkdownEditHistoryViewer-module__editorAvatar__ue2nV"})}),(0,R.jsx)("span",{className:"MarkdownEditHistoryViewer-module__editorUsername__AtY5c",children:l.editor.login}),(0,R.jsxs)(V.l.Description,{truncate:!0,className:"MarkdownEditHistoryViewer-module__editHistoryItemMetadata__T9sCi",children:[a&&(0,R.jsx)("div",{title:"",children:q.k.editHistory.created}),(0,R.jsx)(M.A,{date:new Date(l.editedAt)})]}),(0===n||l.deletedAt)&&(0,R.jsx)(V.l.TrailingVisual,{children:(0,R.jsx)(I.A,{children:0===n?q.k.editHistory.mostRecent:q.k.editHistory.deleted})})]},l.id)}),t[3]=d.node.includesCreatedEdit,t[4]=d.node.userContentEdits.edges,t[5]=i,t[6]=r,t[7]=o,t[8]=l):l=t[8],t[9]!==n||t[10]!==l?(a=(0,R.jsx)(V.l,{className:"MarkdownEditHistoryViewer-module__scrollableEditHistoryList__fCx19",children:(0,R.jsxs)(V.l.Group,{children:[n,l]})}),t[9]=n,t[10]=l,t[11]=a):a=t[11],a};function eF(){let e,n=(0,j.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,R.jsxs)("div",{className:"MarkdownEditHistoryViewer-module__loadingSkeletonContainer__FshA0",children:[(0,R.jsx)(L.O,{variant:"rounded",height:"md",width:"100%"}),(0,R.jsx)(L.O,{variant:"rounded",height:"md",width:"100%"}),(0,R.jsx)(L.O,{variant:"rounded",height:"md",width:"100%"}),(0,R.jsx)(L.O,{variant:"rounded",height:"md",width:"100%"})]}),n[0]=e):e=n[0],e}function eE(e){return(0,R.jsx)(O,{retry:e})}eh.displayName="EditHistoryActionMenuContentInternal",eF.displayName="EditHistoryLoading"},65361(e,n,l){l.d(n,{_:()=>o});var a=l(74848);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownLastEditedBy",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"lastUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}],type:"Comment",abstractKey:"__isComment"};t.hash="bbab0cb2d43eeaaa0ed5b010868ec7f4";var i=l(16522),r=l(83223),s=l(18312),d=l(11286);function o(e){let n,l,o,u,c=(0,i.c)(10),{editInformation:m,includeSeparator:y,forceUnderline:g}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(n=t,c[0]=n):n=c[0];let p=(0,s.useFragment)(n,m);if(!p||!p.viewerCanReadUserContentEdits||!p.lastUserContentEdit||!p.lastUserContentEdit.editor)return null;let{login:k,url:f}=p.lastUserContentEdit.editor;return c[1]!==y?(l=y&&(0,a.jsx)("span",{children:" \xb7 "}),c[1]=y,c[2]=l):l=c[2],c[3]!==g||c[4]!==k||c[5]!==f?(o=(0,a.jsxs)("span",{children:[`${d.k.editHistory.editedBy} `,(0,a.jsx)(r.A,{href:f,inline:g,className:"MarkdownLastEditedBy-module__mutedEditorLink__fvMbU",children:k})]}),c[3]=g,c[4]=k,c[5]=f,c[6]=o):o=c[6],c[7]!==l||c[8]!==o?(u=(0,a.jsxs)("span",{className:"MarkdownLastEditedBy-module__lastEditInfoContainer__TLH5E",children:[l,o]}),c[7]=l,c[8]=o,c[9]=u):u=c[9],u}o.displayName="MarkdownLastEditedBy"},11286(e,n,l){l.d(n,{k:()=>a});let a={confirmations:{deleteEditHistoryTitle:"Are you sure you want to delete this revision from the history?",deleteEditHistoryContent:"This edit\u2019s content will no longer be visible. This action can not be undone.",deleteEditHistoryConfirmButtonContent:"Remove"},editHistory:{viewingEditTitle:"Viewing edit",deleted:"Deleted",mostRecent:"Most recent",emptyEdit:"This revision does not contain any content.",deletedThisRevision:"deleted this revision",created:"created",edited:"edited",deleteRevisionAriaLabel:"Delete this edit revision",ariaLabel:"Open edits",openEditsButton:"Edits",editedBy:"edited by"}}},91319(e,n,l){l.d(n,{f:()=>u});let a={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"useMarkdownEditHistoryViewerQueryQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"MarkdownEditHistoryViewer_comment"},{args:null,kind:"FragmentSpread",name:"MarkdownLastEditedBy"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useMarkdownEditHistoryViewerQueryQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastEditedAt",storageKey:null},{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"lastUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},s],storageKey:null},s],storageKey:null}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}]},params:{id:"d72649dd9392589f64dd4570b992b900",metadata:{},name:"useMarkdownEditHistoryViewerQueryQuery",operationKind:"query",text:null}};a.hash="4c6ffc38d14bcfbd11af3056fe1ca692";var t,i,r,s,d=l(16522),o=l(18312);function u(e){let n,l,t=(0,d.c)(3),{id:i}=e;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=a,t[0]=n):n=t[0],t[1]!==i?(l={id:i},t[1]=i,t[2]=l):l=t[2];let r=(0,o.useLazyLoadQuery)(n,l);return r.node?r.node:null}},97585(e,n,l){l.r(n),l.d(n,{ReactionViewerRelay:()=>v,ReactionViewerRelayQueryComponent:()=>D,default:()=>N});var a,t,i,r,s,d,o,u,c,m,y,g,p,k,f=l(74848);let _={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ReactionViewerRelayGroups",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:t=[a={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAgent",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:t,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:t,type:"Mannequin",abstractKey:null}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"};_.hash="caa12ca1dcd3ac3335452a70daf0312a";let h=(u={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{kind:"InlineFragment",selections:o=[d={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[d,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAgent",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:o,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:o,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[u],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"}],type:"Comment",abstractKey:"__isComment"},u],storageKey:null}]},params:{id:"0cd5eed9279c836f76bb3bbe66b4fc38",metadata:{},name:"ReactionViewerRelayLazyQuery",operationKind:"query",text:null}});h.hash="37ec1495c4c7ace448e859305895ad0e";var F=l(16522),E=l(18312),K=l(32207),b=l(29774);let C=(k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{argumentDefinitions:c=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"removeReactionMutation",selections:[{alias:null,args:m=[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:c,kind:"Operation",name:"removeReactionMutation",selections:[{alias:null,args:m,concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[y={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[y,{kind:"InlineFragment",selections:p=[g={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[g,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAgent",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:p,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:p,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[k],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},k],storageKey:null}],storageKey:null}]},params:{id:"b37799b042f0454edce6e855c46421e4",metadata:{},name:"removeReactionMutation",operationKind:"mutation",text:null}});C.hash="8e28d0138da52c07bb0e64eda432f580";var w=l(58068);function v(e){let n,l,a,t=(0,F.c)(10),{reactionGroups:i,subjectId:r,canReact:s}=e,d=void 0===s||s,o=(0,E.useRelayEnvironment)(),u=(0,E.useFragment)(_,i);t[0]!==d||t[1]!==o||t[2]!==r?(n=(e,n)=>{d&&(n?function({environment:e,input:{subject:n,content:l},onError:a,onCompleted:t}){(0,E.commitMutation)(e,{mutation:C,variables:{input:{subjectId:n,content:l}},optimisticUpdater:e=>{let a=e.get(n);if(!a)return;let t=a.getLinkedRecords("reactionGroups");if(!t)return;let i=t.findIndex(e=>e.getValue("content")===l),r=t[i];if(r){r.setValue(!1,"viewerHasReacted");let l=`client:${n}:reactionGroups:${i}:reactors(first:5)`,a=e.get(l);if(a){let e=a.getValue("totalCount");a.setValue(e&&e>0?e-1:0,"totalCount")}}},onError:e=>a&&a(e),onCompleted:e=>t&&t(e)})}({environment:o,input:{subject:r,content:e}}):(0,b.m)({environment:o,input:{subject:r,content:e}}))},t[0]=d,t[1]=o,t[2]=r,t[3]=n):n=t[3];let c=n;t[4]!==u.reactionGroups?(l=(u.reactionGroups||[]).filter(R).map(S),t[4]=u.reactionGroups,t[5]=l):l=t[5];let m=l;return t[6]!==d||t[7]!==c||t[8]!==m?(a=(0,f.jsx)(w.P,{reactionGroups:m,canReact:d,onReact:c}),t[6]=d,t[7]=c,t[8]=m,t[9]=a):a=t[9],a}function S(e){return{reaction:{content:e.content,viewerHasReacted:e.viewerHasReacted},reactors:e.reactors?.nodes?.map(x)||[],totalCount:e.reactors?.totalCount||0}}function x(e){if(!e||"%other"===e.__typename)return{login:"",typeName:"Other"};let n=e.login;return"Bot"===e.__typename&&(e.isCopilot?n=K.t.copilotDisplayName:e.isAgent&&e.displayName&&(n=e.displayName)),{login:n,typeName:e.__typename}}function R(e){return!!e}function D(e){let n,l,a,t,i=(0,F.c)(8),{id:r,subjectLocked:s}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(n=h,i[0]=n):n=i[0],i[1]!==r?(l={id:r},i[1]=r,i[2]=l):l=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(a={fetchPolicy:"store-or-network"},i[3]=a):a=i[3];let d=(0,E.useLazyLoadQuery)(n,l,a);if(!d.node)return null;let o=!s;return i[4]!==d.node||i[5]!==r||i[6]!==o?(t=(0,f.jsx)(v,{subjectId:r,reactionGroups:d.node,canReact:o}),i[4]=d.node,i[5]=r,i[6]=o,i[7]=t):t=i[7],t}v.displayName="ReactionViewerRelay",D.displayName="ReactionViewerRelayQueryComponent";let N=v},29774(e,n,l){l.d(n,{m:()=>c});let a=(o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"addReactionMutation",selections:[{alias:null,args:i=[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"addReactionMutation",selections:[{alias:null,args:i,concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[r,{kind:"InlineFragment",selections:d=[s={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[s,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAgent",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:d,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:d,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[o],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},o],storageKey:null}],storageKey:null}]},params:{id:"686efd568fb637fee7e532b3356444b1",metadata:{},name:"addReactionMutation",operationKind:"mutation",text:null}});a.hash="504ef43df20e9ee96a023f421682e18d";var t,i,r,s,d,o,u=l(18312);function c({environment:e,input:{subject:n,content:l},onError:t,onCompleted:i}){return(0,u.commitMutation)(e,{mutation:a,variables:{input:{subjectId:n,content:l}},optimisticUpdater:e=>{let a=e.get(n);if(!a)return;let t=a.getLinkedRecords("reactionGroups");if(!t)return;let i=t.findIndex(e=>e.getValue("content")===l),r=t[i];if(r){r.setValue(!0,"viewerHasReacted");let l=`client:${n}:reactionGroups:${i}:reactors(first:5)`,a=e.get(l);if(a){let e=a.getValue("totalCount");a.setValue(e?e+1:1,"totalCount")}}},onError:e=>t&&t(e),onCompleted:e=>i&&i(e)})}},24723(e,n,l){l.d(n,{A:()=>m});var a=l(50467),t=l(74848),i=l(16522),r=l(96540),s=l(77612),d=l(24535),o=l(24043);let u=e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"Error:"}),(0,t.jsx)("button",{onClick:e,children:"Retry"})]});class c extends r.Component{static getDerivedStateFromError(e){return e.shouldSkipReport=!0,{error:e}}componentDidCatch(e){let n=(0,o.G7)("issues_react_auto_retry_on_error")&&!this.state.hasAutoRetried;(0,d.N7)(e,{critical:!n&&(this.props.critical??!1),reactAppName:this.props.appName,reactErrorBoundaryName:"BasicPreloadedQueryBoundary"}),n&&(this.props.onRetry(),this.setState({hasAutoRetried:!0,error:null}))}render(){let{children:e}=this.props,{error:n}=this.state,l=this.props.fallback||u;return n?l(this._retry,n):e}constructor(...e){super(...e),(0,a._)(this,"state",{error:null,hasAutoRetried:!1}),(0,a._)(this,"_retry",()=>{this.props.onRetry(),this.setState({error:null,hasAutoRetried:!1})})}}function m(e){let n,l=(0,i.c)(3),{appName:a}=e,d=(0,r.use)(s.I),o=a||d?.appName;return l[0]!==o||l[1]!==e?(n=(0,t.jsx)(c,{...e,appName:o}),l[0]=o,l[1]=e,l[2]=n):n=l[2],n}m.displayName="PreloadedQueryBoundary"}}]);
//# sourceMappingURL=1569-c6071e65248828b4-55d9c6700d97d141.js.map